require=function r(a,s,c){function l(t,e){if(!s[t]){if(!a[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(d)return d(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=s[t]={exports:{}};a[t][0].call(i.exports,function(e){return l(a[t][1][e]||e)},i,i.exports,r,a,s,c)}return s[t].exports}for(var d="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({AccCompCreateRole:[function(e,t,o){"use strict";cc._RF.push(t,"cd8d2Ek4I1LMot/2gSyQAsd","AccCompCreateRole"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../BaseComponent"),r=e("../../../common/config/vo/ConfigVO"),i=e("../../../common/net/proto/mods/ProtoSectionAcc"),a=e("../../../common/persist/GamePersist"),s=e("../../../common/net/NetUtil"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeCreateContainer=null,e.nodeSelectHeadContainer=null,e.btnSelectHead=null,e.btnSelectHeadDone=null,e.btnDoCreate=null,e.btnSexBoy=null,e.btnSexGirl=null,e.btnRandomName=null,e.headList=null,e.inputRollName=null,e.spfBlue=null,e.spfRed=null,e.selectedHeadSp=null,e.selectedHeadNode=null,e.selectedHeadIndex=null,e.HeadRingRed=null,e.HeadRingBlue=null,e.sexInfo=null,e.accName=null,e.surnNameLen=null,e.maleNameLen=null,e.femaleNameLen=null,e}return __extends(e,t),e.prototype.onLoad=function(){var n=this;this.btnSelectHead.node.on(cc.Node.EventType.TOUCH_END,this.selectHead,this),this.btnSelectHeadDone.node.on(cc.Node.EventType.TOUCH_END,this.selectHeadDone,this),this.btnDoCreate.node.on(cc.Node.EventType.TOUCH_END,this.doCreate,this),this.btnRandomName.node.on(cc.Node.EventType.TOUCH_END,this.createRandomName,this),n.HeadRingRed=this.spfRed,n.HeadRingBlue=this.spfBlue,this.selectedHeadIndex=Math.floor(9*Math.random()+1),this.selectedHeadNode=this.headList.getChildByName("NodeHead"+this.selectedHeadIndex),this.selectedHeadSp=this.selectedHeadNode.getChildByName("Head").getComponentInChildren(cc.Sprite).spriteFrame,this.selectedHeadNode.getChildByName("icon-select").active=!0,this.nodeCreateContainer.getChildByName("HeadContainer").getComponentInChildren(cc.Sprite).spriteFrame=this.selectedHeadSp,this.setSexInfo(Math.floor(1*Math.random()+1)),this.btnSexBoy.node.on(cc.Node.EventType.TOUCH_END,function(){n.setSexInfo(1)},this),this.btnSexGirl.node.on(cc.Node.EventType.TOUCH_END,function(){n.setSexInfo(2)},this);for(var e=function(e){var t="NodeHead"+e,o=i.headList.getChildByName(t);o.getChildByName("icon-select").active=!1,n.selectedHeadNode.getChildByName("icon-select").active=!0,o.on(cc.Node.EventType.TOUCH_END,function(){a.default.INSTANCE.btnAudio_1(),n.selectedHeadSp=o.getChildByName("Head").getComponentInChildren(cc.Sprite).spriteFrame,n.selectedHeadIndex=e,n.selectedHeadNode.getChildByName("icon-select").active=!1,n.selectedHeadNode=o,n.selectedHeadNode.getChildByName("icon-select").active=!0},i)},i=this,t=1;t<10;t++)e(t);this.femaleNameLen=r.FemaleName.getExtra("id_list").length,this.maleNameLen=r.MaleName.getExtra("id_list").length,this.surnNameLen=r.Surname.getExtra("id_list").length,this.createRandomName()},e.prototype.selectHead=function(){this.nodeCreateContainer.active=!1,this.nodeSelectHeadContainer.active=!0},e.prototype.setSexInfo=function(e){this.sexInfo!==e&&(1===(this.sexInfo=e)?(this.btnSexBoy.node.getChildByName("edging").active=!0,this.btnSexGirl.node.getChildByName("edging").active=!1):(this.btnSexBoy.node.getChildByName("edging").active=!1,this.btnSexGirl.node.getChildByName("edging").active=!0),this.createRandomName())},e.prototype.selectHeadDone=function(){a.default.INSTANCE.btnAudio_1(),this.nodeCreateContainer.active=!0,this.nodeSelectHeadContainer.active=!1,this.nodeCreateContainer.getChildByName("HeadContainer").getComponentInChildren(cc.Sprite).spriteFrame=this.selectedHeadSp},e.prototype.doCreate=function(){a.default.INSTANCE.btnAudio_1();var e=new i.AccCreateWithParamsC2S;e.sex=this.sexInfo,e.head=this.selectedHeadIndex,e.name=this.inputRollName.string,e.params=" ",s.default.SendMsg(e)},e.prototype.createRandomName=function(){a.default.INSTANCE.btnAudio_1();var e,t=r.Surname.get(r.Surname.getExtra("id_list")[Math.floor(Math.random()*this.surnNameLen)]).name;e=1===this.sexInfo?r.MaleName.get(r.MaleName.getExtra("id_list")[Math.floor(Math.random()*this.surnNameLen)]).name:r.FemaleName.get(r.FemaleName.getExtra("id_list")[Math.floor(Math.random()*this.femaleNameLen)]).name,this.accName=t+e,this.inputRollName.string=this.accName},__decorate([d(cc.Node)],e.prototype,"nodeCreateContainer",void 0),__decorate([d(cc.Node)],e.prototype,"nodeSelectHeadContainer",void 0),__decorate([d(cc.Button)],e.prototype,"btnSelectHead",void 0),__decorate([d(cc.Button)],e.prototype,"btnSelectHeadDone",void 0),__decorate([d(cc.Button)],e.prototype,"btnDoCreate",void 0),__decorate([d(cc.Button)],e.prototype,"btnSexBoy",void 0),__decorate([d(cc.Button)],e.prototype,"btnSexGirl",void 0),__decorate([d(cc.Button)],e.prototype,"btnRandomName",void 0),__decorate([d(cc.Node)],e.prototype,"headList",void 0),__decorate([d(cc.EditBox)],e.prototype,"inputRollName",void 0),__decorate([d(cc.SpriteFrame)],e.prototype,"spfBlue",void 0),__decorate([d(cc.SpriteFrame)],e.prototype,"spfRed",void 0),e=__decorate([l],e)}(n.default);o.default=u,cc._RF.pop()},{"../../../common/config/vo/ConfigVO":"ConfigVO","../../../common/net/NetUtil":"NetUtil","../../../common/net/proto/mods/ProtoSectionAcc":"ProtoSectionAcc","../../../common/persist/GamePersist":"GamePersist","../../BaseComponent":"BaseComponent"}],AccManager:[function(e,t,o){"use strict";cc._RF.push(t,"338a3KWHs5I+oUTHjK5Wlm5","AccManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../common/net/socket/SocketDefine"),i=e("../../../common/net/NetController"),r=e("../../../module/Modules"),a=e("../../../common/config/vo/ConfigVO"),s=e("../../../common/persist/GamePersist"),c=e("../home/HomeManager"),l=e("../../../common/Misc"),d=e("../../../common/net/proto/ProtoReflect"),u=e("../../../common/net/NetUtil"),h=e("../../../common/net/proto/mods/ProtoSectionAcc"),p=function(){function e(){this.retryTimes=0,this.accModule=r.Acc}return Object.defineProperty(e,"INSTANCE",{get:function(){return this.singleInstance||(this.singleInstance=new e),this.singleInstance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LoginUI",{get:function(){return this.loginUI},set:function(e){this.loginUI=e},enumerable:!0,configurable:!0}),e.prototype.setServerData=function(e){this.serverID=e},e.prototype.didGetAuthorize=function(e){this.accModule.LoginData=e,i.default.INSTANCE.Connected?this.requestLogin():this.connectServer(e)},e.prototype.didEnterGame=function(){},e.prototype.switchToHome=function(){l.goToHome()},e.prototype.connectServer=function(e){this.retryTimes=0,i.default.INSTANCE.on(n.SOCKET_CONNECT,this.onServerConnected,this),i.default.INSTANCE.off(n.SOCKET_CONNECT,this.onServerReConnected,this);var t=a.ServerList.get(this.serverID);i.default.INSTANCE.connect(t.ip,t.port,t.path,t.security)},e.prototype.reConnectServer=function(){s.default.INSTANCE.ForceWaiting(),this.retryTimes=this.retryTimes+1,i.default.INSTANCE.on(n.SOCKET_CONNECT,this.onServerReConnected,this),i.default.INSTANCE.off(n.SOCKET_CONNECT,this.onServerConnected,this);var e=a.ServerList.get(this.serverID);i.default.INSTANCE.reConnect(e.ip,e.port,e.path,e.security)},e.prototype.onServerConnected=function(e){i.default.INSTANCE.off(n.SOCKET_CONNECT,this.onServerConnected,this),this.requestLogin()},e.prototype.onServerReConnected=function(){i.default.INSTANCE.off(n.SOCKET_CONNECT,this.onServerReConnected,this),this.requestReLogin()},e.prototype.requestLogin=function(){var e=this.getGameAccount(),t=e.game_open_id,o=e.game_open_id_sign,n=new h.AccLoginC2S;n.platform=this.accModule.DataAcc.accPlatform,n.channelParam=this.accModule.DataAcc.accPlatformParam,n.channelOpenId=this.accModule.DataAcc.accOpenId,n.gameAccountId=t,n.gameAccountSign=o,u.default.SendMsg(n)},e.prototype.requestReLogin=function(){var e=new h.AccReloginC2S;e.id=this.accModule.PlayerId,e.loginKey=this.accModule.DataAcc.gameLoginToken,e.openId=this.accModule.DataAcc.gameOpenId,u.default.SendMsg(e)},e.prototype.onReceiveLoginS2C=function(e){if(this.loginUI){if(0<e.code){this.loginUI.hideLoading();var t=l.protoErrMsg(e.code);return s.default.INSTANCE.Toast(t),Partner.cleanLoginState(),void("Dev"!==Partner.PARTNER_NAME&&this.loginUI.showAccInput(2))}var o=e.channelOpenId,n=e.gameAccountId,i=e.gameAccountSign,r=e.gameLoginKey;this.accModule.DataAcc.accOpenId=o,this.accModule.DataAcc.gameLoginToken=r,this.accModule.DataAcc.gameUnionid=r,this.accModule.DataAcc.gameOpenId=n,this.accModule.DataAcc.gameOpenIdSign=i,Partner.userInfo.openId=o,this.saveGameAccount();var a=e.id;0<a?(this.accModule.PlayerId=a,this.doSendEnterGame()):this.handleCreatePlayer(),s.default.INSTANCE.startSyncServerTime()}},e.prototype.onReceiveReLoginS2C=function(e){s.default.INSTANCE.CancelWaiting(),0===e.code&&(this.retryTimes=0,c.default.INSTANCE.onReLaunch())},e.prototype.onReceiveCreateS2C=function(e){if(this.loginUI)if(0<e.code){var t=d.ProtoErrorCode[e.code]||"ErrCode:"+e.code;this.loginUI.toast(t)}else{var o=e.id;this.accModule.PlayerId=o,this.doSendEnterGame()}},e.prototype.onReceiveEnterS2C=function(e){this.loginUI&&(0<e.code?this.loginUI.toast("EnterS2C"+e.code):this.didEnterGame())},e.prototype.doSendEnterGame=function(){var e=new h.AccEnterC2S;e.id=this.accModule.PlayerId,u.default.SendMsg(e)},e.prototype.handleCreatePlayer=function(){Partner.supportUserInfo()?this.doSendCreatePlayer():this.loginUI.showAccCreateRole()},e.prototype.doSendCreatePlayer=function(){var e=new h.AccCreateC2S;u.default.SendMsg(e)},Object.defineProperty(e.prototype,"RetryTimes",{get:function(){return this.retryTimes},set:function(e){this.retryTimes=e},enumerable:!0,configurable:!0}),e.prototype.requestServerTime=function(){if(i.default.INSTANCE.Connected){var e=new h.AccServertimeC2S;u.default.SendMsg(e)}},e.prototype.existSavedGameAccount=function(){var e=this.getGameAccount(),t=e.game_open_id,o=e.game_open_id_sign;return""!==t&&""!==o},e.prototype.saveGameAccount=function(){var e={game_open_id:this.accModule.DataAcc.gameOpenId,game_open_id_sign:this.accModule.DataAcc.gameOpenIdSign},t=JSON.stringify(e);cc.sys.localStorage.setItem("game_account",t)},e.prototype.getGameAccount=function(){var e={game_open_id:"",game_open_id_sign:""},t=cc.sys.localStorage.getItem("game_account");try{if(t){var o=JSON.parse(t);o.game_open_id&&(e.game_open_id=o.game_open_id,e.game_open_id_sign=o.game_open_id_sign)}}catch(e){cc.warn("faild parse account data")}return e},e}();o.default=p,cc._RF.pop()},{"../../../common/Misc":"Misc","../../../common/config/vo/ConfigVO":"ConfigVO","../../../common/net/NetController":"NetController","../../../common/net/NetUtil":"NetUtil","../../../common/net/proto/ProtoReflect":"ProtoReflect","../../../common/net/proto/mods/ProtoSectionAcc":"ProtoSectionAcc","../../../common/net/socket/SocketDefine":"SocketDefine","../../../common/persist/GamePersist":"GamePersist","../../../module/Modules":"Modules","../home/HomeManager":"HomeManager"}],AccModule:[function(e,t,o){"use strict";cc._RF.push(t,"9ceb4UlwnFKyrt/yunrKY2S","AccModule"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../module/data/mod/DataAcc"),i=e("./AccNetHandler"),r=function(e){function t(){return e.call(this,t.MODULE_NAME)||this}return __extends(t,e),t.prototype.onCreated=function(){this.dataAcc=new n.default,this.protoHandler=new i.default},Object.defineProperty(t.prototype,"LoginData",{set:function(e){this.dataAcc.accOpenId=e.openid,this.dataAcc.accPlatform=e.platform,this.dataAcc.accOpenKey=e.openkey,this.dataAcc.accPlatformParam=e.params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PlayerId",{get:function(){return this.dataAcc.playerId},set:function(e){this.dataAcc.playerId=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ProtoHandler",{get:function(){return this.protoHandler},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DataAcc",{get:function(){return this.dataAcc},enumerable:!0,configurable:!0}),t.MODULE_NAME="acc",t}(e("../../../module/BaseModule").default);o.default=r,cc._RF.pop()},{"../../../module/BaseModule":"BaseModule","../../../module/data/mod/DataAcc":"DataAcc","./AccNetHandler":"AccNetHandler"}],AccNetHandler:[function(e,t,o){"use strict";cc._RF.push(t,"6e871Z0CjJKUoKkYqNqg+z0","AccNetHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../common/net/proto/ProtoDispatcher"),i=e("../../../common/net/proto/mods/ProtoSectionAcc"),r=e("./AccManager"),a=e("../../../common/persist/GamePersist"),s=e("../../../common/net/proto/ProtoReflect"),c=function(){function e(){n.AccDispatcher.on(i.AccServertimeS2C.EVENT_NAME,this.onServerTime,this),n.AccDispatcher.on(i.AccLoginS2C.EVENT_NAME,this.onLoginS2C,this),n.AccDispatcher.on(i.AccCreateS2C.EVENT_NAME,this.onCreateS2C,this),n.AccDispatcher.on(i.AccEnterS2C.EVENT_NAME,this.onEnterS2C,this),n.AccDispatcher.on(i.AccReloginS2C.EVENT_NAME,this.onReLoginS2C,this),n.AccDispatcher.on(i.AccMaintainS2C.EVENT_NAME,this.onMaintainS2C,this),a.default.INSTANCE.OnProtoError(s.ProtoSection.acc,this.onProtoError,this)}return e.prototype.onProtoError=function(e){var t=e.detail.errMsg;a.default.INSTANCE.Toast(t)},e.prototype.onServerTime=function(e){var t=e.detail;a.default.INSTANCE.ServerTime=t.time},e.prototype.onLoginS2C=function(e){var t=e.detail;r.default.INSTANCE.onReceiveLoginS2C(t)},e.prototype.onReLoginS2C=function(e){var t=e.detail;r.default.INSTANCE.onReceiveReLoginS2C(t)},e.prototype.onCreateS2C=function(e){var t=e.detail;r.default.INSTANCE.onReceiveCreateS2C(t)},e.prototype.onEnterS2C=function(e){var t=e.detail;r.default.INSTANCE.onReceiveEnterS2C(t)},e.prototype.onMaintainS2C=function(e){var t=e.detail.desc;a.default.INSTANCE.showMaintain(t)},e}();o.default=c,cc._RF.pop()},{"../../../common/net/proto/ProtoDispatcher":"ProtoDispatcher","../../../common/net/proto/ProtoReflect":"ProtoReflect","../../../common/net/proto/mods/ProtoSectionAcc":"ProtoSectionAcc","../../../common/persist/GamePersist":"GamePersist","./AccManager":"AccManager"}],AchievementLayerScript:[function(e,t,o){"use strict";cc._RF.push(t,"cbbd5NMTPVJ66VCz/BUGYOp","AchievementLayerScript"),Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../../module/Modules"),c=e("../../../../common/Misc"),n=e("../../../../common/social/SocialManager"),i=e("../../../../common/persist/GamePersist"),l=e("../../../game/PlayDefine"),r=cc._decorator,a=r.ccclass,d=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.headFrame=null,e.labName=null,e.spHoner=null,e.pStartNode=null,e.sprMale=null,e.sprFemale=null,e.pShareBtn=null,e.pCloseLabel=null,e.gameCountLabel=null,e.rateofWinLabel=null,e.rateofWinOneWeekLabel=null,e.successiveWinLabel=null,e.matchOnceLabel=null,e.saveOnceLabel=null,e.pveTotal=null,e.pveWin=null,e.pveAchievement=null,e.pvpAchievement=null,e}return __extends(e,t),e.prototype.onLoad=function(){var i=this,o=this,e=s.Home.DataPlayer.FortuneStar,t=c.calcHonorId(e);cc.loader.loadRes("res/ui/rank/rank-"+t,cc.SpriteFrame,function(e,t){o.spHoner.spriteFrame=t});for(var n=c.calcShowStarCount(e),r=1;r<=n;r++)this.pStartNode.getChildByName(""+r).active=!0;if(cc.loader.loadRes("prefab/play/PlayPlaymateHead",cc.Prefab,function(e,t){var o=cc.instantiate(t);o.parent=i.headFrame,o.setPosition(0,0);var n=o.getComponent("PlayPlaymateHead");n.setPlaymate(s.Home.DataPlayer.MyHeadUrl),n.setColorFrame(l.PlaySide.RED),n.setScale(1.2)}),this.labName.string=s.Play.DataPlay.MyName,1==s.Home.DataPlayer.MySex?(this.sprMale.active=!0,this.sprFemale.active=!1):(this.sprMale.active=!1,this.sprFemale.active=!0),0===s.Home.DataPlayer.PlayWeeklyTotal)this.rateofWinOneWeekLabel.string="0";else{var a=s.Home.DataPlayer.PlayWeeklyWin/s.Home.DataPlayer.PlayWeeklyTotal;this.rateofWinOneWeekLabel.string=c.formatPercent(a)}if(0===s.Home.DataPlayer.PlayCntTotal)this.rateofWinLabel.string="0";else{a=s.Home.DataPlayer.PlayCntWin/s.Home.DataPlayer.PlayCntTotal;this.rateofWinLabel.string=c.formatPercent(a)}if(0===s.Home.DataPlayer.PlayPveTotal)this.pveWin.string="0";else{a=s.Home.DataPlayer.PlayPveWin/s.Home.DataPlayer.PlayPveTotal;this.pveWin.string=c.formatPercent(a)}this.matchOnceLabel.string=""+s.Home.DataPlayer.PlayMatchOnce,this.saveOnceLabel.string=""+s.Home.DataPlayer.PlaySaveOnce,this.pveTotal.string=""+s.Home.DataPlayer.PlayPveTotal,this.gameCountLabel.string=""+s.Home.DataPlayer.PlayCntTotal,this.successiveWinLabel.string=""+s.Home.DataPlayer.MaxSuccessiveWin},e.prototype.start=function(){},e.prototype.shareBtn=function(){i.default.INSTANCE.btnAudio_1();var e=n.default.INSTANCE.makeFlauntParam();Partner.doFlaunt(e,function(){})},e.prototype.closeBtn=function(){var e=this;cc.log("AchievementLayerScript:close"),i.default.INSTANCE.btnAudio_2(),i.default.INSTANCE.panelFadeOut(this.node,function(){e.node.destroy()})},e.prototype.showPve=function(){i.default.INSTANCE.btnAudio_1(),this.pvpAchievement.node.active=!1,this.pveAchievement.node.active=!0},e.prototype.showPvp=function(){i.default.INSTANCE.btnAudio_1(),this.pveAchievement.node.active=!1,this.pvpAchievement.node.active=!0},__decorate([d(cc.Node)],e.prototype,"headFrame",void 0),__decorate([d(cc.Label)],e.prototype,"labName",void 0),__decorate([d(cc.Sprite)],e.prototype,"spHoner",void 0),__decorate([d(cc.Node)],e.prototype,"pStartNode",void 0),__decorate([d(cc.Node)],e.prototype,"sprMale",void 0),__decorate([d(cc.Node)],e.prototype,"sprFemale",void 0),__decorate([d(cc.Button)],e.prototype,"pShareBtn",void 0),__decorate([d(cc.Button)],e.prototype,"pCloseLabel",void 0),__decorate([d(cc.Label)],e.prototype,"gameCountLabel",void 0),__decorate([d(cc.Label)],e.prototype,"rateofWinLabel",void 0),__decorate([d(cc.Label)],e.prototype,"rateofWinOneWeekLabel",void 0),__decorate([d(cc.Label)],e.prototype,"successiveWinLabel",void 0),__decorate([d(cc.Label)],e.prototype,"matchOnceLabel",void 0),__decorate([d(cc.Label)],e.prototype,"saveOnceLabel",void 0),__decorate([d(cc.Label)],e.prototype,"pveTotal",void 0),__decorate([d(cc.Label)],e.prototype,"pveWin",void 0),__decorate([d(cc.Sprite)],e.prototype,"pveAchievement",void 0),__decorate([d(cc.Sprite)],e.prototype,"pvpAchievement",void 0),e=__decorate([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../../common/Misc":"Misc","../../../../common/persist/GamePersist":"GamePersist","../../../../common/social/SocialManager":"SocialManager","../../../../module/Modules":"Modules","../../../game/PlayDefine":"PlayDefine"}],Algorithm:[function(e,t,o){"use strict";cc._RF.push(t,"d57ca1X/FJCqomDfqCQQuek","Algorithm"),Object.defineProperty(o,"__esModule",{value:!0});var f=e("./Board"),u=e("./PlayDefine");e("./NodePool");function h(e,t,o,n,i,r,a,s){if(null!=s[e][t]&&f.default.INSTANCE.GRID[e][t]!=u.GRID_TYPE.EMPTY){var c=s[e][t].getComponent("Block");if((!c||!c.isDesTroying)&&f.default.INSTANCE.GRID[e]&&f.default.INSTANCE.GRID[e][t]){var l=!1;if(null==a&&(a=new Array),-1==a.indexOf(e+"#"+t)){if(a.push(e+"#"+t),t+1<s[0].length&&0!=f.default.INSTANCE.GRID[e][t+1]&&n!=t+1&&null!=s[e][t+1]&&s[e][t+1].name&&"Block"==s[e][t+1].name){var d=s[e][t+1].getComponent("Block");parseInt(d.type)==i&&(-1==r.indexOf(e+"#"+t)&&r.push(e+"#"+t),h(e,t+1,e,t,i,r,a,s),l=!0)}if(0<=t-1&&0!=f.default.INSTANCE.GRID[e][t-1]&&n!=t-1&&null!=s[e][t-1]&&s[e][t-1].name&&"Block"==s[e][t-1].name){d=s[e][t-1].getComponent("Block");parseInt(d.type)==i&&(-1==r.indexOf(e+"#"+t)&&r.push(e+"#"+t),h(e,t-1,e,t,i,r,a,s),l=!0)}if(0<=e-1&&0!=f.default.INSTANCE.GRID[e-1][t]&&o!=e-1&&null!=s[e-1][t]&&s[e-1][t].name&&"Block"==s[e-1][t].name){d=s[e-1][t].getComponent("Block");parseInt(d.type)==i&&(-1==r.indexOf(e+"#"+t)&&r.push(e+"#"+t),h(e-1,t,e,t,i,r,a,s),l=!0)}if(e+1<s.length&&0!=f.default.INSTANCE.GRID[e+1][t]&&o!=e+1&&null!=s[e+1][t]&&s[e+1][t].name&&"Block"==s[e+1][t].name){d=s[e+1][t].getComponent("Block");parseInt(d.type)==i&&(-1==r.indexOf(e+"#"+t)&&r.push(e+"#"+t),h(e+1,t,e,t,i,r,a,s),l=!0)}if(!l&&-1!=o&&-1!=n&&s[e][t].name&&"Block"==s[e][t].name){d=s[e][t].getComponent("Block");parseInt(d.type)==i&&-1==r.indexOf(e+"#"+t)&&r.push(e+"#"+t)}}}}}o.scanAround=h,o.checkoutMatch=function(e){for(var t=new Array,o=new Array,n=0;n<e.length;n++)for(var i=0;i<e[0].length;i++)if(0!=f.default.INSTANCE.GRID[n][i]&&e[n][i]){var r=new Array;"Block"==e[n][i].name&&(h(n,i,-1,-1,e[n][i].getComponent("Block").type,r,o,e),1<r.length&&t.push(r))}return t},o.delay=function(o,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,t){setTimeout(function(){n&&n(),e()},1e3*o)})]})})},o.addAction=function(e,t,o){e.push({node:t,action:o})},o.runActions=function(i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,t){var o=i.length;for(o<=0&&e();0<i.length;){var n=i.splice(0,1)[0];n.node.runAction(cc.sequence(n.action,cc.callFunc(function(){--o<=0&&e()})))}})]})})},o.bothSiedAct=function(e,t,o){o[e+1]&&o[e+1][t]&&("Block"==o[e+1][t].name?o[e+1][t].getComponent("Block").bothSideAct(e):"Bomb"==o[e+1][t].name?o[e+1][t].getComponent("Bomb").bothSideAct(e):"Obstacle"==o[e+1][t].name?o[e+1][t].getComponent("Obstacle").bothSideAct(e):"Tableware"==o[e+1][t].name&&o[e+1][t].getComponent("Tableware").bothSideAct(e));o[e-1]&&o[e-1][t]&&("Block"==o[e-1][t].name?o[e-1][t].getComponent("Block").bothSideAct(e):"Bomb"==o[e-1][t].name?o[e-1][t].getComponent("Bomb").bothSideAct(e):"Obstacle"==o[e-1][t].name?o[e-1][t].getComponent("Obstacle").bothSideAct(e):"Tableware"==o[e-1][t].name&&o[e-1][t].getComponent("Tableware").bothSideAct(e))},o.playParticle=function(e,t,o,n,i){},o.shuffleTiles=function(e,t){var o=[],n=[];if(e){for(var i=0;i<e.length;++i)for(var r=0;r<e[0].length;++r)0!=f.default.INSTANCE.GRID[i][r]&&(!e[i][r]||"Block"!=e[i][r].name&&"Bomb"!=e[i][r].name&&"Obstacle"!=e[i][r].name||(o.push(i+"#"+r),n.push(e[i][r])));for(var a,s,c=o.length;c;)s=Math.floor(Math.random()*c--),a=o[c],o[c]=o[s],o[s]=a;for(;0<o.length;){var l=o.splice(0,1)[0],d=n.splice(0,1)[0],u=Number(l.split("#")[0]),h=Number(l.split("#")[1]);if((e[u][h]=d)&&"Block"==d.name)var p=d.getComponent("Block");else d&&"Bomb"==d.name?p=d.getComponent("Bomb"):d&&"Obstacle"==d.name&&(p=d.getComponent("Obstacle"));p.moveTo(u,h,null,!1)}t&&t()}},cc._RF.pop()},{"./Board":"Board","./NodePool":"NodePool","./PlayDefine":"PlayDefine"}],Animation:[function(e,t,o){"use strict";cc._RF.push(t,"3a42fZUrAROfqhkBrqUX/8K","Animation"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../common/config/vo/ConfigVO"),i=e("../common/loader/Loader"),r=cc._decorator,a=r.ccclass,s=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),(_=t).NewAnimation=function(v,o){return void 0===o&&(o=5),__awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(f,e){var m=n.Animation.get(v);if(!m)return cc.warn("load animation:"+v+" config not exist"),void f(null);var y=setTimeout(function(){f(null)},1e3*o),t=_.ANIMATION_PATH+m.res;i.default.loadSpriteAtlas(t,function(e,t){if(clearTimeout(y),e)cc.warn("load animation:"+v+" err:"+e),f(null);else{var o=new cc.Node;o.addComponent(cc.Animation),o.addComponent(_);for(var n=o.addComponent(cc.Sprite),i=m.res,r=m.frames,a=m.times,s=o.getComponent(_),c=o.getComponent(cc.Animation),l=[],d=0;d<r;d++){var u=_.ANIMATION_FRAME_PREFIX+i+"-"+(d+1),h=t.getSpriteFrame(u);l.push(h)}n.spriteFrame=l[0];var p=cc.AnimationClip.createWithSpriteFrames(l,10);p.name=i,p.wrapMode=cc.WrapMode.Loop,c.addClip(p),s.config(i,r,a),s.init(),f(s)}})})]})})},t.prototype.onDestroy=function(){},t.prototype.onLoad=function(){},t.prototype.init=function(){this.ccAnimation=this.node.getComponent(cc.Animation);var e=this.ccAnimation.getAnimationState(this.animName);e&&(0===this.playTimes?(e.wrapMode=cc.WrapMode.Loop,e.repeatCount=1/0):(e.wrapMode=cc.WrapMode.Loop,e.repeatCount=this.playTimes))},t.prototype.dispose=function(){this.node.destroy()},t.prototype.start=function(){},t.prototype.play=function(){this.ccAnimation.play(this.animName)},Object.defineProperty(t.prototype,"CCAnimation",{get:function(){return this.ccAnimation},enumerable:!0,configurable:!0}),t.prototype.config=function(e,t,o){this.animName=e,this.frameCount=t,this.playTimes=o},t.prototype.onAnimationPlay=function(){},t.prototype.onAnimationStop=function(){},t.prototype.onAnimationLastFrame=function(){},t.prototype.onAnimationFinished=function(){},t.prototype.onAnimationPause=function(){},t.prototype.onAnimationResume=function(){},t.ANIMATION_PATH="res/anim/",t.ANIMATION_FRAME_PREFIX="anim-",t=_=__decorate([a],t);var _}(cc.Component));o.default=s,cc._RF.pop()},{"../common/config/vo/ConfigVO":"ConfigVO","../common/loader/Loader":"Loader"}],Audio:[function(e,t,o){"use strict";cc._RF.push(t,"c824cc4CipG57EyzmjQQ4UL","Audio"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../dyGame/DYAudio"),i=cc._decorator,r=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audBg=null,e.audMatch=null,e.audBomb_row=null,e.audBomb_around=null,e.audBomb_magnet=null,e.audSpawn_Bomb=null,e.audDrop=null,e.audCountDown=null,e.audTimeEnd=null,e.audVictory=null,e.audLose=null,e.audCollect=null,e}return __extends(e,t),e.prototype.playBg=function(){n.default.playMusic(this.audBg,!0)},e.prototype.strip=function(){n.default.playEffect(this.audMatch,!1)},e.prototype.bombRow=function(){n.default.playEffect(this.audBomb_row,!1)},e.prototype.bombAround=function(){n.default.playEffect(this.audBomb_around,!1)},e.prototype.bombMagnet=function(){n.default.playEffect(this.audBomb_magnet,!1)},e.prototype.spawnBomb=function(){n.default.playEffect(this.audSpawn_Bomb,!1)},e.prototype.drop=function(){n.default.playEffect(this.audDrop,!1)},e.prototype.countDownAudio=function(){n.default.playEffect(this.audCountDown,!1)},e.prototype.timeEndAudio=function(){n.default.playEffect(this.audTimeEnd,!1)},e.prototype.collect=function(){n.default.playEffect(this.audCollect,!1)},e.prototype.victory=function(){n.default.playMusic(this.audVictory,!1)},e.prototype.lose=function(){n.default.playMusic(this.audLose,!1)},__decorate([a(cc.AudioClip)],e.prototype,"audBg",void 0),__decorate([a(cc.AudioClip)],e.prototype,"audMatch",void 0),__decorate([a(cc.AudioClip)],e.prototype,"audBomb_row",void 0),__decorate([a(cc.AudioClip)],e.prototype,"audBomb_around",void 0),__decorate([a(cc.AudioClip)],e.prototype,"audBomb_magnet",void 0),__decorate([a(cc.AudioClip)],e.prototype,"audSpawn_Bomb",void 0),__decorate([a(cc.AudioClip)],e.prototype,"audDrop",void 0),__decorate([a(cc.AudioClip)],e.prototype,"audCountDown",void 0),__decorate([a(cc.AudioClip)],e.prototype,"audTimeEnd",void 0),__decorate([a(cc.AudioClip)],e.prototype,"audVictory",void 0),__decorate([a(cc.AudioClip)],e.prototype,"audLose",void 0),__decorate([a(cc.AudioClip)],e.prototype,"audCollect",void 0),e=__decorate([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../../../dyGame/DYAudio":"DYAudio"}],BaseComponent:[function(e,t,o){"use strict";cc._RF.push(t,"d2f1beS/pFGxL17onkRJhq3","BaseComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){},t.prototype.onLoad=function(){},t=__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],BaseConfig:[function(e,t,o){"use strict";cc._RF.push(t,"ee1a9qGS51CmJgTcwKnC6GO","BaseConfig"),Object.defineProperty(o,"__esModule",{value:!0});var u={updateLvlData:function(e,t){return e}},n=function(){function e(e){this.isInited=!1,this.data=[],this.extraData=void 0,this.lvlGenerator=void 0,this.name=e}return e.prototype.setClass=function(e){this.clazz=e||function(){}},e.prototype.initData=function(e){if(e){var t=e.key,o=e.vals,n=e.cols;e.key=void 0,e.vals=void 0,e.cols=void 0;for(var i=t.length,r=n.length,a=this.clazz,s=0;s<o.length;s++){for(var c=o[s],l=c[t[0]],d=1;d<i;d++)l+="_"+c[t[d]];var u=new a;for(d=0;d<r;d++){u[n[d]]=c[d]}var h=this.data[l];h&&Array.prototype===h.__proto__?h.push(u):this.data[l]=u,this.isInited=!0}for(var p in e)void 0!==e[p]&&(this.extraData||(this.extraData={}),this.extraData[p]=e[p])}},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=e.join("_");return this.data[o]},e.prototype.getGroup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=e.join("_");return this.data[o]},e.prototype.getAll=function(){return this.data},e.prototype.getList=function(){return this.data},e.prototype.getExtra=function(e){return this.extraData[e]},e.prototype.setExtra=function(e,t){this.extraData[e]=t},e.prototype.setLvlGenerator=function(e){this.lvlGenerator=e},e.prototype.getByLvl=function(e,t){var o=e+"_"+t,n=this.data[o],i=this.lvlGenerator||u;if(void 0===n){for(var r=t,a=void 0;!n&&0<t;)a=e+"_"+--t,n=this.data[a];if(n){var s=i.updateLvlData(n,r);n=this.data[o]=s}else this.data[o]=null;var c=Math.ceil((r+t)/2);if(c!==t&&c!==r){var l=e+"_"+c,d=n?i.updateLvlData(n,c):null;this.data[l]=d}}return n},e}();o.default=n,cc._RF.pop()},{}],BaseModule:[function(e,t,o){"use strict";cc._RF.push(t,"a8f82bmqpBBJ5d2wBqNs3dm","BaseModule"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../common/event/EventDispatcher"),i=e("../common/persist/GamePersist"),r=e("./ModuleManager"),a=function(o){function e(e){var t=o.call(this)||this;return t.node=new cc.Node("module-node-"+e),i.default.RootNodeModule.addChild(t.node),r.AddModule(t),t.onCreated(),t}return __extends(e,o),e.prototype.onCreated=function(){},e.prototype.init=function(){},e}(n.default);o.default=a,cc._RF.pop()},{"../common/event/EventDispatcher":"EventDispatcher","../common/persist/GamePersist":"GamePersist","./ModuleManager":"ModuleManager"}],BasePanel:[function(e,t,o){"use strict";cc._RF.push(t,"a0bb4C/WFdJUaph/9r7Nwjm","BasePanel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./BaseComponent"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.viewNode=function(){return this.node},t=__decorate([r],t)}(n.default));o.default=a,cc._RF.pop()},{"./BaseComponent":"BaseComponent"}],BaseTile:[function(e,t,o){"use strict";cc._RF.push(t,"9bbc7OVUlhJPIotPP7mlXUe","BaseTile"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isDestroying=!1,e._tileType=null,e._type=null,e._subType=null,e.force=null,e.distance1=50,e.distance2=15,e.distance3=30,e.distance4=10,e._game=null,e._canTouch=!1,e}return __extends(e,t),Object.defineProperty(e.prototype,"game",{get:function(){return this._game},set:function(e){this._game=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canTouch",{get:function(){return this._canTouch},set:function(e){this._canTouch=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tileType",{get:function(){return this._tileType},set:function(e){this.setSpfByTileType(e),this._tileType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this.setSpfByType(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subType",{get:function(){return this._subType},set:function(e){this.setSpfBySubType(e),this._subType=e},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){},e.prototype.onDestroy=function(){this.actionCallBack=null,cc.director.getScheduler().unscheduleAllCallbacksForTarget(this),this.node.targetOff(this.node)},e.prototype.setSpfByTileType=function(e){},e.prototype.setSpfByType=function(e){},e.prototype.setSpfBySubType=function(e){},e.prototype.getArrPosition=function(){return cc.p(this.node.width*(this.x-4)+this.node.width/2,this.node.height*this.y+this.node.height/2)},e.prototype.newTile=function(e,t,o){void 0===o&&(o=!0)},e.prototype.moveTo=function(e,t,o,n){var i=this;void 0===n&&(n=!0);if(this.x!=e&&n)this.newTile(e,t,!1);else{if(this.x=e,this.y=t,n)var r=cc.sequence(cc.moveTo(.25,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2-15)),cc.moveTo(.2,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2+5)),cc.moveTo(.2,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2)),cc.callFunc(function(){i._canTouch=!0,o&&o()}));else r=cc.sequence(cc.moveTo(.3,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2)),cc.callFunc(function(){i._canTouch=!0,o&&o()}));this._canTouch=!1,this.node.stopActionByTag(1),this.node.runAction(r),r.setTag(1)}},e.prototype.init=function(){this.actionCallBack=null,this._canTouch=!0},e.prototype.billowAct=function(e,t,o){var n=this,i=this;if(this.force=this.getForce(e,t),this.force){i._canTouch=!1,this.node.zIndex=1002;var r=this.getArrPosition();if(cc.v2(this.x-e,this.y-t).mag()<2){var a=cc.sequence(cc.moveBy(.1,i.force.x*i.distance1*2,i.force.y*i.distance1*2).easing(cc.easeOut(2)),cc.moveTo(.2,r),cc.spawn(cc.moveBy(.2,i.force.x*i.distance2*2,i.force.y*i.distance2*2),cc.callFunc(function(){})),cc.moveTo(.2,r),cc.delayTime(1),cc.callFunc(function(){i.node.zIndex=1e3,i.node.scale=1,i._canTouch=!0}));i.scheduleOnce(function(){n.node.stopActionByTag(10),i.node.runAction(a),a.setTag(10)},.1),i.actionCallBack||(i.actionCallBack=o,i.scheduleOnce(function(){i.actionCallBack&&i.actionCallBack()},.3))}else{a=cc.sequence(cc.moveBy(.1,this.force.x*this.distance1,this.force.y*this.distance1).easing(cc.easeOut(2)),cc.moveTo(.2,r),cc.spawn(cc.moveBy(.2,i.force.x*i.distance2*2,i.force.y*i.distance2*2),cc.callFunc(function(){})),cc.moveTo(.2,r),cc.callFunc(function(){i.node.zIndex=1e3,i._canTouch=!0}));i.scheduleOnce(function(){n.node.stopActionByTag(10),i.node.runAction(a),a.setTag(10)},.1)}}},e.prototype.getForce=function(e,t){var o=cc.v2(this.x,this.y).sub(cc.v2(e,t)),n=this.getArrPosition(),i=this.node.position,r=n.sub(i).mag(),a=o.normalize();return r>=this.distance1*a.mag()?null:a},e.prototype.bothSideAct=function(e,t){var o=this;if(this.force=this.getForce(e,this.y),this.force){this._canTouch=!1,this.node.zIndex=1002;var n=this.getArrPosition(),i=cc.sequence(cc.moveBy(.1,this.force.x*this.distance3,this.force.y*this.distance3).easing(cc.easeOut(2)),cc.moveTo(.2,n),cc.moveBy(.2,this.force.x*this.distance4,this.force.y*this.distance4),cc.moveTo(.2,n),cc.callFunc(function(){o.node.zIndex=1e3,o._canTouch=!0}));this.node.stopActionByTag(10),this.node.runAction(i),i.setTag(10)}},e=__decorate([i],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],BaseUI:[function(e,t,o){"use strict";cc._RF.push(t,"c770cx2EhhI1LpesgKpHrsM","BaseUI"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../common/Defines"),i=e("../common/persist/GamePersist"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.toastPrefab=null,e.panelLayer=null,e.toastLayer=null,e.waitingLayer=null,e}return __extends(e,t),e.prototype.onLoad=function(){i.default.ToastPool.clear();var e=this.node.getComponent(cc.Canvas);e&&(e.designResolution.width/e.designResolution.height<=cc.view.getVisibleSize().width/cc.view.getVisibleSize().height?(e.fitHeight=!0,e.fitWidth=!1):(e.fitHeight=!1,e.fitWidth=!0),this.panelLayer=new cc.Node(n.UI_LAYER_POP_TIPS),this.panelLayer.parent=this.node,this.panelLayer.setPosition(0,0),this.panelLayer.setLocalZOrder(99),this.toastLayer=new cc.Node(n.UI_LAYER_POP_TIPS),this.toastLayer.parent=e.node,this.toastLayer.x=0,this.toastLayer.y=230,this.toastLayer.setLocalZOrder(n.ZORDER_UI_LAYER_POP_TIPS),this.waitingLayer=new cc.Node(n.UI_LAYER_WAITING),this.waitingLayer.parent=e.node,this.waitingLayer.setPosition(0,0),this.waitingLayer.setLocalZOrder(n.ZORDER_UI_LAYER_WAITING))},e.prototype.start=function(){(i.default.INSTANCE.RootUI=this).onLoadSceneEnd()},e.prototype.onLoadSceneEnd=function(){i.default.INSTANCE.onLoadSceneEnd()},e.prototype.uiName=function(){throw new Error("must define your ui'name")},e.prototype.showPanel=function(e){e.viewNode().parent=this.panelLayer},e.prototype.destroyPanel=function(){this.panelLayer.removeAllChildren(!0)},e.prototype.showWaiting=function(e,t){},e.prototype.onAppHide=function(){},e.prototype.onAppShow=function(){},e.prototype.toast=function(e){if(this.toastLayer&&this.toastPrefab){var t=i.default.ToastPool.get();t||(t=cc.instantiate(this.toastPrefab)),t.parent=this.toastLayer,t.getComponent("Toast").setMessage(e)}},__decorate([s(cc.Prefab)],e.prototype,"toastPrefab",void 0),e=__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../common/Defines":"Defines","../common/persist/GamePersist":"GamePersist"}],Block:[function(e,t,o){"use strict";cc._RF.push(t,"972fds7INtLo7W5wKqFPj33","Block"),Object.defineProperty(o,"__esModule",{value:!0});var r=e("../PlayDefine"),a=e("../GameData"),s=e("../../../../dyGame/DYNotify"),n=e("../pve/PanelHeader_pve"),i=e("../pve/StateMgr"),c=e("./BaseTile"),l=cc._decorator,d=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spf_red=null,e.spf_green=null,e.spf_blue=null,e.spf_yellow=null,e.spf_purple=null,e.sprTile=null,e._collectPosition=cc.v2(-133,915.2),e._isAlive=!0,e._isDesTroying=!1,e}return __extends(e,t),Object.defineProperty(e.prototype,"collectPosition",{get:function(){return this._collectPosition},set:function(e){this._collectPosition=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDesTroying",{get:function(){return this._isDesTroying},set:function(e){this._isDesTroying=e},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._tileType=r.TILE_TYPE.BLOCK},e.prototype.onEnable=function(){this.node.on("touchstart",this.onTouchStart,this)},e.prototype.onDisable=function(){this.node.off("touchstart",this.onTouchStart,this)},e.prototype.start=function(){},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},Object.defineProperty(e.prototype,"isAlive",{get:function(){return this._isAlive},set:function(e){this._isAlive=e},enumerable:!0,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this),this._canTouch=!1,this.node.stopAllActions(),this._isDestroying=!1,this.getComponent(cc.Animation).stop(),this.node.scale=1,this.sprTile.node.active=!0,this.sprTile.node.scale=1,this.node.getChildByName("sprEffect").active=!1,this.node.getChildByName("sprEffect").getComponent(cc.Sprite).spriteFrame=null,this.setContentSize(80,80)},e.prototype.setContentSize=function(e,t){this.sprTile.node.active=!0,this.sprTile.node.setContentSize(e,t),this.node.setContentSize(e,t)},e.prototype.setArrPosition=function(e,t){this._canTouch=!0,this._isDesTroying=!1,this.sprTile.node.active=!0,this.sprTile.node.scale=1,this.sprTile.node.opacity=255,this.x=e,this.y=t,this.node.setPosition(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2)},e.prototype.destroyTile=function(n,i){return void 0===i&&(i=!0),__awaiter(this,void 0,void 0,function(){var o,t;return __generator(this,function(e){return o=this,a.default.collectFruitCnt[o._type-1]++,i?(this._isDesTroying=!0,(t=this.node.getComponent(cc.Animation)).finished=function(e,t){o._game.PlayUI.model.pushBlock(o.node),o._game&&(o._game.tiles[o.x][o.y]=null),s.default.post(r.GET_OBJECTIVE),n&&n()}.bind(o,this.x,this.y),t.play("aniBlock_blue")):(o.node.stopAllActions(),o._game.PlayUI.model.pushBlock(o.node),n&&n(),o._game&&(o._game.tiles[o.x][o.y]=null)),[2]})})},e.prototype.newTile=function(e,t,o){void 0===o&&(o=!0),this._isDesTroying=!1,this.sprTile.node.active=!0,this.sprTile.node.scale=1,this.sprTile.node.opacity=255,this.node.stopAllActions(),this.node.setPosition(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2+700),this.x=e,this.y=t,this.moveTo(e,t,null,o)},e.prototype.setSpfByType=function(e){switch(this.init(),e){case r.BLOCK_COLOR.RED:this.sprTile.spriteFrame=this.spf_red;break;case r.BLOCK_COLOR.GREEN:this.sprTile.spriteFrame=this.spf_green;break;case r.BLOCK_COLOR.BLUE:this.sprTile.spriteFrame=this.spf_blue;break;case r.BLOCK_COLOR.YELLOW:this.sprTile.spriteFrame=this.spf_yellow;break;case r.BLOCK_COLOR.PURPLE:this.sprTile.spriteFrame=this.spf_purple}},e.prototype.onTouchStart=function(){this._canTouch&&this._game.canTouch&&!this._isDesTroying&&this._game.operateLogic(this.x,this.y,this._tileType,this._type,this._subType)},e.prototype.recovery=function(){return __awaiter(this,void 0,void 0,function(){var t,o;return __generator(this,function(e){return(t=this)._isDestroying?[2]:(this._isDestroying=!0,t.node.zIndex=1001,1==a.default.gameModel?[2,t.destroyTile(function(){})]:n.default.INSTANCE.isObjectiveDone(this._type,this._subType)?[2,t.destroyTile(function(){})]:t._collectPosition?(i.default.INSTANCE.isCollectOver=!1,o=cc.sequence(cc.moveBy(.1,0,-100),cc.callFunc(function(){t._game.tiles[t.x][t.y]=null}),cc.moveTo(.3,t._collectPosition.x,t._collectPosition.y),cc.scaleTo(.2,0),cc.callFunc(function(){a.default.collectFruitCnt[t._type-1]++,t._game.PlayUI.model.pushBlock(t.node),t._game.blockArrLength--,t._game.blockArrLength<=0&&(i.default.INSTANCE.isCollectOver=!0),s.default.post(r.GET_OBJECTIVE)})),t.node.runAction(o),[2]):[2,t.destroyTile(function(){})])})})},__decorate([u(cc.SpriteFrame)],e.prototype,"spf_red",void 0),__decorate([u(cc.SpriteFrame)],e.prototype,"spf_green",void 0),__decorate([u(cc.SpriteFrame)],e.prototype,"spf_blue",void 0),__decorate([u(cc.SpriteFrame)],e.prototype,"spf_yellow",void 0),__decorate([u(cc.SpriteFrame)],e.prototype,"spf_purple",void 0),__decorate([u(cc.Sprite)],e.prototype,"sprTile",void 0),e=__decorate([d],e)}(c.default);o.default=h,cc._RF.pop()},{"../../../../dyGame/DYNotify":"DYNotify","../GameData":"GameData","../PlayDefine":"PlayDefine","../pve/PanelHeader_pve":"PanelHeader_pve","../pve/StateMgr":"StateMgr","./BaseTile":"BaseTile"}],Board:[function(e,t,o){"use strict";cc._RF.push(t,"8740411dFVKFZ3hfCySny51","Board"),Object.defineProperty(o,"__esModule",{value:!0});var y=e("./PlayDefine"),v=e("./GameData"),n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfbMask=null,e.pfbGate=null,e.pfbGate2=null,e.pfbArrow=null,e.nodBoard=null,e.panelFrame=null,e.panelGrid=null,e.panelTrickUp=null,e.pfbTileBg=null,e.pfbExterior=null,e.pfbInner=null,e.spfTileBgWhite=null,e.spfTileBgBlack=null,e.spfArrow=null,e.masks=[],e.exterior=[],e.inner=[],e.frames=[],e.grid=[],e}return __extends(e,t),o=e,Object.defineProperty(e,"INSTANCE",{get:function(){return this.singleInstance},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){o.singleInstance=this},Object.defineProperty(e.prototype,"GRID",{get:function(){return this.grid},enumerable:!0,configurable:!0}),e.prototype.initMap=function(m){return __awaiter(this,void 0,void 0,function(){var t,o,n,i,r,a,s,c,l,d,u,h,p,f;return __generator(this,function(e){if(this.masks=[],this.panelTrickUp&&this.panelTrickUp.removeAllChildren(),this.panelFrame.removeAllChildren(),t=v.default.mapData["level_"+m],v.default.levelData=t,!v.default.mapData||!t||!t.grid)return[2];for(o=t.grid.empty||[],n=t.grid.transport||[],i=t.grid.gate||[],d=0;d<8;++d)for(this.grid[d]=[],u=0;u<9;++u)this.grid[d][u]=y.GRID_TYPE.TILE;for(f=0;f<o.length;++f)d=Math.floor(o[f]/(this.grid.length+1)),u=o[f]%this.grid[0].length,this.grid[d][u]=y.GRID_TYPE.EMPTY;for(this.initFrame(),f=0;f<n.length;++f){for(a=r=0,s=!1,c=n[f].line;c<72;c+=9)d=Math.floor(c/(this.grid.length+1)),u=c%this.grid[0].length,this.grid[d][u]!=y.GRID_TYPE.EMPTY&&(this.grid[d][u]=y.GRID_TYPE.TRANSPORT,r++,s||(s=!0,a=d));(l=this.nodBoard.getChildByName("nodMask"))||((l=cc.instantiate(this.pfbMask)).parent=this.nodBoard),this.masks.push(l),l.width=80*r,l.height=80,l.setPosition(80*(a-4),80*n[f].line+40)}for(f=0;f<i.length;++f)d=Math.floor(i[f].upgate/(this.grid.length+1)),u=i[f].upgate%this.grid[0].length,this.grid[d][u]=y.GRID_TYPE.UPGATE,(h=cc.instantiate(this.pfbGate)).rotation=180,h.width=80,h.height=17,h.parent=this.panelTrickUp,h.setPosition(80*(d-4)+40,80*u+40+25),d=Math.floor(i[f].downgate/(this.grid.length+1)),u=i[f].downgate%this.grid[0].length,this.grid[d][u]=y.GRID_TYPE.DOWNGATE,(h=cc.instantiate(this.pfbGate2)).width=80,h.height=17,h.parent=this.panelTrickUp,h.setPosition(80*(d-4)+40,80*u+40-28);for(p=!1,f=0;f<t.objective.length;++f)t.objective[f].tileType==y.TILE_TYPE.LEAF&&(p=!0);return p&&this.initDownArrow(),[2]})})},e.prototype.initFrame=function(){this.addFrame(),this.connectLine()},e.prototype.initDownArrow=function(){for(var e=0;e<this.grid.length;++e)for(var t=0;t<this.grid[e].length;++t)if(this.grid[e][t]!=y.GRID_TYPE.EMPTY&&this.grid[e][t]!=y.GRID_TYPE.DOWNGATE){var o=cc.instantiate(this.pfbArrow);o.getComponent(cc.Sprite).spriteFrame=this.spfArrow,o.width=80,o.height=17,o.parent=this.panelTrickUp,o.setPosition(80*(e-4)+40,80*t+40-65),o.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.5,0,-10),cc.moveBy(.5,0,10))));break}},e.prototype.loadConfig=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(o,e){cc.loader.loadRes(t,function(e,t){o(e?null:t)})})]})})},e.prototype.connectLine=function(){for(var e=0;e<8;++e)this.searchColLeftStart(e,0),this.searchColRightStart(e,0);for(var t=0;t<9;++t)this.searchRowDownStart(0,t),this.searchRowUpStart(0,t)},e.prototype.searchRowUpStart=function(e,t){for(var o=e;o<8;++o){if(0<=t-1&&0==this.grid[o][t-1]&&1==this.exterior[o][t-1].up_left){this.searchRowUpEnd(o,t,!0);break}if(1==this.grid[o][t]&&1==this.inner[o][t].down_left){this.searchRowUpEnd(o,t,!1);break}}},e.prototype.searchRowUpEnd=function(e,t,o){for(var n=e;n<8;++n){if(0<=t-1&&0==this.grid[n][t-1]&&1==this.exterior[n][t-1].up_right){var i=n-e;o?this.frames[e][t-1].up_left.width=80*(i+1)-40:this.frames[e][t].down_left.height=80*(i+1)-25,this.searchRowUpStart(n+1,t);break}if(1==this.grid[n][t]&&1==this.inner[n][t].down_right){i=n-e;return o?this.frames[e][t-1].up_left.width=80*(i+1)-25:this.frames[e][t].down_left.height=80*(i+1)-10,void this.searchRowUpStart(n+1,t)}}},e.prototype.searchRowDownStart=function(e,t){for(var o=e;o<8;++o){if(t+1<9&&0==this.grid[o][t+1]&&1==this.exterior[o][t+1].down_left){this.searchRowDownEnd(o,t,!0);break}if(1==this.grid[o][t]&&1==this.inner[o][t].up_left){this.searchRowDownEnd(o,t,!1);break}}},e.prototype.searchRowDownEnd=function(e,t,o){for(var n=e;n<8;++n){if(t+1<9&&0==this.grid[n][t+1]&&1==this.exterior[n][t+1].down_right){var i=n-e;o?this.frames[e][t+1].down_left.height=80*(i+1)-40:this.frames[e][t].up_left.height=80*(i+1)-26,this.searchRowDownStart(n+1,t);break}if(1==this.grid[n][t]&&1==this.inner[n][t].up_right){i=n-e;return o?this.frames[e][t+1].down_left.height=80*(i+1)-26:this.frames[e][t].up_left.height=80*(i+1)-10,void this.searchRowDownStart(n+1,t)}}},e.prototype.searchColLeftStart=function(e,t){for(var o=t;o<9;++o){if(0<=e-1&&0==this.grid[e-1][o]&&1==this.exterior[e-1][o].down_right){this.searchColLeftEnd(e,o,!0);break}if(1==this.grid[e][o]&&1==this.inner[e][o].down_left){this.searchColLeftEnd(e,o,!1);break}}},e.prototype.searchColLeftEnd=function(e,t,o){for(var n=t;n<9;++n){if(0<=e-1&&0==this.grid[e-1][n]&&1==this.exterior[e-1][n].up_right){var i=n-t;o?this.frames[e-1][t].down_right.width=80*(i+1)-39:this.frames[e][t].down_left.width=80*(i+1)-25,this.searchColLeftStart(e,n+1);break}if(1==this.grid[e][n]&&1==this.inner[e][n].up_left){i=n-t;o?this.frames[e-1][t].down_right.width=80*(i+1)-25:this.frames[e][t].down_left.width=80*(i+1)-10,this.searchColLeftStart(e,n+1);break}}},e.prototype.searchColRightEnd=function(e,t,o){for(var n=t;n<9;++n){if(e+1<8&&0==this.grid[e+1][n]&&1==this.exterior[e+1][n].up_left){var i=n-t;o?this.frames[e+1][t].down_left.width=80*(i+1)-39:this.frames[e][t].down_right.height=80*(i+1)-26,this.searchColRightStart(e,n+1);break}if(1==this.grid[e][n]&&1==this.inner[e][n].up_right){i=n-t;o?this.frames[e+1][t].down_left.width=80*(i+1)-24:this.frames[e][t].down_right.height=80*(i+1)-9,this.searchColRightStart(e,n+1);break}}},e.prototype.searchColRightStart=function(e,t){for(var o=t;o<9;++o){if(e+1<8&&0==this.grid[e+1][o]&&1==this.exterior[e+1][o].down_left){this.searchColRightEnd(e,o,!0);break}if(1==this.grid[e][o]&&1==this.inner[e][o].down_right){this.searchColRightEnd(e,o,!1);break}}},e.prototype.setInner=function(e,t,o){var n=null;this.frames[e][t]=this.frames[e][t]||{up_left:null,up_right:null,down_right:null,down_left:null};1==o?((n=cc.instantiate(this.pfbInner)).scaleX=-1,n.rotation=270,n.setPosition(80*e-280-54,80*t+40+55),this.frames[e][t].up_left=n):2==o?((n=cc.instantiate(this.pfbInner)).rotation=90,n.setPosition(80*e-280+55,80*t+40+55),this.frames[e][t].up_right=n):3==o?((n=cc.instantiate(this.pfbInner)).rotation=180,n.setPosition(80*e-280+55,80*t+40-55),this.frames[e][t].down_right=n):4==o&&((n=cc.instantiate(this.pfbInner)).rotation=270,n.setPosition(80*e-280-54,80*t+40-55),this.frames[e][t].down_left=n),n&&(n.parent=this.panelFrame)},e.prototype.setExterior=function(e,t,o){var n=null;this.frames[e][t]=this.frames[e][t]||{up_left:null,up_right:null,down_right:null,down_left:null};1==o?((n=cc.instantiate(this.pfbExterior)).setPosition(80*e-280-40,80*t+40+39),this.frames[e][t].up_left=n):2==o?((n=cc.instantiate(this.pfbExterior)).rotation=90,n.setPosition(80*e-280+40,80*t+40+40),this.frames[e][t].up_right=n):3==o?((n=cc.instantiate(this.pfbExterior)).scaleX=-1,n.rotation=90,n.setPosition(80*e-280+40,80*t+40-40),this.frames[e][t].down_right=n):4==o&&((n=cc.instantiate(this.pfbExterior)).rotation=270,n.setPosition(80*e-280-39,80*t+40-40),this.frames[e][t].down_left=n),n&&(n.parent=this.panelFrame)},e.prototype.addFrame=function(){this.frames=[],this.inner=[],this.exterior=[];for(var e=0;e<8;++e){this.frames[e]=[],this.inner[e]=[],this.exterior[e]=[];for(var t=0;t<9;++t)0==this.grid[e][t]?(this.exterior[e][t]={up_left:0,up_right:0,down_right:0,down_left:0},0<=e-1&&t+1<9&&1==this.grid[e-1][t]&&1==this.grid[e][t+1]&&(this.exterior[e][t].up_left=1,this.setExterior(e,t,1)),e+1<8&&t+1<9&&1==this.grid[e+1][t]&&1==this.grid[e][t+1]&&(this.exterior[e][t].up_right=1,this.setExterior(e,t,2)),e+1<8&&0<=t-1&&1==this.grid[e+1][t]&&1==this.grid[e][t-1]&&(this.exterior[e][t].down_right=1,this.setExterior(e,t,3)),0<=e-1&&0<=t-1&&1==this.grid[e-1][t]&&1==this.grid[e][t-1]&&(this.exterior[e][t].down_left=1,this.setExterior(e,t,4))):(this.inner[e][t]={up_left:0,up_right:0,down_right:0,down_left:0},e-1<0?9<=t+1?(this.inner[e][t].up_left=1,this.setInner(e,t,1)):0==this.grid[e][t+1]&&(this.inner[e][t].up_left=1,this.setInner(e,t,1)):0==this.grid[e-1][t]&&(9<=t+1?(this.inner[e][t].up_left=1,this.setInner(e,t,1)):0==this.grid[e][t+1]&&0==this.grid[e-1][t+1]&&(this.inner[e][t].up_left=1,this.setInner(e,t,1))),8<=e+1?9<=t+1?(this.inner[e][t].up_right=1,this.setInner(e,t,2)):0==this.grid[e][t+1]&&(this.inner[e][t].up_right=1,this.setInner(e,t,2)):0==this.grid[e+1][t]&&(9<=t+1?(this.inner[e][t].up_right=1,this.setInner(e,t,2)):0==this.grid[e][t+1]&&0==this.grid[e+1][t+1]&&(this.inner[e][t].up_right=1,this.setInner(e,t,2))),8<=e+1?t-1<0?(this.inner[e][t].down_right=1,this.setInner(e,t,3)):0==this.grid[e][t-1]&&(this.inner[e][t].down_right=1,this.setInner(e,t,3)):0==this.grid[e+1][t]&&(t-1<0?(this.inner[e][t].down_right=1,this.setInner(e,t,3)):0==this.grid[e][t-1]&&0==this.grid[e+1][t-1]&&(this.inner[e][t].down_right=1,this.setInner(e,t,3))),e-1<0?t-1<0?(this.inner[e][t].down_left=1,this.setInner(e,t,4)):0==this.grid[e][t-1]&&(this.inner[e][t].down_left=1,this.setInner(e,t,4)):0==this.grid[e-1][t]&&(t-1<0?(this.inner[e][t].down_left=1,this.setInner(e,t,4)):0==this.grid[e][t-1]&&0==this.grid[e-1][t-1]&&(this.inner[e][t].down_left=1,this.setInner(e,t,4))))}},__decorate([r(cc.Prefab)],e.prototype,"pfbMask",void 0),__decorate([r(cc.Prefab)],e.prototype,"pfbGate",void 0),__decorate([r(cc.Prefab)],e.prototype,"pfbGate2",void 0),__decorate([r(cc.Prefab)],e.prototype,"pfbArrow",void 0),__decorate([r(cc.Node)],e.prototype,"nodBoard",void 0),__decorate([r(cc.Node)],e.prototype,"panelFrame",void 0),__decorate([r(cc.Node)],e.prototype,"panelGrid",void 0),__decorate([r(cc.Node)],e.prototype,"panelTrickUp",void 0),__decorate([r(cc.Prefab)],e.prototype,"pfbTileBg",void 0),__decorate([r(cc.Prefab)],e.prototype,"pfbExterior",void 0),__decorate([r(cc.Prefab)],e.prototype,"pfbInner",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"spfTileBgWhite",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"spfTileBgBlack",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"spfArrow",void 0),e=o=__decorate([i],e);var o}(cc.Component);o.default=a,cc._RF.pop()},{"./GameData":"GameData","./PlayDefine":"PlayDefine"}],Bomb:[function(e,t,o){"use strict";cc._RF.push(t,"f5e74t9T5BGz66tBJRWY2QP","Bomb"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../PlayDefine"),i=e("../GameData"),r=e("./BaseTile"),a=e("../pve/StateMgr"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodArrow_top=null,e.nodArrow_bottom=null,e.nodArrow_left=null,e.nodArrow_right=null,e.sprTile=null,e.sprBg=null,e.spf_bomb_row=null,e.spf_bomb_column=null,e.spf_bomb_column_light=null,e.spf_bomb_around=null,e.spf_bomb_around_light=null,e.spf_bomb_red=null,e.spf_bomb_green=null,e.spf_bomb_blue=null,e.spf_bomb_yellow=null,e.spf_bomb_purple=null,e.spf_bomb_colors=null,e._isAlive=!0,e.anim=null,e}return __extends(e,t),e.prototype.onLoad=function(){this._tileType=n.TILE_TYPE.BOMB},e.prototype.onEnable=function(){this.node.on("touchstart",this.onTouchStart,this),this.node.getChildByName("sprFire1").active=!1,this.node.getChildByName("sprFire2").active=!1},e.prototype.onDisable=function(){this.node.off("touchstart",this.onTouchStart,this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},Object.defineProperty(e.prototype,"isAlive",{get:function(){return this._isAlive},set:function(e){this._isAlive=e},enumerable:!0,configurable:!0}),e.prototype.setContentSize=function(e,t){this.node.setContentSize(e,t)},e.prototype.init=function(){t.prototype.init.call(this),this._isDestroying=!1,this.node.stopAllActions(),this.getComponent(cc.Animation).stop(),this.node.getChildByName("sprTile").active=!0,this.node.getChildByName("bomb").active=!1,this.node.getChildByName("bomb2").active=!1,this.node.getChildByName("sprFire1").active=!1,this.node.getChildByName("sprFire2").active=!1,this.node.getChildByName("sprBg").getComponent(cc.Sprite).spriteFrame=null},e.prototype.setArrPosition=function(e,t){this._canTouch=!0,this.x=e,this.y=t,this.node.setPosition(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2)},e.prototype.setSpfByType=function(e){switch(this.sprBg.node.active=!1,this.getComponent(cc.Animation).stop("aniZhazhijiBg"),e){case n.BOMB_TYPE.BOMB_ROW:this.sprTile.spriteFrame=this.spf_bomb_row;break;case n.BOMB_TYPE.BOMB_COLUMN:this.sprTile.spriteFrame=this.spf_bomb_column;break;case n.BOMB_TYPE.BOMB_AROUND:this.sprTile.spriteFrame=this.spf_bomb_around;break;case n.BOMB_TYPE.BOMB_ONE_COLOR:this.sprTile.spriteFrame=this.spf_bomb_colors}},e.prototype.genBombAnimation=function(){var e=this;this.sprBg.node.active=!0;var t=this.getComponent(cc.Animation);switch(t.genBombEnd=function(){e.sprBg.node.scale=1,e.sprBg.node.active=!1,e._type==n.BOMB_TYPE.BOMB_AROUND&&t.play("aniAreaNormal")},this._type){case n.BOMB_TYPE.BOMB_COLUMN:case n.BOMB_TYPE.BOMB_AROUND:t.play("aniGenBomb");break;case n.BOMB_TYPE.BOMB_ONE_COLOR:t.play("aniZhazhijiBg")}},e.prototype.actionBlink=function(){var e=this,t=cc.sequence(cc.delayTime(.4),cc.callFunc(function(){e.sprTile.spriteFrame=e.spf_bomb_around}),cc.delayTime(.4),cc.callFunc(function(){e.sprTile.spriteFrame=e.spf_bomb_around_light}),cc.delayTime(.4),cc.callFunc(function(){e.sprTile.spriteFrame=e.spf_bomb_around}),cc.delayTime(.4),cc.callFunc(function(){e.sprTile.spriteFrame=e.spf_bomb_around_light}),cc.delayTime(.4),cc.callFunc(function(){e.sprTile.spriteFrame=e.spf_bomb_around})),o=cc.sequence(cc.delayTime(.4),cc.callFunc(function(){e.sprTile.spriteFrame=e.spf_bomb_column}),cc.delayTime(.4),cc.callFunc(function(){e.sprTile.spriteFrame=e.spf_bomb_column_light}),cc.delayTime(.4),cc.callFunc(function(){e.sprTile.spriteFrame=e.spf_bomb_column}),cc.delayTime(.4),cc.callFunc(function(){e.sprTile.spriteFrame=e.spf_bomb_column_light}),cc.delayTime(.4),cc.callFunc(function(){e.sprTile.spriteFrame=e.spf_bomb_column}));switch(this.sprBg.node.active=!1,this.getComponent(cc.Animation).stop("aniZhazhijiBg"),this._type){case n.BOMB_TYPE.BOMB_COLUMN:this.sprTile.node.runAction(o);break;case n.BOMB_TYPE.BOMB_AROUND:this.sprTile.node.runAction(t);break;case n.BOMB_TYPE.BOMB_ONE_COLOR:this.sprBg.node.active=!0,this.getComponent(cc.Animation).play("aniZhazhijiBg")}},e.prototype.setSpfBySubType=function(e){if(this._type==n.BOMB_TYPE.BOMB_ONE_COLOR)switch(e){case n.BLOCK_COLOR.RED:this.sprTile.spriteFrame=this.spf_bomb_red,this.sprBg.node.color=new cc.Color(255,60,68);break;case n.BLOCK_COLOR.GREEN:this.sprTile.spriteFrame=this.spf_bomb_green,this.sprBg.node.color=new cc.Color(60,212,78);break;case n.BLOCK_COLOR.BLUE:this.sprTile.spriteFrame=this.spf_bomb_blue,this.sprBg.node.color=new cc.Color(65,91,199);break;case n.BLOCK_COLOR.YELLOW:this.sprTile.spriteFrame=this.spf_bomb_yellow,this.sprBg.node.color=new cc.Color(240,178,90);break;case n.BLOCK_COLOR.PURPLE:this.sprTile.spriteFrame=this.spf_bomb_purple,this.sprBg.node.color=new cc.Color(94,33,160);break;case n.BLOCK_COLOR.COLORS:this.sprTile.spriteFrame=this.spf_bomb_colors}},e.prototype.newTile=function(e,t,o){void 0===o&&(o=!0),this.node.setPosition(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2+700),o&&this.moveTo(e,t,null)},e.prototype.moveTo=function(e,t,o,n){void 0===n&&(n=!0);var i=this;if(this.x!=e&&n&&this.newTile(e,t,!1),this.x=e,this.y=t,this.canTouch=!1,this.node.stopActionByTag(1),n)var r=cc.sequence(cc.moveTo(.15,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2-15)),cc.moveTo(.1,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2+5)),cc.moveTo(.1,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2)),cc.callFunc(function(){i.canTouch=!0,o&&o()}));else r=cc.sequence(cc.moveTo(.3,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2)),cc.callFunc(function(){i.canTouch=!0,o&&o()}));this.node.runAction(r),r.setTag(1)},e.prototype.destroyTile=function(){if(!this._isDestroying){this._isDestroying=!0,this.sprTile.node.stopAllActions();var e=this;this.canTouch=!1;var t=this.getComponent(cc.Animation);switch(this.sprBg.node.active=!1,t.stop("aniAreaNormal"),this.node.getChildByName("bomb").active=!1,t.stop("aniZhazhijiBg"),this.type){case n.BOMB_TYPE.BOMB_AROUND:e.sprBg.node.active=!0,e.sprBg.node.color=cc.color(255,255,255),e._game.PlayUI.model.pushBomb(e.node),e._game.tiles[e.x][e.y]=null;break;case n.BOMB_TYPE.BOMB_COLUMN:case n.BOMB_TYPE.BOMB_ROW:e.node.rotation=0,e.node.scale=1,e.sprBg.node.scale=1,e.sprBg.node.color=cc.color(255,255,255),e._game.PlayUI.model.pushBomb(e.node);break;case n.BOMB_TYPE.BOMB_ONE_COLOR:e.node.rotation=0,e.node.scale=1,e.sprBg.node.scale=1,e.sprBg.node.rotation=0,e.sprBg.node.color=cc.color(255,255,255),e._game.PlayUI.model.pushBomb(e.node)}this.sprTile.spriteFrame=null}},e.prototype.onTouchStart=function(){this.canTouch&&this._game.canTouch&&a.default.INSTANCE.canOperate()&&(this.canTouch=!1,i.default.useBombCnt[this.type-1]++,this._game.operateLogic(this.x,this.y,this._tileType,this._type,this._subType,!0))},e.prototype.ignite=function(e,t,o){void 0===o&&(o=!0),i.default.useBombCnt[this.type-1]++,o?this._game.ignite(this.x,this.y,this._type):this.destroyTile()},__decorate([l(cc.Node)],e.prototype,"nodArrow_top",void 0),__decorate([l(cc.Node)],e.prototype,"nodArrow_bottom",void 0),__decorate([l(cc.Node)],e.prototype,"nodArrow_left",void 0),__decorate([l(cc.Node)],e.prototype,"nodArrow_right",void 0),__decorate([l(cc.Sprite)],e.prototype,"sprTile",void 0),__decorate([l(cc.Sprite)],e.prototype,"sprBg",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spf_bomb_row",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spf_bomb_column",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spf_bomb_column_light",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spf_bomb_around",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spf_bomb_around_light",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spf_bomb_red",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spf_bomb_green",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spf_bomb_blue",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spf_bomb_yellow",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spf_bomb_purple",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spf_bomb_colors",void 0),e=__decorate([c],e)}(r.default);o.default=d,cc._RF.pop()},{"../GameData":"GameData","../PlayDefine":"PlayDefine","../pve/StateMgr":"StateMgr","./BaseTile":"BaseTile"}],BonusBall:[function(e,t,o){"use strict";cc._RF.push(t,"53d83gDdM5AE7kbF4Cvs0+x","BonusBall"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],BtnLevel:[function(e,t,o){"use strict";cc._RF.push(t,"ade5e9GENNBpIhsaqKAZmXf","BtnLevel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../GameData"),i=cc._decorator,r=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isAllChildrenUse=!1,e.labLevel=null,e.nodEmptyStar=null,e.nodStar=null,e.level=0,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.setInteractable=function(e,t){(this.node.getComponent(cc.Button).interactable=t)||(this.nodEmptyStar.active=!1,this.nodStar.active=!1),cc._renderType!==cc.game.RENDER_TYPE_CANVAS&&this.setProgram(e,this.labLevel.node._sgNode)},e.prototype.setLevel=function(e){this.labLevel.string=e,this.level=e},e.prototype.setCurLevel=function(e){void 0===e&&(e=!1),this.node.getChildByName("labLevel").active=!1,e||(this.nodEmptyStar.active=!1,this.nodStar.active=!1)},e.prototype.setStar=function(e){this.nodEmptyStar.active=!0,this.nodStar.active=!0;var t=n.default.mapData["level_"+this.level].score;t&&(e>=t[2]?(this.nodStar.children[0].active=!0,this.nodStar.children[1].active=!0,this.nodStar.children[2].active=!0):(e>=t[1]?(this.nodStar.children[0].active=!0,this.nodStar.children[1].active=!0):(e>=t[0]?this.nodStar.children[0].active=!0:this.nodStar.children[0].active=!1,this.nodStar.children[1].active=!1),this.nodStar.children[2].active=!1))},e.prototype.setProgram=function(e,t){if(t||(t=this.labLevel.node._sgNode),cc.sys.isNative){var o=cc.GLProgramState.getOrCreateWithGLProgram(e);t.setGLProgramState(o)}else t.setShaderProgram(e);var n=t.children;if(n)for(var i=0;i<n.length;i++)this.setProgram(e,n[i])},__decorate([a],e.prototype,"isAllChildrenUse",void 0),__decorate([a(cc.Label)],e.prototype,"labLevel",void 0),__decorate([a(cc.Node)],e.prototype,"nodEmptyStar",void 0),__decorate([a(cc.Node)],e.prototype,"nodStar",void 0),e=__decorate([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../GameData":"GameData"}],ConfigEntry:[function(e,t,o){"use strict";cc._RF.push(t,"70a36fMmLxMgbHVgr4/gi7D","ConfigEntry"),Object.defineProperty(o,"__esModule",{value:!0});e("../loader/Loader"),e("../Defines");var n=e("./vo/ConfigVO"),s=(e("../net/NetByteArray"),e("../../component/game/GameData")),i={};function c(e,t){var o=e.replace(/^(?:Sys|Client)?(.*)$/,"$1");if(n[o]&&n[o].isInited)return;n[o].setClass(i[o]),n[o].initData(t)}o.loadAllConfig=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,(a="config",new Promise(function(r,e){cc.loader.loadResDir(a,function(e,t,o){for(var n=0;n<t.length;++n)if("config/Map"!==o[n])c(o[n].substring(a.length+1),t[n]);else{var i=t[n];s.default.mapData=i}r()})}))];case 1:return e.sent(),[2,!0]}var a})})},cc._RF.pop()},{"../../component/game/GameData":"GameData","../Defines":"Defines","../loader/Loader":"Loader","../net/NetByteArray":"NetByteArray","./vo/ConfigVO":"ConfigVO"}],ConfigVO:[function(e,t,o){"use strict";cc._RF.push(t,"41052ny8fRC/Z5dFwkyqhJh","ConfigVO"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../BaseConfig");o.ServerList=new n.default("ServerList"),o.Conf=new n.default("Conf"),o.Animation=new n.default("Animation"),o.Honor=new n.default("Honor"),o.Share=new n.default("Share"),o.Goods=new n.default("Goods"),o.Exchange=new n.default("Exchange"),o.Turntable=new n.default("Turntable"),o.Task=new n.default("Task"),o.ChatFace=new n.default("ChatFace"),o.MaleName=new n.default("MaleName"),o.FemaleName=new n.default("FemaleName"),o.Surname=new n.default("Surname"),o.Head=new n.default("Head"),cc._RF.pop()},{"../BaseConfig":"BaseConfig"}],Config:[function(e,t,o){"use strict";cc._RF.push(t,"b72a61Mc/dOYrAC0paB0YtN","Config"),Object.defineProperty(o,"__esModule",{value:!0}),o.GAME_ID="10401",o.GAME_VER="1.9.2.0",o.GAME_MODE="debug",cc._RF.pop()},{}],1:[function(e,t,o){"use strict";o.byteLength=function(e){var t=p(e),o=t[0],n=t[1];return 3*(o+n)/4-n},o.toByteArray=function(e){for(var t,o=p(e),n=o[0],i=o[1],r=new h((l=n,d=i,3*(l+d)/4-d)),a=0,s=0<i?n-4:n,c=0;c<s;c+=4)t=u[e.charCodeAt(c)]<<18|u[e.charCodeAt(c+1)]<<12|u[e.charCodeAt(c+2)]<<6|u[e.charCodeAt(c+3)],r[a++]=t>>16&255,r[a++]=t>>8&255,r[a++]=255&t;var l,d;2===i&&(t=u[e.charCodeAt(c)]<<2|u[e.charCodeAt(c+1)]>>4,r[a++]=255&t);1===i&&(t=u[e.charCodeAt(c)]<<10|u[e.charCodeAt(c+1)]<<4|u[e.charCodeAt(c+2)]>>2,r[a++]=t>>8&255,r[a++]=255&t);return r},o.fromByteArray=function(e){for(var t,o=e.length,n=o%3,i=[],r=0,a=o-n;r<a;r+=16383)i.push(c(e,r,a<r+16383?a:r+16383));1===n?(t=e[o-1],i.push(s[t>>2]+s[t<<4&63]+"==")):2===n&&(t=(e[o-2]<<8)+e[o-1],i.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return i.join("")};for(var s=[],u=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,r=n.length;i<r;++i)s[i]=n[i],u[n.charCodeAt(i)]=i;function p(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var o=e.indexOf("=");return-1===o&&(o=t),[o,o===t?0:4-o%4]}function c(e,t,o){for(var n,i,r=[],a=t;a<o;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),r.push(s[(i=n)>>18&63]+s[i>>12&63]+s[i>>6&63]+s[63&i]);return r.join("")}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],2:[function(t,e,G){(function(e){"use strict";var n=t("base64-js"),r=t("ieee754"),a=t("isarray");function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,o){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,o);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return i(this,e,t,o)}function i(e,t,o,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,o,n){if(t.byteLength,o<0||t.byteLength<o)throw new RangeError("'offset' is out of bounds");if(t.byteLength<o+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===o&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,o):new Uint8Array(t,o,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=d(e,t);return e}(e,t,o,n):"string"==typeof t?function(e,t,o){"string"==typeof o&&""!==o||(o="utf8");if(!u.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(t,o),i=(e=s(e,n)).write(t,o);i!==n&&(e=e.slice(0,i));return e}(e,t,o):function(e,t){if(u.isBuffer(t)){var o=0|h(t.length);return 0===(e=s(e,o)).length||t.copy(e,0,0,o),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?s(e,0):d(e,t);if("Buffer"===t.type&&a(t.data))return d(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t){if(c(t),e=s(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var o=0;o<t;++o)e[o]=0;return e}function d(e,t){var o=t.length<0?0:0|h(t.length);e=s(e,o);for(var n=0;n<o;n+=1)e[n]=255&t[n];return e}function h(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var o=e.length;if(0===o)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":case void 0:return L(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*o;case"hex":return o>>>1;case"base64":return k(e).length;default:if(n)return L(e).length;t=(""+t).toLowerCase(),n=!0}}function f(e,t,o){var n=e[t];e[t]=e[o],e[o]=n}function m(e,t,o,n,i){if(0===e.length)return-1;if("string"==typeof o?(n=o,o=0):2147483647<o?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,isNaN(o)&&(o=i?0:e.length-1),o<0&&(o=e.length+o),o>=e.length){if(i)return-1;o=e.length-1}else if(o<0){if(!i)return-1;o=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:y(e,t,o,n,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,o):Uint8Array.prototype.lastIndexOf.call(e,t,o):y(e,[t],o,n,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,o,n,i){var r,a=1,s=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s/=a=2,c/=2,o/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var d=-1;for(r=o;r<s;r++)if(l(e,r)===l(t,-1===d?0:r-d)){if(-1===d&&(d=r),r-d+1===c)return d*a}else-1!==d&&(r-=r-d),d=-1}else for(s<o+c&&(o=s-c),r=o;0<=r;r--){for(var u=!0,h=0;h<c;h++)if(l(e,r+h)!==l(t,h)){u=!1;break}if(u)return r}return-1}function v(e,t,o,n){o=Number(o)||0;var i=e.length-o;n?i<(n=Number(n))&&(n=i):n=i;var r=t.length;if(r%2!=0)throw new TypeError("Invalid hex string");r/2<n&&(n=r/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[o+a]=s}return a}function _(e,t,o,n){return U(function(e){for(var t=[],o=0;o<e.length;++o)t.push(255&e.charCodeAt(o));return t}(t),e,o,n)}function g(e,t,o){return 0===t&&o===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,o))}function b(e,t,o){o=Math.min(e.length,o);for(var n=[],i=t;i<o;){var r,a,s,c,l=e[i],d=null,u=239<l?4:223<l?3:191<l?2:1;if(i+u<=o)switch(u){case 1:l<128&&(d=l);break;case 2:128==(192&(r=e[i+1]))&&127<(c=(31&l)<<6|63&r)&&(d=c);break;case 3:r=e[i+1],a=e[i+2],128==(192&r)&&128==(192&a)&&2047<(c=(15&l)<<12|(63&r)<<6|63&a)&&(c<55296||57343<c)&&(d=c);break;case 4:r=e[i+1],a=e[i+2],s=e[i+3],128==(192&r)&&128==(192&a)&&128==(192&s)&&65535<(c=(15&l)<<18|(63&r)<<12|(63&a)<<6|63&s)&&c<1114112&&(d=c)}null===d?(d=65533,u=1):65535<d&&(d-=65536,n.push(d>>>10&1023|55296),d=56320|1023&d),n.push(d),i+=u}return function(e){var t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);var o="",n=0;for(;n<t;)o+=String.fromCharCode.apply(String,e.slice(n,n+=S));return o}(n)}G.Buffer=u,G.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},G.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),G.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,o){return i(null,e,t,o)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,o){return n=null,r=t,a=o,c(i=e),i<=0?s(n,i):void 0!==r?"string"==typeof a?s(n,i).fill(r,a):s(n,i).fill(r):s(n,i);var n,i,r,a},u.allocUnsafe=function(e){return l(null,e)},u.allocUnsafeSlow=function(e){return l(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var o=e.length,n=t.length,i=0,r=Math.min(o,n);i<r;++i)if(e[i]!==t[i]){o=e[i],n=t[i];break}return o<n?-1:n<o?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var o;if(void 0===t)for(o=t=0;o<e.length;++o)t+=e[o].length;var n=u.allocUnsafe(t),i=0;for(o=0;o<e.length;++o){var r=e[o];if(!u.isBuffer(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(n,i),i+=r.length}return n},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?b(this,0,e):function(e,t,o){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===o||o>this.length)&&(o=this.length),o<=0)return"";if((o>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,o);case"utf8":case"utf-8":return b(this,t,o);case"ascii":return T(this,t,o);case"latin1":case"binary":return P(this,t,o);case"base64":return g(this,t,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,o);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",t=G.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,o,n,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===o&&(o=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||o>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&o<=t)return 0;if(i<=n)return-1;if(o<=t)return 1;if(this===e)return 0;for(var r=(i>>>=0)-(n>>>=0),a=(o>>>=0)-(t>>>=0),s=Math.min(r,a),c=this.slice(n,i),l=e.slice(t,o),d=0;d<s;++d)if(c[d]!==l[d]){r=c[d],a=l[d];break}return r<a?-1:a<r?1:0},u.prototype.includes=function(e,t,o){return-1!==this.indexOf(e,t,o)},u.prototype.indexOf=function(e,t,o){return m(this,e,t,o,!0)},u.prototype.lastIndexOf=function(e,t,o){return m(this,e,t,o,!1)},u.prototype.write=function(e,t,o,n){if(void 0===t)n="utf8",o=this.length,t=0;else if(void 0===o&&"string"==typeof t)n=t,o=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(o)?(o|=0,void 0===n&&(n="utf8")):(n=o,o=void 0)}var i=this.length-t;if((void 0===o||i<o)&&(o=i),0<e.length&&(o<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var r,a,s,c,l,d,u,h,p,f=!1;;)switch(n){case"hex":return v(this,e,t,o);case"utf8":case"utf-8":return h=t,p=o,U(L(e,(u=this).length-h),u,h,p);case"ascii":return _(this,e,t,o);case"latin1":case"binary":return _(this,e,t,o);case"base64":return c=this,l=t,d=o,U(k(e),c,l,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=t,s=o,U(function(e,t){for(var o,n,i,r=[],a=0;a<e.length&&!((t-=2)<0);++a)o=e.charCodeAt(a),n=o>>8,i=o%256,r.push(i),r.push(n);return r}(e,(r=this).length-a),r,a,s);default:if(f)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),f=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function T(e,t,o){var n="";o=Math.min(e.length,o);for(var i=t;i<o;++i)n+=String.fromCharCode(127&e[i]);return n}function P(e,t,o){var n="";o=Math.min(e.length,o);for(var i=t;i<o;++i)n+=String.fromCharCode(e[i]);return n}function C(e,t,o){var n=e.length;(!t||t<0)&&(t=0),(!o||o<0||n<o)&&(o=n);for(var i="",r=t;r<o;++r)i+=D(e[r]);return i}function E(e,t,o){for(var n=e.slice(t,o),i="",r=0;r<n.length;r+=2)i+=String.fromCharCode(n[r]+256*n[r+1]);return i}function A(e,t,o){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(o<e+t)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,o,n,i,r){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<r)throw new RangeError('"value" argument is out of bounds');if(o+n>e.length)throw new RangeError("Index out of range")}function I(e,t,o,n){t<0&&(t=65535+t+1);for(var i=0,r=Math.min(e.length-o,2);i<r;++i)e[o+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function w(e,t,o,n){t<0&&(t=4294967295+t+1);for(var i=0,r=Math.min(e.length-o,4);i<r;++i)e[o+i]=t>>>8*(n?i:3-i)&255}function B(e,t,o,n,i,r){if(o+n>e.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function O(e,t,o,n,i){return i||B(e,0,o,4),r.write(e,t,o,n,23,4),o+4}function R(e,t,o,n,i){return i||B(e,0,o,8),r.write(e,t,o,n,52,8),o+8}u.prototype.slice=function(e,t){var o,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(o=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;o=new u(i,void 0);for(var r=0;r<i;++r)o[r]=this[r+e]}return o},u.prototype.readUIntLE=function(e,t,o){e|=0,t|=0,o||A(e,t,this.length);for(var n=this[e],i=1,r=0;++r<t&&(i*=256);)n+=this[e+r]*i;return n},u.prototype.readUIntBE=function(e,t,o){e|=0,t|=0,o||A(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,o){e|=0,t|=0,o||A(e,t,this.length);for(var n=this[e],i=1,r=0;++r<t&&(i*=256);)n+=this[e+r]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,o){e|=0,t|=0,o||A(e,t,this.length);for(var n=t,i=1,r=this[e+--n];0<n&&(i*=256);)r+=this[e+--n]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},u.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var o=this[e]|this[e+1]<<8;return 32768&o?4294901760|o:o},u.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var o=this[e+1]|this[e]<<8;return 32768&o?4294901760|o:o},u.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),r.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),r.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),r.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),r.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,o,n){(e=+e,t|=0,o|=0,n)||N(this,e,t,o,Math.pow(2,8*o)-1,0);var i=1,r=0;for(this[t]=255&e;++r<o&&(i*=256);)this[t+r]=e/i&255;return t+o},u.prototype.writeUIntBE=function(e,t,o,n){(e=+e,t|=0,o|=0,n)||N(this,e,t,o,Math.pow(2,8*o)-1,0);var i=o-1,r=1;for(this[t+i]=255&e;0<=--i&&(r*=256);)this[t+i]=e/r&255;return t+o},u.prototype.writeUInt8=function(e,t,o){return e=+e,t|=0,o||N(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,o){return e=+e,t|=0,o||N(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,o){return e=+e,t|=0,o||N(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,o){return e=+e,t|=0,o||N(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):w(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,o){return e=+e,t|=0,o||N(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):w(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,o,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*o-1);N(this,e,t,o,i-1,-i)}var r=0,a=1,s=0;for(this[t]=255&e;++r<o&&(a*=256);)e<0&&0===s&&0!==this[t+r-1]&&(s=1),this[t+r]=(e/a>>0)-s&255;return t+o},u.prototype.writeIntBE=function(e,t,o,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*o-1);N(this,e,t,o,i-1,-i)}var r=o-1,a=1,s=0;for(this[t+r]=255&e;0<=--r&&(a*=256);)e<0&&0===s&&0!==this[t+r+1]&&(s=1),this[t+r]=(e/a>>0)-s&255;return t+o},u.prototype.writeInt8=function(e,t,o){return e=+e,t|=0,o||N(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,o){return e=+e,t|=0,o||N(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,o){return e=+e,t|=0,o||N(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,o){return e=+e,t|=0,o||N(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):w(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,o){return e=+e,t|=0,o||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):w(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,o){return O(this,e,t,!0,o)},u.prototype.writeFloatBE=function(e,t,o){return O(this,e,t,!1,o)},u.prototype.writeDoubleLE=function(e,t,o){return R(this,e,t,!0,o)},u.prototype.writeDoubleBE=function(e,t,o){return R(this,e,t,!1,o)},u.prototype.copy=function(e,t,o,n){if(o||(o=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),0<n&&n<o&&(n=o),n===o)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-o&&(n=e.length-t+o);var i,r=n-o;if(this===e&&o<t&&t<n)for(i=r-1;0<=i;--i)e[i+t]=this[i+o];else if(r<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<r;++i)e[i+t]=this[i+o];else Uint8Array.prototype.set.call(e,this.subarray(o,o+r),t);return r},u.prototype.fill=function(e,t,o,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,o=this.length):"string"==typeof o&&(n=o,o=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<o)throw new RangeError("Out of range index");if(o<=t)return this;var r;if(t>>>=0,o=void 0===o?this.length:o>>>0,e||(e=0),"number"==typeof e)for(r=t;r<o;++r)this[r]=e;else{var a=u.isBuffer(e)?e:L(new u(e,n).toString()),s=a.length;for(r=0;r<o-t;++r)this[r+t]=a[r%s]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function D(e){return e<16?"0"+e.toString(16):e.toString(16)}function L(e,t){var o;t=t||1/0;for(var n=e.length,i=null,r=[],a=0;a<n;++a){if(55295<(o=e.charCodeAt(a))&&o<57344){if(!i){if(56319<o){-1<(t-=3)&&r.push(239,191,189);continue}if(a+1===n){-1<(t-=3)&&r.push(239,191,189);continue}i=o;continue}if(o<56320){-1<(t-=3)&&r.push(239,191,189),i=o;continue}o=65536+(i-55296<<10|o-56320)}else i&&-1<(t-=3)&&r.push(239,191,189);if(i=null,o<128){if((t-=1)<0)break;r.push(o)}else if(o<2048){if((t-=2)<0)break;r.push(o>>6|192,63&o|128)}else if(o<65536){if((t-=3)<0)break;r.push(o>>12|224,o>>6&63|128,63&o|128)}else{if(!(o<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}}return r}function k(e){return n.toByteArray(function(e){var t;if((e=(t=e,t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(M,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,o,n){for(var i=0;i<n&&!(i+o>=t.length||i>=e.length);++i)t[i+o]=e[i];return i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:4,isarray:3}],3:[function(e,t,o){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],4:[function(e,t,o){o.read=function(e,t,o,n,i){var r,a,s=8*i-n-1,c=(1<<s)-1,l=c>>1,d=-7,u=o?i-1:0,h=o?-1:1,p=e[t+u];for(u+=h,r=p&(1<<-d)-1,p>>=-d,d+=s;0<d;r=256*r+e[t+u],u+=h,d-=8);for(a=r&(1<<-d)-1,r>>=-d,d+=n;0<d;a=256*a+e[t+u],u+=h,d-=8);if(0===r)r=1-l;else{if(r===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),r-=l}return(p?-1:1)*a*Math.pow(2,r-n)},o.write=function(e,t,o,n,i,r){var a,s,c,l=8*r-i-1,d=(1<<l)-1,u=d>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:r-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),2<=(t+=1<=a+u?h/c:h*Math.pow(2,1-u))*c&&(a++,c/=2),d<=a+u?(s=0,a=d):1<=a+u?(s=(t*c-1)*Math.pow(2,i),a+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,i),a=0));8<=i;e[o+p]=255&s,p+=f,s/=256,i-=8);for(a=a<<i|s,l+=i;0<l;e[o+p]=255&a,p+=f,a/=256,l-=8);e[o+p-f]|=128*m}},{}],5:[function(e,t,o){var n,i,r=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}(function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}})();var l,d=[],u=!1,h=-1;function p(){u&&l&&(u=!1,l.length?d=l.concat(d):h=-1,d.length&&f())}function f(){if(!u){var e=c(p);u=!0;for(var t=d.length;t;){for(l=d,d=[];++h<t;)l&&l[h].run();h=-1,t=d.length}l=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function y(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];d.push(new m(e,t)),1!==d.length||u||c(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],DYADMgr:[function(e,t,o){"use strict";cc._RF.push(t,"0457bsva+hH85CNi/CJmjhv","DYADMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,r=e("./DYUtils");(n=o.DYADType||(o.DYADType={})).BANNER="BANNER",n.INTERSTITIAL="INTERSTITIAL",n.VIDEO="VIDEO",n.INCENTIVE="INCENTIVE",n.WALL="WALL",(i=o.DYADEvent||(o.DYADEvent={})).EVENT_INIT_SUCC="EVENT_INIT_SUCC",i.EVENT_INIT_FAIL="EVENT_INIT_FAIL",i.EVENT_CLOSE="EVENT_CLOSE",i.EVENT_REWARD="EVENT_REWARD";var a=function(){function e(){}return e.init=function(e,o){e=e||{};var t=JSON.stringify(e),n=r.default.pushInvoke(function(e){var t=JSON.parse(e);t.param=JSON.parse(t.param),o&&o(t)});cc.sys.isNative&&("android"==r.default.platform()?jsb.reflection.callStaticMethod("com/dygame/common/DYADMgr","init","(Ljava/lang/String;I)V",t,n):"ios"==r.default.platform()&&jsb.reflection.callStaticMethod("DYADMgr_iOS","init:withListener:",t,n.toString()))},e.canShow=function(e){var t="";return cc.sys.isNative&&("android"==r.default.platform()?t=jsb.reflection.callStaticMethod("com/dygame/common/DYADMgr","canShow","(Ljava/lang/String;)Ljava/lang/String;",e):"ios"==r.default.platform()&&(t=jsb.reflection.callStaticMethod("DYADMgr_iOS","canShow:",e))),"TRUE"==t},e.show=function(e){cc.sys.isNative&&("android"==r.default.platform()?jsb.reflection.callStaticMethod("com/dygame/common/DYADMgr","show","(Ljava/lang/String;)V",e):"ios"==r.default.platform()&&jsb.reflection.callStaticMethod("DYADMgr_iOS","show:",e))},e.hide=function(e){cc.sys.isNative&&("android"==r.default.platform()?jsb.reflection.callStaticMethod("com/dygame/common/DYADMgr","hide","(Ljava/lang/String;)V",e):"ios"==r.default.platform()&&jsb.reflection.callStaticMethod("DYADMgr_iOS","hide:",e))},e}();o.default=a,cc._RF.pop()},{"./DYUtils":"DYUtils"}],DYAudioH:[function(e,t,o){"use strict";cc._RF.push(t,"5e7d8WiHlBHAaQqJD8zBjBx","DYAudioH"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.playBgm=function(e){i.Instance.playBgm(e)},e.playEffect=function(e){i.Instance.playEffect(e)},e}();o.default=n;var i=function(){function e(){this.effectMap=[],this.bgmAudio=new Audio,this.bgmAudio.loop=!0}return Object.defineProperty(e,"Instance",{get:function(){return e.myInstance||(e.myInstance=new e),e.myInstance},enumerable:!0,configurable:!0}),e.prototype.playBgm=function(e){cc.loader.md5Pipe&&(e=cc.loader.md5Pipe.transformURL(e)),e!=this.bgmAudio.src.substring(this.bgmAudio.src.length-e.length)&&(this.bgmAudio.currentTime=0,Partner.CDN_HOST&&(e=Partner.CDN_HOST+e),this.bgmAudio.src=e,this.bgmAudio.play())},e.prototype.playEffect=function(e){var t=new Audio;cc.loader.md5Pipe&&(e=cc.loader.md5Pipe.transformURL(e)),Partner.CDN_HOST&&(e=Partner.CDN_HOST+e),t.src=e,t.currentTime=0,t.play()},e}();cc._RF.pop()},{}],DYAudio:[function(e,t,o){"use strict";cc._RF.push(t,"f78f4Q6Mh9PcJ/n3ZE51OPJ","DYAudio"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./DYData"),i=function(){function e(){}return e.playEffect=function(e,t,o){return void 0===o&&(o=1),s.theInstance.playEffect(e,t,o)},e.playMusic=function(e,t,o){return void 0===o&&(o=1),s.theInstance.playMusic(e,t,o)},e.stopMusic=function(e){return s.theInstance.stopMusic(e)},e.hasMusicPlaying=function(){return s.theInstance.hasMusicPlaying()},e.playTheEffect=function(e,t,o){s.theInstance.playTheEffect(e,t,o)},e.stopTheEffect=function(){s.theInstance.stopTheEffect()},e.getTheEffect=function(){return s.theInstance.getTheEffect()},e.setLoop=function(e,t){cc.audioEngine.setLoop(e,t)},e.isLoop=function(e){return cc.audioEngine.isLoop(e)},e.setVolume=function(e,t){cc.audioEngine.setVolume(e,t)},e.getVolume=function(e){return cc.audioEngine.getVolume(e)},e.pause=function(e){cc.audioEngine.pause(e)},e.resume=function(e){s.theInstance.resume(e)},e.pauseAll=function(){cc.audioEngine.pauseAll()},e.resumeAll=function(){s.theInstance.resumeAll()},e.stop=function(e){cc.audioEngine.stop(e)},e.stopAll=function(){s.theInstance.stopAll()},e.getDuration=function(e){return cc.audioEngine.getDuration(e)},e.getState=function(e){return cc.audioEngine.getState(e)},e.setFinishCallback=function(e,t){cc.audioEngine.setFinishCallback(e,t)},e.uncache=function(e){cc.audioEngine.uncache(e)},e.uncacheAll=function(){cc.audioEngine.uncacheAll()},e.setMusicMute=function(e){s.theInstance.setMusicMute(e)},e.setSoundMute=function(e){s.theInstance.setSoundMute(e)},e.isMusicMute=function(){return s.theInstance.isMusicMute()},e.isSoundMute=function(){return s.theInstance.isSoundMute()},e}();o.default=i;var r=!1,a=!1,s=function(){function e(){this.mCurMusic=null,this.mCurMusicFile=null,this.mCurTheEffect=null,this.mMusicVol=1,this.mSoundVol=1}return Object.defineProperty(e,"theInstance",{get:function(){return e.mInstance||(e.mInstance=new e),e.mInstance},enumerable:!0,configurable:!0}),e.prototype.playEffect=function(e,t,o){if(!a&&e)return this.mSoundVol=o,cc.audioEngine.play(e,t,o)},e.prototype.playMusic=function(e,t,o){var n=this;if(e=e||n.mCurMusicFile,!n.isMusicMute()&&e){if(null!=n.mCurMusic){if(e==n.mCurMusicFile)return;n.stopMusic(n.mCurMusic)}return this.mMusicVol=o,n.mCurMusic=cc.audioEngine.play(e,t,o),n.mCurMusicFile=e,n.mCurMusic}},e.prototype.stopMusic=function(e){this.stopTheEffect(),null!=this.mCurMusic&&(e=e||this.mCurMusic,cc.audioEngine.stop(e),this.mCurMusic=null)},e.prototype.playTheEffect=function(e,t,o){this.isSoundMute()||this.mCurTheEffect||(cc.audioEngine.pauseAll(),this.mCurTheEffect=cc.audioEngine.play(e,t,o))},e.prototype.stopTheEffect=function(){this.mCurTheEffect&&(cc.audioEngine.stop(this.mCurTheEffect),this.mCurTheEffect=null,this.resumeAll())},e.prototype.getTheEffect=function(){return this.mCurTheEffect},e.prototype.resume=function(e){r||cc.audioEngine.resume(e)},e.prototype.resumeAll=function(){if(!r)return cc.audioEngine.resumeAll()},e.prototype.stopAll=function(){return this.stopTheEffect(),cc.audioEngine.stopAll()},e.prototype.setMusicMute=function(e){r=e,n.default.setStat("5d88ad10-bb04-43c1-aeb7-332cd2ceb268",r?"TRUE":"FALSE"),e?this.playMusic(null,!0,this.mMusicVol):this.stopMusic(null)},e.prototype.setSoundMute=function(e){a=e,n.default.setStat("14a4c65c-d25c-4867-a840-9ac3b0021d19",a?"TRUE":"FALSE")},e.prototype.hasMusicPlaying=function(){return!!this.mCurMusic},e.prototype.isMusicMute=function(){return r},e.prototype.isSoundMute=function(){return a},e}();cc._RF.pop()},{"./DYData":"DYData"}],DYCrypto:[function(e,t,o){"use strict";cc._RF.push(t,"232929m1W1Dj5PIp9P/2YJ9","DYCrypto"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e,"base64",{get:function(){return e.theBase64||(e.theBase64=new i),e.theBase64},enumerable:!0,configurable:!0}),Object.defineProperty(e,"md5",{get:function(){return e.theMD5||(e.theMD5=new r),e.theMD5},enumerable:!0,configurable:!0}),e}();o.default=n;var i=function(){function e(){this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",this.encode=function(e){var t,o,n,i,r,a,s,c="",l=0;for(e=this._utf8_encode(e);l<e.length;)i=(t=e.charCodeAt(l++))>>2,r=(3&t)<<4|(o=e.charCodeAt(l++))>>4,a=(15&o)<<2|(n=e.charCodeAt(l++))>>6,s=63&n,isNaN(o)?a=s=64:isNaN(n)&&(s=64),c=c+this._keyStr.charAt(i)+this._keyStr.charAt(r)+this._keyStr.charAt(a)+this._keyStr.charAt(s);return c}}return e.prototype.decode=function(e){var t,o,n,i,r,a,s="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)t=this._keyStr.indexOf(e.charAt(c++))<<2|(i=this._keyStr.indexOf(e.charAt(c++)))>>4,o=(15&i)<<4|(r=this._keyStr.indexOf(e.charAt(c++)))>>2,n=(3&r)<<6|(a=this._keyStr.indexOf(e.charAt(c++))),s+=String.fromCharCode(t),64!=r&&(s+=String.fromCharCode(o)),64!=a&&(s+=String.fromCharCode(n));return s=this._utf8_decode(s)},e.prototype._utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",o=0;o<e.length;o++){var n=e.charCodeAt(o);n<128?t+=String.fromCharCode(n):(127<n&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t},e.prototype._utf8_decode=function(e){for(var t="",o=0,n=0,i=0,r=0;o<e.length;)(n=e.charCodeAt(o))<128?(t+=String.fromCharCode(n),o++):191<n&&n<224?(i=e.charCodeAt(o+1),t+=String.fromCharCode((31&n)<<6|63&i),o+=2):(i=e.charCodeAt(o+1),r=e.charCodeAt(o+2),t+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&r),o+=3);return t},e}(),r=function(){function e(){this.hexcase=0,this.b64pad=""}return e.prototype.hex_md5=function(e){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(e)))},e.prototype.b64_md5=function(e){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(e)))},e.prototype.any_md5=function(e,t){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(e)),t)},e.prototype.hex_hmac_md5=function(e,t){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.prototype.b64_hmac_md5=function(e,t){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.prototype.any_hmac_md5=function(e,t,o){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),o)},e.prototype.hex_md5_for_uint8arr=function(e){return function(e){function p(e,t,o){return e&t|~e&o}function f(e,t,o){return o&e|~o&t}function m(e,t,o){return e^t^o}function y(e,t,o){return t^(e|~o)}function v(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function n(e){for(var t=[],o=0;o<e.length;o++)if(e.charCodeAt(o)<=127)t.push(e.charCodeAt(o));else for(var n=encodeURIComponent(e.charAt(o)).substr(1).split("%"),i=0;i<n.length;i++)t.push(parseInt(n[i],16));return t}function t(e){for(var t=new Array(e.length),o=0;o<e.length;o++)t[o]=e[o];return t}var _=null;function o(e){return e.slice()}var i=null;function g(e,t){return 4294967295&e+t}return"string"==typeof e?_=n(e):e.constructor==Array?0===e.length?_=o(e):"string"==typeof e[0]?_=function(e){for(var t=[],o=0;o<e.length;o++)t=t.concat(n(e[o]));return t}(e):"number"==typeof e[0]?_=o(e):i=typeof e[0]:"undefined"!=typeof ArrayBuffer?e instanceof ArrayBuffer?_=t(new Uint8Array(e)):e instanceof Uint8Array||e instanceof Int8Array?_=t(e):e instanceof Uint32Array||e instanceof Int32Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Float32Array||e instanceof Float64Array?_=t(new Uint8Array(e.buffer)):i=typeof e:i=typeof e,i&&alert("MD5 type mismatch, cannot process "+i),function(){function e(e,t,o,n){var i,r,a=u;u=d,l=g(d=l,(i=g(c,g(e,g(t,o))))<<(r=n)&4294967295|i>>>32-r),c=a}var t=_.length;_.push(128);var o=_.length%64;if(56<o){for(var n=0;n<64-o;n++)_.push(0);o=_.length%64}for(n=0;n<56-o;n++)_.push(0);_=_.concat(function(e){for(var t=[],o=0;o<8;o++)t.push(255&e),e>>>=8;return t}(8*t));var i=1732584193,r=4023233417,a=2562383102,s=271733878,c=0,l=0,d=0,u=0;for(n=0;n<_.length/64;n++){c=i;var h=64*n;e(p(l=r,d=a,u=s),3614090360,v(_,h),7),e(p(l,d,u),3905402710,v(_,h+4),12),e(p(l,d,u),606105819,v(_,h+8),17),e(p(l,d,u),3250441966,v(_,h+12),22),e(p(l,d,u),4118548399,v(_,h+16),7),e(p(l,d,u),1200080426,v(_,h+20),12),e(p(l,d,u),2821735955,v(_,h+24),17),e(p(l,d,u),4249261313,v(_,h+28),22),e(p(l,d,u),1770035416,v(_,h+32),7),e(p(l,d,u),2336552879,v(_,h+36),12),e(p(l,d,u),4294925233,v(_,h+40),17),e(p(l,d,u),2304563134,v(_,h+44),22),e(p(l,d,u),1804603682,v(_,h+48),7),e(p(l,d,u),4254626195,v(_,h+52),12),e(p(l,d,u),2792965006,v(_,h+56),17),e(p(l,d,u),1236535329,v(_,h+60),22),e(f(l,d,u),4129170786,v(_,h+4),5),e(f(l,d,u),3225465664,v(_,h+24),9),e(f(l,d,u),643717713,v(_,h+44),14),e(f(l,d,u),3921069994,v(_,h),20),e(f(l,d,u),3593408605,v(_,h+20),5),e(f(l,d,u),38016083,v(_,h+40),9),e(f(l,d,u),3634488961,v(_,h+60),14),e(f(l,d,u),3889429448,v(_,h+16),20),e(f(l,d,u),568446438,v(_,h+36),5),e(f(l,d,u),3275163606,v(_,h+56),9),e(f(l,d,u),4107603335,v(_,h+12),14),e(f(l,d,u),1163531501,v(_,h+32),20),e(f(l,d,u),2850285829,v(_,h+52),5),e(f(l,d,u),4243563512,v(_,h+8),9),e(f(l,d,u),1735328473,v(_,h+28),14),e(f(l,d,u),2368359562,v(_,h+48),20),e(m(l,d,u),4294588738,v(_,h+20),4),e(m(l,d,u),2272392833,v(_,h+32),11),e(m(l,d,u),1839030562,v(_,h+44),16),e(m(l,d,u),4259657740,v(_,h+56),23),e(m(l,d,u),2763975236,v(_,h+4),4),e(m(l,d,u),1272893353,v(_,h+16),11),e(m(l,d,u),4139469664,v(_,h+28),16),e(m(l,d,u),3200236656,v(_,h+40),23),e(m(l,d,u),681279174,v(_,h+52),4),e(m(l,d,u),3936430074,v(_,h),11),e(m(l,d,u),3572445317,v(_,h+12),16),e(m(l,d,u),76029189,v(_,h+24),23),e(m(l,d,u),3654602809,v(_,h+36),4),e(m(l,d,u),3873151461,v(_,h+48),11),e(m(l,d,u),530742520,v(_,h+60),16),e(m(l,d,u),3299628645,v(_,h+8),23),e(y(l,d,u),4096336452,v(_,h),6),e(y(l,d,u),1126891415,v(_,h+28),10),e(y(l,d,u),2878612391,v(_,h+56),15),e(y(l,d,u),4237533241,v(_,h+20),21),e(y(l,d,u),1700485571,v(_,h+48),6),e(y(l,d,u),2399980690,v(_,h+12),10),e(y(l,d,u),4293915773,v(_,h+40),15),e(y(l,d,u),2240044497,v(_,h+4),21),e(y(l,d,u),1873313359,v(_,h+32),6),e(y(l,d,u),4264355552,v(_,h+60),10),e(y(l,d,u),2734768916,v(_,h+24),15),e(y(l,d,u),1309151649,v(_,h+52),21),e(y(l,d,u),4149444226,v(_,h+16),6),e(y(l,d,u),3174756917,v(_,h+44),10),e(y(l,d,u),718787259,v(_,h+8),15),e(y(l,d,u),3951481745,v(_,h+36),21),i=g(i,c),r=g(r,l),a=g(a,d),s=g(s,u)}return function(e,t,o,n){for(var i,r="",a=0,s=0,c=3;0<=c;c--)a=255&(s=arguments[c]),a<<=8,a|=255&(s>>>=8),a<<=8,a|=255&(s>>>=8),a<<=8,r+=(i=((a|=s>>>=8)>>>0).toString(16),"00000000".substr(0,8-i.length)+i);return r}(s,a,r,i)}()}(e)},e.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},e.prototype.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},e.prototype.rstr_hmac_md5=function(e,t){var o=this.rstr2binl(e);16<o.length&&(o=this.binl_md5(o,8*e.length));for(var n=Array(16),i=Array(16),r=0;r<16;r++)n[r]=909522486^o[r],i[r]=1549556828^o[r];var a=this.binl_md5(n.concat(this.rstr2binl(t)),512+8*t.length);return this.binl2rstr(this.binl_md5(i.concat(a),640))},e.prototype.rstr2hex=function(e){try{this.hexcase}catch(e){this.hexcase=0}for(var t,o=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",i=0;i<e.length;i++)t=e.charCodeAt(i),n+=o.charAt(t>>>4&15)+o.charAt(15&t);return n},e.prototype.rstr2b64=function(e){try{this.b64pad}catch(e){this.b64pad=""}for(var t="",o=e.length,n=0;n<o;n+=3)for(var i=e.charCodeAt(n)<<16|(n+1<o?e.charCodeAt(n+1)<<8:0)|(n+2<o?e.charCodeAt(n+2):0),r=0;r<4;r++)8*n+6*r>8*e.length?t+=this.b64pad:t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>>6*(3-r)&63);return t},e.prototype.rstr2any=function(e,t){var o,n,i,r,a,s=t.length,c=Array(Math.ceil(e.length/2));for(o=0;o<c.length;o++)c[o]=e.charCodeAt(2*o)<<8|e.charCodeAt(2*o+1);var l=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),d=Array(l);for(n=0;n<l;n++){for(a=Array(),o=r=0;o<c.length;o++)r=(r<<16)+c[o],r-=(i=Math.floor(r/s))*s,(0<a.length||0<i)&&(a[a.length]=i);d[n]=r,c=a}var u="";for(o=d.length-1;0<=o;o--)u+=t.charAt(d[o]);return u},e.prototype.str2rstr_utf8=function(e){for(var t,o,n="",i=-1;++i<e.length;)t=e.charCodeAt(i),o=i+1<e.length?e.charCodeAt(i+1):0,55296<=t&&t<=56319&&56320<=o&&o<=57343&&(t=65536+((1023&t)<<10)+(1023&o),i++),t<=127?n+=String.fromCharCode(t):t<=2047?n+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n},e.prototype.str2rstr_utf16le=function(e){for(var t="",o=0;o<e.length;o++)t+=String.fromCharCode(255&e.charCodeAt(o),e.charCodeAt(o)>>>8&255);return t},e.prototype.str2rstr_utf16be=function(e){for(var t="",o=0;o<e.length;o++)t+=String.fromCharCode(e.charCodeAt(o)>>>8&255,255&e.charCodeAt(o));return t},e.prototype.rstr2binl=function(e){for(var t=Array(e.length>>2),o=0;o<t.length;o++)t[o]=0;for(o=0;o<8*e.length;o+=8)t[o>>5]|=(255&e.charCodeAt(o/8))<<o%32;return t},e.prototype.binl2rstr=function(e){for(var t="",o=0;o<32*e.length;o+=8)t+=String.fromCharCode(e[o>>5]>>>o%32&255);return t},e.prototype.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var o=1732584193,n=-271733879,i=-1732584194,r=271733878,a=0;a<e.length;a+=16){var s=o,c=n,l=i,d=r;o=this.md5_ff(o,n,i,r,e[a+0],7,-680876936),r=this.md5_ff(r,o,n,i,e[a+1],12,-389564586),i=this.md5_ff(i,r,o,n,e[a+2],17,606105819),n=this.md5_ff(n,i,r,o,e[a+3],22,-1044525330),o=this.md5_ff(o,n,i,r,e[a+4],7,-176418897),r=this.md5_ff(r,o,n,i,e[a+5],12,1200080426),i=this.md5_ff(i,r,o,n,e[a+6],17,-1473231341),n=this.md5_ff(n,i,r,o,e[a+7],22,-45705983),o=this.md5_ff(o,n,i,r,e[a+8],7,1770035416),r=this.md5_ff(r,o,n,i,e[a+9],12,-1958414417),i=this.md5_ff(i,r,o,n,e[a+10],17,-42063),n=this.md5_ff(n,i,r,o,e[a+11],22,-1990404162),o=this.md5_ff(o,n,i,r,e[a+12],7,1804603682),r=this.md5_ff(r,o,n,i,e[a+13],12,-40341101),i=this.md5_ff(i,r,o,n,e[a+14],17,-1502002290),n=this.md5_ff(n,i,r,o,e[a+15],22,1236535329),o=this.md5_gg(o,n,i,r,e[a+1],5,-165796510),r=this.md5_gg(r,o,n,i,e[a+6],9,-1069501632),i=this.md5_gg(i,r,o,n,e[a+11],14,643717713),n=this.md5_gg(n,i,r,o,e[a+0],20,-373897302),o=this.md5_gg(o,n,i,r,e[a+5],5,-701558691),r=this.md5_gg(r,o,n,i,e[a+10],9,38016083),i=this.md5_gg(i,r,o,n,e[a+15],14,-660478335),n=this.md5_gg(n,i,r,o,e[a+4],20,-405537848),o=this.md5_gg(o,n,i,r,e[a+9],5,568446438),r=this.md5_gg(r,o,n,i,e[a+14],9,-1019803690),i=this.md5_gg(i,r,o,n,e[a+3],14,-187363961),n=this.md5_gg(n,i,r,o,e[a+8],20,1163531501),o=this.md5_gg(o,n,i,r,e[a+13],5,-1444681467),r=this.md5_gg(r,o,n,i,e[a+2],9,-51403784),i=this.md5_gg(i,r,o,n,e[a+7],14,1735328473),n=this.md5_gg(n,i,r,o,e[a+12],20,-1926607734),o=this.md5_hh(o,n,i,r,e[a+5],4,-378558),r=this.md5_hh(r,o,n,i,e[a+8],11,-2022574463),i=this.md5_hh(i,r,o,n,e[a+11],16,1839030562),n=this.md5_hh(n,i,r,o,e[a+14],23,-35309556),o=this.md5_hh(o,n,i,r,e[a+1],4,-1530992060),r=this.md5_hh(r,o,n,i,e[a+4],11,1272893353),i=this.md5_hh(i,r,o,n,e[a+7],16,-155497632),n=this.md5_hh(n,i,r,o,e[a+10],23,-1094730640),o=this.md5_hh(o,n,i,r,e[a+13],4,681279174),r=this.md5_hh(r,o,n,i,e[a+0],11,-358537222),i=this.md5_hh(i,r,o,n,e[a+3],16,-722521979),n=this.md5_hh(n,i,r,o,e[a+6],23,76029189),o=this.md5_hh(o,n,i,r,e[a+9],4,-640364487),r=this.md5_hh(r,o,n,i,e[a+12],11,-421815835),i=this.md5_hh(i,r,o,n,e[a+15],16,530742520),n=this.md5_hh(n,i,r,o,e[a+2],23,-995338651),o=this.md5_ii(o,n,i,r,e[a+0],6,-198630844),r=this.md5_ii(r,o,n,i,e[a+7],10,1126891415),i=this.md5_ii(i,r,o,n,e[a+14],15,-1416354905),n=this.md5_ii(n,i,r,o,e[a+5],21,-57434055),o=this.md5_ii(o,n,i,r,e[a+12],6,1700485571),r=this.md5_ii(r,o,n,i,e[a+3],10,-1894986606),i=this.md5_ii(i,r,o,n,e[a+10],15,-1051523),n=this.md5_ii(n,i,r,o,e[a+1],21,-2054922799),o=this.md5_ii(o,n,i,r,e[a+8],6,1873313359),r=this.md5_ii(r,o,n,i,e[a+15],10,-30611744),i=this.md5_ii(i,r,o,n,e[a+6],15,-1560198380),n=this.md5_ii(n,i,r,o,e[a+13],21,1309151649),o=this.md5_ii(o,n,i,r,e[a+4],6,-145523070),r=this.md5_ii(r,o,n,i,e[a+11],10,-1120210379),i=this.md5_ii(i,r,o,n,e[a+2],15,718787259),n=this.md5_ii(n,i,r,o,e[a+9],21,-343485551),o=this.safe_add(o,s),n=this.safe_add(n,c),i=this.safe_add(i,l),r=this.safe_add(r,d)}return[o,n,i,r]},e.prototype.md5_cmn=function(e,t,o,n,i,r){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(n,r)),i),o)},e.prototype.md5_ff=function(e,t,o,n,i,r,a){return this.md5_cmn(t&o|~t&n,e,t,i,r,a)},e.prototype.md5_gg=function(e,t,o,n,i,r,a){return this.md5_cmn(t&n|o&~n,e,t,i,r,a)},e.prototype.md5_hh=function(e,t,o,n,i,r,a){return this.md5_cmn(t^o^n,e,t,i,r,a)},e.prototype.md5_ii=function(e,t,o,n,i,r,a){return this.md5_cmn(o^(t|~n),e,t,i,r,a)},e.prototype.safe_add=function(e,t){var o=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(o>>16)<<16|65535&o},e.prototype.bit_rol=function(e,t){return e<<t|e>>>32-t},e}();cc._RF.pop()},{}],DYData:[function(e,t,o){"use strict";cc._RF.push(t,"d294dT8AypLK490bxIEjd6+","DYData"),Object.defineProperty(o,"__esModule",{value:!0});var r=e("./DYUtils"),n=function(){function e(){}return e.getCache=function(e,t,o){return void 0===o&&(o=!1),i.theInstance.getCache(e,t,o)},e.setCache=function(e,t){i.theInstance.setCache(e,t)},e.clearCache=function(e){i.theInstance.clearCache(e)},e.getStat=function(e,t){return i.theInstance.getStat(e,t)},e.setStat=function(e,t){i.theInstance.setStat(e,t)},e.clearStat=function(e){i.theInstance.clearStat(e)},e}();o.default=n;var i=function(){function e(){}return Object.defineProperty(e,"theInstance",{get:function(){return e.mInstance||(e.mInstance=new e),e.mInstance},enumerable:!0,configurable:!0}),e.prototype.getCache=function(e,t,o){var n=this.mCacheData[e];if(!n)return t;if(!o)return n;var i=this.mCacheData[e+"_sign"];return r.default.genSign(e.toString()+n.toString())!=i?t:n},e.prototype.setCache=function(e,t){this.mCacheData[e]=t,this.mCacheData[e+"_sign"]=r.default.genSign(e.toString()+t.toString())},e.prototype.clearCache=function(e){delete this.mCacheData[e],delete this.mCacheData[e+"_sign"]},e.prototype.getStat=function(e,t){var o=cc.sys.localStorage,n=o.get(e);if(!n)return t;var i=o.getItem(e+"_sign");return r.default.genSign(e.toString()+n.toString())!=i?t:n},e.prototype.setStat=function(e,t){var o=cc.sys.localStorage;o.setItem(e,t),o.setItem(e+"_sign",r.default.genSign(e.toString()+t.toString()))},e.prototype.clearStat=function(e){cc.sys.localStorage.removeItem(e)},e}();cc._RF.pop()},{"./DYUtils":"DYUtils"}],DYGame:[function(e,t,o){"use strict";cc._RF.push(t,"76345JktINHULg3e1rZBel9","DYGame"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),(o=t).prototype.onLoad=function(){cc.game.addPersistRootNode(this.node),o.theRoot=this},t.theRoot=null,t=o=__decorate([i],t);var o}(cc.Component));o.default=r,cc._RF.pop()},{}],DYHttpMgr:[function(e,t,o){"use strict";cc._RF.push(t,"973d63aUFJN0K6rmhT7p+S3","DYHttpMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n,l=e("./DYUtils");(n=o.DYUpdateEvent||(o.DYUpdateEvent={})).EVENT_NO_UPDATE="0",n.EVENT_QUIET_UPDATE="1",n.EVENT_TIP_UPDATE="2",n.EVENT_FORCE_UPDATE="3";var i=function(){function e(){}return e.checkUpdateInfo=function(o){var e=cc.js.createMap();e.gameId=l.default.gameId(),e.gameVer=l.default.gameVer(),e.gameOrigVer=l.default.gameOrigVer(),e.channel=l.default.channel(),e.plat=l.default.platform(),e.mode=l.default.gameMode(),this.requestCommon(function(e,t){o&&o(e,t)},e,"http://entrance1.xxxy.dayukeji.com:10002/Hotfix/hotfix/checkupdate","GET")},e.requestCommon=function(e,t,o,n){var i=cc.loader.getXMLHttpRequest(),r=e,a=!1;i.ontimeout=function(){a=!0,i.abort(),r&&(r(-1,"ontimeout;"+o),r=null)},i.timeout=15e3,i.onreadystatechange=function(){if(i&&!a&&4==i.readyState){var e=i.responseText;if(r){var t={};if(200==i.status){try{l.default.DDLOG(e),t=JSON.parse(e)}catch(e){t={}}r(null,t)}else r(i.status||-1,"on_"+i.status+";"+o);r=null}}},i.onerror=function(){r&&(r(-2,"onerror;"+o),r=null)},(t=t||{}).gameId=t.gameId||l.default.gameId(),t.gameVer=t.gameVer||l.default.gameVer(),t.gameMode=t.gameMode||l.default.gameMode(),t.plat=t.plat||l.default.platform(),t.channel=t.channel||l.default.channel();var s="";for(var c in t)0<s.length&&(s+="&"),s+=l.default.format("{0}={1}",c,t[c]);cc.sys.isNative&&"win32"!=l.default.platform()&&i.setRequestHeader("Accept-Encoding","gzip,deflate"),"GET"==(n=n||"GET")?(0<s.length&&(o=encodeURI(l.default.format("{0}?{1}&{2}={3}",o,s,"ts",l.default.currentTick()))),i.open("GET",o,!0),i.send()):(i.open("POST",o,!0),s=encodeURI(s),i.send(s))},e}();o.default=i,cc._RF.pop()},{"./DYUtils":"DYUtils"}],DYIAPMgr:[function(e,t,o){"use strict";cc._RF.push(t,"17f3bpCwh5Lh6KewMCRfQwW","DYIAPMgr"),Object.defineProperty(o,"__esModule",{value:!0});var i,n,r=e("./DYUtils");(n=i=o.DYIAPEvent||(o.DYIAPEvent={})).EVENT_INIT_SUCC="EVENT_INIT_SUCC",n.EVENT_INIT_FAIL="EVENT_INIT_FAIL",n.EVENT_PAY_SUCC="EVENT_PAY_SUCC",n.EVENT_PAY_FAIL="EVENT_PAY_FAIL",n.EVENT_REFUND_SUCC="EVENT_REFUND_SUCC",n.EVENT_REFUND_FAIL="EVENT_REFUND_FAIL";var a=function(){function e(){}return e.init=function(e,o){e=e||{};var t=JSON.stringify(e),n=r.default.pushInvoke(function(e){var t=JSON.parse(e);t.param=JSON.parse(t.param),o&&o(t)});cc.sys.isNative?"android"==r.default.platform()?jsb.reflection.callStaticMethod("com/dygame/common/DYIAPMgr","init","(Ljava/lang/String;I)V",t,n):"ios"==r.default.platform()?jsb.reflection.callStaticMethod("DYIAPMgr_iOS","init:withListener:",t,n.toString()):r.default.scheduleOnce(function(){var e=cc.js.createMap();e.event=i.EVENT_INIT_SUCC,e.param=JSON.stringify({}),r.default.popInvoke(n)(JSON.stringify(e))},.1):cc.sys.isBrowser},e.pay=function(e,o){e=e||{};var t=JSON.stringify(e),n=r.default.pushInvoke(function(e){var t=JSON.parse(e);t.param=JSON.parse(t.param),o&&o(t)});cc.sys.isNative?"android"==r.default.platform()?jsb.reflection.callStaticMethod("com/dygame/common/DYIAPMgr","pay","(Ljava/lang/String;I)V",t,n):"ios"==r.default.platform()?jsb.reflection.callStaticMethod("DYIAPMgr_iOS","pay:withListener:",t,n.toString()):r.default.scheduleOnce(function(){var e=cc.js.createMap();e.event=i.EVENT_PAY_FAIL,e.param=t,r.default.popInvoke(n)(JSON.stringify(e))},.1):cc.sys.isBrowser},e}();o.default=a,cc._RF.pop()},{"./DYUtils":"DYUtils"}],DYLoader:[function(e,t,o){"use strict";cc._RF.push(t,"2d5e0B7b2NIhZWESew47Cub","DYLoader"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.loadRes=function(o,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,t){i.theInstance.loadRes(o,n,e)})]})})},e.loadStaticRes=function(o,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,t){i.theInstance.loadStaticRes(o,n,e)})]})})},e.preloadScene=function(o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,t){i.theInstance.preloadScene(o,e)})]})})},e.releaseStaticRes=function(e){i.theInstance.releaseStaticRes(e)},e}();o.default=n;var i=function(){function e(){}return Object.defineProperty(e,"theInstance",{get:function(){return e.mInstance||(e.mInstance=new e),e.mInstance},enumerable:!0,configurable:!0}),e.prototype.preloadWhenBoot=function(){},e.prototype.preloadWhenMain=function(){},e.prototype.preloadWhenStoryBegin=function(){},e.prototype.preloadWhenHome=function(){},e.prototype.preloadScene=function(e,t){cc.director.preloadScene(e,function(){t&&t()})},e.prototype.loadRes=function(e,t,o){cc.loader.loadRes(e,t,function(e,t){o&&o(t)})},e.prototype.loadStaticRes=function(e,t,n){cc.loader.loadRes(e,t,function(e,t){if(n&&n(t),!e){var o=cc.loader.getDependsRecursively(t);cc.loader.setAutoReleaseRecursively(o,!1)}})},e.prototype.releaseStaticRes=function(e){var t=cc.loader.getDependsRecursively(e);cc.loader.release(t)},e}();cc._RF.pop()},{}],DYLoginMgr:[function(e,t,o){"use strict";cc._RF.push(t,"b9b2cah10xGmbXc639aQi1D","DYLoginMgr"),Object.defineProperty(o,"__esModule",{value:!0});var i,n,r=e("./DYUtils");(n=i=o.DYLoginEvent||(o.DYLoginEvent={})).EVENT_INIT_SUCC="EVENT_INIT_SUCC",n.EVENT_INIT_FAIL="EVENT_INIT_FAIL",n.EVENT_LOGIN_SUCC="EVENT_LOGIN_SUCC",n.EVENT_LOGIN_FAIL="EVENT_LOGIN_FAIL",n.EVENT_LOGOUT_SUCC="EVENT_LOGOUT_SUCC",n.EVENT_LOGOUT_FAIL="EVENT_LOGOUT_FAIL";var a=function(){function e(){}return e.init=function(e,o){e=e||{};var t=JSON.stringify(e),n=r.default.pushInvoke(function(e){var t=JSON.parse(e);t.param=JSON.parse(t.param),o&&o(t)});cc.sys.isNative?"android"==r.default.platform()?jsb.reflection.callStaticMethod("com/dygame/common/DYLoginMgr","init","(Ljava/lang/String;I)V",t,n):"ios"==r.default.platform()?jsb.reflection.callStaticMethod("DYLoginMgr_iOS","init:withListener:",t,n.toString()):r.default.scheduleOnce(function(){var e=cc.js.createMap();e.event=i.EVENT_INIT_SUCC,e.param=JSON.stringify({}),r.default.popInvoke(n)(JSON.stringify(e))},.1):cc.sys.isBrowser},e.login=function(e,o){e=e||{};var t=JSON.stringify(e),n=r.default.pushInvoke(function(e){var t=JSON.parse(e);t.param=JSON.parse(t.param),o&&o(t)});cc.sys.isNative?"android"==r.default.platform()?jsb.reflection.callStaticMethod("com/dygame/common/DYLoginMgr","login","(Ljava/lang/String;I)V",t,n):"ios"==r.default.platform()?jsb.reflection.callStaticMethod("DYLoginMgr_iOS","login:withListener:",t,n.toString()):r.default.scheduleOnce(function(){var e=cc.js.createMap();e.event=i.EVENT_LOGIN_SUCC,e.param=JSON.stringify({id:"",token:"",name:"",param:""}),r.default.popInvoke(n)(JSON.stringify(e))},.1):cc.sys.isBrowser},e.isGuest=function(){return"TRUE"==r.default.getParamExt("K_IS_GUEST")},e.regLogout=function(e,o){e=e||{};var t=JSON.stringify(e),n=r.default.pushInvoke(function(e){var t=JSON.parse(e);t.param=JSON.parse(t.param),o&&o(t)});cc.sys.isNative?"android"==r.default.platform()?jsb.reflection.callStaticMethod("com/dygame/common/DYLoginMgr","regLogout","(Ljava/lang/String;I)V",t,n):"ios"==r.default.platform()&&jsb.reflection.callStaticMethod("DYLoginMgr_iOS","regLogout:withListener:",t,n.toString()):cc.sys.isBrowser},e.logout=function(e){e=e||{};var t=JSON.stringify(e);cc.sys.isNative?"android"==r.default.platform()?jsb.reflection.callStaticMethod("com/dygame/common/DYLoginMgr","logout","(Ljava/lang/String;I)V",t,0):"ios"==r.default.platform()&&jsb.reflection.callStaticMethod("DYLoginMgr_iOS","logout:withListener:",t,"0"):cc.sys.isBrowser},e}();o.DYLoginMgr=a,cc._RF.pop()},{"./DYUtils":"DYUtils"}],DYNotify:[function(e,t,o){"use strict";cc._RF.push(t,"35388pEvrdEWrnyWx3wzbjK","DYNotify"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./DYUtils"),n=function(){function e(){}return e.post=function(e,t){void 0===t&&(t=null),i.theInstance.post(e,t)},e.regObserver=function(e,t,o,n){void 0===n&&(n=null),i.theInstance.regObserver(e,t,o,n)},e.unregObserver=function(e,t){i.theInstance.unregObserver(e,t)},e.removeAllObservers=function(e){i.theInstance.removeAllObservers(e)},e}();o.default=n;var i=function(){function e(){this.mTargets=cc.js.createMap()}return Object.defineProperty(e,"theInstance",{get:function(){return e.mInstance||(e.mInstance=new e),e.mInstance},enumerable:!0,configurable:!0}),e.prototype.post=function(e,t){this.onNotify(e,t)},e.prototype.regObserver=function(e,t,o,n){var i,r=this.mTargets[o];if(r||(r=cc.js.createMap(),this.mTargets[o]=r),"string"==typeof e)r[i=e]={target:n};else{if(!(i=e.uuid))return void a.default.DDERROR("target is not a valid node!!!");r[i]=r[i]||{target:e}}r[i].cb=t},e.prototype.regObservers=function(e,t,o,n){for(var i=0;i<o.length;++i)this.regObserver(e,t,o[i],n)},e.prototype.unregObserver=function(e,t){var o=this.mTargets[t];if(o){if("string"==typeof e)o[e]&&delete o[e];else{var n=e.uuid;n&&o[n]&&delete o[n]}a.default.countProperty(o)<=0&&delete this.mTargets[t]}},e.prototype.unregObservers=function(e,t){for(var o=0;o<t.length;++o)this.unregObserver(e,t[o])},e.prototype.removeAllObservers=function(e){var t;if("string"==typeof e)t=e;else if(!(t=e.uuid))return void a.default.DDERROR("target is not a valid node!!!");for(var o in this.mTargets){var n=this.mTargets[o];n[t]&&(delete n[t],a.default.countProperty(n)<=0&&delete this.mTargets[o])}},e.prototype.onNotify=function(e,t){var o=this.mTargets[e]||new Map;for(var n in o){var i=o[n];cc.isValid(i.target)?i.cb(i.target,e,t):delete o[n]}},e}();cc._RF.pop()},{"./DYUtils":"DYUtils"}],DYShareMgr:[function(e,t,o){"use strict";cc._RF.push(t,"0e1bf19AvFMUp1aeGKLIcUN","DYShareMgr"),Object.defineProperty(o,"__esModule",{value:!0});var i,n,r=e("./DYUtils");(n=i=o.DYShareEvent||(o.DYShareEvent={})).EVENT_INIT_SUCC="EVENT_INIT_SUCC",n.EVENT_INIT_FAIL="EVENT_INIT_FAIL",n.EVENT_SHARE_SUCC="EVENT_SHARE_SUCC",n.EVENT_SHARE_FAIL="EVENT_SHARE_FAIL";var a=function(){function e(){}return e.init=function(e,o){e=e||{};var t=JSON.stringify(e),n=r.default.pushInvoke(function(e){var t=JSON.parse(e);t.param=JSON.parse(t.param),o&&o(t)});cc.sys.isNative?cc.sys.os==cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("com/dygame/common/DYShareMgr","init","(Ljava/lang/String;I)V",t,n):r.default.scheduleOnce(function(){var e=cc.js.createMap();e.event=i.EVENT_INIT_SUCC,e.param=JSON.stringify({}),r.default.popInvoke(n)(JSON.stringify(e))},.1):cc.sys.isBrowser},e.share=function(e,o){var t="";"android"==r.default.platform()?t="https://play.google.com/store/apps/developer?id=doozii":"ios"==r.default.platform()&&(t="https://itunes.apple.com/us/developer/ye-tian/id1127699301");e=e||{method:"default",title:"King Marbles",content:t,imgpath:cc.url.raw("resources/Texture/dzads.jpg")};var n=JSON.stringify(e),i=r.default.pushInvoke(function(e){var t=JSON.parse(e);t.param=JSON.parse(t.param),o&&o(t)});cc.sys.isNative?"android"==r.default.platform()?jsb.reflection.callStaticMethod("com/dygame/common/DYShareMgr","share","(Ljava/lang/String;I)V",n,i):"ios"==r.default.platform()&&jsb.reflection.callStaticMethod("DYShareMgr_iOS","share:withListener:",n,i.toString()):cc.sys.isBrowser&&r.default.scheduleOnce(function(){var e=cc.js.createMap();e.event=dy.login.EVENT_SHARE_FAIL,e.param=JSON.stringify({}),r.default.popInvoke(i)(JSON.stringify(e))},.1)},e}();o.default=a,cc._RF.pop()},{"./DYUtils":"DYUtils"}],DYUtils:[function(e,t,o){"use strict";cc._RF.push(t,"f6a70AQM5ZDvoVNtX8AIAgg","DYUtils"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./DYCrypto"),i=e("./Config"),a=e("./DYData"),s=e("./DYNotify"),c="jsb_cache/",l="c98759c9a82b24c176af027949f417b0/",d="5d4ac9f2-5658-4dca-9bb0-5f287e0d614b",u="8b40c787-95cf-4976-b29e-df8d25ce5e5d",h=1e3,p={},f={},r=function(){function r(){}return r.pushInvoke=function(e){var t=++h,o=r.format("{0}",t);return p[o]=e,t},r.popInvoke=function(e,t){void 0===t&&(t=!1);var o=r.format("{0}",e),n=p[o];return t||delete p[o],n},r.random=function(e,t){var o=Math.abs(t-e)+1,n=Math.floor(Math.random()*o);return Math.min(e,t)+n},r.clone=function(e){if(!e)return e;if("object"==typeof e){if(e.__classname__)return e;var t=void 0;if(e instanceof Array){t=[];for(var o=0;o<e.length;o++){((i=this.clone(e[o]))||0==i||""==i||0==i)&&(t[o]=i)}}else for(var n in t={},e){var i;if(e.hasOwnProperty(n))((i=this.clone(e[n]))||0==i||""==i||0==i)&&(t[n]=i)}return t}return e},r.guid=function(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},r.currentTick=function(){return Date.now()},r.currentSecond=function(){return Math.floor(this.currentTick()/1e3)},r.delegate=function(e,t){return function(){return t.apply(e,arguments)}},r.platform=function(){if(cc.sys.isNative)switch(cc.sys.platform){case cc.sys.WIN32:return"win32";case cc.sys.LINUX:return"linux";case cc.sys.MACOS:return"mac";case cc.sys.ANDROID:return"android";case cc.sys.IPHONE:case cc.sys.IPAD:return"ios";default:return"unknown"}return"web"},r.md5=function(e){return n.default.md5.hex_md5(e)},r.gameId=function(){return i.GAME_ID},r.gameVer=function(){var e=a.default.getStat(d,i.GAME_VER);return r.compareVer(e,i.GAME_VER)<0&&(e=i.GAME_VER,a.default.setStat(d,e)),e},r.gameOrigVer=function(){return i.GAME_VER},r.setGameVer=function(e){a.default.setStat(d,e)},r.channel=function(){return""},r.gameMode=function(){return i.GAME_MODE},r.DDLOG=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];r.format.apply(this,arguments)},r.DDINFO=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=r.format.apply(this,arguments);console.warn(n)},r.DDERROR=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=r.format.apply(this,arguments);console.error(n)},r.format=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=arguments.length;if(0===n)return"";e=e;if(1===n)return""+e;var i=arguments[1];if(2==arguments.length&&"object"==typeof i){for(var r in i)if(null!=i[r]){var a=new RegExp("({"+r+"})","g");e=e.replace(a,i[r])}}else for(var s=1;s<arguments.length;s++)if(null!=arguments[s]){a=new RegExp("({)"+(s-1)+"(})","g");e=e.replace(a,arguments[s])}return e},r.fill=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var r=[].slice.call(arguments),n=r.shift(),a=0;return n.replace(/%(\w)?(\d)?([dfsx])/gi,function(e,t,o,n){var i=o?new Array(o-0+1).join(t||""):"";return"d"==n&&(i+=parseInt(r[a++])),o?i.slice(-1*o):i})},r.scheduleOnce=function(e,t){cc.director.getScheduler().schedule(e,cc.director.getScene(),0,0,t,!1)},r.countProperty=function(e){return e?Object.getOwnPropertyNames(e).length:0},r.compareVer=function(e,t){var o=0,n=t;if(e===n)return 0;if(!e&&!n)return 0;if(e&&!n)return 1;if(!e&&n)return-1;for(var i=e.split("."),r=n.split("."),a=Math.min(i.length,r.length),s=0;s<a&&0==(o=parseInt(i[s])-parseInt(r[s]));)s++;return o=0!=o?o:i.length-r.length},r.cachePath=function(){return cc.sys.isNative?(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+c:c},r.hotfixPath=function(){return cc.sys.isNative?(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+l:l},r.verifyAsset=function(e,t){var o=jsb.fileUtils.getDataFromFile(e);return!o||n.default.md5.hex_md5_for_uint8arr(o).toUpperCase()===t.md5.toUpperCase()},r.createPool=function(e){return f[e]||(f[e]=new cc.NodePool),f[e]},r.destroyPool=function(e){f[e]&&(f[e].clear(),delete f[e])},r.clearAllPool=function(){for(var e in f)f[e].clear(),delete f[e]},r.stringForSec=function(e){var t=r.fill("%02d",Math.floor(e/3600)),o=r.fill("%02d",Math.floor(e%3600/60)),n=r.fill("%02d",Math.floor(e%60));return r.format("{0}:{1}:{2}",t,o,n)},r.stringForTick=function(e){var t=Math.floor(e/1e3),o=r.fill("%02d",Math.floor(t/60)),n=r.fill("%02d",Math.floor(t%60)),i=r.fill("%03d",e%1e3);return r.format("{0}:{1}:{2}",o,n,i)},r.gc=function(){cc.sys.isNative&&cc.textureCache.removeAllTextures(),cc.sys.garbageCollect()},r.getParamExt=function(e,t){t=t||"";try{if("android"==r.platform())return jsb.reflection.callStaticMethod("com/dygame/common/DYCommon","getParamExt","(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;",e.toString(),t.toString());if("ios"==r.platform())return jsb.reflection.callStaticMethod("DYCommon_iOS","getParamExt:withParam:",e.toString(),t.toString());if("K_IS_GUEST"==e)return"TRUE"}catch(e){}return""},r.uniqueID=function(){var e=a.default.getStat(u,"");return e||(e=this.guid(),a.default.getStat(u,e)),e},r.genSign=function(e){var t="apsdfAJOJ(#@&($0809283JLJOOJ"+n.default.base64.encode(e);return n.default.md5.hex_md5(t)},r.test=function(){s.default.regObserver("TEST",function(e,t,o){r.DDLOG(r.format("onNotify: {0} with {1}",t,o))},"K_TEST",this),s.default.post("K_TEST",{t:"some param"}),s.default.removeAllObservers("TEST"),r.DDLOG(r.currentTick()),r.scheduleOnce(function(){r.DDLOG(r.currentTick()),r.DDLOG(r.format("scheduleOnce ... "))},.5)},r}();o.default=r,cc._RF.pop()},{"./Config":"Config","./DYCrypto":"DYCrypto","./DYData":"DYData","./DYNotify":"DYNotify"}],DataAcc:[function(e,t,o){"use strict";cc._RF.push(t,"c837atvdv5AYJ2mImYSRPNy","DataAcc"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){};o.default=n,cc._RF.pop()},{}],DataPlayer:[function(e,t,o){"use strict";cc._RF.push(t,"823f6a99mxDJrso9X/Se81Z","DataPlayer"),Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../common/net/proto/ProtoType"),n=function(){function e(){this.fortuneScore=0,this.fortuneGold=0,this.fortuneStar=0,this.fortuneEnergy=0,this.playCntTotal=0,this.playCntWin=0,this.playSaveOnce=0,this.playMatchOnce=0,this.playPveTotal=0,this.playPveWin=0,this.playWeeklyWin=0,this.playWeeklyTotal=0,this.maxSuccessiveWin=0,this.level=0,this.guide=0,this.shareCnt=0,this.pveStats=[],this.isMatching=!1,this.arrPalyerGoodsData=[],this.arrBigLotteryRecordData=[],this.arrPlayerTaskData=[],this.arrRemainExchangeData=[],this.arrCommendatoryData=[],this.pveStats=[]}return Object.defineProperty(e.prototype,"NowSec",{get:function(){return this.myPlayer.nowsec},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MyPlayer",{set:function(e){this.myPlayer=e,this.fortuneScore=this.myPlayer.score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PveStats",{get:function(){return this.pveStats},set:function(e){this.pveStats=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FortuneGold",{get:function(){return this.fortuneGold},set:function(e){this.fortuneGold=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsMatching",{get:function(){return this.isMatching},set:function(e){this.isMatching=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FortuneStar",{get:function(){return this.fortuneStar},set:function(e){this.fortuneStar=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FortuneScore",{get:function(){return this.fortuneScore},set:function(e){this.fortuneScore=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"FortuneEnergy",{get:function(){return this.fortuneEnergy},set:function(e){this.fortuneEnergy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayCntTotal",{get:function(){return this.playCntTotal},set:function(e){this.playCntTotal=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayCntWin",{get:function(){return this.playCntWin},set:function(e){this.playCntWin=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayPveWin",{get:function(){return this.playPveWin},set:function(e){this.playPveWin=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayPveTotal",{get:function(){return this.playPveTotal},set:function(e){this.playPveTotal=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayMatchOnce",{get:function(){return this.playMatchOnce},set:function(e){this.playMatchOnce=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlaySaveOnce",{get:function(){return this.playSaveOnce},set:function(e){this.playSaveOnce=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayWeeklyTotal",{get:function(){return this.playWeeklyTotal},set:function(e){this.playWeeklyTotal=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlayWeeklyWin",{get:function(){return this.playWeeklyWin},set:function(e){this.playWeeklyWin=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Level",{get:function(){return this.level},set:function(e){this.level=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Guide",{get:function(){return this.guide},set:function(e){this.guide=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MaxSuccessiveWin",{get:function(){return this.maxSuccessiveWin},set:function(e){this.maxSuccessiveWin=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MyId",{get:function(){return this.myPlayer?this.myPlayer.id:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MyName",{get:function(){return this.myPlayer?this.myPlayer.name:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MyHeadUrl",{get:function(){return this.myPlayer?this.myPlayer.headImg:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EnergyFullTime",{get:function(){return this.myPlayer?this.myPlayer.energyFullTime:""},set:function(e){this.myPlayer.energyFullTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MySex",{get:function(){return this.myPlayer?this.myPlayer.sex:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PalyerGoodsData",{get:function(){return this.arrPalyerGoodsData},set:function(e){this.arrPalyerGoodsData=e},enumerable:!0,configurable:!0}),e.prototype.UpdataPlayerGoods=function(e){for(var t=0;t<e.length;t++){for(var o=e[t].goodsId,n=e[t].goodsNum,i=!1,r=0;r<this.PalyerGoodsData.length;r++)if(this.PalyerGoodsData[r].goodsId===o){i=!0,0===n?this.PalyerGoodsData.splice(r,1):this.PalyerGoodsData[r].goodsNum=n;break}if(!1===i){var a=new c.PGoods;a.goodsId=o,a.goodsNum=n,this.PalyerGoodsData.push(a)}}},Object.defineProperty(e.prototype,"BigLotteryRecordData",{get:function(){return this.arrBigLotteryRecordData},set:function(e){this.arrBigLotteryRecordData=e},enumerable:!0,configurable:!0}),e.prototype.UpdataBigLotteryRecord=function(e){this.arrBigLotteryRecordData.push(e)},Object.defineProperty(e.prototype,"PlayerTaskData",{get:function(){return this.arrPlayerTaskData},set:function(e){this.arrPlayerTaskData=e},enumerable:!0,configurable:!0}),e.prototype.UpdataPlayerTask=function(e){for(var t=0;t<e.length;t++){for(var o=e[t].id,n=e[t].progress,i=e[t].status,r=!1,a=0;a<this.PlayerTaskData.length;a++)if(this.PlayerTaskData[a].id===o){r=!0,this.PlayerTaskData[a].progress=n,this.PlayerTaskData[a].status=i;break}if(!1===r){var s=new c.PTask;s.id=o,s.progress=n,s.status=i,this.PlayerTaskData.push(s)}}},Object.defineProperty(e.prototype,"RemainExchangeData",{get:function(){return this.arrRemainExchangeData},set:function(e){this.arrRemainExchangeData=e},enumerable:!0,configurable:!0}),e.prototype.getRemainExchangeDataById=function(e){for(var t=this.arrRemainExchangeData.length,o=0;o<t;o++)if(this.arrRemainExchangeData[o].id===e)return this.arrRemainExchangeData[o]},e.prototype.UpdataRemainExchange=function(e,t){void 0===t&&(t=1);for(var o=this.arrRemainExchangeData.length,n=0;n<o;n++)if(this.arrRemainExchangeData[n].id===e)return this.arrRemainExchangeData[n].num-=t,this.arrRemainExchangeData[n].num<=0&&(this.arrRemainExchangeData[n].num=0),this.arrRemainExchangeData[n].num},Object.defineProperty(e.prototype,"CommendatoryData",{get:function(){return this.arrCommendatoryData},set:function(e){this.arrCommendatoryData=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ShareCnt",{get:function(){return this.shareCnt},set:function(e){this.shareCnt=e},enumerable:!0,configurable:!0}),e}();o.default=n,cc._RF.pop()},{"../../../common/net/proto/ProtoType":"ProtoType"}],DataPlay:[function(e,t,o){"use strict";cc._RF.push(t,"80a7dDDi/JBOJ7IsAtJn0j9","DataPlay"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../Modules"),i=e("../../../component/game/PlayDefine"),r=function(){function e(){this.phase=1}return Object.defineProperty(e.prototype,"colorNum",{get:function(){return i.PHASE[this.phase-1].color_num},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Phase",{get:function(){return this.phase},set:function(e){this.phase=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CurRoundId",{get:function(){return this.curRoundId},set:function(e){this.curRoundId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CurRoomId",{get:function(){return n.Home.DataRoom.currentRoom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CurOperatorId",{get:function(){return this.curOperatorId},set:function(e){this.curOperatorId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CurOperatorSide",{get:function(){return this.curOperatorId===this.BluSideId?i.PlaySide.BLU:this.curOperatorId===this.RedSideId?i.PlaySide.RED:i.PlaySide.UNKNOWN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MySide",{get:function(){return n.Acc.PlayerId===this.BluSideId?i.PlaySide.BLU:i.PlaySide.RED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AiSide",{get:function(){return n.Acc.PlayerId===this.BluSideId?i.PlaySide.RED:i.PlaySide.BLU},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MyName",{get:function(){return n.Home.PlayerName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MyId",{get:function(){return n.Home.PlayerId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showHeadImg",{get:function(){return n.Home.PlayerHeadUrl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OpponentSide",{get:function(){return n.Home.OpponentId===this.BluSideId?i.PlaySide.BLU:i.PlaySide.RED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OpponentId",{get:function(){return n.Home.OpponentId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OpponentName",{get:function(){return n.Home.OpponentName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OpponentHeadUrl",{get:function(){return n.Home.OpponentHeadUrl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BluSideId",{get:function(){return n.Home.DataRoom.bluId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RedSideId",{get:function(){return n.Home.DataRoom.redId},enumerable:!0,configurable:!0}),e}();o.default=r,cc._RF.pop()},{"../../../component/game/PlayDefine":"PlayDefine","../../Modules":"Modules"}],DataRank:[function(e,t,o){"use strict";cc._RF.push(t,"88b49fW5ulAFpx3kJuSDn4+","DataRank"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.nMyRank=0}return Object.defineProperty(e.prototype,"GlobalRankData",{get:function(){return this.vecGlobalRankData},set:function(e){this.vecGlobalRankData=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MyRank",{get:function(){return this.nMyRank},set:function(e){this.nMyRank=e},enumerable:!0,configurable:!0}),e}();o.default=n;var i=function(){function e(){this.nMyRank=0}return Object.defineProperty(e.prototype,"GlobalRankData",{get:function(){return this.vecGlobalRankData},set:function(e){this.vecGlobalRankData=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MyRank",{get:function(){return this.nMyRank},set:function(e){this.nMyRank=e},enumerable:!0,configurable:!0}),e}();o.PveDataRank=i,cc._RF.pop()},{}],DataRoom:[function(e,t,o){"use strict";cc._RF.push(t,"422f3WDM15Ah7zvZVNTstR2","DataRoom"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.currentRoom=0,this.redId=0,this.bluId=0,this.playCount=0,this.roomOwner=0,this.roomType=0,this.enterRoomConfirm=!1}return Object.defineProperty(e.prototype,"PlayCount",{get:function(){return this.playCount},enumerable:!0,configurable:!0}),e.prototype.incPlayCount=function(){this.playCount+=1},Object.defineProperty(e.prototype,"RoomOwner",{get:function(){return this.roomOwner},set:function(e){this.roomOwner=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RoomType",{get:function(){return this.roomType},set:function(e){this.roomType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OpponentId",{get:function(){return this.opponentPlaymate?this.opponentPlaymate.id:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OpponentName",{get:function(){return this.opponentPlaymate?this.opponentPlaymate.name:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OpponentHeadUrl",{get:function(){return this.opponentPlaymate?this.opponentPlaymate.headImg:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OpponentSex",{get:function(){return this.opponentPlaymate?this.opponentPlaymate.sex:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EnterRoomConfirm",{get:function(){return this.enterRoomConfirm},set:function(e){this.enterRoomConfirm=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OpponentStar",{get:function(){return this.opponentPlaymate?this.opponentPlaymate.star:0},enumerable:!0,configurable:!0}),e}();o.default=n,cc._RF.pop()},{}],DebugNetHandler:[function(e,t,o){"use strict";cc._RF.push(t,"977c73g6DZLtoP+DcEKAfPp","DebugNetHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../common/net/proto/ProtoDispatcher"),i=e("../../../common/net/proto/mods/ProtoSectionDebug"),s=e("../../../common/net/proto/ProtoReflect"),c=e("../../../common/persist/GamePersist"),r=cc._decorator.ccclass,a=function(){function e(){this.msgErrorCallback={},n.DebugDispatcher.on(i.DebugErrorS2C.EVENT_NAME,this.onReceiveMsgError,this)}return e.prototype.onReceiveMsgError=function(e){var t=e.detail,o=t.code,n=t.msgid,i=s.ProtoMsgMap[n].EVENT_NAME,r=s.ProtoErrorCode[o]||"ErrCode:"+o,a=n>>8;c.default.INSTANCE.EmitProtoError(a,i,o,r)},e=__decorate([r],e)}();o.default=a,cc._RF.pop()},{"../../../common/net/proto/ProtoDispatcher":"ProtoDispatcher","../../../common/net/proto/ProtoReflect":"ProtoReflect","../../../common/net/proto/mods/ProtoSectionDebug":"ProtoSectionDebug","../../../common/persist/GamePersist":"GamePersist"}],Defines:[function(e,t,o){"use strict";var n,i;cc._RF.push(t,"8bd7b7BW8FHoKDVtSOSr1r8","Defines"),Object.defineProperty(o,"__esModule",{value:!0}),o.GAME_PERSIST_NODE_ROOT_NET="node-game-persist-net-root",o.GAME_PERSIST_NODE_ROOT_MODULE="node-game-persist-module-root",o.RESOURCE_CONFIG_PATH_ROOT="config/",o.UI_LAYER_POP_TIPS="node-ui-pop-tips",o.UI_LAYER_WAITING="node-ui-layer-waiting",o.ZORDER_UI_LAYER_POP_TIPS=100,o.ZORDER_UI_LAYER_WAITING=101,(n=o.OpenHomeFrom||(o.OpenHomeFrom={}))[n.UI_LOGIN=1]="UI_LOGIN",n[n.UI_PLAY=2]="UI_PLAY",n[n.UI_GUIDE=3]="UI_GUIDE",(i=o.Fortune||(o.Fortune={}))[i.Gold=1]="Gold",i[i.Score=2]="Score",i[i.Star=3]="Star",i[i.Energy=4]="Energy",o.ValueKey={levelScore:"levelScore",gameRate:"gameRate"},cc._RF.pop()},{}],DelayActiveButton:[function(e,t,o){"use strict";cc._RF.push(t,"04dc01hOkFJ8b+BDS3gYu60","DelayActiveButton"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.theButton=null,e.time=0,e.btnLable=null,e.btnLabelShow="button",e.timer=0,e}return __extends(e,t),e.prototype.onLoad=function(){this.timer=0,this.theButton.interactable=!1},e.prototype.start=function(){this.scheduleOnce(this.testTimer,this.time)},e.prototype.testTimer=function(){this.theButton.interactable=!0},e.prototype.update=function(e){this.timer+=e,this.test(this.timer)},e.prototype.test=function(e){this.timer<1&&(this.btnLable.string=this.time.toString()),this.timer>=Math.floor(e)&&this.timer<Math.floor(e)+1&&(this.btnLable.string=(this.time-Math.floor(e)).toString()),this.timer>this.time&&(this.btnLable.string=this.btnLabelShow)},__decorate([r(cc.Button)],e.prototype,"theButton",void 0),__decorate([r()],e.prototype,"time",void 0),__decorate([r(cc.Label)],e.prototype,"btnLable",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],DotAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"fe07cYhUCpORpq2nM2GNWsG","DotAnimation"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dotGraphic=null,e.dotNode=null,e.dotNum=0,e.bgGraphic=null,e}return __extends(e,t),(o=e).NewDotAnimation=function(){return(new cc.Node).addComponent(o)},e.prototype.onLoad=function(){this.dotNode=new cc.Node,this.node.addChild(this.dotNode),this.dotGraphic=this.dotNode.addComponent(cc.Graphics);var e=this;this.schedule(function(){e.updateDots()},.5)},e.prototype.updateDots=function(){this.dotNum<3?(this.drawDot(25*this.dotNum-25,0,7),this.dotNum++):(this.dotNum=0,this.dotGraphic.clear())},e.prototype.drawDot=function(e,t,o){this.dotGraphic.circle(e,t,o),this.dotGraphic.stroke(),this.dotGraphic.fill()},e.prototype.drawBackground=function(){this.bgGraphic.rect(-100,-20,200,40),this.bgGraphic.fillColor=new cc.Color(0,0,0,0),this.bgGraphic.stroke(),this.bgGraphic.fill()},e=o=__decorate([i],e);var o}(cc.Component));o.default=r,cc._RF.pop()},{}],Energy:[function(e,t,o){"use strict";cc._RF.push(t,"1a382/aLSBPN6+0/dvETNj1","Energy"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../common/persist/GamePersist"),i=e("../../common/social/SocialManager"),r=e("../../common/net/proto/mods/ProtoSectionPlayer"),a=e("../../common/net/NetUtil"),s=e("../../module/Modules"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodEnergyEmpty=null,e.nodGetEnergy=null,e.sprWord=null,e.spfWordShare1=null,e.spfWordShare2=null,e.spfWordShare3=null,e.spfWordShare=null,e.spfOK=null,e.mode=0,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.setBtnWord=function(){0===s.Home.DataPlayer.ShareCnt?this.sprWord.spriteFrame=this.spfWordShare3:1===s.Home.DataPlayer.ShareCnt?this.sprWord.spriteFrame=this.spfWordShare2:2===s.Home.DataPlayer.ShareCnt?this.sprWord.spriteFrame=this.spfWordShare1:3===s.Home.DataPlayer.ShareCnt&&(this.mode=3,this.sprWord.spriteFrame=this.spfWordShare)},e.prototype.setMode=function(e){1==(this.mode=e)?(this.nodEnergyEmpty.active=!0,this.nodGetEnergy.active=!1,this.setBtnWord()):2==e&&(this.nodEnergyEmpty.active=!1,this.nodGetEnergy.active=!0,this.sprWord.spriteFrame=this.spfOK)},e.prototype.share=function(){if(n.default.INSTANCE.btnAudio_1(),this.onCancelPanel(),1==this.mode){var e=i.default.INSTANCE.makeFlauntParam();Partner.doInvite(e,function(){var e=new r.PlayerShareGameC2S;e.reason=1,a.default.SendMsg(e)})}},e.prototype.onCancelPanel=function(){this.node.destroy()},__decorate([d(cc.Node)],e.prototype,"nodEnergyEmpty",void 0),__decorate([d(cc.Node)],e.prototype,"nodGetEnergy",void 0),__decorate([d(cc.Sprite)],e.prototype,"sprWord",void 0),__decorate([d(cc.SpriteFrame)],e.prototype,"spfWordShare1",void 0),__decorate([d(cc.SpriteFrame)],e.prototype,"spfWordShare2",void 0),__decorate([d(cc.SpriteFrame)],e.prototype,"spfWordShare3",void 0),__decorate([d(cc.SpriteFrame)],e.prototype,"spfWordShare",void 0),__decorate([d(cc.SpriteFrame)],e.prototype,"spfOK",void 0),e=__decorate([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../common/net/NetUtil":"NetUtil","../../common/net/proto/mods/ProtoSectionPlayer":"ProtoSectionPlayer","../../common/persist/GamePersist":"GamePersist","../../common/social/SocialManager":"SocialManager","../../module/Modules":"Modules"}],EventDispatcher:[function(e,t,o){"use strict";cc._RF.push(t,"892eelaBlxOeLKJ2raJz0Ep","EventDispatcher"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e){e&&(this.coreNode=e)}return Object.defineProperty(e.prototype,"node",{get:function(){return this.coreNode},set:function(e){this.coreNode=e},enumerable:!0,configurable:!0}),e.prototype.emit=function(e,t){this.coreNode&&this.coreNode.emit(e,t)},e.prototype.on=function(e,t,o,n){this.coreNode&&this.coreNode.on(e,t,o,n)},e.prototype.off=function(e,t,o,n){this.coreNode.off(e,t,o,n)},e}();o.default=n,cc._RF.pop()},{}],Events:[function(e,t,o){"use strict";cc._RF.push(t,"21476L4VENHhKVAsyV5xfHu","Events"),Object.defineProperty(o,"__esModule",{value:!0}),o.EVENT_MODULE_PLAYER_FORTUNE="module-event-player-fortune",o.EVENT_MODULE_BIG_LOTTERY="module-event-big-lottery",o.EVENT_MODULE_PLAYER_PRIZE="module-event-player-prize",o.EVENT_MODULE_PLAYER_TASK="module-event-player-task",cc._RF.pop()},{}],GameData:[function(e,t,o){"use strict";cc._RF.push(t,"99aaez1LwRHWbev5arzc9zU","GameData"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.clear=function(){t.stepSpawnPet=0,t.stepSpawnBug=0,t.spawnBugCnt=0,t.score=0;for(var e=t.step=0;e<4;++e)t.objectiveCnt[e]=0,t.objectiveSpawnCnt[e]=0;for(e=0;e<4;++e)t.spawnLeavesCnt[e]=0;for(e=0;e<4;++e)t.useBombCnt[e]=0;for(e=0;e<4;++e)t.collectLeavesCnt[e]=0;for(e=0;e<5;++e)t.collectFruitCnt[e]=0;for(e=0;e<5;++e)t.delWallCnt[e]=0;for(e=0;e<5;++e)t.delTablawareCnt[e]=0},t.stepSpawnPet=0,t.stepSpawnBug=0,t.objectiveCnt=[],t.objectiveSpawnCnt=[],t.gameBegan=null,t.score=0,t.step=0,t.spawnLeavesCnt=[],t.spawnBugCnt=0,t.collectFruitCnt=[],t.useBombCnt=[],t.collectLeavesCnt=[],t.delWallCnt=[],t.delTablawareCnt=[],t.gameModel=0,t.levelData=null,t.mapData=null,t.curLevel=1,t}();o.default=n,cc._RF.pop()},{}],GamePersist:[function(e,t,o){"use strict";cc._RF.push(t,"88aaaO+QdhDOK0KQjR13/TG","GamePersist"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Defines"),i=e("../../module/ModuleManager"),r=e("../../component/page/login/AccManager"),a=e("../net/proto/ProtoDispatcher"),s=e("../net/NetController"),c=e("../social/SocialManager"),l=e("../runtime/RuntimeManager"),d=cc._decorator,u=d.ccclass,h=d.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pBtnAudio_1=null,e.pBtnAudio_2=null,e.nodTip=null,e.nodWaitting=null,e.nodeProtoErrDispatcher=null,e.rootUI=null,e.waitingPool=null,e.waitingNode=null,e.serverTime=0,e.syncServerTimeTick=0,e.directionScene=null,e._hasShowTips=!1,e}return __extends(e,t),o=e,Object.defineProperty(e,"INSTANCE",{get:function(){return o.singleInstance},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){var t=o.singleInstance=this;cc.game.addPersistRootNode(this.node),Partner.registerZipLoad(),Partner.registerToastCallback(function(e){t.rootUI&&e&&t.rootUI.toast(e)}),o.PERSIST_ROOT_NODE_NET=new cc.Node(n.GAME_PERSIST_NODE_ROOT_NET),this.node.addChild(o.PERSIST_ROOT_NODE_NET),this.nodeProtoErrDispatcher=new cc.Node,this.node.addChild(this.nodeProtoErrDispatcher),o.PERSIST_ROOT_NODE_MODULE=new cc.Node(n.GAME_PERSIST_NODE_ROOT_MODULE),this.node.addChild(o.PERSIST_ROOT_NODE_MODULE),a.fillDispatcher(s.default.INSTANCE.node),i.InitManager(),c.default.INSTANCE.init(),l.default.INSTANCE.init()},e.prototype.start=function(){r.default.INSTANCE.RetryTimes=0,this.node.x=cc.view.getVisibleSize().width/2,this.node.y=cc.view.getVisibleSize().height/2},Object.defineProperty(e,"RootNodeNet",{get:function(){return o.PERSIST_ROOT_NODE_NET},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RootNodeModule",{get:function(){return o.PERSIST_ROOT_NODE_MODULE},enumerable:!0,configurable:!0}),e.prototype.ForceWaiting=function(e){this.nodWaitting.active=!0,this.nodWaitting.getComponent(cc.Animation).play("aniWaitting")},e.prototype.CancelWaiting=function(){this.nodWaitting.getComponent(cc.Animation).stop("aniWaitting"),this.nodWaitting.active=!1},e.prototype.Toast=function(e){this.rootUI&&this.rootUI.toast(e)},e.prototype.showMaintain=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.rootUI&&(this.ForceWaiting(),this.CancelWaiting()),[2]})})},e.prototype.startSyncServerTime=function(){var e=function(){r.default.INSTANCE.requestServerTime()};this.unschedule(e),this.schedule(e,5)},e.prototype.btnAudio_1=function(){cc.audioEngine.play(this.pBtnAudio_1,!1,1)},e.prototype.btnAudio_2=function(){cc.audioEngine.play(this.pBtnAudio_2,!1,1)},e.prototype.EmitProtoError=function(e,t,o,n){var i="proto_section_"+e,r={};r.errCode=o,r.errMsg=n,r.protoName=t,this.nodeProtoErrDispatcher.emit(i,r)},e.prototype.OnProtoError=function(e,t,o){var n="proto_section_"+e;this.nodeProtoErrDispatcher.on(n,t,o)},e.prototype.OffProtoError=function(e,t,o){var n="proto_section_"+e;this.nodeProtoErrDispatcher.off(n,t,o)},Object.defineProperty(e.prototype,"ServerTime",{get:function(){return this.serverTime},set:function(e){this.serverTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RootUI",{get:function(){return this.rootUI},set:function(e){this.rootUI=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"WaitingPool",{get:function(){return this.waitingPool},enumerable:!0,configurable:!0}),e.prototype.loadScene=function(t,o){if(!this._hasShowTips){this._hasShowTips=!0,this.nodTip.getComponent("Tips").show();var n=Date.now();cc.director.preloadScene(t,function(){var e=Date.now()-n;e<1e3?setTimeout(function(){cc.director.loadScene(t,function(){o&&o()})},1e3-e):cc.director.loadScene(t,function(){o&&o()})})}},e.prototype.onLoadSceneEnd=function(e){var t=this;if(this._hasShowTips){this._hasShowTips=!1;var o=cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){e&&e(),t.nodTip.getComponent("Tips").hide()}));this.nodTip.runAction(o)}},e.prototype.panelPopUp=function(e,t){e.stopAllActions();var o=cc.sequence(cc.scaleTo(.1,1.02,1.02),cc.scaleTo(.1,.98,.98),cc.scaleTo(.15,1.01,1.01),cc.scaleTo(.15,.99,.99),cc.scaleTo(.15,1,1),cc.callFunc(function(){t&&t()}));e.active=!0,e.scale=.95,e.runAction(o)},e.prototype.panelFadeOut=function(e,t){e.stopAllActions();var o=cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){t&&t()}));e.runAction(o)},e.ToastPool=new cc.NodePool,e.PlaySplashPool=new cc.NodePool,__decorate([h(cc.AudioClip)],e.prototype,"pBtnAudio_1",void 0),__decorate([h(cc.AudioClip)],e.prototype,"pBtnAudio_2",void 0),__decorate([h(cc.Node)],e.prototype,"nodTip",void 0),__decorate([h(cc.Node)],e.prototype,"nodWaitting",void 0),e=o=__decorate([u],e);var o}(cc.Component);o.default=p,cc._RF.pop()},{"../../component/page/login/AccManager":"AccManager","../../module/ModuleManager":"ModuleManager","../Defines":"Defines","../net/NetController":"NetController","../net/proto/ProtoDispatcher":"ProtoDispatcher","../runtime/RuntimeManager":"RuntimeManager","../social/SocialManager":"SocialManager"}],GameWebSocket:[function(e,t,o){"use strict";cc._RF.push(t,"db1ba3iYjhGQ6uh23LTke3m","GameWebSocket"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../event/EventDispatcher"),i=e("./InternalWebSocket"),r=e("./SocketDefine"),a=e("../NetByteArray"),s=function(t){function o(){var e=t.call(this)||this;return e.writeMessage="",e.readMessage="",e.isBytesWritten=!1,e.isConnected=!1,e.isConnecting=!1,e.socketType=o.TYPE_STRING,e.isConnected=!1,e.writeMessage="",e.readMessage="",e.node=new cc.Node("dygame-websocket"),e.socket=new i.default,e.socket.addCallbacks(e.onConnect,e.onClose,e.onSocketData,e.onError,e),e}return __extends(o,t),Object.defineProperty(o.prototype,"type",{get:function(){return this.socketType},set:function(e){(this.socketType=e)!==o.TYPE_BINARY||this.writeBuffer||(this.readBuffer=new a.ByteArray,this.writeBuffer=new a.ByteArray)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"connected",{get:function(){return this.isConnected},enumerable:!0,configurable:!0}),o.prototype.connect=function(e,t){this.isConnecting||this.isConnected||(this.isConnecting=!0,this.socket.connect(e,t))},o.prototype.connectByUrl=function(e){this.isConnecting||this.isConnected||(this.isConnecting=!0,this.socket.connectByUrl(e))},o.prototype.close=function(){this.isConnected&&this.socket.close()},o.prototype.flush=function(){this.isConnected&&(this.writeMessage&&(this.socket.send(this.writeMessage),this.writeMessage=""),this.isBytesWritten&&(this.socket.send(this.writeBuffer.buffer),this.isBytesWritten=!1,this.writeBuffer.clear()))},o.prototype.writeUTF=function(e){this.isConnected&&(this.socketType===o.TYPE_BINARY?(this.isBytesWritten=!0,this.writeBuffer.writeUTF(e)):this.writeMessage+=e,this.flush())},o.prototype.readUTF=function(){var e;return this.socketType===o.TYPE_BINARY?(this.readBuffer.position=0,e=this.readBuffer.readUTF(),this.readBuffer.clear()):(e=this.readMessage,this.readMessage=""),e},o.prototype.writeBytes=function(e,t,o){void 0===t&&(t=0),void 0===o&&(o=0),this.isConnected&&(this.writeBuffer?(this.isBytesWritten=!0,this.writeBuffer.writeBytes(e,t,o),this.flush()):DyGame.$error(1))},o.prototype.readBytes=function(e,t,o){void 0===t&&(t=0),void 0===o&&(o=0),this.readBuffer?(this.readBuffer.position=0,this.readBuffer.readBytes(e,t,o),this.readBuffer.clear()):DyGame.$error(1)},o.prototype.onConnect=function(){this.isConnected=!0,this.isConnecting=!1,this.emit(r.SOCKET_CONNECT)},o.prototype.onClose=function(){this.isConnected=!1,this.emit(r.SOCKET_CLOSE)},o.prototype.onError=function(){this.isConnecting&&(this.isConnecting=!1),this.emit(r.SOCKET_IO_ERROR)},o.prototype.onSocketData=function(e){"string"==typeof e?this.readMessage+=e:this.readBuffer._writeUint8Array(new Uint8Array(e)),this.emit(r.SOCKET_DATA)},o.TYPE_STRING="webSocketTypeString",o.TYPE_BINARY="webSocketTypeBinary",o}(n.default);o.default=s,cc._RF.pop()},{"../../event/EventDispatcher":"EventDispatcher","../NetByteArray":"NetByteArray","./InternalWebSocket":"InternalWebSocket","./SocketDefine":"SocketDefine"}],GrayFrag:[function(e,t,o){"use strict";cc._RF.push(t,"f269cefWUNM/rvemvn17b+y","GrayFrag"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.default_vert="\n    attribute vec4 a_position;\n    attribute vec2 a_texCoord;\n    attribute vec4 a_color;\n    varying vec2 v_texCoord;\n    varying vec4 v_fragmentColor;\n    void main()\n    {\n        gl_Position = CC_PMatrix * a_position;\n        v_fragmentColor = a_color;\n        v_texCoord = a_texCoord;\n    }\n    ",e.gray_frag="\n    #ifdef GL_ES\n    precision mediump float;\n    #endif\n    varying vec4 v_fragmentColor;\n    varying vec2 v_texCoord;\n    void main()\n    {\n        vec4 c = v_fragmentColor * texture2D(CC_Texture0, v_texCoord);\n        gl_FragColor.xyz = vec3(0.2126*c.r + 0.7152*c.g + 0.0722*c.b);\n        gl_FragColor.w = c.w;\n    }\n    ",e.gray_nomal="\n    #ifdef GL_ES\n    precision mediump float;\n    #endif\n    varying vec4 v_fragmentColor;\n    varying vec2 v_texCoord;\n    void main()\n    {\n        gl_FragColor = texture2D(CC_Texture0, v_texCoord);\n    }\n    ",e}();o.default=n,cc._RF.pop()},{}],GrayShader:[function(e,t,o){"use strict";cc._RF.push(t,"32faf0Q2ptBPpUUZfr77pIl","GrayShader"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,r=e("../../app/component/GrayFrag");(i=n||(n={}))[i.gray=0]="gray",i[i.normal=1]="normal";var a=cc._decorator,s=a.ccclass,c=(a.property,a.menu),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LevelChoose=null,e.state=n.normal,e}return __extends(e,t),e.prototype.onLoad=function(){cc._renderType!==cc.game.RENDER_TYPE_CANVAS&&(this.grayShader(),this.resetShader())},e.prototype.changeState=function(){cc._renderType!==cc.game.RENDER_TYPE_CANVAS&&(this.state==n.normal?(this.state=n.gray,this.setInteractable(this.node,this.grayProgram)):(this.state=n.normal,this.setInteractable(this.node,this.normalProgram)))},e.prototype.setInteractable=function(e,t){this.setProgram(t,e._sgNode)},e.prototype.setProgram=function(e,t){if(cc.sys.isNative){var o=cc.GLProgramState.getOrCreateWithGLProgram(e);t.setGLProgramState(o)}else t.setShaderProgram(e);var n=t.children;if(n)for(var i=0;i<n.length;i++)this.setProgram(e,n[i])},e.prototype.grayShader=function(){this.grayProgram=new cc.GLProgram,cc.sys.isNative?this.grayProgram.initWithString(r.default.default_vert,r.default.gray_frag):(this.grayProgram.initWithVertexShaderByteArray(r.default.default_vert,r.default.gray_frag),this.grayProgram.addAttribute(cc.macro.ATTRIBUTE_NAME_POSITION,cc.macro.VERTEX_ATTRIB_POSITION),this.grayProgram.addAttribute(cc.macro.ATTRIBUTE_NAME_COLOR,cc.macro.VERTEX_ATTRIB_COLOR),this.grayProgram.addAttribute(cc.macro.ATTRIBUTE_NAME_TEX_COORD,cc.macro.VERTEX_ATTRIB_TEX_COORDS)),this.grayProgram.link(),this.grayProgram.updateUniforms()},e.prototype.resetShader=function(){this.normalProgram=new cc.GLProgram,cc.sys.isNative?this.normalProgram.initWithString(r.default.default_vert,r.default.gray_nomal):(this.normalProgram.initWithVertexShaderByteArray(r.default.default_vert,r.default.gray_nomal),this.normalProgram.addAttribute(cc.macro.ATTRIBUTE_NAME_POSITION,cc.macro.VERTEX_ATTRIB_POSITION),this.normalProgram.addAttribute(cc.macro.ATTRIBUTE_NAME_COLOR,cc.macro.VERTEX_ATTRIB_COLOR),this.normalProgram.addAttribute(cc.macro.ATTRIBUTE_NAME_TEX_COORD,cc.macro.VERTEX_ATTRIB_TEX_COORDS)),this.normalProgram.link(),this.normalProgram.updateUniforms()},e=__decorate([s,c("Component/GrayShader")],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../app/component/GrayFrag":"GrayFrag"}],HomeManager:[function(e,t,o){"use strict";cc._RF.push(t,"f56d4BYZk1LNYZLHdKI0jjK","HomeManager"),Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../module/Modules"),n=e("../../../common/net/proto/mods/ProtoSectionRoom"),i=e("../../../common/net/proto/mods/ProtoSectionChat"),r=e("../../../common/net/proto/ProtoType"),c=e("./RoomDefine"),l=e("../../../common/loader/Loader"),d=e("./prefab/InviteDevConfirm"),u=e("./prefab/InvitePanel"),h=e("./prefab/RankScript"),f=e("../../../common/Defines"),p=e("../../../common/Events"),m=e("../../../common/social/SocialManager"),y=e("../../../common/runtime/RuntimeManager"),v=e("../../../common/Misc"),_=e("../../../common/persist/GamePersist"),g=e("../login/AccManager"),b=e("../../../common/net/proto/mods/ProtoSectionGoods"),S=e("../../../common/net/proto/mods/ProtoSectionTask"),T=e("../../../common/net/NetUtil"),P=e("../../../../dyGame/DYAudio"),C=e("../../../common/config/vo/ConfigVO"),E=e("../../game/PlayDefine"),A=e("../../../../dyGame/DYNotify"),a=function(){function a(){this.homeUI=null,this.invitePanel=null,this.rankPanel=null,this.settingsPanel=null,this.homeModule=s.Home,this.bigLotteryRecordRequest(),this.playerTaskRequest(),this.playerGoodsRequest()}return Object.defineProperty(a,"INSTANCE",{get:function(){return this.singleInstance||(this.singleInstance=new a),this.singleInstance},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"HomeUI",{get:function(){return this.homeUI},set:function(e){this.homeUI=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"InvitePanel",{get:function(){return this.invitePanel},set:function(e){this.invitePanel=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"RankPanel",{get:function(){return this.rankPanel},set:function(e){this.rankPanel=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"SettingsPanel",{get:function(){return this.settingsPanel},set:function(e){this.settingsPanel=e},enumerable:!0,configurable:!0}),a.prototype.showSettingsPanel=function(){if(!this.SettingsPanel){_.default.INSTANCE.ForceWaiting(),l.default.loadSingle("prefab/home/SettingsLayer",function(e,t){var o=cc.instantiate(t);o.parent=a.INSTANCE.HomeUI.node,o.setPosition(0,0),_.default.INSTANCE.CancelWaiting()})}},a.prototype.showRankPanel=function(){if(!this.RankPanel){var n=this;_.default.INSTANCE.ForceWaiting(),cc.loader.loadRes("prefab/home/RankLayer",cc.Prefab,function(e,t){var o=cc.instantiate(t);o.parent=a.INSTANCE.HomeUI.node,o.setPosition(0,0),n.RankPanel=h.default.GetComponent(o),_.default.INSTANCE.CancelWaiting(),_.default.INSTANCE.panelPopUp(o.getChildByName("bg_sp"),function(){n.RankPanel.init()})})}},a.prototype.showShopLayer=function(){l.default.loadSingle("prefab/home/shop/ShopLayer",function(e,t){var o=cc.instantiate(t);a.INSTANCE.HomeUI.showPanel(o.getComponent("ShopLayerScript"))})},a.prototype.showAchievementlayer=function(){_.default.INSTANCE.ForceWaiting(),cc.loader.loadRes("prefab/home/AchievementLayer",cc.Prefab,function(e,t){var o=cc.instantiate(t);o.parent=a.INSTANCE.HomeUI.node,_.default.INSTANCE.CancelWaiting(),_.default.INSTANCE.panelPopUp(o.getChildByName("nodContent"))})},a.prototype.showInvitePanel=function(){if(!this.InvitePanel){var i=this;l.default.loadSingle("prefab/home/InvitePanel",function(e,t){var o=cc.instantiate(t),n=o.getComponent(u.default);o.parent=a.INSTANCE.HomeUI.node,o.setPosition(new cc.Vec2(0,0)),i.InvitePanel=n,o.parent=a.INSTANCE.HomeUI.node,o.setPosition(new cc.Vec2(0,0))})}},a.prototype.showInvitePanelAsInvitee=function(i){var r=this;l.default.loadSingle("prefab/home/InvitePanel",function(e,t){var o=cc.instantiate(t),n=o.getComponent(u.default);n.InviteeId=s.Home.PlayerId,r.InvitePanel=n,o.parent=a.INSTANCE.HomeUI.node,o.setPosition(new cc.Vec2(0,0)),n.makeInivterInfoRequest(i)})},a.prototype.onReLaunch=function(){var e=y.default.INSTANCE.ReLaunchOptions;if(e&&this.homeUI){var t=e.query,o=""+s.Home.PlayerId;t.inviter&&t.inviter!==o&&(this.invitePanel&&this.invitePanel.onCloseInvitePage(),this.showInvitePanelAsInvitee(t.inviter))}},a.prototype.bigLotteryRecordRequest=function(){var e=new b.GoodsTurntableRecordPullC2S;T.default.SendMsg(e)},a.prototype.playerTaskRequest=function(){var e=new S.TaskListC2S;T.default.SendMsg(e)},a.prototype.playerGoodsRequest=function(){var e=new b.GoodsPullC2S;T.default.SendMsg(e)},a.prototype.makeMatchRequest=function(){var e=new n.RoomMatchRequestC2S;T.default.SendMsg(e)},a.prototype.makeGoodsRequest=function(e){var t=new i.ChatTextC2S;t.content="#goods "+e+" 1",T.default.SendMsg(t)},a.prototype.makeInvisibleRequest=function(){this.homeUI.doCancelMatch();var e=new n.RoomInvisibleC2S;T.default.SendMsg(e)},a.prototype.onPlayCreate=function(e,t,o,n,i,r){var a=this.getOpponentPlaymate(r);a?t===c.RoomType.MATCH?this.onMatchPlayCreate(e,o,n,i,a):this.onInvitePlayCreate(e,o,n,i,a):cc.warn("房间开始"+e+"比赛 但是获取不到对手信息")},a.prototype.onPvpAiCreate=function(){var e=new r.PPlaymate;e.id=1;var t=C.FemaleName.getExtra("id_list").length,o=C.Surname.getExtra("id_list").length,n=C.Surname.get(C.Surname.getExtra("id_list")[Math.floor(Math.random()*o)]).name+C.FemaleName.get(C.FemaleName.getExtra("id_list")[Math.floor(Math.random()*t)]).name;e.name=n;var i=Math.floor(5*(Math.random()+1));e.headImg="head_"+i+".png",e.sex=1,e.star=0,this.homeModule.DataRoom.bluId=s.Acc.PlayerId,this.homeModule.DataRoom.opponentPlaymate=e},a.prototype.onPlayStart=function(e){P.default.stopMusic(),this.homeModule.DataRoom.currentRoom===e&&A.default.post(E.Event_type.GAMESTART)},a.prototype.onReceiveSelfInfoS2C=function(e){this.homeModule.MyPlayerInfo=e.player;var t=new Date;this.homeModule.TimeOffset=parseInt(t.getTime()/1e3)-parseInt(this.homeModule.DataPlayer.NowSec),a.INSTANCE.HomeUI||"LoginUI"===_.default.INSTANCE.RootUI.uiName()&&g.default.INSTANCE.switchToHome()},a.prototype.onReceiveFortune=function(e,t){if(e===f.Fortune.Gold)this.homeModule.DataPlayer.FortuneGold=t;else if(e===f.Fortune.Score)this.homeModule.DataPlayer.FortuneScore=t;else if(e===f.Fortune.Star){this.homeModule.DataPlayer.FortuneStar=t;var o=v.formatPercent(this.homeModule.DataPlayer.PlayCntWin/this.homeModule.DataPlayer.PlayCntTotal),n=v.calcShowStarCount(t),i=v.getGradeName(t)+" "+n+"星";Partner.postMsg(4,{valuekey:f.ValueKey.gameRate,rate:o,grade:i}),m.default.INSTANCE.setUserStar(t)}else e===f.Fortune.Energy&&(this.homeModule.DataPlayer.FortuneEnergy=t);this.homeModule.emit(p.EVENT_MODULE_PLAYER_FORTUNE)},a.prototype.onOpponentLeave=function(e){this.InvitePanel&&this.InvitePanel.onOpponentLeave(e)},a.prototype.onReceiveRankData=function(){this.RankPanel&&this.RankPanel.onReceiveRankData()},a.prototype.onReceivePveRankData=function(){this.RankPanel},a.prototype.onReceivePlayStat=function(e,t,o,n,i,r,a,s,c,l,d){this.homeModule.DataPlayer.PlayCntTotal=e,this.homeModule.DataPlayer.PlayCntWin=t,this.homeModule.DataPlayer.PlaySaveOnce=o,this.homeModule.DataPlayer.PlayMatchOnce=n,this.homeModule.DataPlayer.PlayPveTotal=i,this.homeModule.DataPlayer.PlayPveWin=r,this.homeModule.DataPlayer.PlayWeeklyWin=a,this.homeModule.DataPlayer.PlayWeeklyTotal=s,this.homeModule.DataPlayer.MaxSuccessiveWin=c,this.homeModule.DataPlayer.Level=l,this.homeModule.DataPlayer.Guide=d;var u=v.calcShowStarCount(this.homeModule.DataPlayer.FortuneStar),h=v.getGradeName(this.homeModule.DataPlayer.FortuneStar)+" "+u+"星",p=v.formatPercent(t/e);Partner.postMsg(4,{valuekey:f.ValueKey.gameRate,rate:p,grade:h})},a.prototype.onReceivePveStat=function(e){this.homeModule.DataPlayer.PveStats=e},a.prototype.onReceiveInviteParam=function(e){var o=this;e=m.default.INSTANCE.makeInviteParam(e),Partner.doInvite(e,function(e,t){o.didInviteFriend(e,t)})},a.prototype.beInvited=function(e){},a.prototype.getOpponentPlaymate=function(e){for(var t=s.Home.DataPlayer.MyId,o=e.length,n=0;n<o;n++){var i=e[n];if(i.id!==t)return i}},a.prototype.makeConfirmRequest=function(){var e=new n.RoomPlayConfirmC2S;T.default.SendMsg(e)},a.prototype.didInviteFriend=function(e,n){"Dev"===Partner.PARTNER_NAME?l.default.loadSingle("prefab/home/InviteDevConfirm",function(e,t){var o=cc.instantiate(t);o.parent=a.INSTANCE.HomeUI.node,o.setPosition(new cc.Vec2(0,0)),o.getComponent(d.default).setInviteUrl(n.url)}):this.showInvitePanel()},a.prototype.onMatchPlayCreate=function(e,t,o,n,i){if(s.Home.DataPlayer.IsMatching){if(this.homeModule.DataRoom.opponentPlaymate=i,Partner.needPreloadOpponentHead()){var r=Partner.getOpenIdByHeadImgUrl(this.homeModule.DataRoom.opponentPlaymate.headImg);Partner.preloadOpponentHead(r)}this.homeModule.DataRoom.currentRoom=e,this.homeModule.DataRoom.bluId=n,this.homeModule.DataRoom.redId=o,this.homeModule.DataRoom.RoomType=c.RoomType.MATCH,this.homeModule.DataRoom.RoomOwner=t,this.homeModule.DataRoom.EnterRoomConfirm=!1,this.homeUI.onMatchPlayCreate(),this.makeConfirmRequest()}},a.prototype.onInvitePlayCreate=function(e,t,o,n,i){this.invitePanel&&(this.homeModule.DataRoom.opponentPlaymate=i,Partner.needPreloadOpponentHead(),this.homeModule.DataRoom.currentRoom=e,this.homeModule.DataRoom.bluId=n,this.homeModule.DataRoom.redId=o,this.homeModule.DataRoom.RoomType=c.RoomType.MATCH,this.homeModule.DataRoom.RoomOwner=t,this.homeModule.DataRoom.EnterRoomConfirm=!1,this.invitePanel.onPlayCreate())},a}();o.default=a,cc._RF.pop()},{"../../../../dyGame/DYAudio":"DYAudio","../../../../dyGame/DYNotify":"DYNotify","../../../common/Defines":"Defines","../../../common/Events":"Events","../../../common/Misc":"Misc","../../../common/config/vo/ConfigVO":"ConfigVO","../../../common/loader/Loader":"Loader","../../../common/net/NetUtil":"NetUtil","../../../common/net/proto/ProtoType":"ProtoType","../../../common/net/proto/mods/ProtoSectionChat":"ProtoSectionChat","../../../common/net/proto/mods/ProtoSectionGoods":"ProtoSectionGoods","../../../common/net/proto/mods/ProtoSectionRoom":"ProtoSectionRoom","../../../common/net/proto/mods/ProtoSectionTask":"ProtoSectionTask","../../../common/persist/GamePersist":"GamePersist","../../../common/runtime/RuntimeManager":"RuntimeManager","../../../common/social/SocialManager":"SocialManager","../../../module/Modules":"Modules","../../game/PlayDefine":"PlayDefine","../login/AccManager":"AccManager","./RoomDefine":"RoomDefine","./prefab/InviteDevConfirm":"InviteDevConfirm","./prefab/InvitePanel":"InvitePanel","./prefab/RankScript":"RankScript"}],HomeModule:[function(e,t,o){"use strict";cc._RF.push(t,"b762fp32wRAk4VaLQUOCbqZ","HomeModule"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../module/BaseModule"),i=e("../../../module/data/mod/DataPlayer"),r=e("../../../module/data/mod/DataRoom"),a=e("../../../module/data/mod/DataRank"),s=e("./PlayerNetHandler"),c=e("./RoomNetHandler"),l=e("./DebugNetHandler"),d=function(t){function o(){var e=t.call(this,o.MODULE_NAME)||this;return e.timeOffset=0,e}return __extends(o,t),o.prototype.onCreated=function(){this.dataPlayer=new i.default,this.dataRoom=new r.default,this.dataRank=new a.default,this.pveRank=null,this.protoPlayerHandler=new s.default,this.protoRoomHandler=new c.default,this.protoDebugHandler=new l.default},Object.defineProperty(o.prototype,"TimeOffset",{get:function(){return this.timeOffset},set:function(e){this.timeOffset=e},enumerable:!0,configurable:!0}),o.prototype.resetHome=function(){this.dataRoom=new r.default},Object.defineProperty(o.prototype,"DataPlayer",{get:function(){return this.dataPlayer},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"OpenHomeFrom",{get:function(){return this.openHomeFrom},set:function(e){this.openHomeFrom=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"PlayerName",{get:function(){return this.dataPlayer.MyName},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"PlayerId",{get:function(){return this.dataPlayer.MyId},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"PlayerHeadUrl",{get:function(){return this.dataPlayer.MyHeadUrl},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"OpponentId",{get:function(){return this.dataRoom.OpponentId},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"OpponentName",{get:function(){return this.dataRoom.OpponentName},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"OpponentHeadUrl",{get:function(){return this.dataRoom.OpponentHeadUrl},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"OpponentSex",{get:function(){return this.dataRoom.OpponentSex},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"DataRoom",{get:function(){return this.dataRoom},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"MyPlayerInfo",{set:function(e){this.dataPlayer.MyPlayer=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"PlayerSex",{get:function(){return this.dataPlayer.MySex},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"DataRank",{get:function(){return this.dataRank},set:function(e){this.dataRank=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"PveRank",{get:function(){return this.pveRank},set:function(e){this.pveRank=e},enumerable:!0,configurable:!0}),o.MODULE_NAME="home",o}(n.default);o.default=d,cc._RF.pop()},{"../../../module/BaseModule":"BaseModule","../../../module/data/mod/DataPlayer":"DataPlayer","../../../module/data/mod/DataRank":"DataRank","../../../module/data/mod/DataRoom":"DataRoom","./DebugNetHandler":"DebugNetHandler","./PlayerNetHandler":"PlayerNetHandler","./RoomNetHandler":"RoomNetHandler"}],HomeUI:[function(e,t,o){"use strict";cc._RF.push(t,"af37aLC1sVFG4FoKsW5aAxo","HomeUI"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../BaseUI"),i=e("./HomeManager"),r=e("../../../common/loader/Loader"),a=e("../../../common/net/proto/mods/ProtoSectionRoom"),s=e("../../../common/net/NetController"),l=e("../../../module/Modules"),c=e("../../../common/Defines"),d=e("../../../common/runtime/RuntimeManager"),u=e("../../../common/persist/GamePersist"),h=e("../../../module/Modules"),p=e("../../../common/net/proto/mods/ProtoSectionPlayer"),f=e("../../../common/net/NetUtil"),m=e("../../game/PlayManager"),y=e("../../../../dyGame/DYAudio"),v=e("../../../common/net/proto/ProtoType"),_=cc._decorator,g=_.ccclass,b=_.property,S=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.btnStartMatch=null,e.btnStartPVE=null,e.btnInviteFriend=null,e.btnGm=null,e.btnPreview=null,e.btnCommendatory=null,e.nodHead=null,e.pHeadPerfab=null,e.audHomeBg=null,e.energyCount=null,e.energyTimer=null,e}return __extends(e,n),e.prototype.onLoad=function(){n.prototype.onLoad.call(this),cc.director.getCollisionManager().enabled=!0,this.btnStartMatch.on("touchstart",this.onTouchStart,this),this.btnStartPVE.on("touchstart",this.onTouchStart,this),this.btnStartMatch.on("touchend",this.handleStartMatch,this),this.btnStartPVE.on("touchend",this.startPVE,this),y.default.playMusic(this.audHomeBg,!0)},e.prototype.onTouchStart=function(){u.default.INSTANCE.btnAudio_1()},e.prototype.onDisable=function(){cc.director.getCollisionManager().enabled=!1},e.prototype.start=function(){if(n.prototype.start.call(this),m.default.INSTANCE.PlayUI=null,m.default.INSTANCE.PlayUI_pve=null,i.default.INSTANCE.HomeUI=this,l.Home.DataPlayer.IsMatching=!1,this.changeMatchBtn(),this.btnPreview.node.active=!1,s.default.INSTANCE.Connected){if(l.Home.OpenHomeFrom===c.OpenHomeFrom.UI_LOGIN)if((t=d.default.INSTANCE.ReLaunchOptions)&&t.query&&t.query.inviter)i.default.INSTANCE.showInvitePanelAsInvitee(t.query.inviter);else{var e=Partner.getLaunchQuery();e.inviter&&i.default.INSTANCE.showInvitePanelAsInvitee(e.inviter)}else if(l.Home.OpenHomeFrom===c.OpenHomeFrom.UI_PLAY){var t;(t=d.default.INSTANCE.ReLaunchOptions)&&t.query&&t.query.inviter&&i.default.INSTANCE.showInvitePanelAsInvitee(t.query.inviter)}this.tex=new cc.Texture2D;var o=new cc.Node;o.parent=this.node,this.display=o.addComponent(cc.Sprite),this.display.node.setPosition(0,0),this.display.node.setLocalZOrder(100),this.display.node.active=!1,0==l.Home.DataPlayer.Guide?this.activePvpTeach():(l.Home.OpenHomeFrom===c.OpenHomeFrom.UI_GUIDE&&this.handleStartMatch(),this.showHead())}else s.default.INSTANCE.onSocketClose()},e.prototype.showHead=function(){var e=cc.instantiate(this.pHeadPerfab);e.setPosition(0,0),e.parent=this.nodHead,e.getComponent("PlaymateHead").HeadUrl=l.Home.DataPlayer.MyHeadUrl},e.prototype.activePvpTeach=function(){var e=new v.PPlaymate;e.id=1,e.name="我是电脑";var t=Math.floor(5*(Math.random()+1));e.headImg="head_"+t+".png",e.sex=1,e.star=0,h.Home.DataRoom.bluId=l.Acc.PlayerId,h.Home.DataRoom.opponentPlaymate=e,u.default.INSTANCE.loadScene("bgStory")},e.prototype.activePvpAi=function(){l.Home.DataPlayer.IsMatching&&(y.default.stopMusic(),this.scheduleOnce(function(){cc.director.loadScene("game",function(){m.default.INSTANCE.PlayUI.layerGame.pvpAi=!0,m.default.INSTANCE.newRound(null)})}))},e.prototype.showCommendatoryIcon=function(){var o=this,e=l.Home.DataPlayer.CommendatoryData[0].push_icon;cc.loader.load(e,function(e,t){"HomeUI"===u.default.INSTANCE.RootUI.uiName()&&(e?o.btnCommendatory.node.active=!1:(o.btnCommendatory.node.active=!0,o.btnCommendatory.node.getChildByName("iconSprite").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t)))})},e.prototype.onDestroy=function(){i.default.INSTANCE.HomeUI=null},e.prototype.uiName=function(){return"HomeUI"},e.prototype.update=function(e){var t=new Date,o=parseInt(String(t.getTime()/1e3))-l.Home.TimeOffset,n=parseInt(l.Home.DataPlayer.EnergyFullTime),i=n-o,r=l.Home.DataPlayer.FortuneEnergy;if(this.energyCount.string=r+"",0!=n){var a=i%300,s=parseInt(a/60+"")+"";s=1<s.length?s:"0"+s;var c=parseInt(a%60+"")+"";c=1<c.length?c:"0"+c,this.energyTimer.string=s+":"+c}else this.energyTimer.string="已满"},e.prototype.updateSubDomainCanvas=function(){var e=Partner.getSharedCanvas();if(e){var t=this.tex.getContentSize(),o=t.width*(1280/t.height);this.tex.initWithElement(e),this.tex.handleLoadedTexture(),this.display.spriteFrame=new cc.SpriteFrame(this.tex),this.display.node.setContentSize(o,1280)}},e.prototype.onTestDomainCanvas=function(){var e={name:"ShowRank"};e.userInfo=Partner.userInfo,e.honorConf={},Partner.sendDomainMsg(e)},e.prototype.handleCancelMatch=function(){u.default.INSTANCE.btnAudio_1(),this.doCancelMatch()},e.prototype.doCancelMatch=function(){l.Home.DataPlayer.IsMatching=!1,l.Home.DataPlayer.IsMatching&&(this.unscheduleAllCallbacks(),i.default.INSTANCE.makeInvisibleRequest())},e.prototype.handleStartMatch=function(){return __awaiter(this,void 0,void 0,function(){var t,o=this;return __generator(this,function(e){return(t=new p.PlayerClickC2S).point=1,f.default.SendMsg(t),l.Home.OpenHomeFrom=c.OpenHomeFrom.UI_PLAY,l.Home.DataPlayer.IsMatching=!0,u.default.INSTANCE.ForceWaiting(),cc.loader.loadRes("prefab/home/LayerMatch",cc.Prefab,function(e,t){cc.instantiate(t).parent=o.node,i.default.INSTANCE.makeMatchRequest(),u.default.INSTANCE.CancelWaiting()}),[2]})})},e.prototype.changeMatchBtn=function(){l.Home.DataPlayer.IsMatching},e.prototype.handleInviteFriend=function(){u.default.INSTANCE.btnAudio_1(),l.Home.DataPlayer.IsMatching&&this.doCancelMatch();var e=new a.RoomInviteRequestC2S;f.default.SendMsg(e)},e.prototype.handleSign=function(){this.toast("暂未开放")},e.prototype.handleSetting=function(){this.toast("暂未开放")},e.prototype.handleBag=function(){this.toast("暂未开放")},e.prototype.handleRank=function(){u.default.INSTANCE.btnAudio_1(),i.default.INSTANCE.showRankPanel()},e.prototype.handleShop=function(){this.toast("暂未开放")},e.prototype.handleAchievement=function(){u.default.INSTANCE.btnAudio_1(),i.default.INSTANCE.showAchievementlayer()},e.prototype.onMatchPlayCreate=function(){this.node.getChildByName("LayerMatch").getComponent("LayerMatch").setOpponentInfo()},e.prototype.handleGetServerTime=function(e){},e.prototype.handleGm=function(){var n=this;r.default.loadSingle("prefab/home/GmPanel",function(e,t){var o=cc.instantiate(t);o.parent=n.node,o.setPosition(0,0)})},e.prototype.handlePreview=function(){Partner.previewImg({})},e.prototype.onAppHide=function(){l.Home.DataPlayer.IsMatching&&this.handleCancelMatch()},e.prototype.handleCommendatory=function(){for(var e=l.Home.DataPlayer.CommendatoryData,t=[],o=0;o<e.length;o++)t.push(e[0].push_img);Partner.previewImg(t)},e.prototype.startPVE=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return(t=new p.PlayerClickC2S).point=2,f.default.SendMsg(t),u.default.INSTANCE.directionScene="levelChoose",u.default.INSTANCE.loadScene("levelChoose"),[2]})})},e.prototype.btnListener=function(e){switch(e.target.name){case"btnBack":this.doCancelMatch();break;case"btnStartMatch":this.handleStartMatch();break;case"btnInviteFriend":this.handleInviteFriend();break;case"btnShowRank":this.handleRank();break;case"btnShowShop":this.handleShop();break;case"btnShowAchievement":this.handleAchievement();break;case"btnGm":this.handleGm();break;case"btnPreview":this.handlePreview();break;case"btnCommendatory":this.handleCommendatory();break;case"btnStartPVE":this.startPVE();break;case"btnSign":this.handleSign();break;case"BtnSetting":this.handleSetting();break;case"BtnRank":this.handleRank();break;case"BtnBag":this.handleBag();break;case"BtnShop":this.handleShop();break;case"BtnScore":this.handleAchievement()}},__decorate([b(cc.Node)],e.prototype,"btnStartMatch",void 0),__decorate([b(cc.Node)],e.prototype,"btnStartPVE",void 0),__decorate([b(cc.Button)],e.prototype,"btnInviteFriend",void 0),__decorate([b(cc.Button)],e.prototype,"btnGm",void 0),__decorate([b(cc.Button)],e.prototype,"btnPreview",void 0),__decorate([b(cc.Button)],e.prototype,"btnCommendatory",void 0),__decorate([b(cc.Node)],e.prototype,"nodHead",void 0),__decorate([b(cc.Prefab)],e.prototype,"pHeadPerfab",void 0),__decorate([b(cc.AudioClip)],e.prototype,"audHomeBg",void 0),__decorate([b(cc.Label)],e.prototype,"energyCount",void 0),__decorate([b(cc.Label)],e.prototype,"energyTimer",void 0),e=__decorate([g],e)}(n.default);o.default=S,cc._RF.pop()},{"../../../../dyGame/DYAudio":"DYAudio","../../../common/Defines":"Defines","../../../common/loader/Loader":"Loader","../../../common/net/NetController":"NetController","../../../common/net/NetUtil":"NetUtil","../../../common/net/proto/ProtoType":"ProtoType","../../../common/net/proto/mods/ProtoSectionPlayer":"ProtoSectionPlayer","../../../common/net/proto/mods/ProtoSectionRoom":"ProtoSectionRoom","../../../common/persist/GamePersist":"GamePersist","../../../common/runtime/RuntimeManager":"RuntimeManager","../../../module/Modules":"Modules","../../BaseUI":"BaseUI","../../game/PlayManager":"PlayManager","./HomeManager":"HomeManager"}],IEventDispatcher:[function(e,t,o){"use strict";cc._RF.push(t,"9ca44O6wn1IDIJKoOl/rY/v","IEventDispatcher"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],InternalWebSocket:[function(e,t,o){"use strict";cc._RF.push(t,"ce06bG2GnpB8YdTpTlMNI0s","InternalWebSocket"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.host="",this.port=0}return e.prototype.addCallbacks=function(e,t,o,n,i){this.onConnect=e,this.onClose=t,this.onSocketData=o,this.onError=n,this.thisObject=i},e.prototype.connect=function(e,t){this.port=t,this.host=e;var o="ws://"+this.host+":"+this.port;this.socket=new WebSocket(o),this.socket.binaryType="arraybuffer",this._bindEvent()},e.prototype.connectByUrl=function(e){this.socket=new WebSocket(e),this.socket.binaryType="arraybuffer",this._bindEvent()},e.prototype.send=function(e){this.socket.send(e)},e.prototype.close=function(){this.socket.close()},e.prototype._bindEvent=function(){var t=this,e=this.socket;e.onopen=function(){t.onConnect&&t.onConnect.call(t.thisObject)},e.onclose=function(){t.onClose&&t.onClose.call(t.thisObject)},e.onerror=function(){t.onError&&t.onError.call(t.thisObject)},e.onmessage=function(e){t.onSocketData&&t.onSocketData.call(t.thisObject,e.data)}},e}();o.default=n,cc._RF.pop()},{}],InviteDevConfirm:[function(e,t,o){"use strict";cc._RF.push(t,"e4eb906kwBCQ7ZK4kKd/TWi","InviteDevConfirm"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../../common/persist/GamePersist"),i=e("../HomeManager"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.btnConfirm=null,e}return __extends(e,t),e.prototype.start=function(){this.btnConfirm.node.on(cc.Node.EventType.TOUCH_END,this.handleConfirm,this)},e.prototype.onDestroy=function(){},e.prototype.setInviteUrl=function(e){this.label.string=e},e.prototype.handleConfirm=function(){n.default.INSTANCE.btnAudio_1(),Partner.copyToClipboard(this.label.string),i.default.INSTANCE.showInvitePanel(),this.node.destroy()},__decorate([s(cc.Label)],e.prototype,"label",void 0),__decorate([s(cc.Button)],e.prototype,"btnConfirm",void 0),e=__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../../../../common/persist/GamePersist":"GamePersist","../HomeManager":"HomeManager"}],InvitePanel:[function(e,t,o){"use strict";cc._RF.push(t,"d0bc2UBkyZL4I2Q/FFLc7/C","InvitePanel"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../HomeManager"),i=e("../../../../module/Modules"),r=e("../../../../common/net/proto/ProtoDispatcher"),a=e("../../../../common/net/proto/mods/ProtoSectionRoom"),s=e("../../../../common/persist/GamePersist"),c=e("../../../../common/net/NetUtil"),l=e("../../../game/PlayDefine"),d=e("../../../prefab/PlayPlaymateHead"),u=cc._decorator,h=u.ccclass,p=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnStartPlay=null,e.prefabPlaymateHead=null,e.btnCloseInvite=null,e.btnNewInvite=null,e.btnNewGame=null,e.nodeRoomOpen=null,e.nodeRoomClose=null,e.nodeInviteWaiting=null,e.nodeInviteCreate=null,e.nodeHeadLayer=null,e.waitingTipsLabel=null,e.nodeMyHead=null,e.nodeOpponentHead=null,e.inviteeId=0,e.inviterParam="",e}return __extends(e,t),o=e,Object.defineProperty(e.prototype,"InviteeId",{get:function(){return this.inviteeId},set:function(e){this.inviteeId=e},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){this.btnNewInvite.node.on(cc.Node.EventType.TOUCH_END,this.handleNewInvite,this),this.btnStartPlay.node.on("click",this.onStartPlay,this),this.btnCloseInvite.node.on(cc.Node.EventType.TOUCH_END,this.onCloseInvitePage,this),this.btnNewGame.node.on(cc.Node.EventType.TOUCH_END,this.onCloseInvitePage,this)},e.prototype.start=function(){this.btnStartPlay.interactable=!1,this.btnStartPlay.node.getChildByName("grayLabel").active=!0,this.InviteStatus=o.INVITE_WAITING,this.nodeMyHead=this.makePlaymateHead(-150,250),this.nodeOpponentHead=this.makePlaymateHead(150,250),this.showHeadImg(this.nodeMyHead,l.PlaySide.RED,i.Home.PlayerHeadUrl,i.Home.PlayerName,i.Home.PlayerSex)},e.prototype.onDestroy=function(){n.default.INSTANCE.InvitePanel=null},e.prototype.makeInivterInfoRequest=function(e){if(this.inviteeId===i.Home.PlayerId){this.inviterParam=e,r.RoomDispatcher.on(a.RoomInviterS2C.EVENT_NAME,this.onReciveInviterInfo,this);var t=new a.RoomInviterC2S;t.inviterParam=e,c.default.SendMsg(t)}},e.prototype.onPlayCreate=function(){this.InviteStatus=o.INVITE_CREATE,this.waitingTipsLabel.node.active=!1;var e=this.btnStartPlay.node.getChildByName("Label"),t=this.btnStartPlay.node.getChildByName("grayLabel");this.inviteeId===i.Home.PlayerId?(this.makeConfirmRequest(),this.btnStartPlay.node.active=!0,this.btnStartPlay.interactable=!1,e.active=!1,t.active=!0,t.getComponent(cc.Label).string="等待对方开始"):(this.btnStartPlay.node.active=!0,this.btnStartPlay.interactable=!0,e.active=!0,t.active=!1,e.getComponent(cc.Label).string="开始游戏",this.showHeadImg(this.nodeOpponentHead,l.PlaySide.BLU,i.Home.OpponentHeadUrl,i.Home.OpponentName,i.Home.OpponentSex))},e.prototype.onCloseInvitePage=function(){s.default.INSTANCE.btnAudio_1(),n.default.INSTANCE.makeInvisibleRequest(),this.node.destroy()},e.prototype.onOpponentLeave=function(e){s.default.INSTANCE.Toast("对方离开"),this.inviteeId===i.Home.PlayerId?this.InviteStatus=o.INIVTE_CLOSE:(this.InviteStatus=o.INVITE_WAITING,this.btnStartPlay.interactable=!1,this.btnStartPlay.node.getChildByName("grayLabel").active=!0,this.nodeOpponentHead.destroy(),this.nodeOpponentHead=this.makePlaymateHead(150,250))},e.prototype.setOpponentInfo=function(e){},Object.defineProperty(e.prototype,"InviteStatus",{set:function(e){if(this.inviteStatus!==e){this.inviteStatus;this.inviteStatus=e,this.switchNodeActive()}},enumerable:!0,configurable:!0}),e.prototype.onStartPlay=function(){cc.log("100"),s.default.INSTANCE.btnAudio_1(),this.makeConfirmRequest()},e.prototype.onReciveInviterInfo=function(e){var t=e.detail;if(t.inviterParam===this.inviterParam){r.RoomDispatcher.off(a.RoomInviterS2C.EVENT_NAME,this.onReciveInviterInfo,this);var o=t.playmate;this.showHeadImg(this.nodeOpponentHead,l.PlaySide.BLU,o.headImg,o.name,o.sex),this.makePlayWithRequest(t.inviterParam)}},e.prototype.makePlayWithRequest=function(e){var t=new a.RoomPlayWithC2S;t.inviteeParam=e,c.default.SendMsg(t),r.RoomDispatcher.on(a.RoomPlayWithS2C.EVENT_NAME,this.onPlayWithReceived,this)},e.prototype.onPlayWithReceived=function(e){r.RoomDispatcher.off(a.RoomPlayWithS2C.EVENT_NAME,this.onPlayWithReceived,this),0<e.detail.roomId||(this.InviteStatus=o.INIVTE_CLOSE)},e.prototype.switchNodeActive=function(){this.nodeRoomOpen.active=this.inviteStatus!==o.INIVTE_CLOSE,this.nodeRoomClose.active=this.inviteStatus===o.INIVTE_CLOSE,this.waitingTipsLabel.node.active=this.inviteStatus!==o.INIVTE_CLOSE,this.nodeInviteWaiting.active=this.inviteStatus===o.INVITE_WAITING},e.prototype.makeConfirmRequest=function(){var e=new a.RoomPlayConfirmC2S;c.default.SendMsg(e)},e.prototype.handleNewInvite=function(){s.default.INSTANCE.btnAudio_1();var e=new a.RoomInviteRequestC2S;c.default.SendMsg(e)},e.prototype.showHeadImg=function(e,t,o,n,i){var r=d.default.getComponent(e);r.setPlaymate(o),r.setColorFrame(t),r.setName(n),r.setSex(i)},e.prototype.makePlaymateHead=function(e,t){var o=cc.instantiate(this.prefabPlaymateHead);return o.parent=this.nodeHeadLayer,o.setPosition(e,t),o},e.INVITE_WAITING=1,e.INVITE_CREATE=2,e.INIVTE_CLOSE=3,__decorate([p(cc.Button)],e.prototype,"btnStartPlay",void 0),__decorate([p(cc.Prefab)],e.prototype,"prefabPlaymateHead",void 0),__decorate([p(cc.Button)],e.prototype,"btnCloseInvite",void 0),__decorate([p(cc.Button)],e.prototype,"btnNewInvite",void 0),__decorate([p(cc.Button)],e.prototype,"btnNewGame",void 0),__decorate([p(cc.Node)],e.prototype,"nodeRoomOpen",void 0),__decorate([p(cc.Node)],e.prototype,"nodeRoomClose",void 0),__decorate([p(cc.Node)],e.prototype,"nodeInviteWaiting",void 0),__decorate([p(cc.Node)],e.prototype,"nodeInviteCreate",void 0),__decorate([p(cc.Node)],e.prototype,"nodeHeadLayer",void 0),__decorate([p(cc.Label)],e.prototype,"waitingTipsLabel",void 0),e=o=__decorate([h],e);var o}(cc.Component);o.default=f,cc._RF.pop()},{"../../../../common/net/NetUtil":"NetUtil","../../../../common/net/proto/ProtoDispatcher":"ProtoDispatcher","../../../../common/net/proto/mods/ProtoSectionRoom":"ProtoSectionRoom","../../../../common/persist/GamePersist":"GamePersist","../../../../module/Modules":"Modules","../../../game/PlayDefine":"PlayDefine","../../../prefab/PlayPlaymateHead":"PlayPlaymateHead","../HomeManager":"HomeManager"}],LanguageData:[function(e,t,o){"use strict";cc._RF.push(t,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var n=e("polyglot.min"),i=null;function r(e){return window.i18n.languages[e]}function a(e){e&&(i?i.replace(e):i=new n({phrases:e,allowMissing:!0}))}window.i18n||(window.i18n={languages:{},curLang:""}),t.exports={init:function(e){if(!e||e!==window.i18n.curLang){var t=null;e?(t=r(e),window.i18n.curLang=e):t=r(window.i18n.curLang),a(t)}},t:function(e,t){if(i)return i.t(e,t)},inst:i,updateSceneRenderers:function(){for(var e=cc.director.getScene().children,t=[],o=0;o<e.length;++o){var n=e[o].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(t,n)}for(var i=0;i<t.length;++i){t[i].updateLabel()}for(var r=[],a=0;a<e.length;++a){var s=e[a].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(r,s)}for(var c=0;c<r.length;++c){r[c].updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],LayerGame_pve:[function(e,t,o){"use strict";cc._RF.push(t,"7359exGHTVNfZfzXqifmr8+","LayerGame_pve"),Object.defineProperty(o,"__esModule",{value:!0});var r=e("../NodePool"),A=e("../PlayDefine"),N=e("../GameData"),v=e("./PanelHeader_pve"),I=e("../Board"),_=e("../../../../dyGame/DYNotify"),n=e("../../../common/net/proto/mods/ProtoSectionPlay"),i=e("../../../common/net/NetUtil"),g=e("./StateMgr"),a=e("../../../common/Defines"),w=e("../Algorithm"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfbScore=null,e.pfbMask=null,e.pfbBlock=null,e.pfbBomb=null,e.pfbObstacle=null,e.pfbWall=null,e.pfbTableware=null,e.pfbTransport=null,e.pfbPs=null,e.pfbGate=null,e.pfbBonusBall=null,e.pfbTileBg=null,e.panelTile=null,e.panelScore=null,e.panelParticle=null,e.panelTrickDown=null,e.panelTrickUp=null,e.panelObjective=null,e.panelGuide=null,e.panelHeader=null,e.nodBombOneColor=null,e.spritegrayBg=null,e.panelGrid=null,e.spfTileBg=null,e.spfTileBgLight=null,e.PlayUI=null,e.remindTime=0,e.oneSec=0,e.time=0,e.count=0,e.lastArr=[],e.gridArr=[],e.arr=[],e.tiles=[],e.tileBgs=[],e.actionList=[],e.hadRemind=!1,e.canTouch=!0,e.oneColorActionOver=!0,e.bonusCallBack=null,e.gameStat=null,e.nodZhazhiji=null,e.bombColors=[],e.model=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.panelBonus=this.node.getChildByName("panelBonus"),N.default.gameBegan=!1},e.prototype.start=function(){},e.prototype.initObjective=function(){this.panelObjective.active=!0;var e=this.panelObjective.getChildByName("nodPanel");e.stopAllActions(),e.x=-720;for(var t=e.getChildByName("nodObjectives"),o=0;o<t.children.length;++o)t.children[o].active=!1;var n=0;for(o=0;o<this.panelHeader.nodObjective.children.length;++o){if(this.panelHeader.nodObjective.children[o].active)n++,t.children[o].active=!0,cc.instantiate(this.panelHeader.nodObjective.children[o].getChildByName("sprite").children[0]).parent=t.children[o].getChildByName("sprite"),t.children[o].getChildByName("labObjective").getComponent(cc.Label).string=this.panelHeader.nodObjective.children[o].getChildByName("labObjective").getComponent(cc.Label).string}t.width=1==n?150:300},e.prototype.panelObjectiveAction=function(){var e=this,t=this.panelObjective.getChildByName("nodPanel"),o=cc.sequence(cc.moveTo(.5,20,0),cc.moveTo(.2,0,0),cc.delayTime(1),cc.moveTo(.5,720,0),cc.callFunc(function(){e.panelObjective.active=!1,e.panelGuide.getComponent("panelGuide_pve").showGuide()}));t.runAction(o)},e.prototype.init=function(e,t){this.PlayUI=e,this.model=t},e.prototype.initData=function(){g.default.INSTANCE.init(),this.gameStat=A.GAME_STAT.GAMEING,this.remindTime=0,this.oneSec=0,this.time=0,this.count=0,this.obstacleCnt=0,this.lastArr=[],this.gridArr=[],this.arr=[],this.tiles=[],this.tileBgs=[],this.actionList=[],this.hadRemind=!1,this.bombColors=[],this.canTouch=!0,this.hadAudAreaPlay=!0,this.hadAudColPlay=!0,this.hadAudOneColorPlay=!0,this.panelBonus.active=!1},e.prototype.loadLevelData=function(){I.default.INSTANCE.initMap(N.default.curLevel),this.initData(),this.panelHeader.init(this),this.initMap(),this.initObjective()},e.prototype.gameBegin=function(){N.default.gameBegan=!0,N.default.gameModel=2,this.panelObjectiveAction()},e.prototype.tileBgEffect=function(e,t,o,n){var i=this;this.tileBgs[t]&&this.tileBgs[t][o]&&(0==e?(this.tileBgs[t][o].getChildByName("sprLight").stopAllActions(),this.tileBgs[t][o].getChildByName("sprLight").opacity=200,this.unschedule(this.tileBgs[t][o].cb),this.tileBgs[t][o].cb=function(){i.tileBgs[t][o].getChildByName("sprLight").runAction(cc.fadeOut(n))},this.scheduleOnce(this.tileBgs[t][o].cb,0)):1==e||2==e&&(this.tileBgs[t][o].getChildByName("sprLight").stopAllActions(),this.tileBgs[t][o].getChildByName("sprLight").opacity=120,this.unschedule(this.tileBgs[t][o].cb),this.tileBgs[t][o].cb=function(){i.tileBgs[t][o].getChildByName("sprLight").runAction(cc.fadeOut(n))},this.scheduleOnce(this.tileBgs[t][o].cb,0)))},e.prototype.initTileBg=function(){this.panelGrid.removeAllChildren();for(var e=0;e<I.default.INSTANCE.GRID.length;++e){this.tileBgs[e]=[];for(var t=0;t<I.default.INSTANCE.GRID[0].length;++t)if(I.default.INSTANCE.GRID[e][t]!=A.GRID_TYPE.EMPTY){var o=cc.instantiate(this.model.pfbTileBg);(this.tileBgs[e][t]=o).parent=this.panelGrid,o.setPosition(80*(e-4)+40,80*t+40)}}},e.prototype.initMap=function(){this.model.initFreeNodes(),this.panelTile.removeAllChildren(),this.panelTrickDown.removeAllChildren(),this.panelParticle.removeAllChildren(),this.hadRemind=!1;for(var e=0;e<I.default.INSTANCE.GRID.length;++e){this.tiles[e]=[];for(var t=0;t<I.default.INSTANCE.GRID[e].length;++t)this.tiles[e][t]=null}this.initTileBg();for(var o=N.default.levelData.tile.empty||[],n=N.default.levelData.tile.block||[],i=N.default.levelData.tile.bomb||[],r=N.default.levelData.tile.leaf||[],a=N.default.levelData.tile.wall||[],s=N.default.levelData.tile.tableware,c=0;c<o.length;++c){var l=Math.floor(o[c]/(this.tiles.length+1)),d=o[c]%this.tiles[0].length;this.tiles[l][d]&&(this.tiles[l][d].getComponent("Block").destroyTile(function(){},!1),this.tiles[l][d]=null)}for(c=0;c<n.length;++c){var u=Math.floor(n[c].index/(this.tiles.length+1)),h=n[c].index%this.tiles[0].length;this.spawnBlock(u,h,n[c].type)}for(c=0;c<i.length;++c){var p=Math.floor(i[c].index/(this.tiles.length+1)),f=i[c].index%this.tiles[0].length;i[c].type===A.BOMB_TYPE.BOMB_ONE_COLOR?this.spawnBomb(p,f,i[c].type,A.BLOCK_COLOR.BLUE):this.spawnBomb(p,f,i[c].type)}for(c=0;c<r.length;++c){var m=Math.floor(r[c].index/(this.tiles.length+1)),y=r[c].index%this.tiles[0].length;this.spawnLeaf(m,y,A.LEAF_TYPE.TYPE_1,!1)}for(c=0;c<a.length;++c){var v=Math.floor(a[c].index/(this.tiles.length+1)),_=a[c].index%this.tiles[0].length;this.spawnWall(v,_,a[c].type)}for(c=0;c<s.length;++c){var g=Math.floor(s[c].index/(this.tiles.length+1)),b=s[c].index%this.tiles[0].length;this.spawnTableware(g,b,s[c].type,!1)}for(e=0;e<this.tiles.length;++e)for(t=0;t<this.tiles[e].length;++t)if(I.default.INSTANCE.GRID[e][t]!=A.GRID_TYPE.EMPTY&&!this.tiles[e][t])for(var S=0,T=0;;){if(1e6<=S)return;S++;var P=new Array,C=new Array;if(T=Math.floor(Math.random()*N.default.levelData.blockcount)+1,w.scanAround(e,t,-1,-1,T,P,C,this.tiles),P.length<A.MAX_MATCH){this.spawnBlock(e,t,T);break}}for(e=0;e<this.tiles.length;++e)for(t=0;t<this.tiles[e].length;++t)if(I.default.INSTANCE.GRID[e][t]==A.GRID_TYPE.TRANSPORT){var E=cc.instantiate(this.model.pfbTransport);E.scaleX=-1,E.parent=this.panelTrickDown,E.setPosition(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2),E.setPosition(80*(e-4)+40,80*t+40)}this.randomItem(),this.gridArr=[];for(e=0;e<this.tiles.length;++e)this.gridArr[e]=[],this.moveOneLine(e,0,this.gridArr[e],!0);console.log(this.gridArr)},e.prototype.randomItem=function(){for(var e=function(e){for(var n=[],t=0;t<h.tiles.length;++t)for(var o=0;o<h.tiles[t].length;++o)h.tiles[t][o]&&"Block"==h.tiles[t][o].name&&n.push(t+"#"+o);var i=[];h.randomMore(N.default.levelData.randomItem[e].count,n.length,i,function(e){var t=n[e].split("#")[0],o=n[e].split("#")[1];return 0==o||I.default.INSTANCE.GRID[t][o-1]==A.GRID_TYPE.EMPTY});for(var r=0,a=0;a<N.default.levelData.randomItem[e].type.length;++a)for(var s=0;s<N.default.levelData.objective.length;++s)N.default.levelData.randomItem[e].tileType==N.default.levelData.objective[s].tileType&&N.default.levelData.randomItem[e].type[a]==N.default.levelData.objective[s].type&&(r+=N.default.levelData.objective[s].count);e:for(a=0;a<i.length;++a){t=n[i[a]].split("#")[0],o=n[i[a]].split("#")[1];for(var c=0,l=Math.floor(Math.random()*r)+1,d=0;d<N.default.levelData.randomItem[e].type.length;++d)for(var u=0;u<N.default.levelData.objective.length;++u)if(N.default.levelData.randomItem[e].tileType==N.default.levelData.objective[u].tileType&&N.default.levelData.randomItem[e].type[d]==N.default.levelData.objective[u].type&&l<=(c+=N.default.levelData.objective[u].count)){h.spawnLeaf(t,o,N.default.levelData.objective[u].type,!1);continue e}}},h=this,t=0;t<N.default.levelData.randomItem.length;++t)e(t)},e.prototype.operateLogic=function(e,t,o,n,i,r){void 0===r&&(r=!1),g.default.INSTANCE.canOperate()&&this.gameStat==A.GAME_STAT.GAMEING&&(this.nodZhazhiji=null,g.default.INSTANCE.isTransportBegin=!1,o==A.TILE_TYPE.BLOCK?this.destroyBlock(e,t,n):o==A.TILE_TYPE.BOMB&&this.ignite(e,t,n,r))},e.prototype.ignite=function(e,t,o,n){switch(void 0===n&&(n=!1),o){case A.BOMB_TYPE.BOMB_ROW:this.panelHeader.panelGuide.guide(),this.bombRow(e,t,n);break;case A.BOMB_TYPE.BOMB_COLUMN:this.panelHeader.panelGuide.guide(),this.bombColumn(e,t,n);break;case A.BOMB_TYPE.BOMB_AROUND:this.panelHeader.panelGuide.guide(),this.bombAround(e,t,n);break;case A.BOMB_TYPE.BOMB_ONE_COLOR:this.panelHeader.panelGuide.guide(),this.bombColor(e,t,n)}},e.prototype.getScore=function(e,t,o){if(e<=1)var n=40;else n=20*(e+2)*(e-1);var i=r.default.getNodeScore();i.parent=this.panelScore,i.getComponent("ScoreMsg").setMessage(e,n,t,o),this.panelHeader.getScore(n)},e.prototype.destroyBlock=function(f,m,y){return __awaiter(this,void 0,void 0,function(){var t,o,n,i,r,a,s,c,l,d,u,h,p;return __generator(this,function(e){switch(e.label){case 0:if((t=this).stopRemindAction(),o=new Array,n=new Array,w.scanAround(f,m,-1,-1,y,o,n,this.tiles),!(1<o.length))return[3,11];if(this.getScore(o.length,f,m),this.hadRemind=!0,this.remindTime=0,!(5<=o.length))return[3,8];for(l in this.PlayUI.Audio.spawnBomb(),N.default.stepSpawnPet+=o.length,N.default.stepSpawnBug+=o.length,this.canTouch=!1,g.default.INSTANCE.isComposeOver=!1,this.panelHeader.addStep(),i=void 0,o)d=o[l].split("#")[0],u=o[l].split("#")[1],this.tiles[d][u].stopAllActions(),d==f&&u==m&&(this.tileBgEffect(0,d,u,.8),(i=this.tiles[d][u]).zIndex=1001);for(l in r=i.getComponent("Block").type,a=[],o)d=o[l].split("#")[0],u=o[l].split("#")[1],this.affectAround(d,u),this.tileBgEffect(0,d,u,.8),this.tiles[d][u]!=i&&(this.tiles[d][u].zIndex=1e3),s=cc.sequence(cc.scaleTo(.1,1.1),cc.delayTime(.1),cc.moveTo(.2,i.getPosition()),cc.callFunc(function(e){e.getComponent("Block").destroyTile(null,!1)}.bind(t,this.tiles[d][u]),this)),w.addAction(a,this.tiles[d][u],s);return[4,w.runActions(a)];case 1:return e.sent(),9<=o.length?[4,t.spawnBomb(f,m,A.BOMB_TYPE.BOMB_ONE_COLOR,r)]:[3,3];case 2:return e.sent(),[3,7];case 3:return 7<=o.length?[4,t.spawnBomb(f,m,A.BOMB_TYPE.BOMB_AROUND)]:[3,5];case 4:return e.sent(),[3,7];case 5:return[4,t.spawnBomb(f,m,A.BOMB_TYPE.BOMB_COLUMN)];case 6:e.sent(),e.label=7;case 7:return g.default.INSTANCE.isComposeOver=!0,_.default.post(A.GET_OBJECTIVE),this.moveAllTileDown(!0),N.default.levelData.grid.transport.length<=0&&(this.canTouch=!0),[3,10];case 8:for(l in g.default.INSTANCE.isBlockMatchOver=!1,this.panelHeader.addStep(),this.PlayUI.Audio.strip(),c=v.default.INSTANCE.isObjectiveDone(A.TILE_TYPE.BLOCK,y),this.blockArrLength=o.length,o)d=o[l].split("#")[0],u=o[l].split("#")[1],this.affectAround(d,u),w.playParticle(d,u,t.tiles[d][u],this.panelParticle,A.PARTICAL_TYPE.BLOCK),c?this.tileBgEffect(0,d,u,.6):this.tileBgEffect(0,d,u,.4),this.tiles[d][u].getComponent("Block").recovery();return h=.5,c&&(h=.8),[4,w.delay(h)];case 9:e.sent(),g.default.INSTANCE.isBlockMatchOver=!0,this.moveAllTileDown(!0),N.default.stepSpawnPet+=o.length,N.default.stepSpawnBug+=o.length,e.label=10;case 10:return[3,12];case 11:if(cc.log("不能消除"),!this.tiles[f][m])return[2];this.tiles[f][m].stopActionByTag(3),p=cc.sequence(cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.2,.9,.9),cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.2,.9,.9),cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.2,.9,.9),cc.scaleTo(.15,1.05,1.05),cc.scaleTo(.05,1,1),cc.delayTime(1.5)),this.tiles[f][m].runAction(p),p.setTag(3),e.label=12;case 12:return[2]}})})},e.prototype.affectAround=function(e,t){e=Number(e),t=Number(t),0<=e-1&&e-1<8&&0<=t&&t<9&&this.destroyprop(e-1,t),0<=e+1&&e+1<8&&0<=t&&t<9&&this.destroyprop(e+1,t),0<=e&&e<8&&0<=t+1&&t+1<9&&this.destroyprop(e,t+1),0<=e&&e<8&&0<=t-1&&t-1<9&&this.destroyprop(e,t-1)},e.prototype.destroyprop=function(e,t){if(0!=I.default.INSTANCE.GRID[e][t]&&this.tiles[e][t]){var o=null;if("Tableware"==this.tiles[e][t].name){if((o=this.tiles[e][t].getComponent("Tableware")).type==A.TABLEWARE_TYPE.TYPE_3)return;w.playParticle(e,t,this.tiles[e][t],this.panelParticle,A.PARTICAL_TYPE.TABLEWARE),w.playParticle(e,t,this.tiles[e][t],this.panelParticle,A.PARTICAL_TYPE.TABLEWARE)}else"Wall"==this.tiles[e][t].name&&(o=this.tiles[e][t].getComponent("Wall"),w.playParticle(e,t,this.tiles[e][t],this.panelParticle,A.PARTICAL_TYPE.WALL));o&&o.affected()}},e.prototype.bombColumn=function(l,d,u){return __awaiter(this,void 0,void 0,function(){var a,t,o,n,s,i,r,c;return __generator(this,function(e){switch(e.label){case 0:if(a=this,g.default.INSTANCE.isBombOver=!1,!(t=this.tiles[l][d]))return[2];for(o=!1,c=0;c<this.actionList.length;++c)this.actionList[c]==t&&(o=!0);if(o)return[2];if(this.actionList.push(t),!(n=t.getComponent("Bomb"))||n.type!=A.BOMB_TYPE.BOMB_COLUMN)return[2];this.stopRemindAction(),this.remindTime=0,u&&this.panelHeader.addStep(),this.canTouch=!1,this.gameStat==A.GAME_STAT.GAMEING?this.PlayUI.Audio.bombRow():this.hadAudColPlay||(this.hadAudColPlay=!0,this.PlayUI.Audio.bombRow()),t.getComponent(cc.Animation).play("aniBombCol"),s=0,w.bothSiedAct(l,d,this.tiles),i=function(i,r){return __generator(this,function(e){switch(e.label){case 0:return[4,w.delay(.02,function(){if(i<a.tiles[0].length&&I.default.INSTANCE.GRID[l][i]!=A.GRID_TYPE.EMPTY){if(w.playParticle(l,i,a.tiles[l][i],a.panelParticle,A.PARTICAL_TYPE.BOMB_COL),a.tiles[l][i])if(a.tileBgEffect(0,l,i,.8),"Block"==a.tiles[l][i].name)(o=a.tiles[l][i].getComponent("Block")).isDesTroying||(w.playParticle(l,i,a.tiles[l][i],a.panelParticle,A.PARTICAL_TYPE.BLOCK),o.destroyTile(),s++);else if("Tableware"==a.tiles[l][i].name){(o=a.tiles[l][i].getComponent("Tableware")).destroyTile(),w.playParticle(l,i,a.tiles[l][i],a.panelParticle,A.PARTICAL_TYPE.TABLEWARE),a.tiles[l][i]=null}else if("Wall"==a.tiles[l][i].name){(o=a.tiles[l][i].getComponent("Wall")).destroyTile()}else if("Bomb"==a.tiles[l][i].name){if((o=a.tiles[l][i].getComponent("Bomb")).type==A.BOMB_TYPE.BOMB_ONE_COLOR)a.nodZhazhiji?a.nodZhazhiji!=a.tiles[l][i]&&(a.addColor(o.subType),o.ignite(l,i,!1),a.tiles[l][i]=null):(a.addColor(o.subType),a.nodZhazhiji=a.tiles[l][i]);else if(o.type!=A.BOMB_TYPE.BOMB_COLUMN){for(var e=!1,t=0;t<a.actionList.length;++t)a.tiles[l][i]==a.actionList[t]&&(e=!0);e||o.ignite(l,i)}else o.ignite(l,i,!1),a.tiles[l][i]=null}w.bothSiedAct(l,i,a.tiles)}if(0<=r&&I.default.INSTANCE.GRID[l][r]!=A.GRID_TYPE.EMPTY){if(w.playParticle(l,r,a.tiles[l][r],a.panelParticle,A.PARTICAL_TYPE.BOMB_COL),a.tiles[l][r])if(a.tileBgEffect(0,l,r,.8),"Block"==a.tiles[l][r].name)(o=a.tiles[l][r].getComponent("Block")).isDesTroying||(o.destroyTile(),w.playParticle(l,r,a.tiles[l][r],a.panelParticle,A.PARTICAL_TYPE.BLOCK),s++);else if("Tableware"==a.tiles[l][r].name){(o=a.tiles[l][r].getComponent("Tableware")).destroyTile(),w.playParticle(l,r,a.tiles[l][r],a.panelParticle,A.PARTICAL_TYPE.TABLEWARE),a.tiles[l][r]=null}else if("Wall"==a.tiles[l][r].name){(o=a.tiles[l][r].getComponent("Wall")).destroyTile()}else if("Bomb"==a.tiles[l][r].name){var o;if((o=a.tiles[l][r].getComponent("Bomb")).type==A.BOMB_TYPE.BOMB_ONE_COLOR)a.nodZhazhiji?a.nodZhazhiji!=a.tiles[l][r]&&(a.addColor(o.subType),o.ignite(l,r,!1),a.tiles[l][r]=null):(a.addColor(o.subType),a.nodZhazhiji=a.tiles[l][r]);else if(o.type!=A.BOMB_TYPE.BOMB_COLUMN){var n=!1;for(t=0;t<a.actionList.length;++t)a.tiles[l][r]==a.actionList[t]&&(n=!0);n||o.ignite(l,r)}else o.ignite(l,r,!1),a.tiles[l][r]=null}w.bothSiedAct(l,r,a.tiles)}})];case 1:return e.sent(),[2]}})},c=d+1,r=d-1,e.label=1;case 1:return c<a.tiles[0].length||0<=r?[5,i(c,r)]:[3,4];case 2:e.sent(),e.label=3;case 3:return++c,--r,[3,1];case 4:return[4,w.delay(.4)];case 5:for(e.sent(),this.tiles[l][d]=null,c=0;c<a.actionList.length;++c)if(t==a.actionList[c]){a.actionList.splice(c,1),n.destroyTile();break}if(a.getScore(s,l,d),0==a.actionList.length){if(a.gameStat!==A.GAME_STAT.GAMEING)return g.default.INSTANCE.isBombOver=!0,g.default.INSTANCE.isGameOver=!1,a.canTouch=!0,a.igniteBomb(),[2];a.scheduleOnce(function(){if(a.nodZhazhiji){var e=a.nodZhazhiji.getComponent("Bomb");e.ignite(e.x,e.y),a.nodZhazhiji=null}else a.panelHeader.panelGuide.guide(),g.default.INSTANCE.isBombOver=!0,g.default.INSTANCE.isGameOver=!1,a.moveAllTileDown(!0),a.canTouch=!0},.5)}return[2]}})})},e.prototype.bombRow=function(c,l,d){return __awaiter(this,void 0,void 0,function(){var n,t,o,i,r,a,s;return __generator(this,function(e){switch(e.label){case 0:if(n=this,g.default.INSTANCE.isBombOver=!1,t=this.tiles[c][l],this.tiles[c][l]=null,(o=t.getComponent("Bomb")).type!=A.BOMB_TYPE.BOMB_ROW)return[2];for(this.stopRemindAction(),this.remindTime=0,d&&this.panelHeader.addStep(),this.canTouch=!1,i=!1,s=0;s<this.actionList.length;++s)this.actionList[s]==t&&(i=!0);if(i)return[2];this.actionList.push(t),this.PlayUI.Audio.bombRow(),r=function(t,o){return __generator(this,function(e){switch(e.label){case 0:return[4,w.delay(.05,function(){if(0<=t&&I.default.INSTANCE.GRID[t][l]!=A.GRID_TYPE.EMPTY&&(w.playParticle(t,l,n.tiles[t][l],n.panelParticle,A.PARTICAL_TYPE.BOMB_COL),n.tiles[t][l]))if("Block"==n.tiles[t][l].name)(e=n.tiles[t][l].getComponent("Block")).destroyTile(),w.playParticle(t,l,n.tiles[t][l],n.panelParticle,A.PARTICAL_TYPE.BLOCK),n.tiles[t][l]=null;else if("Tableware"==n.tiles[t][l].name){(e=n.tiles[t][l].getComponent("Tableware")).destroyTile(),w.playParticle(t,l,n.tiles[t][l],n.panelParticle,A.PARTICAL_TYPE.TABLEWARE),n.tiles[t][l]=null}else if("Wall"==n.tiles[t][l].name){var e=n.tiles[t][l].getComponent("Wall");w.playParticle(t,l,n.tiles[t][l],n.panelParticle,A.PARTICAL_TYPE.WALL),e.destroyTile()}else if("Bomb"==n.tiles[t][l].name){(e=n.tiles[t][l].getComponent("Bomb")).ignite(t,l),n.tiles[t][l]=null}if(o<n.tiles.length&&I.default.INSTANCE.GRID[o][l]!=A.GRID_TYPE.EMPTY&&(w.playParticle(o,l,n.tiles[o][l],n.panelParticle,A.PARTICAL_TYPE.BOMB_COL),n.tiles[o][l]))if("Block"==n.tiles[o][l].name)(e=n.tiles[o][l].getComponent("Block")).destroyTile(),w.playParticle(o,l,n.tiles[o][l],n.panelParticle,A.PARTICAL_TYPE.BLOCK),n.tiles[o][l]=null;else if("Tableware"==n.tiles[o][l].name){(e=n.tiles[o][l].getComponent("Tableware")).destroyTile(),w.playParticle(t,l,n.tiles[t][l],n.panelParticle,A.PARTICAL_TYPE.TABLEWARE),n.tiles[o][l]=null}else if("Wall"==n.tiles[o][l].name){e=n.tiles[o][l].getComponent("Wall");w.playParticle(o,l,n.tiles[o][l],n.panelParticle,A.PARTICAL_TYPE.WALL),e.destroyTile()}else if("Bomb"==n.tiles[o][l].name){(e=n.tiles[o][l].getComponent("Bomb")).ignite(o,l),n.tiles[o][l]=null}})];case 1:return e.sent(),[2]}})},s=c-1,a=c+1,e.label=1;case 1:return 0<=s||a<n.tiles.length?[5,r(s,a)]:[3,4];case 2:e.sent(),e.label=3;case 3:return--s,++a,[3,1];case 4:for(s=0;s<this.actionList.length;++s)if(t==this.actionList[s]){this.actionList.splice(s,1),o.destroyTile();break}return 0==this.actionList.length&&this.scheduleOnce(function(){this.canTouch=!0,this.moveAllTileDown(!0),g.default.INSTANCE.isBombOver=!0},.5),[2]}})})},e.prototype.bombAround=function(l,d,u){return __awaiter(this,void 0,void 0,function(){var t,o,n,i,r,a,s,c=this;return __generator(this,function(e){switch(e.label){case 0:if(t=this,g.default.INSTANCE.isBombOver=!1,!(o=this.tiles[l][d]))return[2];for(n=!1,i=0;i<this.actionList.length;++i)this.actionList[i]==o&&(n=!0);return n?[2]:(this.actionList.push(o),(r=o.getComponent("Bomb"))&&r.type==A.BOMB_TYPE.BOMB_AROUND?(this.stopRemindAction(),this.remindTime=0,u&&this.panelHeader.addStep(),this.canTouch=!1,this.gameStat==A.GAME_STAT.GAMEING?this.PlayUI.Audio.bombAround():this.hadAudAreaPlay||(this.hadAudAreaPlay=!0,this.PlayUI.Audio.bombAround(),t.scheduleOnce(function(){c.hadAudAreaPlay=!1},.5)),[4,this.bombAroundAnimation(l,d,o)]):[2]);case 1:for(a=e.sent(),t.tiles[l][d]=null,t.getScore(a,l,d),s=0;s<t.actionList.length;++s)o==t.actionList[s]&&t.actionList.splice(s,1);if(0==t.actionList.length){if(t.gameStat!==A.GAME_STAT.GAMEING)return g.default.INSTANCE.isBombOver=!0,g.default.INSTANCE.isGameOver=!1,t.canTouch=!0,t.igniteBomb(),[2];t.scheduleOnce(function(){if(t.nodZhazhiji){var e=t.nodZhazhiji.getComponent("Bomb");e.ignite(e.x,e.y),t.nodZhazhiji=null}else t.panelHeader.panelGuide.guide(),g.default.INSTANCE.isBombOver=!0,g.default.INSTANCE.isGameOver=!1,t.moveAllTileDown(!0),t.canTouch=!0},.3)}return[2]}})})},e.prototype.bombAroundAnimation=function(d,u,h){return __awaiter(this,void 0,void 0,function(){var s,c,l=this;return __generator(this,function(e){return s=this,c=0,[2,new Promise(function(e,t){for(var o=2;-2<=o;--o)for(var n=2;-2<=n;--n){if((0!=o||0!=n)&&s.tiles[d+o]&&s.tiles[d+o][u+n])if(2==o||2==n||-2==o||-2==n?s.tileBgEffect(2,d+o,u+n,.7):s.tileBgEffect(0,d+o,u+n,.9),"Block"==s.tiles[d+o][u+n].name)(i=s.tiles[d+o][u+n].getComponent("Block")).isDesTroying||(c++,i.billowAct(d,u,function(e,t,o){w.playParticle(d+e,u+t,s.tiles[d+e][u+t],s.panelParticle,A.PARTICAL_TYPE.BLOCK),o.destroyTile()}.bind(s,o,n,i)));else if("Tableware"==s.tiles[d+o][u+n].name){(i=s.tiles[d+o][u+n].getComponent("Tableware")).billowAct(d,u,function(e,t,o){w.playParticle(d+e,u+t,s.tiles[d+e][u+t],s.panelParticle,A.PARTICAL_TYPE.TABLEWARE),o.destroyTile(),s.tiles[d+e][u+t]=null}.bind(s,o,n,i))}else if("Wall"==s.tiles[d+o][u+n].name){var i=s.tiles[d+o][u+n].getComponent("Wall");w.playParticle(d+o,u+n,s.tiles[d+o][u+n],s.panelParticle,A.PARTICAL_TYPE.WALL),i.destroyTile()}else if("Bomb"==s.tiles[d+o][u+n].name){(i=s.tiles[d+o][u+n].getComponent("Bomb")).billowAct(d,u,function(e,t,o){if(o.type==A.BOMB_TYPE.BOMB_ONE_COLOR)s.nodZhazhiji?s.nodZhazhiji!=s.tiles[e][t]&&(s.addColor(o.subType),o.ignite(e,t,!1),s.tiles[e][t]=null):(s.addColor(o.subType),s.nodZhazhiji=s.tiles[e][t]);else{for(var n=!1,i=0;i<s.actionList.length;++i)s.tiles[e][t]==s.actionList[i]&&(n=!0);n||(o.ignite(e,t),s.tiles[o.x][o.y]=null)}}.bind(s,d+o,u+n,i))}else if("Obstacle"==s.tiles[d+o][u+n].name){(i=s.tiles[d+o][u+n].getComponent("Obstacle")).billowAct(d,u,function(e,t,o){}.bind(s,o,n,i))}}for(var r,a=0;a<l.actionList.length;++a)h==l.actionList[a]&&(r=h.getComponent(cc.Animation));r.onFire=function(){h.getComponent("Bomb").destroyTile(),setTimeout(function(){e(c)},100)},r.play("aniBombArea")})]})})},e.prototype.addColor=function(o){var n=!1;this.bombColors.forEach(function(e,t){e==o&&(n=!0)}),n||this.bombColors.push(o)},e.prototype.bombColor=function(d,u,h){return __awaiter(this,void 0,void 0,function(){var i,t,o,r,a,s,c,l,n;return __generator(this,function(e){switch(e.label){case 0:if(!(t=(i=this).tiles[d][u]))return[2];if(!(o=t.getComponent("Bomb"))||o.type!=A.BOMB_TYPE.BOMB_ONE_COLOR)return[2];for(this.stopRemindAction(),g.default.INSTANCE.isBombOver=!1,this.remindTime=0,h&&this.panelHeader.addStep(),this.canTouch=!1,i.addColor(o.subType),this.PlayUI.Audio.bombMagnet(),r=[],s=a=0;s<this.tiles.length;s++)for(c=0;c<this.tiles[0].length;c++)!this.tiles[s][c]||this.tiles[s][c]&&"Block"!=this.tiles[s][c].name||(this.tiles[s][c].zIndex=1e3,(l=this.tiles[s][c].getComponent("Block")).isDesTroying||i.bombColors.forEach(function(e,t){if(l.type==e){i.tileBgEffect(0,s,c,1),i.tiles[s][c].zIndex=1001;var o={x:s,y:c,node:i.tiles[s][c]},n=cc.sequence(cc.scaleTo(.1,1.1),cc.delayTime(.1),cc.moveTo(.2,cc.v2(0,300)),cc.callFunc(function(e,t){t.node.getComponent("Block").destroyTile(function(){})},i,o));w.addAction(r,i.tiles[s][c],n),a++}}));return i.oneColorActionOver&&(i.oneColorActionOver=!1,i.nodBombOneColor.active=!0,i.spritegrayBg.active=!0,n=cc.sequence(cc.callFunc(function(){var e=i.nodBombOneColor.getComponent(cc.Animation);i.nodBombOneColor.getChildByName("nodParticle").getComponent(cc.ParticleSystem).resetSystem(),e.play("aniOneColorBomb")}),cc.delayTime(.8),cc.callFunc(function(){i.nodBombOneColor.getComponent(cc.Animation).stop(),i.spritegrayBg.active=!1,i.nodBombOneColor.active=!1,i.oneColorActionOver=!0})),w.addAction(r,i.nodBombOneColor,n)),[4,w.runActions(r)];case 1:return e.sent(),i.bombColors=[],i.tiles[d][u]=null,i.getScore(a,d,u),i.nodZhazhiji=null,o.destroyTile(),i.gameStat!==A.GAME_STAT.GAMEING?(g.default.INSTANCE.isBombOver=!0,g.default.INSTANCE.isGameOver=!1,i.canTouch=!0,i.igniteBomb(),[2]):(i.scheduleOnce(function(){g.default.INSTANCE.isBombOver=!0,g.default.INSTANCE.isGameOver=!1,i.moveAllTileDown(!0),i.canTouch=!0},.1),[2])}})})},e.prototype.moveOneLine=function(e,t,o,n){for(var i=t;i<this.tiles[0].length;++i)if(I.default.INSTANCE.GRID[e][i]!=A.GRID_TYPE.EMPTY){if(I.default.INSTANCE.GRID[e][t]==A.GRID_TYPE.DOWNGATE&&n)return;if(i!=t&&I.default.INSTANCE.GRID[e][i]==A.GRID_TYPE.DOWNGATE)return;if(o.push(e+"#"+i),I.default.INSTANCE.GRID[e][i]==A.GRID_TYPE.UPGATE){for(var r=null,a=0;a<N.default.levelData.grid.gate.length;++a)N.default.levelData.grid.gate[a].upgate==9*e+i&&(r=N.default.levelData.grid.gate[a].downgate);var s=Math.floor(r/9),c=r%9;this.moveOneLine(s,c,o,!1)}}},e.prototype.moveAllTileDown=function(c){return void 0===c&&(c=!0),__awaiter(this,void 0,void 0,function(){var t,o,n,i,r,a,s;return __generator(this,function(e){switch(e.label){case 0:if(this,!g.default.INSTANCE.canAllDown())return[2];for(this.hadRemind=!0,g.default.INSTANCE.isAllDownOver=!1,t=0;t<this.gridArr.length;++t)for(o=0;o<this.gridArr[t].length;++o)if(n=Number(this.gridArr[t][o].split("#")[0]),i=Number(this.gridArr[t][o].split("#")[1]),(!this.tiles[n][i]||"Wall"!=this.tiles[n][i].name)&&null==this.tiles[n][i])for(r=o+1;r<this.gridArr[t].length;r++)if(a=Number(this.gridArr[t][r].split("#")[0]),s=Number(this.gridArr[t][r].split("#")[1]),null!=this.tiles[a][s]){if("Wall"==this.tiles[a][s].name)break;this.tiles[n][i]=this.tiles[a][s],this.tiles[a][s]=null,"Block"==this.tiles[n][i].name?this.tiles[n][i].getComponent("Block").moveTo(n,i,null):"Bomb"==this.tiles[n][i].name?this.tiles[n][i].getComponent("Bomb").moveTo(n,i,null):"Obstacle"==this.tiles[n][i].name?this.tiles[n][i].getComponent("Obstacle").moveTo(n,i,null):"Tableware"==this.tiles[n][i].name&&this.tiles[n][i].getComponent("Tableware").moveTo(n,i,null);break}return this.spawnTile(),[4,w.delay(.8)];case 1:return e.sent(),this.panelHeader.panelGuide.guide(),this.getObstacle(),g.default.INSTANCE.isAllDownOver=!0,c&&this.transport(),this.resetRemindTime(),this.gameOver(),[2]}})})},e.prototype.getObstacle=function(){var e=this;if(g.default.INSTANCE.canCollect())for(var t=0;t<e.tiles.length;++t)for(var o=0;o<e.tiles[0].length;++o)if(e.tiles[t][o]&&"Obstacle"==e.tiles[t][o].name){for(var n=!0,i=o-1;0<=i;--i)I.default.INSTANCE.GRID[t][i]!=A.GRID_TYPE.EMPTY&&(n=!1);if(I.default.INSTANCE.GRID[t][o]==A.GRID_TYPE.DOWNGATE&&(n=!1),n)g.default.INSTANCE.isAnimalDownOver=!1,g.default.INSTANCE.isCollectOver=!1,e.obstacleCnt++,e.tiles[t][o].getComponent("Obstacle").recoveryObstacle(function(){g.default.INSTANCE.isAnimalDownOver=!0,e.moveAllTileDown(!0)},function(){e.obstacleCnt--,e.obstacleCnt<=0&&(g.default.INSTANCE.isCollectOver=!0,e.gameOver())}),e.tiles[t][o]=null,e.PlayUI.Audio.collect()}},e.prototype.transport=function(){return __awaiter(this,void 0,void 0,function(){var c,l,t,d,o,n;return __generator(this,function(e){switch(e.label){case 0:return c=this,g.default.INSTANCE.canTransport()?0<N.default.levelData.grid.transport.length?(g.default.INSTANCE.isTransportOver=!1,g.default.INSTANCE.isTransportBegin=!0,l=null,[4,w.delay(.3)]):[3,3]:[2];case 1:for(e.sent(),this.canTouch=!1,n=0;n<N.default.levelData.grid.transport.length;++n){for(t=0;t<this.tiles.length;++t);l=I.default.INSTANCE.masks[n]}for(d=null,o=function(e){for(var i=N.default.levelData.grid.transport[e].line,t=0,o=0,n=0;n<c.tiles.length;++n)if(I.default.INSTANCE.GRID[n][i]!=A.GRID_TYPE.EMPTY){t=n;break}for(n=c.tiles.length-1;0<=n;--n)if(I.default.INSTANCE.GRID[n][i]!=A.GRID_TYPE.EMPTY){o=n;break}for(n=t;n<=o;++n){if(n==t){d=c.tiles[n][i];var r=cc.instantiate(d);r.parent=l,r.x=40+80*n,r.y=0,c.tiles[n-1]||(c.tiles[n-1]=[]),c.tiles[n-1][i]=r}if(n==o){c.tiles[n][i]=d,c.tiles[n][i].x=c.tiles[n][i].width*(n-4)+c.tiles[n][i].width/2*3;var a=c.tiles[n][i].convertToWorldSpaceAR(c.tiles[n][i].getPosition());c.tiles[n][i].parent=l,c.tiles[n][i].setPosition(c.tiles[n][i].convertToNodeSpaceAR(a))}else c.tiles[n][i]=c.tiles[n+1][i]}var s=function(n){var e=null;"Block"==c.tiles[n][i].name?e=c.tiles[n][i].getComponent("Block"):"Bomb"==c.tiles[n][i].name?e=c.tiles[n][i].getComponent("Bomb"):"Obstacle"==c.tiles[n][i].name&&(e=c.tiles[n][i].getComponent("Obstacle")),e&&(n==t-1?e.moveTo(n+4,-.5,function(){e.game=c,e.destroyTile(function(){},!1)},!1):n==o?e.moveTo(n+4,-.5,function(e,t){var o=e.convertToWorldSpaceAR(e.getPosition());e.parent=this.panelTile,e.setPosition(e.convertToNodeSpaceAR(o)),t.x=n,t.y=i}.bind(c,c.tiles[n][i],e),!1):e.moveTo(n,i,null,!1))};for(n=t-1;n<=o;++n)s(n)},n=0;n<N.default.levelData.grid.transport.length;++n)o(n);return[4,w.delay(.3)];case 2:e.sent(),g.default.INSTANCE.isTransportOver=!0,c.canTouch=!0,c.gameOver(),e.label=3;case 3:return[2]}})})},e.prototype.checkResult=function(){if(this.panelHeader.checkWin())(e=new n.PlayPveFinishC2S).pveId=N.default.curLevel,e.pveWin=1,e.pveScore=N.default.score,Partner.postMsg(3,{valuekey:a.ValueKey.levelScore,score:N.default.score}),i.default.SendMsg(e),_.default.post(A.GAME_WIN);else if(g.default.INSTANCE.isStopOperate&&!this.panelHeader.checkWin()){var e;(e=new n.PlayPveFinishC2S).pveId=N.default.curLevel,e.pveWin=2,e.pveScore=N.default.score,Partner.postMsg(3,{valuekey:a.ValueKey.levelScore,score:N.default.score}),i.default.SendMsg(e),_.default.post(A.GAME_LOST)}},e.prototype.randomMore=function(e,t,o,n){if(!(e<=0||t<e)){for(var i=Math.floor(Math.random()*t),r=0;r<o.length;++r)if(i==o[r])return void this.randomMore(e,t,o,n);n(i)?this.randomMore(e,t,o,n):(o.push(i),0<--e&&this.randomMore(e,t,o,n))}},e.prototype.spawnTile=function(){for(var e=[],t=0;t<this.gridArr.length;++t)for(var o=0;o<this.gridArr[t].length;++o){var n=Number(this.gridArr[t][o].split("#")[0]),i=Number(this.gridArr[t][o].split("#")[1]);if(null==this.tiles[n][i]){for(var r=!0,a=o+1;a<this.gridArr[t].length;++a){var s=Number(this.gridArr[t][a].split("#")[0]),c=Number(this.gridArr[t][a].split("#")[1]);this.tiles[s][c]&&"Wall"==this.tiles[s][c].name&&(r=!1)}r&&e.push(n+"#"+i)}}var l=0,d=0;for(t=0;t<N.default.levelData.objective.length;++t)N.default.levelData.objective[t].tileType==A.TILE_TYPE.TABLEWARE&&N.default.levelData.objective[t].type==A.TABLEWARE_TYPE.TYPE_3&&(l=N.default.levelData.objective[t].count,d=N.default.spawnBugCnt);if(N.default.stepSpawnBug>=A.STEP_SPAWN_BUG&&d<l){var u=Math.floor(N.default.stepSpawnBug/A.STEP_SPAWN_BUG);N.default.stepSpawnBug=N.default.stepSpawnBug%A.STEP_SPAWN_BUG,l-d<u&&(u=u-l+d);var h=[];this.randomMore(u,e.length,h,function(e){return!1});for(t=0;t<h.length;++t){if(_=e[h[t]]){n=_.split("#")[0],i=_.split("#")[1];e[h[t]]=null,this.spawnTableware(n,i,A.TABLEWARE_TYPE.TYPE_3)}}}var p=0,f=0,m=0;for(t=0;t<N.default.levelData.spawnItem.length;++t)if(N.default.levelData.spawnItem[t].tileType==A.TILE_TYPE.LEAF)for(o=0;o<N.default.levelData.spawnItem[t].type.length;++o)for(var y=0;y<N.default.levelData.objective.length;++y)N.default.levelData.spawnItem[t].tileType==N.default.levelData.objective[y].tileType&&N.default.levelData.spawnItem[t].type[o]==N.default.levelData.objective[y].type&&(f+=N.default.levelData.objective[y].count,m+=N.default.spawnLeavesCnt[N.default.levelData.objective[y].type-1],p+=N.default.spawnLeavesCnt[N.default.levelData.objective[y].type-1]-N.default.collectLeavesCnt[N.default.levelData.objective[y].type-1]);if(N.default.stepSpawnPet>=A.STEP_SPAWN_PET&&p<8&&m<f){u=Math.floor(N.default.stepSpawnPet/A.STEP_SPAWN_PET);N.default.stepSpawnPet=N.default.stepSpawnPet%A.STEP_SPAWN_PET,8-p<u&&(u=8-p);var v=f-m;u=Math.min(u,v);h=[];this.randomMore(u,e.length,h,function(e){return!1});for(t=0;t<N.default.levelData.spawnItem.length;++t)if(N.default.levelData.spawnItem[t].tileType==A.TILE_TYPE.LEAF)e:for(o=0;o<h.length;++o){var _;if(_=e[h[o]]){n=_.split("#")[0],i=_.split("#")[1];e[h[o]]=null;for(var g=0,b=0,S=0;S<N.default.levelData.spawnItem[t].type.length;++S)for(y=0;y<N.default.levelData.objective.length;++y)N.default.levelData.spawnItem[t].tileType==N.default.levelData.objective[y].tileType&&N.default.levelData.spawnItem[t].type[S]==N.default.levelData.objective[y].type&&(b+=N.default.levelData.objective[y].count-N.default.spawnLeavesCnt[y]);for(var T=Math.floor(Math.random()*b)+1,P=0;P<N.default.levelData.spawnItem[t].type.length;++P)for(var C=0;C<N.default.levelData.objective.length;++C)if(N.default.levelData.spawnItem[t].tileType==N.default.levelData.objective[C].tileType&&N.default.levelData.spawnItem[t].type[P]==N.default.levelData.objective[C].type&&T<=(g+=N.default.levelData.objective[C].count-N.default.spawnLeavesCnt[C])){this.spawnLeaf(Number(n),Number(i),N.default.levelData.objective[C].type,!0);continue e}}}}for(t=0;t<e.length;++t)if(e[t]){n=e[t].split("#")[0],i=e[t].split("#")[1];this.spawnBlock(Number(n),Number(i))}},e.prototype.spawnBomb=function(a,s,c,l){return __awaiter(this,void 0,void 0,function(){var r=this;return __generator(this,function(e){return[2,new Promise(function(e,t){var o=r.model.popBomb();o.parent!=r.panelTile&&(o.parent=r.panelTile);var n=o.getComponent("Bomb");o.scale=1,o.zIndex=1002;if(n.init(),n.setContentSize(80,80),r.tiles[a][s]&&"Block"==r.tiles[a][s].name&&r.tiles[a][s].getComponent("Block").destroyTile(function(){},!1),r.tiles[a][s]=o,n.game=r,n.type=c,n.setArrPosition(a,s),c==A.BOMB_TYPE.BOMB_ONE_COLOR){n.subType=l;var i=o.getComponent(cc.Animation);i.play("aniSpawnZZJ"),i.onSpawnZZJFinished=function(){n.genBombAnimation(),e()}}else n.genBombAnimation(),e()})]})})},e.prototype.spawnLeaf=function(e,t,o,n){void 0===n&&(n=!0);var i=this.panelHeader.getPositionAR(A.TILE_TYPE.LEAF,o);N.default.spawnLeavesCnt[o-1]++;var r=this.model.popObstacle();r.parent!=this.panelTile&&(r.parent=this.panelTile);var a=r.getComponent("Obstacle");a.type=o,a.collectPosition=i;a.game=this,r.scale=1,r.zIndex=0,a.setContentSize(80,80),n?a.newTile(e,t):a.setArrPosition(e,t),this.tiles[e][t]&&this.tiles[e][t].getComponent("Block").destroyTile(function(){},!1),this.tiles[e][t]=r},e.prototype.spawnBlock=function(e,t,o){var n=this.model.popBlock();n.parent!=this.panelTile&&(n.parent=this.panelTile),n.stopAllActions();var i=(this.tiles[e][t]=n).getComponent("Block");i.init(),i.game=this,n.scale=1,n.zIndex=0;i.setContentSize(80,80);var r=o;r?(i.type=r,i.setArrPosition(e,t)):(r=Math.floor(Math.random()*N.default.levelData.blockcount)+1,i.type=r,i.newTile(e,t));var a=this.panelHeader.getPositionAR(A.TILE_TYPE.BLOCK,r);i.collectPosition=a},e.prototype.spawnTableware=function(e,t,o,n){void 0===n&&(n=!0),o==A.TABLEWARE_TYPE.TYPE_3&&N.default.spawnBugCnt++;var i=cc.instantiate(this.model.pfbTableware);i.parent!=this.panelTile&&(i.parent=this.panelTile);var r=i.getComponent("Tableware");r.game=this,r.type=o;r.setContentSize(80,80),n?r.newTile(e,t):r.setArrPosition(e,t),this.tiles[e][t]&&this.tiles[e][t].getComponent("Block").destroyTile(function(){},!1),this.tiles[e][t]=i},e.prototype.spawnWall=function(e,t,o){var n=cc.instantiate(this.model.pfbWall);n.parent!=this.panelTile&&(n.parent=this.panelTile);var i=n.getComponent("Wall");i.game=this,i.type=o;i.setContentSize(80,80),i.setArrPosition(e,t),this.tiles[e][t]&&this.tiles[e][t].getComponent("Block").destroyTile(function(){},!1),this.tiles[e][t]=n},e.prototype.stopRemindAction=function(){for(var e=0;e<this.tiles.length;++e)for(var t=0;t<this.tiles[0].length;++t)this.tiles[e][t]&&"Block"==this.tiles[e][t].name&&this.tiles[e][t].stopActionByTag(2)},e.prototype.gameOver=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return g.default.INSTANCE.canGameOver()?this.panelHeader.checkWin()?g.default.INSTANCE.isTimeLevel?(this.checkResult(),[2]):(g.default.INSTANCE.isStopOperate=!0,g.default.INSTANCE.isGameOver=!0,this.gameStat!=A.GAME_STAT.GAMEING?[3,2]:(this.panelBonus.active=!0,N.default.gameBegan=!1,this.canTouch=!1,this.stopRemindAction(),this.hadRemind=!0,[4,this.panelHeader.gameOver()])):(this.checkResult(),[2]):[2];case 1:return e.sent(),g.default.INSTANCE.isBonusActionOver=!0,this.gameStat=A.GAME_STAT.BONUSTIME,this.hadAudAreaPlay=!1,this.igniteBomb(),[3,5];case 2:return g.default.INSTANCE.canBonus()&&this.gameStat==A.GAME_STAT.BONUSTIME?(g.default.INSTANCE.isBonusOver=!0,[4,this.bonusTime()]):[3,4];case 3:return e.sent(),this.gameStat=A.GAME_STAT.CHECKRESULT,this.igniteBomb(),[3,5];case 4:this.gameStat==A.GAME_STAT.CHECKRESULT&&g.default.INSTANCE.isStopOperate&&(this.gameStat=A.GAME_STAT.GAMEOVER,this.checkResult()),e.label=5;case 5:return[2]}})})},e.prototype.igniteBomb=function(){return __awaiter(this,void 0,void 0,function(){var t,o;return __generator(this,function(e){switch(e.label){case 0:for(t=0;t<this.tiles.length;++t)for(o=0;o<this.tiles[0].length;++o)if(this.tiles[t][o]&&"Bomb"==this.tiles[t][o].name)return this.tiles[t][o].getComponent("Bomb").ignite(t,o,!0),[2];return[4,w.delay(.2)];case 1:return e.sent(),g.default.INSTANCE.isGameOver=!1,this.moveAllTileDown(!0),[2]}})})},e.prototype.showBonusTime=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return g.default.INSTANCE.canBonus()?[4,this.bonusTime()]:[3,2];case 1:e.sent(),g.default.INSTANCE.isBonusOver=!0,e.label=2;case 2:return[2]}})})},e.prototype.resetRemindTime=function(){this.hadRemind=!1,this.oneSec=0,this.remindTime=0},e.prototype.hadRemindTime=function(){this.hadRemind=!0},e.prototype.bonusTime=function(){return __awaiter(this,void 0,void 0,function(){var i,t,o,n,r,a,s,c,l,d,u,h;return __generator(this,function(e){switch(e.label){case 0:return(i=this).panelHeader.nodLastTime.active?[2]:[4,w.delay(.2)];case 1:return e.sent(),function(){for(var n,e=function(t){for(var e=function(e){n=t+e,i.tileBgs[t][e]&&i.scheduleOnce(function(){i.tileBgs[t][e].getChildByName("sprLight").opacity=200,i.scheduleOnce(function(){i.tileBgs[t][e].getChildByName("sprLight").opacity=0},.05)},n/20)},o=0;o<9;++o)e(o)},t=0;t<8;++t)e(t)}(),[4,w.delay(1)];case 2:for(e.sent(),t=[],o=0;o<this.tiles.length;++o)for(n=0;n<this.tiles[0].length;++n)this.tiles[o][n]&&"Block"==this.tiles[o][n].name&&t.push(o+"#"+n);r=new Array,a=N.default.step,0==N.default.levelData.step&&(a=0),this.randomMore(a,t.length,r,function(e){return!1}),s=0,e.label=3;case 3:return s<r.length?(c=Number(t[r[s]].split("#")[0]),l=Number(t[r[s]].split("#")[1]),(d=cc.instantiate(this.model.pfbBonusBall)).parent=this.panelBonus,u=this.node.convertToNodeSpaceAR(this.panelHeader.labCountDown.node.parent.convertToWorldSpaceAR(this.panelHeader.labCountDown.node.position)),d.setPosition(u),h=this.node.convertToNodeSpaceAR(this.panelTile.convertToWorldSpaceAR(this.tiles[c][l].getPosition())),d.runAction(cc.sequence(cc.moveTo(.5,h),cc.callFunc(function(e,t,o){this.spawnBomb(e,t,A.BOMB_TYPE.BOMB_AROUND),this.panelHeader.addStep(),o.destroy()}.bind(this,c,l,d)))),[4,w.delay(.3)]):[3,6];case 4:e.sent(),e.label=5;case 5:return++s,[3,3];case 6:return[4,w.delay(.4)];case 7:return e.sent(),this.hadAudAreaPlay=!1,[2]}})})},e.prototype.update=function(e){var t=this;if(N.default.gameBegan&&(this.oneSec+=e,this.remindTime+=e,2<=this.oneSec&&!this.hadRemind&&!g.default.INSTANCE.isStopOperate)){this.oneSec=0;var o=w.checkoutMatch(this.tiles);if(5<=this.remindTime&&0<o.length){this.hadRemind=!0;var n=o[Math.floor(Math.random()*o.length)];this.stopRemindAction(),this.lastArr=n;for(var i=0;i<n.length;++i){var r=n[i].split("#")[0],a=n[i].split("#")[1];if(this.tiles[r][a]&&"Block"==this.tiles[r][a].name){this.tiles[r][a].stopActionByTag(2);var s=cc.repeatForever(cc.sequence(cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.2,.9,.9),cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.2,.9,.9),cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.2,.9,.9),cc.scaleTo(.15,1.05,1.05),cc.scaleTo(.05,1,1),cc.delayTime(1.5)));this.tiles[r][a].runAction(s),s.setTag(2)}}}else o.length<=0&&(this.PlayUI.toast("没有可消除的组合"),this.hadRemindTime(),this.canTouch=!1,this.scheduleOnce(function(){w.shuffleTiles(t.tiles,function(){t.scheduleOnce(function(){this.canTouch=!0,this.moveAllTileDown(!1)},1)})},2))}},__decorate([l(cc.Prefab)],e.prototype,"pfbScore",void 0),__decorate([l(cc.Prefab)],e.prototype,"pfbMask",void 0),__decorate([l(cc.Prefab)],e.prototype,"pfbBlock",void 0),__decorate([l(cc.Prefab)],e.prototype,"pfbBomb",void 0),__decorate([l(cc.Prefab)],e.prototype,"pfbObstacle",void 0),__decorate([l(cc.Prefab)],e.prototype,"pfbWall",void 0),__decorate([l(cc.Prefab)],e.prototype,"pfbTableware",void 0),__decorate([l(cc.Prefab)],e.prototype,"pfbTransport",void 0),__decorate([l(cc.Prefab)],e.prototype,"pfbPs",void 0),__decorate([l(cc.Prefab)],e.prototype,"pfbGate",void 0),__decorate([l(cc.Prefab)],e.prototype,"pfbBonusBall",void 0),__decorate([l(cc.Prefab)],e.prototype,"pfbTileBg",void 0),__decorate([l(cc.Node)],e.prototype,"panelTile",void 0),__decorate([l(cc.Node)],e.prototype,"panelScore",void 0),__decorate([l(cc.Node)],e.prototype,"panelParticle",void 0),__decorate([l(cc.Node)],e.prototype,"panelTrickDown",void 0),__decorate([l(cc.Node)],e.prototype,"panelTrickUp",void 0),__decorate([l(cc.Node)],e.prototype,"panelObjective",void 0),__decorate([l(cc.Node)],e.prototype,"panelGuide",void 0),__decorate([l(v.default)],e.prototype,"panelHeader",void 0),__decorate([l(cc.Node)],e.prototype,"nodBombOneColor",void 0),__decorate([l(cc.Node)],e.prototype,"spritegrayBg",void 0),__decorate([l(cc.Node)],e.prototype,"panelGrid",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spfTileBg",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spfTileBgLight",void 0),e=__decorate([c],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../../dyGame/DYNotify":"DYNotify","../../../common/Defines":"Defines","../../../common/net/NetUtil":"NetUtil","../../../common/net/proto/mods/ProtoSectionPlay":"ProtoSectionPlay","../Algorithm":"Algorithm","../Board":"Board","../GameData":"GameData","../NodePool":"NodePool","../PlayDefine":"PlayDefine","./PanelHeader_pve":"PanelHeader_pve","./StateMgr":"StateMgr"}],LayerGame:[function(e,t,o){"use strict";cc._RF.push(t,"3e688RsLeBN9qoLImcbG17A","LayerGame"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./PanelHeader"),m=e("./PlayDefine"),y=e("./GameData"),p=e("../../module/Modules"),f=e("./Board"),v=e("../../common/net/proto/mods/ProtoSectionPlay"),_=e("../../common/net/NetUtil"),i=e("./PvpGuide"),c=e("./pve/StateMgr"),g=e("./Algorithm"),r=cc._decorator,a=r.ccclass,s=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pfbScore=null,e.pfbBlock=null,e.pfbBomb=null,e.pfbObstacle=null,e.pfbTileBg=null,e.labStep=null,e.panelTile=null,e.panelParticle=null,e.panelHeader=null,e.Board=null,e.nodBombOneColor=null,e.pvpGuide=null,e.panelGrid=null,e.spfTileBg=null,e.spfTileBgLight=null,e.pvpTeach=!1,e.pvpAi=!1,e.spawnedBomb=!1,e.first=!0,e.firstDown=!1,e.firstBombCol=!0,e.firstBombA=!0,e.firstZzj=!0,e.firstSave=!0,e.saveDown=0,e.pvpTeachSaveCount=0,e.pvpOpSaveCount=0,e.PlayUI=null,e.remindTime=0,e.oneSec=0,e.count=0,e.lastArr=[],e.arr=[],e.tiles=[],e.tileBgs=[],e.actionList=[],e.gridArr=[],e.hadRemind=!1,e.maxMatchCount=0,e.canTouch=!1,e.bombOver=!0,e.composeOver=!0,e.downOver=!0,e.collectOver=!0,e.oneColorActionOver=!0,e.bombColors=[],e.nodZhazhiji=null,e.model=null,e}return __extends(e,t),e.prototype.canDown=function(){var e=!0;return this.bombOver&&this.composeOver&&this.collectOver||(e=!1),e},e.prototype.canCollect=function(){var e=!0;return this.bombOver&&this.composeOver||(e=!1),e},e.prototype.onLoad=function(){},e.prototype.init=function(e,t){this.PlayUI=e,this.model=t},e.prototype.start=function(){},e.prototype.guide=function(){this.pvpTeach&&(this.pvpGuide.setGuide(m.GUIDE_TYPE.WELCOME),this.pvpGuide.setGuide(m.GUIDE_TYPE.MATCH),this.pvpGuide.setGuide(m.GUIDE_TYPE.SAVE))},e.prototype.gameBegain=function(){this.gridArr=[],this.bombColors=[],this.bombOver=!0,this.composeOver=!0,this.collectOver=!0,this.remindTime=0,this.oneSec=0,this.hadRemind=!1;y.default.objectiveSpawnCnt[0]=0;(this.pvpTeach||this.pvpAi)&&(this.pvpTeachSaveCount=0,this.pvpOpSaveCount=0),this.Board.initMap(0),this.initMap()},e.prototype.initTileBg=function(){this.tileBgs=[];for(var e=0;e<f.default.INSTANCE.GRID.length;++e){this.tileBgs[e]=[];for(var t=0;t<f.default.INSTANCE.GRID[0].length;++t)if(f.default.INSTANCE.GRID[e][t]!=m.GRID_TYPE.EMPTY){var o=cc.instantiate(this.model.pfbTileBg);(this.tileBgs[e][t]=o).parent=this.panelGrid,o.setPosition(80*(e-4)+40,80*t+40)}}},e.prototype.tileBgEffect=function(e,t,o,n){var i=this;this.tileBgs[t]&&this.tileBgs[t][o]&&(0==e?(this.tileBgs[t][o].getChildByName("sprLight").opacity=200,this.unschedule(this.tileBgs[t][o].cb),this.tileBgs[t][o].cb=function(){i.tileBgs[t][o].getChildByName("sprLight").runAction(cc.fadeOut(n))},this.scheduleOnce(this.tileBgs[t][o].cb,0)):1==e||2==e&&(this.tileBgs[t][o].getChildByName("sprLight").opacity=120,this.unschedule(this.tileBgs[t][o].cb),this.tileBgs[t][o].cb=function(){i.tileBgs[t][o].getChildByName("sprLight").runAction(cc.fadeOut(n))},this.scheduleOnce(this.tileBgs[t][o].cb,0)))},e.prototype.initMap=function(){this.model.initFreeNodes(),y.default.gameModel=1,this.panelHeader.pvpTeach=this.pvpTeach,this.panelHeader.pvpAi=this.pvpAi,this.hadRemind=!1,this.tiles=[],this.initTileBg(),this.panelTile.removeAllChildren(),this.panelParticle.removeAllChildren();for(var e=0;e<f.default.INSTANCE.GRID.length;++e){this.tiles[e]=[];for(var t=0;t<f.default.INSTANCE.GRID[e].length;++t)this.tiles[e][t]=null}for(e=0;e<f.default.INSTANCE.GRID.length;++e)for(t=0;t<f.default.INSTANCE.GRID[e].length;++t)if(0!=f.default.INSTANCE.GRID[e][t])for(var o=0,n=0;;){if(1e6<=o)return;o++;var i=new Array,r=new Array;if(n=Math.floor(Math.random()*p.Play.DataPlay.colorNum)+1,g.scanAround(e,t,-1,-1,n,i,r,this.tiles),i.length<m.MAX_MATCH){this.spawnBlock(e,t,n);break}}for(var a=3;0<a;){var s=Math.floor(Math.random()*this.tiles.length),c=Math.floor(Math.random()*this.tiles[0].length);0!=f.default.INSTANCE.GRID[s][c]&&this.tiles[s][c]&&("Block"==this.tiles[s][c].name&&(this.tiles[s][c].getComponent("Block").destroyTile(null,!1),this.spawnPet(s,c,!1),a--))}this.gridArr=[];for(e=0;e<this.tiles.length;++e)this.gridArr[e]=[],this.moveOneLine(e,0,this.gridArr[e],!0);this.moveAllTileDown()},e.prototype.operateLogic=function(e,t,o,n,i,r){void 0===r&&(r=!1),o==m.TILE_TYPE.BLOCK?this.destroyBlock(e,t,n):o==m.TILE_TYPE.BOMB&&this.ignite(e,t,n,r)},e.prototype.ignite=function(e,t,o,n){switch(void 0===n&&(n=!1),o){case m.BOMB_TYPE.BOMB_ROW:this.bombRow(e,t,n);break;case m.BOMB_TYPE.BOMB_COLUMN:this.bombColumn(e,t,n);break;case m.BOMB_TYPE.BOMB_AROUND:this.bombAround(e,t,n);break;case m.BOMB_TYPE.BOMB_ONE_COLOR:this.bombColor(e,t,n)}},e.prototype.randomMore=function(e,t,o,n){if(!(t<e)){for(var i=Math.floor(Math.random()*t),r=0;r<o.length;++r)if(i==o[r])return void this.randomMore(e,t,o,n);n(i)?this.randomMore(e,t,o,n):(o.push(i),0<--e&&this.randomMore(e,t,o,n))}},e.prototype.spawnPets=function(n,i,r){if(!(r.length<5)){var e=[],t=0;switch(r.length){case 5:t=1;break;case 6:t=2;break;default:t=3}this.randomMore(t,r.length,e,function(e){var t=r[e].split("#")[0],o=r[e].split("#")[1];return n==t&&i==o});for(var o=0;o<e.length;++o){var a=r[e[o]].split("#")[0],s=r[e[o]].split("#")[1];this.spawnPet(a,s,!1)}}},e.prototype.destroyBlock=function(h,p,f){return __awaiter(this,void 0,void 0,function(){var t,o,n,i,r,a,s,c,l,d,u;return __generator(this,function(e){switch(e.label){case 0:if((t=this).stopRemindAction(),o=new Array,n=new Array,g.scanAround(h,p,-1,-1,f,o,n,this.tiles),!(1<o.length))return[3,11];if(this.pvpGuide&&this.first&&(this.firstDown=!0,this.first=!1),this.maxMatchCount<o.length&&(this.maxMatchCount=o.length),this.hadRemind=!0,this.remindTime=0,this.addStep(),!(5<=o.length))return[3,8];for(c in this.PlayUI.Audio.spawnBomb(),this.canTouch=!1,this.composeOver=!1,i=void 0,o)l=o[c].split("#")[0],d=o[c].split("#")[1],this.tiles[l][d].stopAllActions(),l==h&&d==p&&(this.tileBgEffect(0,l,d,.5),(i=this.tiles[l][d]).zIndex=1001);for(c in r=i.getComponent("Block").type,a=[],o)l=o[c].split("#")[0],d=o[c].split("#")[1],this.tileBgEffect(0,l,d,.5),this.tiles[l][d]!=i&&(this.tiles[l][d].zIndex=1e3),this.tiles[l][d].getComponent("Block").canTouch=!1,s=cc.sequence(cc.scaleTo(.1,1.1),cc.delayTime(.1),cc.moveTo(.2,i.getPosition()),cc.callFunc(function(e){e.getComponent("Block").destroyTile(null,!1)}.bind(t,this.tiles[l][d]),this)),g.addAction(a,this.tiles[l][d],s);return[4,g.runActions(a)];case 1:return e.sent(),this.composeOver=!0,9<=o.length?[4,t.spawnBomb(h,p,m.BOMB_TYPE.BOMB_ONE_COLOR,r)]:[3,3];case 2:return e.sent(),[3,7];case 3:return 7<=o.length?[4,t.spawnBomb(h,p,m.BOMB_TYPE.BOMB_AROUND)]:[3,5];case 4:return e.sent(),[3,7];case 5:return[4,t.spawnBomb(h,p,m.BOMB_TYPE.BOMB_COLUMN)];case 6:e.sent(),e.label=7;case 7:return this.spawnedBomb=!0,this.canTouch=!0,y.default.objectiveSpawnCnt[0]-this.panelHeader.myAnimalCount<8&&this.spawnPets(h,p,o),this.moveAllTileDown(),[3,10];case 8:for(c in this.PlayUI.Audio.strip(),o)l=o[c].split("#")[0],d=o[c].split("#")[1],g.playParticle(l,d,this.tiles[l][d],this.panelParticle,m.PARTICAL_TYPE.BLOCK),this.tileBgEffect(0,l,d,.5),this.tiles[l][d].zIndex=1e3,this.tiles[l][d].getComponent("Block").recovery();return[4,g.delay(.5)];case 9:e.sent(),y.default.stepSpawnPet+=o.length,this.moveAllTileDown(),e.label=10;case 10:return[3,12];case 11:cc.log("不能消除"),this.tiles[h][p].stopActionByTag(3),u=cc.sequence(cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.2,.9,.9),cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.2,.9,.9),cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.2,.9,.9),cc.scaleTo(.15,1.05,1.05),cc.scaleTo(.05,1,1),cc.delayTime(1.5)),this.tiles[h][p].runAction(u),u.setTag(3),e.label=12;case 12:return[2]}})})},e.prototype.bombColumn=function(s,c,l){return __awaiter(this,void 0,void 0,function(){var n,t,o,i,r,a;return __generator(this,function(e){switch(e.label){case 0:if((n=this).bombOver=!1,t=this.tiles[s][c],this.tiles[s][c]=null,(o=t.getComponent("Bomb")).type!=m.BOMB_TYPE.BOMB_COLUMN)return[2];this.stopRemindAction(),this.remindTime=0,l&&this.addStep(),this.canTouch=!1,this.actionList.push(t),this.PlayUI.Audio.bombRow(),t.getComponent(cc.Animation).play("aniBombCol"),g.bothSiedAct(s,c,this.tiles),i=function(t,o){return __generator(this,function(e){switch(e.label){case 0:return[4,g.delay(.02,function(){if(t<n.tiles[0].length&&f.default.INSTANCE.GRID[s][t]!=m.GRID_TYPE.EMPTY){if(g.playParticle(s,t,n.tiles[s][t],n.panelParticle,m.PARTICAL_TYPE.BOMB_COL),n.tiles[s][t])if(n.tileBgEffect(0,s,t,.6),"Block"==n.tiles[s][t].name)(e=n.tiles[s][t].getComponent("Block")).isDesTroying||(e.destroyTile(),g.playParticle(s,t,n.tiles[s][t],n.panelParticle,m.PARTICAL_TYPE.BLOCK));else if("Tableware"==n.tiles[s][t].name){(e=n.tiles[s][t].getComponent("Tableware")).destroyTile(),g.playParticle(s,t,n.tiles[s][t],n.panelParticle,m.PARTICAL_TYPE.TABLEWARE),n.tiles[s][t]=null}else if("Wall"==n.tiles[s][t].name){(e=n.tiles[s][t].getComponent("Wall")).destroyTile()}else if("Bomb"==n.tiles[s][t].name){(e=n.tiles[s][t].getComponent("Bomb")).type==m.BOMB_TYPE.BOMB_ONE_COLOR?n.nodZhazhiji?n.nodZhazhiji!=n.tiles[s][t]&&(n.addColor(e.subType),e.ignite(s,t,!1),n.tiles[s][t]=null):(n.addColor(e.subType),n.nodZhazhiji=n.tiles[s][t]):e.type!=m.BOMB_TYPE.BOMB_COLUMN?e.ignite(s,t):(e.ignite(s,t,!1),n.tiles[s][t]=null)}g.bothSiedAct(s,t,n.tiles)}if(0<=o&&f.default.INSTANCE.GRID[s][o]!=m.GRID_TYPE.EMPTY){if(g.playParticle(s,o,n.tiles[s][o],n.panelParticle,m.PARTICAL_TYPE.BOMB_COL),n.tiles[s][o])if(n.tileBgEffect(0,s,o,.6),"Block"==n.tiles[s][o].name)(e=n.tiles[s][o].getComponent("Block")).isDesTroying||(e.destroyTile(),g.playParticle(s,o,n.tiles[s][o],n.panelParticle,m.PARTICAL_TYPE.BLOCK));else if("Tableware"==n.tiles[s][o].name){(e=n.tiles[s][o].getComponent("Tableware")).destroyTile(),g.playParticle(s,o,n.tiles[s][o],n.panelParticle,m.PARTICAL_TYPE.TABLEWARE),n.tiles[s][o]=null}else if("Wall"==n.tiles[s][o].name){(e=n.tiles[s][o].getComponent("Wall")).destroyTile()}else if("Bomb"==n.tiles[s][o].name){var e;(e=n.tiles[s][o].getComponent("Bomb")).type==m.BOMB_TYPE.BOMB_ONE_COLOR?n.nodZhazhiji?n.nodZhazhiji!=n.tiles[s][o]&&(n.addColor(e.subType),e.ignite(s,o,!1),n.tiles[s][o]=null):(n.addColor(e.subType),n.nodZhazhiji=n.tiles[s][o]):e.type!=m.BOMB_TYPE.BOMB_COLUMN?e.ignite(s,o):(e.ignite(s,o,!1),n.tiles[s][o]=null)}g.bothSiedAct(s,o,n.tiles)}})];case 1:return e.sent(),[2]}})},a=c+1,r=c-1,e.label=1;case 1:return a<n.tiles[0].length||0<=r?[5,i(a,r)]:[3,4];case 2:e.sent(),e.label=3;case 3:return++a,--r,[3,1];case 4:return[4,g.delay(.4)];case 5:for(e.sent(),a=0;a<this.actionList.length;++a)if(t==this.actionList[a]){this.actionList.splice(a,1),o.destroyTile();break}return 0==n.actionList.length&&n.scheduleOnce(function(){if(n.nodZhazhiji){var e=n.nodZhazhiji.getComponent("Bomb");e.ignite(e.x,e.y),n.nodZhazhiji=null}else n.bombOver=!0,n.moveAllTileDown(),n.canTouch=!0},.5),[2]}})})},e.prototype.bombRow=function(s,c,l){return __awaiter(this,void 0,void 0,function(){var n,t,o,i,r,a;return __generator(this,function(e){switch(e.label){case 0:if((n=this).bombOver=!1,t=this.tiles[s][c],this.tiles[s][c]=null,(o=t.getComponent("Bomb")).type!=m.BOMB_TYPE.BOMB_ROW)return[2];this.stopRemindAction(),this.remindTime=0,l&&this.addStep(),this.canTouch=!1,this.actionList.push(t),this.PlayUI.Audio.bombRow(),i=function(t,o){return __generator(this,function(e){switch(e.label){case 0:return[4,g.delay(.05,function(){if(0<=t&&f.default.INSTANCE.GRID[t][c]!=m.GRID_TYPE.EMPTY&&(g.playParticle(t,c,n.tiles[t][c],n.panelParticle,m.PARTICAL_TYPE.BOMB_COL),n.tiles[t][c]))if("Block"==n.tiles[t][c].name)(e=n.tiles[t][c].getComponent("Block")).destroyTile(),g.playParticle(t,c,n.tiles[t][c],n.panelParticle,m.PARTICAL_TYPE.BLOCK);else if("Tableware"==n.tiles[t][c].name){(e=n.tiles[t][c].getComponent("Tableware")).destroyTile(),n.tiles[t][c]=null}else if("Wall"==n.tiles[t][c].name){var e=n.tiles[t][c].getComponent("Wall");g.playParticle(t,c,n.tiles[t][c],n.panelParticle,m.PARTICAL_TYPE.WALL),e.destroyTile()}else if("Bomb"==n.tiles[t][c].name){(e=n.tiles[t][c].getComponent("Bomb")).ignite(t,c),n.tiles[t][c]=null}if(o<n.tiles.length&&f.default.INSTANCE.GRID[o][c]!=m.GRID_TYPE.EMPTY&&(g.playParticle(o,c,n.tiles[o][c],n.panelParticle,m.PARTICAL_TYPE.BOMB_COL),n.tiles[o][c]))if("Block"==n.tiles[o][c].name)(e=n.tiles[o][c].getComponent("Block")).destroyTile(),g.playParticle(o,c,n.tiles[o][c],n.panelParticle,m.PARTICAL_TYPE.BLOCK);else if("Tableware"==n.tiles[o][c].name){(e=n.tiles[o][c].getComponent("Tableware")).destroyTile(),n.tiles[o][c]=null}else if("Wall"==n.tiles[o][c].name){e=n.tiles[o][c].getComponent("Wall");g.playParticle(o,c,n.tiles[o][c],n.panelParticle,m.PARTICAL_TYPE.WALL),e.destroyTile()}else if("Bomb"==n.tiles[o][c].name){(e=n.tiles[o][c].getComponent("Bomb")).ignite(o,c),n.tiles[o][c]=null}})];case 1:return e.sent(),[2]}})},a=s-1,r=s+1,e.label=1;case 1:return 0<=a||r<n.tiles.length?[5,i(a,r)]:[3,4];case 2:e.sent(),e.label=3;case 3:return--a,++r,[3,1];case 4:for(a=0;a<this.actionList.length;++a)t==this.actionList[a]&&(this.actionList.splice(a,1),a-=1,o.destroyTile());return 0==this.actionList.length&&this.scheduleOnce(function(){this.canTouch=!0,this.bombOver=!0,this.moveAllTileDown()},.5),[2]}})})},e.prototype.bombAround=function(i,r,a){return __awaiter(this,void 0,void 0,function(){var t,o,n;return __generator(this,function(e){switch(e.label){case 0:return(t=this).bombOver=!1,o=this.tiles[i][r],this.tiles[i][r]=null,o.getComponent("Bomb").type!=m.BOMB_TYPE.BOMB_AROUND?[2]:(this.stopRemindAction(),this.remindTime=0,a&&this.addStep(),this.canTouch=!1,this.actionList.push(o),[4,this.bombAroundAnimation(i,r,o)]);case 1:for(e.sent(),n=0;n<t.actionList.length;++n)o==t.actionList[n]&&t.actionList.splice(n,1);return 0==t.actionList.length&&t.scheduleOnce(function(){if(t.nodZhazhiji){var e=t.nodZhazhiji.getComponent("Bomb");e.ignite(e.x,e.y),t.nodZhazhiji=null}else t.canTouch=!0,t.bombOver=!0,t.moveAllTileDown()},.3),this.PlayUI.Audio.bombAround(),[2]}})})},e.prototype.bombAroundAnimation=function(l,d,u){return __awaiter(this,void 0,void 0,function(){var s,c=this;return __generator(this,function(e){return s=this,[2,new Promise(function(e,t){for(var o=2;-2<=o;--o)for(var n=2;-2<=n;--n){if((0!=o||0!=n)&&s.tiles[l+o]&&s.tiles[l+o][d+n])if(2==o||2==n||-2==o||-2==n?s.tileBgEffect(2,l+o,d+n,.7):s.tileBgEffect(0,l+o,d+n,.9),"Block"==s.tiles[l+o][d+n].name)(i=s.tiles[l+o][d+n].getComponent("Block")).isDesTroying||i.billowAct(l,d,function(e,t,o){g.playParticle(l+e,d+t,s.tiles[l+e][d+t],s.panelParticle,m.PARTICAL_TYPE.BLOCK),o.destroyTile()}.bind(s,o,n,i));else if("Tableware"==s.tiles[l+o][d+n].name){(i=s.tiles[l+o][d+n].getComponent("Tableware")).billowAct(l,d,function(e,t,o){g.playParticle(l+e,d+t,s.tiles[l+e][d+t],s.panelParticle,m.PARTICAL_TYPE.TABLEWARE),o.destroyTile(),s.tiles[l+e][d+t]=null}.bind(s,o,n,i))}else if("Wall"==s.tiles[l+o][d+n].name){var i=s.tiles[l+o][d+n].getComponent("Wall");g.playParticle(l+o,d+n,s.tiles[l+o][d+n],s.panelParticle,m.PARTICAL_TYPE.WALL),i.destroyTile()}else if("Bomb"==s.tiles[l+o][d+n].name){(i=s.tiles[l+o][d+n].getComponent("Bomb")).billowAct(l,d,function(e,t,o){if(o.type==m.BOMB_TYPE.BOMB_ONE_COLOR)s.nodZhazhiji?s.nodZhazhiji!=s.tiles[l+e][d+t]&&(s.addColor(o.subType),o.ignite(l+e,d+t,!1),s.tiles[l+e][d+t]=null):(s.addColor(o.subType),s.nodZhazhiji=s.tiles[l+e][d+t]);else{for(var n=!1,i=0;i<s.actionList.length;++i)s.tiles[l+e][d+t]==s.actionList[i]&&(n=!0);n||(o.ignite(l+e,d+t),s.tiles[l+e][d+t]=null)}}.bind(s,o,n,i))}else if("Obstacle"==s.tiles[l+o][d+n].name){(i=s.tiles[l+o][d+n].getComponent("Obstacle")).billowAct(l,d,function(e,t,o){}.bind(s,o,n,i))}}for(var r,a=0;a<c.actionList.length;++a)u==c.actionList[a]&&(r=u.getComponent(cc.Animation));r.onFire=function(){u.getComponent("Bomb").destroyTile(),setTimeout(function(){e()},100)},r.play("aniBombArea")})]})})},e.prototype.addColor=function(o){var n=!1;this.bombColors.forEach(function(e,t){e==o&&(n=!0)}),n||this.bombColors.push(o)},e.prototype.bombColor=function(u,h,p){return __awaiter(this,void 0,void 0,function(){var i,t,o,r,a,s,c,n,l,d=this;return __generator(this,function(e){switch(e.label){case 0:if(t=(i=this).tiles[u][h],(o=t.getComponent("Bomb")).type!=m.BOMB_TYPE.BOMB_ONE_COLOR)return[2];for(this.tiles[u][h]=null,o.canTouch=!1,this.stopRemindAction(),this.bombOver=!1,this.remindTime=0,p&&this.addStep(),this.canTouch=!1,this.actionList.push(t),this.PlayUI.Audio.bombMagnet(),i.addColor(o.subType),r=[],a=0;a<this.tiles.length;a++)for(s=0;s<this.tiles[0].length;s++)!this.tiles[a][s]||this.tiles[a][s]&&"Block"!=this.tiles[a][s].name||(this.tiles[a][s].zIndex=1e3,(c=this.tiles[a][s].getComponent("Block")).isDesTroying||i.bombColors.forEach(function(e,t){if(c.type==e){i.tileBgEffect(0,a,s,1);var o={x:a,y:s,node:i.tiles[a][s]},n=cc.sequence(cc.scaleTo(.1,1.1),cc.delayTime(.1),cc.moveTo(.2,cc.v2(0,300)),cc.callFunc(function(e,t){t.node.getComponent("Block").destroyTile(function(){})},i,o));g.addAction(r,i.tiles[a][s],n)}}));return this.oneColorActionOver&&(this.oneColorActionOver=!1,this.nodBombOneColor.active=!0,this.PlayUI.spritegrayBg.active=!0,n=cc.sequence(cc.callFunc(function(){var e=i.nodBombOneColor.getComponent(cc.Animation);i.nodBombOneColor.getChildByName("nodParticle").getComponent(cc.ParticleSystem).resetSystem(),e.play("aniOneColorBomb")}),cc.delayTime(1),cc.callFunc(function(){i.nodBombOneColor.getComponent(cc.Animation).stop(),d.PlayUI.spritegrayBg.active=!1,d.nodBombOneColor.active=!1,d.oneColorActionOver=!0})),g.addAction(r,this.nodBombOneColor,n)),[4,g.runActions(r)];case 1:for(e.sent(),i.bombColors=[],l=0;l<this.actionList.length;++l)t==this.actionList[l]&&(i.actionList.splice(l,1),o.destroyTile(),0==i.actionList.length&&(i.canTouch=!0,i.bombOver=!0,i.moveAllTileDown()));return[2]}})})},e.prototype.removeActionBomb=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.actionList.splice(t,1),this.canTouch=!0,[2]})})},e.prototype.stopTouch=function(){for(var e=0;e<this.tiles.length;++e)for(var t=0;t<this.tiles[0].length;++t){if(null!=this.tiles[e][t])if("Block"==this.tiles[e][t].name)this.tiles[e][t].getComponent("Block").canTouch=!1;else if("Bomb"==this.tiles[e][t].name){this.tiles[e][t].getComponent("Bomb").canTouch=!1}}},e.prototype.allowTouch=function(){for(var e=0;e<this.tiles.length;++e)for(var t=0;t<this.tiles[0].length;++t){if(null!=this.tiles[e][t])if("Block"==this.tiles[e][t].name)this.tiles[e][t].getComponent("Block").canTouch=!0;else if("Bomb"==this.tiles[e][t].name){this.tiles[e][t].getComponent("Bomb").canTouch=!0}}},e.prototype.recoveryObstacle=function(e,t){this.tiles[e][t]&&(this.tiles[e][t]=null)},e.prototype.moveAllTileDown=function(){return __awaiter(this,void 0,void 0,function(){var o,t,n,i,r,a,s,c,l,d,u,h;return __generator(this,function(e){switch(e.label){case 0:if(!(o=this).canDown())return[2];for(this.hadRemind=!0,this.downOver=!1,s=0;s<this.gridArr.length;++s)for(t=0;t<this.gridArr[s].length;++t)if(l=Number(this.gridArr[s][t].split("#")[0]),d=Number(this.gridArr[s][t].split("#")[1]),(!this.tiles[l][d]||"Wall"!=this.tiles[l][d].name)&&null==this.tiles[l][d])for(n=t+1;n<this.gridArr[s].length;n++)if(i=Number(this.gridArr[s][n].split("#")[0]),r=Number(this.gridArr[s][n].split("#")[1]),null!=this.tiles[i][r]){if("Wall"==this.tiles[i][r].name)break;this.tiles[l][d]=this.tiles[i][r],this.tiles[i][r]=null,"Block"==this.tiles[l][d].name?this.tiles[l][d].getComponent("Block").moveTo(l,d):"Bomb"==this.tiles[l][d].name?this.tiles[l][d].getComponent("Bomb").moveTo(l,d):"Obstacle"==this.tiles[l][d].name?this.tiles[l][d].getComponent("Obstacle").moveTo(l,d):"Tableware"==this.tiles[l][d].name&&this.tiles[l][d].getComponent("Tableware").moveTo(l,d);break}return this.spawnTile(),[4,g.delay(.3)];case 1:if(e.sent(),this.downOver=!0,this.canCollect())for(l=0;l<o.tiles.length;++l)for(d=0;d<o.tiles[0].length;++d)if(o.tiles[l][d]&&"Obstacle"==o.tiles[l][d].name){for(a=!0,s=d-1;0<=s;--s)f.default.INSTANCE.GRID[l][s]!=m.GRID_TYPE.EMPTY&&(a=!1);f.default.INSTANCE.GRID[l][d]==m.GRID_TYPE.DOWNGATE&&(a=!1),a&&(this.collectOver=!1,c=o.tiles[l][d].getComponent("Obstacle"),o.saveDown++,c.recoveryObstacle(function(){var e=new v.PlaySaveAnimalC2S;if(_.default.SendMsg(e),o.pvpTeach||o.pvpAi){o.PlayUI.getAnimal(o.pvpTeachSaveCount+=1,p.Play.DataPlay.MySide);var t=Math.floor(5*Math.random())+2;o.scheduleOnce(function(){if(0<o.panelHeader.remainTime){var e=Math.floor(2*Math.random()+.5);o.PlayUI.getAnimal(o.pvpOpSaveCount+=e,p.Play.DataPlay.AiSide)}},t)}o.collectOver=!0,o.moveAllTileDown(),o.saveDown--,o.PlayUI.Audio.collect()}),o.tiles[l][d]=null,this.pvpTeach&&this.firstSave&&(this.first||(this.pvpGuide.setGuide(m.GUIDE_TYPE.SAVE_SUC),this.pvpGuide.setGuide(m.GUIDE_TYPE.COUNT),this.pvpGuide.setGuide(m.GUIDE_TYPE.TIME),this.firstSave=!1)))}if(this.pvpTeach&&this.firstDown&&!this.spawnedBomb&&(this.firstDown=!1),this.pvpTeach&&this.spawnedBomb&&0==this.saveDown&&(this.firstZzj||this.firstBombA||this.firstBombCol)){for(l=0;l<o.tiles.length;++l)for(d=0;d<o.tiles[0].length;++d)if(o.tiles[l][d]&&"Bomb"==o.tiles[l][d].name)switch(u=o.tiles[l][d].getComponent("Bomb"),h=this.panelTile.convertToWorldSpaceAR(u.node.getPosition()),u.type){case m.BOMB_TYPE.BOMB_COLUMN:this.firstBombCol&&(this.pvpGuide.setGuide(m.GUIDE_TYPE.BOMB_COL,h),this.pvpGuide.setGuide(m.GUIDE_TYPE.BOMB_SUC),this.firstBombCol=!1);break;case m.BOMB_TYPE.BOMB_AROUND:this.firstBombA&&(this.pvpGuide.setGuide(m.GUIDE_TYPE.BOMB_A,h),this.pvpGuide.setGuide(m.GUIDE_TYPE.BOMB_SUC),this.firstBombA=!1);break;case m.BOMB_TYPE.BOMB_ONE_COLOR:this.firstZzj&&(this.pvpGuide.setGuide(m.GUIDE_TYPE.ZZJ,h),this.pvpGuide.setGuide(m.GUIDE_TYPE.BOMB_SUC),this.firstZzj=!1)}this.firstDown&&(this.firstDown=!1)}return this.resetRemindTime(),[2]}})})},e.prototype.spawnTile=function(){for(var e=[],t=0; t<this.tiles.length; ++t)for(var o=0; o<this.tiles[0].length; ++o)0!=f.default.INSTANCE.GRID[t][o]&&null==this.tiles[t][o]&&e.push(t+"#"+o);if(y.default.stepSpawnPet>=m.STEP_SPAWN_PET&&y.default.objectiveSpawnCnt[0]-this.panelHeader.myAnimalCount<8){y.default.stepSpawnPet=0;var n=Math.floor(Math.random()*e.length),i=e.splice(n,1)[0];if(i){t=i.split("#")[0],o=i.split("#")[1];this.spawnPet(Number(t),Number(o),!0)}}for(var r=0;r<e.length;++r){t=e[r].split("#")[0],o=e[r].split("#")[1];this.spawnBlock(Number(t),Number(o))}},e.prototype.spawnBomb=function(r,a,s,c){var l=this;return new Promise(function(e,t){var o=l.model.popBomb();o.parent!=l.panelTile&&(o.parent=l.panelTile);var n=o.getComponent("Bomb");n.init(),o.scale=1,o.zIndex=1002;if(n.setContentSize(80,80),l.tiles[r][a]&&"Block"==l.tiles[r][a].name&&l.tiles[r][a].getComponent("Block").destroyTile(function(){},!1),l.tiles[r][a]=o,n.game=l,n.type=s,n.setArrPosition(r,a),s==m.BOMB_TYPE.BOMB_ONE_COLOR){n.subType=c;var i=o.getComponent(cc.Animation);i.play("aniSpawnZZJ"),i.onSpawnZZJFinished=function(){n.genBombAnimation(),e()}}else n.genBombAnimation(),e()})},e.prototype.spawnPet=function(e,t,o){y.default.objectiveSpawnCnt[0]++;var n=this.model.popObstacle();n.parent!=this.panelTile&&(n.parent=this.panelTile);var i=n.getComponent("Obstacle");i.game=this,i.type=1,n.scale=1,n.zIndex=0,i.setContentSize(80,80),o?i.newTile(e,t):i.setArrPosition(e,t),this.tiles[e][t]=n},e.prototype.spawnBlock=function(e,t,o){var n=this.model.popBlock();n.parent!=this.panelTile&&(n.parent=this.panelTile);var i=(this.tiles[e][t]=n).getComponent("Block");i.init(),i.game=this,n.scale=1,n.zIndex=0;i.setContentSize(80,80);var r=o;r?(i.type=r,i.setArrPosition(e,t)):(r=Math.floor(Math.random()*p.Play.DataPlay.colorNum)+1,i.type=r,i.newTile(e,t))},e.prototype.stopRemindAction=function(){for(var e=0;e<this.tiles.length;++e)for(var t=0;t<this.tiles[0].length;++t)this.tiles[e][t]&&(this.tiles[e][t].stopActionByTag(2),this.tiles[e][t].scale=1)},e.prototype.addStep=function(){},e.prototype.gameOver=function(){this.canTouch=!1,this.stopRemindAction(),this.hadRemind=!0},e.prototype.moveOneLine=function(e,t,o,n){for(var i=t;i<this.tiles[0].length;++i)if(f.default.INSTANCE.GRID[e][i]!=m.GRID_TYPE.EMPTY){if(f.default.INSTANCE.GRID[e][t]==m.GRID_TYPE.DOWNGATE&&n)return;if(i!=t&&f.default.INSTANCE.GRID[e][i]==m.GRID_TYPE.DOWNGATE)return;if(o.push(e+"#"+i),f.default.INSTANCE.GRID[e][i]==m.GRID_TYPE.UPGATE){for(var r=null,a=0;a<y.default.levelData.grid.gate.length;++a)y.default.levelData.grid.gate[a].upgate==9*e+i&&(r=y.default.levelData.grid.gate[a].downgate);var s=Math.floor(r/9),c=r%9;this.moveOneLine(s,c,o,!1)}}},e.prototype.resetRemindTime=function(){this.hadRemind=!1,this.oneSec=0,this.remindTime=0},e.prototype.hadRemindTime=function(){this.hadRemind=!0},e.prototype.update=function(e){var t=this;if(y.default.gameBegan&&(this.remindTime+=e,this.oneSec+=e,1<=this.oneSec&&!this.hadRemind&&!c.default.INSTANCE.isStopOperate)){this.oneSec=0;var o=g.checkoutMatch(this.tiles);if(5<=this.remindTime&&0<o.length){this.hadRemind=!0;var n=o[Math.floor(Math.random()*o.length)];this.stopRemindAction(),this.lastArr=n;for(var i=0;i<n.length;++i){var r=n[i].split("#")[0],a=n[i].split("#")[1];this.tiles[r][a].stopActionByTag(2),this.tiles[r][a]._sgNode.setVisible(!0),this.tiles[r][a].opacity=255;var s=cc.repeatForever(cc.sequence(cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.2,.9,.9),cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.2,.9,.9),cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.2,.9,.9),cc.scaleTo(.15,1.05,1.05),cc.scaleTo(.05,1,1),cc.delayTime(1.5)));this.tiles[r][a].runAction(s),s.setTag(2)}}else o.length<=0&&(this.hadRemindTime(),this.PlayUI.toast("没有可消除的组合"),this.canTouch=!1,this.scheduleOnce(function(){g.shuffleTiles(t.tiles,function(){t.scheduleOnce(function(){this.canTouch=!0,this.moveAllTileDown(!1)},1)})},2))}},__decorate([s(cc.Prefab)],e.prototype,"pfbScore",void 0),__decorate([s(cc.Prefab)],e.prototype,"pfbBlock",void 0),__decorate([s(cc.Prefab)],e.prototype,"pfbBomb",void 0),__decorate([s(cc.Prefab)],e.prototype,"pfbObstacle",void 0),__decorate([s(cc.Prefab)],e.prototype,"pfbTileBg",void 0),__decorate([s(cc.Label)],e.prototype,"labStep",void 0),__decorate([s(cc.Node)],e.prototype,"panelTile",void 0),__decorate([s(cc.Node)],e.prototype,"panelParticle",void 0),__decorate([s(n.default)],e.prototype,"panelHeader",void 0),__decorate([s(f.default)],e.prototype,"Board",void 0),__decorate([s(cc.Node)],e.prototype,"nodBombOneColor",void 0),__decorate([s(i.default)],e.prototype,"pvpGuide",void 0),__decorate([s(cc.Node)],e.prototype,"panelGrid",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"spfTileBg",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"spfTileBgLight",void 0),e=__decorate([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../common/net/NetUtil":"NetUtil","../../common/net/proto/mods/ProtoSectionPlay":"ProtoSectionPlay","../../module/Modules":"Modules","./Algorithm":"Algorithm","./Board":"Board","./GameData":"GameData","./PanelHeader":"PanelHeader","./PlayDefine":"PlayDefine","./PvpGuide":"PvpGuide","./pve/StateMgr":"StateMgr"}],LayerMatch:[function(e,t,o){"use strict";cc._RF.push(t,"e00e6k6MNpMbrvZPTfViGSb","LayerMatch"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../../module/Modules"),i=e("../HomeManager"),r=e("../../../../module/Modules"),a=e("../../../../common/Misc"),s=e("../../../../common/persist/GamePersist"),c=e("../../../../../dyGame/DYNotify"),l=e("../../../game/PlayDefine"),d=cc._decorator,u=d.ccclass,h=d.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labTime=null,e.nod_Head=null,e.nodDots=null,e.nodMyHead=null,e.sprMyHonor=null,e.labMyName=null,e.sprMySex=null,e.nodOpponentHead=null,e.sprOpponentHonor=null,e.labOpponentName=null,e.sprOpponentSex=null,e.nodSprSearching=null,e.nodSearching=null,e.nodSearched=null,e.spfMale=null,e.spfFemale=null,e.passedTime=0,e}return __extends(e,t),e.prototype.onLoad=function(){this.setMyInfo(),this.checkTime(),c.default.regObserver(this,this.onNotify,l.Event_type.GAMESTART)},e.prototype.onNotify=function(e,t,o){var n=e;t==l.Event_type.GAMESTART&&setTimeout(function(){s.default.INSTANCE.loadScene("game"),n.node.destroy()},1e3)},e.prototype.onDestroy=function(){c.default.removeAllObservers(this)},e.prototype.checkTime=function(){this.schedule(this.schCB,1)},e.prototype.schCB=function(){this.passedTime++,this.labTime.string=""+this.passedTime},e.prototype.onDisable=function(){this.unschedule(this.schCB)},e.prototype.setOpponentInfo=function(){var o=this;this.nodSearching.active=!1,this.nodSprSearching.active=!1,this.sprOpponentSex.node.parent.active=!0,this.nodSearched.active=!0,this.setHead(this.nodOpponentHead,r.Home.DataRoom.opponentPlaymate.headImg);var e=r.Home.DataRoom.opponentPlaymate.star,t=a.calcHonorId(e);cc.loader.loadRes("res/ui/rank/rank-"+t,cc.SpriteFrame,function(e,t){o.sprOpponentHonor.spriteFrame=t}),this.labOpponentName.string=r.Home.DataRoom.opponentPlaymate.name,1==r.Home.DataRoom.opponentPlaymate.sex?this.sprOpponentSex.spriteFrame=this.spfMale:this.sprOpponentSex.spriteFrame=this.spfFemale},e.prototype.setMyInfo=function(){var o=this;this.nodSearching.active=!0,this.nodSprSearching.active=!0,this.sprOpponentSex.node.parent.active=!1,this.nodSearched.active=!1,this.setHead(this.nodMyHead,n.Home.DataPlayer.MyHeadUrl);var e=r.Home.DataPlayer.FortuneStar,t=a.calcHonorId(e);cc.loader.loadRes("res/ui/rank/rank-"+t,cc.SpriteFrame,function(e,t){o.sprMyHonor.spriteFrame=t}),this.labMyName.string=r.Play.DataPlay.MyName,1==r.Home.DataPlayer.MySex?this.sprMySex.spriteFrame=this.spfMale:this.sprMySex.spriteFrame=this.spfFemale},e.prototype.setHead=function(i,r){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(e){return cc.loader.loadRes("prefab/component/PlaymateHead",cc.Prefab,function(e,t){var o=cc.instantiate(t);o.parent=i,o.setPosition(0,0),o.getComponent("PlaymateHead").setSize(n.nodMyHead.getContentSize()),o.getComponent("PlaymateHead").HeadUrl=r}),[2]})})},e.prototype.start=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.runAction(this.nodDots.children[0],!1)];case 1:return e.sent(),[4,this.runAction(this.nodDots.children[1],!1)];case 2:return e.sent(),[4,this.runAction(this.nodDots.children[2],!1)];case 3:return e.sent(),[4,this.runAction(this.nodDots.children[3],!1)];case 4:return e.sent(),[4,this.runAction(this.nodDots.children[4],!1)];case 5:return e.sent(),[4,this.runAction(this.nodDots.children[5],!0)];case 6:return e.sent(),[3,0];case 7:return[2]}})})},e.prototype.runAction=function(i,r){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(e){return n=this,[2,new Promise(function(e,t){var o=cc.sequence(cc.moveBy(.05,0,10),cc.callFunc(function(){r||e()}),cc.moveBy(.1,0,-10),cc.callFunc(function(){r&&n.scheduleOnce(function(){e()},.5)}));i.runAction(o)})]})})},e.prototype.doCancelMatch=function(){s.default.INSTANCE.btnAudio_2(),n.Home.DataPlayer.IsMatching&&(this.unscheduleAllCallbacks(),n.Home.DataPlayer.IsMatching=!1,i.default.INSTANCE.makeInvisibleRequest(),this.node.destroy())},__decorate([h(cc.Label)],e.prototype,"labTime",void 0),__decorate([h(cc.Node)],e.prototype,"nod_Head",void 0),__decorate([h(cc.Node)],e.prototype,"nodDots",void 0),__decorate([h(cc.Node)],e.prototype,"nodMyHead",void 0),__decorate([h(cc.Sprite)],e.prototype,"sprMyHonor",void 0),__decorate([h(cc.Label)],e.prototype,"labMyName",void 0),__decorate([h(cc.Sprite)],e.prototype,"sprMySex",void 0),__decorate([h(cc.Node)],e.prototype,"nodOpponentHead",void 0),__decorate([h(cc.Sprite)],e.prototype,"sprOpponentHonor",void 0),__decorate([h(cc.Label)],e.prototype,"labOpponentName",void 0),__decorate([h(cc.Sprite)],e.prototype,"sprOpponentSex",void 0),__decorate([h(cc.Node)],e.prototype,"nodSprSearching",void 0),__decorate([h(cc.Node)],e.prototype,"nodSearching",void 0),__decorate([h(cc.Node)],e.prototype,"nodSearched",void 0),__decorate([h(cc.SpriteFrame)],e.prototype,"spfMale",void 0),__decorate([h(cc.SpriteFrame)],e.prototype,"spfFemale",void 0),e=__decorate([u],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../../../dyGame/DYNotify":"DYNotify","../../../../common/Misc":"Misc","../../../../common/persist/GamePersist":"GamePersist","../../../../module/Modules":"Modules","../../../game/PlayDefine":"PlayDefine","../HomeManager":"HomeManager"}],LayerScore_pve:[function(e,t,o){"use strict";cc._RF.push(t,"242ddQxOwdGjJIbpeZqUqmN","LayerScore_pve"),Object.defineProperty(o,"__esModule",{value:!0});var s=e("../GameData"),c=e("../PlayDefine"),n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spfCross=null,e.nodSprWin=null,e.nodSprLose=null,e.nodBtnNextLevel=null,e.nodNextLevelBtn=null,e.nodObjective_game=null,e.nodObjective_score=null,e.nodEmptyStar=null,e.nodStar=null,e.labLevel=null,e.labScore=null,e.labEnergy=null,e.gameOver=!1,e.model=null,e}return __extends(e,t),e.prototype.onEnable=function(){},e.prototype.onDisable=function(){this.gameOver=!1},e.prototype.init=function(e,t){this._game=e,this.model=t},e.prototype.win=function(){if(!this.gameOver){this.gameOver=!0,cc.find("Canvas").getComponent("PlayUI_pve").Audio.victory(),this.nodBtnNextLevel.active=!0,this.node.getChildByName("panelWin").active=!0,this.node.getChildByName("panelLose").active=!1,this.nodBtnNextLevel.setSiblingIndex(0),this.labLevel.string="第"+s.default.curLevel+"关",this.labScore.string=s.default.score+"",this.nodSprWin.active=!0,this.nodSprLose.active=!1;var e=s.default.curLevel+1;s.default.mapData["level_"+e];this.node.active=!0,this.nodNextLevelBtn.active=!0;var t=this.calculateStar(s.default.score,e-1);this.showStar(t),3==t?(this.labEnergy.node.parent.active=!0,this.labEnergy.string="5"):2==t?(this.labEnergy.node.parent.active=!0,this.labEnergy.string="3"):1==t?(this.labEnergy.node.parent.active=!0,this.labEnergy.string="1"):this.labEnergy.node.parent.active=!1}},e.prototype.lose=function(){this.gameOver||(this.gameOver=!0,cc.find("Canvas").getComponent("PlayUI_pve").Audio.lose(),this.nodBtnNextLevel.active=!1,this.node.getChildByName("panelWin").active=!1,this.node.getChildByName("panelLose").active=!0,this.nodBtnNextLevel.setSiblingIndex(3),this.labLevel.string="第"+s.default.curLevel+"关",this.labScore.string=s.default.score+"",this.nodSprWin.active=!1,this.nodSprLose.active=!0,this.node.active=!0,this.nodNextLevelBtn.active=!1,this.checkObjective())},e.prototype.checkObjective=function(){for(var e=this.node.getChildByName("panelLose").getChildByName("nodGains").getChildByName("nodObjectives"),t=e.children.length-1;t>=s.default.levelData.objective.length;--t)e.children[t].active=!1;var o=[];for(t=0;t<s.default.levelData.objective.length;++t)switch(e.children[t].active=!0,s.default.levelData.objective[t].tileType){case c.TILE_TYPE.BLOCK:(n=cc.instantiate(this.model.pfbBlock)).parent=e.children[t].getChildByName("nodTile"),n.x=0,n.y=0,(i=n.getComponent("Block")).init(),i.color=s.default.levelData.objective[t].type,s.default.collectFruitCnt[s.default.levelData.objective[t].type-1]>=s.default.levelData.objective[t].count?(e.children[t].getChildByName("sprCross").active=!1,e.children[t].getChildByName("sprCheck").active=!0):(o.push(e.children[t]),e.children[t].getChildByName("sprCross").active=!1,e.children[t].getChildByName("sprCheck").active=!1);break;case c.TILE_TYPE.BOMB:(n=cc.instantiate(this.model.pfbBomb)).parent=e.children[t].getChildByName("nodTile"),n.x=0,n.y=0,(i=n.getComponent("Bomb")).init(),i.type=s.default.levelData.objective[t].type,s.default.useBombCnt[s.default.levelData.objective[t].type-1]>=s.default.levelData.objective[t].count?(e.children[t].getChildByName("sprCross").active=!1,e.children[t].getChildByName("sprCheck").active=!0):(o.push(e.children[t]),e.children[t].getChildByName("sprCross").active=!1,e.children[t].getChildByName("sprCheck").active=!1);break;case c.TILE_TYPE.LEAF:(n=cc.instantiate(this.model.pfbObstacle)).parent=e.children[t].getChildByName("nodTile"),n.x=0,n.y=0,(i=n.getComponent("Obstacle")).type=s.default.levelData.objective[t].type,s.default.collectLeavesCnt[s.default.levelData.objective[t].type-1]>=s.default.levelData.objective[t].count?(e.children[t].getChildByName("sprCross").active=!1,e.children[t].getChildByName("sprCheck").active=!0):(o.push(e.children[t]),e.children[t].getChildByName("sprCross").active=!1,e.children[t].getChildByName("sprCheck").active=!1);break;case c.TILE_TYPE.WALL:(n=cc.instantiate(this.model.pfbWall)).parent=e.children[t].getChildByName("nodTile"),n.x=0,n.y=0,(i=n.getComponent("Wall")).type=s.default.levelData.objective[t].type,s.default.delWallCnt[s.default.levelData.objective[t].type-1]>=s.default.levelData.objective[t].count?(e.children[t].getChildByName("sprCross").active=!1,e.children[t].getChildByName("sprCheck").active=!0):(o.push(e.children[t]),e.children[t].getChildByName("sprCross").active=!1,e.children[t].getChildByName("sprCheck").active=!1);break;case c.TILE_TYPE.TABLEWARE:var n,i;(n=cc.instantiate(this.model.pfbTableware)).parent=e.children[t].getChildByName("nodTile"),n.x=0,n.y=0,(i=n.getComponent("Tableware")).type=s.default.levelData.objective[t].type,s.default.delTablawareCnt[s.default.levelData.objective[t].type-1]>=s.default.levelData.objective[t].count?(e.children[t].getChildByName("sprCross").active=!1,e.children[t].getChildByName("sprCheck").active=!0):(o.push(e.children[t]),e.children[t].getChildByName("sprCross").active=!1,e.children[t].getChildByName("sprCheck").active=!1)}var r=function(e){a.scheduleOnce(function(){o[e].getComponent(cc.Animation).play()}.bind(a,e),.5*(e+1))},a=this;for(t=0;t<o.length;++t)r(t)},e.prototype.delay=function(n){return __awaiter(this,void 0,void 0,function(){var o=this;return __generator(this,function(e){return[2,new Promise(function(e,t){o.scheduleOnce(function(){e()},n)})]})})},e.prototype.calculateStar=function(e,t){var o=s.default.mapData["level_"+t].score;if(o){return e>=o[2]?3:e>=o[1]?2:e>=o[0]?1:0}},e.prototype.showStar=function(o){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:this.nodEmptyStar.active=!0,this.nodStar.active=!0,t=0,e.label=1;case 1:return t<o?(this.nodStar.children[t].active=!0,this.nodStar.children[t].scale=3,this.nodStar.children[t].runAction(cc.scaleTo(.2,1)),[4,this.delay(.2)]):[3,4];case 2:e.sent(),e.label=3;case 3:return++t,[3,1];case 4:return[2]}})})},e.prototype.getObject=function(e){if(this.nodObjective_score.removeAllChildren(),e)for(var t=0;t<this.nodObjective_game.children.length;++t){var o=cc.instantiate(this.nodObjective_game.children[t]);this.nodObjective_score.addChild(o)}else for(t=0;t<s.default.levelData.objective.length;++t){var n=!1;switch(s.default.levelData.objective[t].tileType){case c.TILE_TYPE.BLOCK:(n=s.default.collectFruitCnt[s.default.levelData.objective[t].type-1]>=s.default.levelData.objective[t].count)||n;break;case c.TILE_TYPE.BOMB:(n=s.default.useBombCnt[s.default.levelData.objective[t].type-1]>=s.default.levelData.objective[t].count)||n;break;case c.TILE_TYPE.LEAF:(n=s.default.collectLeavesCnt[s.default.levelData.objective[t].type-1]>=s.default.levelData.objective[t].count)||n;break;case c.TILE_TYPE.WALL:(n=s.default.delWallCnt[s.default.levelData.objective[t].type-1]>=s.default.levelData.objective[t].count)||n;break;case c.TILE_TYPE.TABLEWARE:(n=s.default.delTablawareCnt[s.default.levelData.objective[t].type-1]>=s.default.levelData.objective[t].count)||n}if(!n){(o=cc.instantiate(this.nodObjective_game.children[t])).getChildByName("labObjective").active=!1;var i=o.getChildByName("sprAchieved");i.getComponent(cc.Sprite).spriteFrame=this.spfCross,i.active=!0,this.nodObjective_score.addChild(o)}}},__decorate([r(cc.SpriteFrame)],e.prototype,"spfCross",void 0),__decorate([r(cc.Node)],e.prototype,"nodSprWin",void 0),__decorate([r(cc.Node)],e.prototype,"nodSprLose",void 0),__decorate([r(cc.Node)],e.prototype,"nodBtnNextLevel",void 0),__decorate([r(cc.Node)],e.prototype,"nodNextLevelBtn",void 0),__decorate([r(cc.Node)],e.prototype,"nodObjective_game",void 0),__decorate([r(cc.Node)],e.prototype,"nodObjective_score",void 0),__decorate([r(cc.Node)],e.prototype,"nodEmptyStar",void 0),__decorate([r(cc.Node)],e.prototype,"nodStar",void 0),__decorate([r(cc.Label)],e.prototype,"labLevel",void 0),__decorate([r(cc.Label)],e.prototype,"labScore",void 0),__decorate([r(cc.Label)],e.prototype,"labEnergy",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{"../GameData":"GameData","../PlayDefine":"PlayDefine"}],LayerScore:[function(e,t,o){"use strict";cc._RF.push(t,"ef518YkYotFR7/Kmtwg9Zza","LayerScore"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../common/net/proto/mods/ProtoSectionPlay"),i=e("../../common/net/NetUtil"),u=e("../../common/Misc"),h=e("./PlayManager"),p=e("../../module/Modules"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodHead=null,e.nodWinSprite=null,e.nodLoseSprite=null,e.nodDrawSprite=null,e.nodWinBgSprite=null,e.nodLoseBgSprite=null,e.nodShineSprite=null,e.nodBtnLightSprite=null,e.nodStars=null,e.labSaveAnimalCoint=null,e.labWinCount=null,e.labDailyCount=null,e.labRateDailyWin=null,e.labRateWeekWin=null,e.labResult=null,e.labGrade=null,e.sprGrade=null,e.labContinueBtn=null,e.btnContinue=null,e.bgParticle=null,e.rankAtlas=null,e.gameContinueType=null,e.againSF=null,e.continueSF=null,e.opInviteSF=null,e.opLeaveSF=null,e.waitagreeSF=null,e.noagainGreySF=null,e.PlayUI=null,e.model=null,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(e,t){this.PlayUI=e,this.model=t},e.prototype.onEnable=function(){this.btnContinue.interactable=!0;var e=cc.sequence(cc.fadeTo(1,0),cc.delayTime(.5),cc.fadeTo(1,255),cc.delayTime(.5));this.nodBtnLightSprite.runAction(cc.repeatForever(e))},e.prototype.continue=function(){var e=new n.PlayContinueC2S;i.default.SendMsg(e)},e.prototype.giveUp=function(){if(h.default.INSTANCE.PlayUI.layerGame.pvpAi){var e=new n.PlayAiFinishC2S;return e.saveAnimalCount=h.default.INSTANCE.PlayUI.layerGame.panelHeader.myAnimalCount,e.winSide=p.Play.DataPlay.AiSide,void i.default.SendMsg(e)}var t=new n.PlayGiveUpC2S;i.default.SendMsg(t)},e.prototype.showStar=function(e){for(var t=0;t<this.nodStars.children.length;++t)if(t<=e-1){this.nodStars.children[t].opacity=0,this.nodStars.children[t].scale=2;var o=cc.sequence(cc.delayTime(.2*t),cc.callFunc(function(e){e.opacity=255},this),cc.scaleTo(.1,.9,.9),cc.scaleTo(.05,1,1));this.nodStars.children[t].active=!0,this.nodStars.children[t].runAction(o)}else this.nodStars.children[t].active=!1},e.prototype.setContinueBtn=function(e){switch(e){case 0:this.gameContinueType.spriteFrame=this.againSF;break;case 1:this.gameContinueType.spriteFrame=this.continueSF;break;case 2:this.gameContinueType.spriteFrame=this.opInviteSF;break;case 3:this.gameContinueType.spriteFrame=this.opLeaveSF,this.btnContinue.interactable=!1;break;case 4:this.gameContinueType.spriteFrame=this.waitagreeSF;break;case 5:this.gameContinueType.spriteFrame=this.noagainGreySF}},e.prototype.playFinish=function(e,t){var o=this,n=cc.instantiate(t);n.parent=this.nodHead.getChildByName("head"),n.setPosition(0,0),n.getComponent("PlaymateHead").setSize(200,200);var i=p.Home.DataPlayer.FortuneStar,r=u.calcHonorId(i),a=u.calcShowStarCount(i);cc.loader.loadRes("res/ui/rank/rank-"+r,cc.SpriteFrame,function(e,t){o.sprGrade.spriteFrame=t}),this.showStar(a),this.labSaveAnimalCoint.string=e.saveAnimalCount+"",this.labWinCount.string=e.winCount+"",this.labDailyCount.string=e.dailyCnt+"",this.labRateDailyWin.string=Math.floor(100*e.dailyWin/e.dailyCnt)+"%",this.labRateWeekWin.string=Math.floor(100*e.weeklyWin/e.weeklyCnt)+"%";var s=cc.repeatForever(cc.rotateBy(4,360)),c=cc.sequence(cc.callFunc(function(e){e.scale=2},this),cc.scaleTo(.1,.9,.9),cc.scaleTo(.01,1,1));0==e.winSide?(this.PlayUI.Audio.victory(),this.nodShineSprite.active=!1,this.bgParticle.active=!1,this.nodWinBgSprite.active=!0,this.nodLoseBgSprite.active=!1,this.nodWinSprite.active=!1,this.nodLoseSprite.active=!1,this.nodDrawSprite.active=!0,this.nodDrawSprite.runAction(c),1==p.Home.DataRoom.opponentPlaymate.id?this.setContinueBtn(5):this.setContinueBtn(1)):e.winSide==p.Play.DataPlay.MySide?(this.PlayUI.Audio.victory(),this.nodShineSprite.active=!0,this.nodShineSprite.runAction(s),this.bgParticle.active=!0,this.bgParticle.opacity=255,this.nodWinBgSprite.active=!0,this.nodLoseBgSprite.active=!1,this.nodWinSprite.active=!0,this.nodLoseSprite.active=!1,this.nodDrawSprite.active=!1,this.nodWinSprite.runAction(c),1==p.Home.DataRoom.opponentPlaymate.id?this.setContinueBtn(5):this.setContinueBtn(1)):(this.PlayUI.Audio.lose(),this.nodShineSprite.active=!1,this.bgParticle.active=!1,this.nodWinBgSprite.active=!1,this.nodLoseBgSprite.active=!0,this.nodWinSprite.active=!1,this.nodLoseSprite.active=!0,this.nodDrawSprite.active=!1,this.nodLoseSprite.runAction(c),1==p.Home.DataRoom.opponentPlaymate.id?this.setContinueBtn(5):this.setContinueBtn(0)),h.default.INSTANCE.PlayUI.layerGame.pvpAi&&(this.btnContinue.interactable=!1);var l=this.nodHead,d=cc.sequence(cc.callFunc(function(e){e.setPositionY(e.getPositionY()-200)},this),cc.moveBy(.2,cc.v2(0,220)),cc.moveBy(.01,cc.v2(0,-20)));l.runAction(d)},__decorate([s(cc.Node)],e.prototype,"nodHead",void 0),__decorate([s(cc.Node)],e.prototype,"nodWinSprite",void 0),__decorate([s(cc.Node)],e.prototype,"nodLoseSprite",void 0),__decorate([s(cc.Node)],e.prototype,"nodDrawSprite",void 0),__decorate([s(cc.Node)],e.prototype,"nodWinBgSprite",void 0),__decorate([s(cc.Node)],e.prototype,"nodLoseBgSprite",void 0),__decorate([s(cc.Node)],e.prototype,"nodShineSprite",void 0),__decorate([s(cc.Node)],e.prototype,"nodBtnLightSprite",void 0),__decorate([s(cc.Node)],e.prototype,"nodStars",void 0),__decorate([s(cc.Label)],e.prototype,"labSaveAnimalCoint",void 0),__decorate([s(cc.Label)],e.prototype,"labWinCount",void 0),__decorate([s(cc.Label)],e.prototype,"labDailyCount",void 0),__decorate([s(cc.Label)],e.prototype,"labRateDailyWin",void 0),__decorate([s(cc.Label)],e.prototype,"labRateWeekWin",void 0),__decorate([s(cc.Label)],e.prototype,"labResult",void 0),__decorate([s(cc.Label)],e.prototype,"labGrade",void 0),__decorate([s(cc.Sprite)],e.prototype,"sprGrade",void 0),__decorate([s(cc.Label)],e.prototype,"labContinueBtn",void 0),__decorate([s(cc.Button)],e.prototype,"btnContinue",void 0),__decorate([s(cc.Node)],e.prototype,"bgParticle",void 0),__decorate([s(cc.SpriteAtlas)],e.prototype,"rankAtlas",void 0),__decorate([s(cc.Sprite)],e.prototype,"gameContinueType",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"againSF",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"continueSF",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"opInviteSF",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"opLeaveSF",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"waitagreeSF",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"noagainGreySF",void 0),e=__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../../common/Misc":"Misc","../../common/net/NetUtil":"NetUtil","../../common/net/proto/mods/ProtoSectionPlay":"ProtoSectionPlay","../../module/Modules":"Modules","./PlayManager":"PlayManager"}],LevelChoose:[function(e,t,o){"use strict";cc._RF.push(t,"c00662EqcdKp7PHpQpdOvR+","LevelChoose"),Object.defineProperty(o,"__esModule",{value:!0});var d=e("../GameData"),n=e("../../BaseUI"),r=e("../../../module/Modules"),u=e("../PlayDefine"),i=e("../../../common/Defines"),a=e("../../../common/persist/GamePersist"),s=e("../../../common/net/NetUtil"),c=e("../../../../dyGame/DYNotify"),l=e("../../../../dyGame/DYAudio"),h=e("../../../common/net/proto/mods/ProtoSectionPlay"),p=e("../PlayManager"),f=e("../../../module/Modules"),m=cc._decorator,y=m.ccclass,v=m.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodBtnLevel=null,e.nodContent=null,e.nodPanelLevelInfo=null,e.nodObjectives=null,e.labLevel=null,e.energyCount=null,e.energyTimer=null,e.pfbBlock=null,e.pfbBomb=null,e.pfbObstacle=null,e.pfbWall=null,e.pfbTableware=null,e.audHomeBg=null,e.time=0,e}return __extends(e,t),e.prototype.onLoad=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t.prototype.onLoad.call(this),c.default.regObserver(this,this.onNotify,u.GET_SHARE_CNT),(p.default.INSTANCE.LevelChooseUI=this).nodPanelLevelInfo.active=!1,this.initNodePool(),l.default.hasMusicPlaying()||l.default.playMusic(this.audHomeBg,!0),[2]})})},e.prototype.onDestroy=function(){c.default.removeAllObservers(this)},e.prototype.onNotify=function(e,t,o){var n=e;t==u.GET_SHARE_CNT&&1===o.success&&n.showEnergyEmpty(2)},e.prototype.uiName=function(){return"LevelChoose"},e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.chooseLevel=function(e){var t=this;d.default.curLevel=e,this.nodPanelLevelInfo.active=!0,a.default.INSTANCE.panelPopUp(this.nodContent,function(){cc.find("nodContent/nodRank/RankPve",t.nodPanelLevelInfo).getComponent("RankPve").init()}),this.labLevel.string=e,this.showObjectives(e),this.showStar(e)},e.prototype.hidePanelLevelInfo=function(){var e=this;a.default.INSTANCE.panelFadeOut(this.nodPanelLevelInfo,function(){e.nodPanelLevelInfo.active=!1,e.nodPanelLevelInfo.opacity=255,d.default.curLevel=null})},e.prototype.showStar=function(e){var t=this.nodContent.getChildByName("nodEmptyStar"),o=this.nodContent.getChildByName("nodStar");t.active=!0,o.active=!0;var n=d.default.mapData["level_"+d.default.curLevel].score,i=r.Home.DataPlayer.PveStats[e-1];n&&(i>=n[2]?(o.children[0].active=!0,o.children[1].active=!0,o.children[2].active=!0):(i>=n[1]?(o.children[0].active=!0,o.children[1].active=!0):(i>=n[0]?o.children[0].active=!0:o.children[0].active=!1,o.children[1].active=!1),o.children[2].active=!1))},e.prototype.initNodePool=function(){},e.prototype.gameStart=function(n){return __awaiter(this,void 0,void 0,function(){var t,o;return __generator(this,function(e){return t=f.Home.DataPlayer.FortuneEnergy,!Partner.energyTest()&&t<5?this.showEnergyEmpty(1):(n.getChildByName("nodMask").active=!0,o=cc.sequence(cc.spawn(cc.moveTo(.5,84,6.5),cc.scaleTo(.5,1.1,1.1)),cc.callFunc(function(){n.getChildByName("particle_energy").getComponent(cc.ParticleSystem).resetSystem()}),cc.scaleTo(.2,1,1),cc.scaleTo(.2,1.1,1.1),cc.scaleTo(.2,1,1),cc.callFunc(function(){var e=new h.PlayStartPveC2S;p.default.INSTANCE.PveEnterType=0,s.default.SendMsg(e)})),n.getChildByName("sprHeart").runAction(o)),[2]})})},e.prototype.showEnergyEmpty=function(n){var i=this;a.default.INSTANCE.ForceWaiting(),cc.loader.loadRes("prefab/component/Energy",cc.Prefab,function(e,t){var o=cc.instantiate(t);o.parent=i.node,o.setPosition(0,0),o.getComponent("Energy").setMode(n),a.default.INSTANCE.CancelWaiting(),a.default.INSTANCE.panelPopUp(o.getChildByName("content"),function(){})})},e.prototype.enterPveGame=function(){a.default.INSTANCE.loadScene("pve_game",function(){l.default.stopMusic()})},e.prototype.update=function(e){var t=new Date,o=parseInt(String(t.getTime()/1e3))-f.Home.TimeOffset,n=parseInt(f.Home.DataPlayer.EnergyFullTime),i=n-o,r=f.Home.DataPlayer.FortuneEnergy;if(this.energyCount.string=r+"",0!=n){var a=i%300,s=parseInt(a/60+"")+"";s=1<s.length?s:"0"+s;var c=parseInt(a%60+"")+"";c=1<c.length?c:"0"+c,this.energyTimer.string=s+":"+c}else this.energyTimer.string="已满"},e.prototype.showObjectives=function(l){return __awaiter(this,void 0,void 0,function(){var t,o,n,i,r,a,s,c;return __generator(this,function(e){for(t=d.default.mapData["level_"+l].objective,o=0;o<this.nodObjectives.children.length;++o)this.nodObjectives.children[o].active=!1,this.nodObjectives.children[o].getChildByName("sprite").removeAllChildren();for(o=0;o<t.length;++o)switch(this.nodObjectives.children[o].active=!0,this.nodObjectives.children[o].getChildByName("labObjective").getComponent(cc.Label).string="x"+t[o].count,t[o].tileType){case u.TILE_TYPE.BLOCK:n=cc.instantiate(this.pfbBlock),s=n.getComponent("Block"),n.parent=this.nodObjectives.children[o].getChildByName("sprite"),s.init(),s.type=t[o].type,n.x=0,n.y=0;break;case u.TILE_TYPE.BOMB:i=cc.instantiate(this.pfbBomb),s=i.getComponent("Bomb"),i.parent=this.nodObjectives.children[o].getChildByName("sprite"),s.init(),s.type=t[o].type,t[o].type==u.BOMB_TYPE.BOMB_ONE_COLOR&&(s.subType=u.BLOCK_COLOR.COLORS),i.x=0,i.y=0;break;case u.TILE_TYPE.LEAF:(r=cc.instantiate(this.pfbObstacle)).parent=this.nodObjectives.children[o].getChildByName("sprite"),(s=r.getComponent("Obstacle")).type=t[o].type,s.canTouch=!1,r.x=0,r.y=0;break;case u.TILE_TYPE.TABLEWARE:(a=cc.instantiate(this.pfbTableware)).parent=this.nodObjectives.children[o].getChildByName("sprite"),(s=a.getComponent("Tableware")).type=t[o].type,s.canTouch=!1,a.x=0,a.y=0;break;case u.TILE_TYPE.WALL:(c=cc.instantiate(this.pfbWall)).parent=this.nodObjectives.children[o].getChildByName("sprite"),c.getComponent("Wall").type=t[o].type,c.x=0,c.y=0}return[2]})})},e.prototype.btnListener=function(e){var t=e.target;switch(t.name){case"btnBack":a.default.INSTANCE.btnAudio_2(),this.goToHome();break;case"btnPanelBack":a.default.INSTANCE.btnAudio_2(),this.hidePanelLevelInfo();break;case"btnStartPve":a.default.INSTANCE.btnAudio_1(),this.gameStart(t)}},e.prototype.levelChoose=function(e){this.chooseLevel(e)},e.prototype.goToHome=function(){r.Home.OpenHomeFrom=i.OpenHomeFrom.UI_PLAY,cc.director.loadScene("home")},__decorate([v(cc.Node)],e.prototype,"nodBtnLevel",void 0),__decorate([v(cc.Node)],e.prototype,"nodContent",void 0),__decorate([v(cc.Node)],e.prototype,"nodPanelLevelInfo",void 0),__decorate([v(cc.Node)],e.prototype,"nodObjectives",void 0),__decorate([v(cc.Label)],e.prototype,"labLevel",void 0),__decorate([v(cc.Label)],e.prototype,"energyCount",void 0),__decorate([v(cc.Label)],e.prototype,"energyTimer",void 0),__decorate([v(cc.Prefab)],e.prototype,"pfbBlock",void 0),__decorate([v(cc.Prefab)],e.prototype,"pfbBomb",void 0),__decorate([v(cc.Prefab)],e.prototype,"pfbObstacle",void 0),__decorate([v(cc.Prefab)],e.prototype,"pfbWall",void 0),__decorate([v(cc.Prefab)],e.prototype,"pfbTableware",void 0),__decorate([v(cc.AudioClip)],e.prototype,"audHomeBg",void 0),e=__decorate([y],e)}(n.default);o.default=_,cc._RF.pop()},{"../../../../dyGame/DYAudio":"DYAudio","../../../../dyGame/DYNotify":"DYNotify","../../../common/Defines":"Defines","../../../common/net/NetUtil":"NetUtil","../../../common/net/proto/mods/ProtoSectionPlay":"ProtoSectionPlay","../../../common/persist/GamePersist":"GamePersist","../../../module/Modules":"Modules","../../BaseUI":"BaseUI","../GameData":"GameData","../PlayDefine":"PlayDefine","../PlayManager":"PlayManager"}],ListView:[function(e,t,o){"use strict";cc._RF.push(t,"903e3sfgIZBgofuFOysG3tY","ListView"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=n.menu,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollView=null,e.itemName="",e.pfbRoot="",e.itemHeight=0,e.spawnCount=0,e.totalCount=0,e.spacing=0,e.updateInterval=0,e.bufferZone=0,e.hadShowRank=!1,e}return __extends(e,t),e.prototype.showRank=function(e){this.totalCount=e.length,this.hadShowRank=!0,this.viewContent=this.scrollView.node.getChildByName("view"),this.content=this.scrollView.content,this.items=[],this.datas=e,this.initialize(),this.updateTimer=0,this.updateInterval=.1,this.lastContentPosY=0,this.scrollView.scrollToTop(0)},e.prototype.initialize=function(){var r=this;this.content.height=this.totalCount*(this.itemHeight+this.spacing)+this.spacing,cc.loader.loadRes(this.pfbRoot+this.itemName,cc.Prefab,function(e,t){var o=r.spawnCount;r.datas.length<r.spawnCount&&(o=r.datas.length);for(var n=0;n<o;++n){var i=cc.instantiate(t);i.parent=r.content,i.setPosition(0,-r.itemHeight*(.5+n)-r.spacing*(n+1)),i.getComponent(r.itemName).updateItem(n,r.datas[n]),r.items.push(i)}})},e.prototype.getPositionInView=function(e){if(e.parent){var t=e.parent.convertToWorldSpaceAR(e.position);return this.scrollView.node.convertToNodeSpaceAR(t)}},e.prototype.update=function(e){if(this.hadShowRank&&(this.updateTimer+=e,!(this.updateTimer<this.updateInterval))){this.updateTimer=0;for(var t=this.items,o=this.bufferZone+this.viewContent.height/2,n=this.scrollView.content.y<this.lastContentPosY,i=(this.itemHeight+this.spacing)*t.length,r=0;r<t.length;++r){var a=this.getPositionInView(t[r]);if(a)if(n){if(a.y<-o&&t[r].y+i<0){t[r].setPositionY(t[r].y+i);var s=(c=t[r].getComponent(this.itemName)).itemID-t.length;c.updateItem(s,this.datas[s])}}else if(a.y>o&&t[r].y-i>-this.content.height){t[r].setPositionY(t[r].y-i);var c;s=(c=t[r].getComponent(this.itemName)).itemID+t.length;c.updateItem(s,this.datas[s])}}this.lastContentPosY=this.scrollView.content.y}},__decorate([r(cc.ScrollView)],e.prototype,"scrollView",void 0),__decorate([r(cc.String)],e.prototype,"itemName",void 0),__decorate([r(cc.String)],e.prototype,"pfbRoot",void 0),__decorate([r()],e.prototype,"itemHeight",void 0),__decorate([r()],e.prototype,"spawnCount",void 0),__decorate([r()],e.prototype,"totalCount",void 0),__decorate([r()],e.prototype,"spacing",void 0),__decorate([r()],e.prototype,"updateInterval",void 0),__decorate([r()],e.prototype,"bufferZone",void 0),e=__decorate([i,a("Component/ListView")],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],LoadBatch:[function(e,t,o){"use strict";cc._RF.push(t,"0b4d4UmumtAmpFj7stGhA1n","LoadBatch"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./LoadDefine"),i=function(){function e(){this.id=e.uniqId++,this.curCount=0,this.totalCount=0}return e.prototype.then=function(e){this.allCompletedCallback=e},e.prototype.add=function(e){(e.batch=this).curCount++,this.totalCount++},e.prototype.remove=function(e,t,o){this.curCount--,t?this.error||(this.error=t):(this.loadedResource||(this.loadedResource={}),this.loadedResource[e.key()]=o),this.curCount<=0&&this.allCompletedCallback&&(this.totalCount<2?this.error?this.allCompletedCallback(this.error,null):this.allCompletedCallback(this.error,this.loadedResource[n.SINGLE_BATCH_KEY]):this.allCompletedCallback(this.error,this.loadedResource))},e.uniqId=0,e}();o.default=i,cc._RF.pop()},{"./LoadDefine":"LoadDefine"}],LoadDefine:[function(e,t,o){"use strict";var n,i;cc._RF.push(t,"691d1GqoedKG497rlRTG47k","LoadDefine"),Object.defineProperty(o,"__esModule",{value:!0}),o.SINGLE_BATCH_KEY="single",(n=o.LoadItemStatus||(o.LoadItemStatus={}))[n.IDLE=0]="IDLE",n[n.STARTED=1]="STARTED",n[n.FINISHED=2]="FINISHED",n[n.ERROR=3]="ERROR",n[n.WAIT=4]="WAIT",(i=o.LoaderPriority||(o.LoaderPriority={}))[i.AFTERMOST=0]="AFTERMOST",i[i.NORMAL=1]="NORMAL",i[i.IMPORTANT=2]="IMPORTANT",i[i.URGENT=3]="URGENT",cc._RF.pop()},{}],LoadItem:[function(e,t,o){"use strict";cc._RF.push(t,"4315c9MFZ5PtZvpn0ZDQ9Gl","LoadItem"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./LoadDefine"),n=function(){function e(e,t,o,n){this.filled=!1,this.path=e,this.itemKey=o,this.assetType=n,this.priority=t||i.LoaderPriority.NORMAL,this.status=i.LoadItemStatus.IDLE}return e.prototype.key=function(){return this.itemKey},e.prototype.load=function(){this.status=i.LoadItemStatus.STARTED;var o=this;this.assetType?cc.loader.loadRes(this.path,this.assetType,function(e,t){o.internalComplete(e,t)}):cc.loader.loadRes(this.path,function(e,t){o.internalComplete(e,t)})},e.prototype.then=function(e){this.completeCallback=e},e.prototype.dispose=function(){this.status=i.LoadItemStatus.FINISHED,this.completeCallback=null,this.batch=null},e.prototype.internalComplete=function(e,t){this.completeCallback(this,e,t)},e}();o.default=n,cc._RF.pop()},{"./LoadDefine":"LoadDefine"}],Loader:[function(e,t,o){"use strict";cc._RF.push(t,"9e51534etJPnLXFybPDZFGF","Loader"),Object.defineProperty(o,"__esModule",{value:!0});var l=e("./LoadDefine"),d=e("./LoadItem"),u=e("./LoadBatch"),n=e("../Defines"),i=function(){function c(){}return c.loadConfig=function(e,t){var o=n.RESOURCE_CONFIG_PATH_ROOT+e;c.loadSingle(o,t)},c.loadSpriteFrame=function(e,t){c.loadSingle(e,t,l.LoaderPriority.NORMAL,l.SINGLE_BATCH_KEY,cc.SpriteFrame)},c.loadSpriteAtlas=function(e,t){c.loadSingle(e,t,l.LoaderPriority.NORMAL,l.SINGLE_BATCH_KEY,cc.SpriteAtlas)},c.loadSingle=function(e,t,o,n,i){n=n||l.SINGLE_BATCH_KEY,o=o||l.LoaderPriority.NORMAL;var r=new d.default(e,o,n,i);r.status=l.LoadItemStatus.IDLE;var a=new u.default;a.then(t),c.add(r,a),c.sortItems(),c.loadNext()},c.loadMulti=function(e,t,o){var n=e.length;o=o||l.LoaderPriority.NORMAL;var i=new u.default;i.then(t);for(var r=0;r<n;r++){var a=e[r],s=new d.default(a.path,o,a.key,a.assetType);c.add(s,i)}c.sortItems(),c.loadNext()},c.onItemComplete=function(e,t,o){c.remove(e,t,o)},c.remove=function(e,t,o){var n=c.loadItems.indexOf(e);c.loadItems.splice(n,1),e.batch&&e.batch.remove(e,t,o),c.tryCompleteWait(e.path,t,o),e.dispose()},c.tryCompleteWait=function(e,t,o){for(var n=0;n<c.length;n++){var i=c.loadItems[n];if(i.path===e&&i.status===l.LoadItemStatus.WAIT){c.onItemComplete(i,t,o);break}}},c.add=function(e,t){e.then(c.onItemComplete),e.additionIndex=t.id,t.add(e),c.isLoading(e.path)&&(e.status=l.LoadItemStatus.WAIT,e.priority=l.LoaderPriority.AFTERMOST,e.additionIndex=-1),c.loadItems.push(e)},c.sortItems=function(){c.insertSort("additionIndex"),c.insertSort("priority")},c.insertSort=function(e){var t,o,n;for(o=1;o<c.loadItems.length;o++)for(t=c.loadItems[o],n=o-1;0<=n&&c.loadItems[n][e]<t[e];n--)c.loadItems[n+1]=c.loadItems[n],c.loadItems[n]=t},c.loadNext=function(){var e=c.getNextItemToLoad();e&&(e.load(),c.loadNext())},c.getNextItemToLoad=function(){for(var e=0;e<c.loadItems.length;){var t=c.loadItems[e];if(t.status===l.LoadItemStatus.IDLE)return t;e++}return null},c.isLoading=function(e){for(var t=0;t<c.loadItems.length;){if(c.loadItems[t].path===e)return!0;t++}return!1},c.loadItems=[],c}();o.default=i,cc._RF.pop()},{"../Defines":"Defines","./LoadBatch":"LoadBatch","./LoadDefine":"LoadDefine","./LoadItem":"LoadItem"}],LocalizedLabel:[function(e,t,o){"use strict";cc._RF.push(t,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var n=e("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(e){this._dataID!==e&&(this._dataID=e,this.updateLabel())}},_dataID:""},onLoad:function(){n.inst||n.init(),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Label);if(e)return this.label=e,void this.updateLabel()},updateLabel:function(){this.label?n.t(this.dataID)&&(this.label.string=n.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(e,t,o){"use strict";cc._RF.push(t,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var n=e("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:n}},onLoad:function(){this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Sprite);if(e)return this.sprite=e,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(e){for(var t=0;t<this.spriteFrameSet.length;++t)if(this.spriteFrameSet[t].language===e)return this.spriteFrameSet[t].spriteFrame},updateSprite:function(e){if(this.sprite){var t=this.getSpriteFrameByLang(e);!t&&this.spriteFrameSet[0]&&(t=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=t}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],LoginUI:[function(e,t,o){"use strict";cc._RF.push(t,"6d35dMAZMdAJ5BV8yW0QZU2","LoginUI"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./AccManager"),i=e("../../BaseUI"),r=e("../../../common/persist/GamePersist"),a=e("../../../common/loader/Loader"),s=e("../preload/DotAnimation"),c=cc._decorator,l=c.ccclass,d=c.property,u=function(o){function e(){var e=null!==o&&o.apply(this,arguments)||this;return e.nodeAccInput=null,e.nodeAccCreateRole=null,e.btnLogin=null,e.btnServer=null,e.btnReAuthorize=null,e.userAccount=null,e.loadingAnimation=null,e}return __extends(e,o),e.prototype.onLoad=function(){o.prototype.onLoad.call(this),this.btnLogin.node.on(cc.Node.EventType.TOUCH_END,this.handleLoginWithInput,this),this.btnServer.node.on(cc.Node.EventType.TOUCH_END,this.handleSelectServer,this),this.btnServer.node.active=!1,this.btnReAuthorize.node.on(cc.Node.EventType.TOUCH_END,this.onReAuthorize,this),n.default.INSTANCE.setServerData(Partner.getServerId());var e=s.default.NewDotAnimation();e.node.parent=this.node,e.node.setPositionY(-458),this.loadingAnimation=e},e.prototype.hideLoading=function(){this.loadingAnimation&&(this.loadingAnimation.node.active=!1)},e.prototype.showLoading=function(){this.loadingAnimation&&(this.loadingAnimation.node.active=!0)},e.prototype.start=function(){o.prototype.start.call(this);var t=n.default.INSTANCE.LoginUI=this;Partner.doAccAuthorize(function(e){n.default.INSTANCE.didGetAuthorize(e)},function(e){t.showAccInput(e)},n.default.INSTANCE.existSavedGameAccount())},e.prototype.onDestroy=function(){n.default.INSTANCE.LoginUI=null},e.prototype.uiName=function(){return"LoginUI"},e.prototype.onReAuthorize=function(){var t=this;this.showLoading(),Partner.doAccAuthorize(function(e){n.default.INSTANCE.didGetAuthorize(e)},function(e){t.showAccInput(e)},n.default.INSTANCE.existSavedGameAccount())},e.prototype.showAccInput=function(e){if(0===e)return this.nodeAccInput.active=!1,void(this.btnReAuthorize.node.active=!1);this.hideLoading(),1===e?this.nodeAccInput.active=!0:this.btnReAuthorize.node.active=!0},e.prototype.onReceiveLoginS2C=function(e){},e.prototype.handleLoginWithInput=function(e){r.default.INSTANCE.btnAudio_1();var t=this.userAccount.string;if(!t||t.length<1)this.toast("请输入账号");else{var o={};o.openid=t,o.openkey=t,o.platform="Dev",o.params="",Partner.didAccAuthorize(o)}},e.prototype.handleSelectServer=function(e){var n=this;r.default.INSTANCE.btnAudio_1(),r.default.INSTANCE.ForceWaiting(),a.default.loadSingle("prefab/login/SelectServer",function(e,t){var o=cc.instantiate(t);o.parent=n.node,o.setPosition(0,0),r.default.INSTANCE.CancelWaiting()})},e.prototype.showAccCreateRole=function(){var n=this;this.showAccInput(0),r.default.INSTANCE.ForceWaiting(),a.default.loadSingle("prefab/login/AccCreateRole",function(e,t){var o=cc.instantiate(t);o.parent=n.nodeAccCreateRole,o.setPosition(0,0),r.default.INSTANCE.CancelWaiting()})},__decorate([d(cc.Node)],e.prototype,"nodeAccInput",void 0),__decorate([d(cc.Node)],e.prototype,"nodeAccCreateRole",void 0),__decorate([d(cc.Button)],e.prototype,"btnLogin",void 0),__decorate([d(cc.Button)],e.prototype,"btnServer",void 0),__decorate([d(cc.Button)],e.prototype,"btnReAuthorize",void 0),__decorate([d(cc.EditBox)],e.prototype,"userAccount",void 0),e=__decorate([l],e)}(i.default);o.default=u,cc._RF.pop()},{"../../../common/loader/Loader":"Loader","../../../common/persist/GamePersist":"GamePersist","../../BaseUI":"BaseUI","../preload/DotAnimation":"DotAnimation","./AccManager":"AccManager"}],MemoryDetector:[function(e,t,o){"use strict";cc._RF.push(t,"a85c01k9jlBc5S96HrPgh5x","MemoryDetector"),cc._RF.pop()},{}],Misc:[function(e,t,o){"use strict";cc._RF.push(t,"64e63coZBNBnLdtUbxIsIiC","Misc"),Object.defineProperty(o,"__esModule",{value:!0});var r=e("./config/vo/ConfigVO"),n=e("../module/Modules"),i=e("../component/prefab/PlaymateHead"),a=e("./Defines"),s=e("./net/proto/ProtoReflect");function c(e){for(var t=r.Honor.getExtra("range"),o=0;o<t.length;o++){var n=t[o],i=n[0];if(n[1]<=e)return i}}function l(e){if(e){var t=e.length;return e[Math.floor(t*Math.random())]}}function d(e){var t=l(r.Share.getExtra(e));return r.Share.get(t)}o.goToPreload=function(){cc.director.loadScene("preload")},o.goToHome=function(e){void 0===e&&(e=a.OpenHomeFrom.UI_LOGIN),cc.director.loadScene("home"),n.Home.OpenHomeFrom=e},o.setButtonSpriteFrame=function(e,t){var o=e.getComponent(cc.Sprite);o.spriteFrame=t,o.enabled=!1,o.enabled=!0},o.calcHonorId=c,o.getGradeName=function(e){if(r.Honor.getExtra("max_star")[0]<=e)return"最强王者";var t=c(e);return r.Honor.get(t).name},o.calcShowStarCount=function(e){var t=0;return 0<e&&(r.Honor.getExtra("max_star")[0]<=e?t=5:0==(t=e%5)&&(t=5)),t},o.formatDateTime=function(e){var t=new Date(e),o=t.getFullYear(),n=t.getMonth()+1,i=n<10?"0"+n:""+n,r=t.getDate(),a=r<10?"0"+r:""+r,s=t.getHours(),c=s<10?"0"+s:""+s,l=t.getMinutes(),d=l<10?"0"+l:""+l,u=t.getSeconds();return o+"-"+i+"-"+a+" "+c+":"+d+":"+(u<10?"0"+u:""+u)},o.showHeadImg=function(e,t,o){var n=i.default.GetComponent(e);n.PlaymateId=t,n.HeadUrl=o},o.randSelect=l,o.randManualShare=function(){return d("manual_list")},o.randInviteShare=function(){return d("invite_list")},o.randFlauntShare=function(){return d("flaunt_list")},o.formatPercent=function(e){return Math.floor(100*e)+"%"},o.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},o.protoErrMsg=function(e){var t=s.ProtoErrorCode[e];return t||"ErrorCode:"+e},o.httpPost=function(e,t,o){var n=cc.loader.getXMLHttpRequest();n.onreadystatechange=function(){if(cc.log("xhr.readyState="+n.readyState+"  xhr.status="+n.status),4===n.readyState&&200<=n.status&&n.status<300){var e=n.responseText;o(e)}else o(null)},n.open("POST",e,!0),cc.sys.isNative&&n.setRequestHeader("Accept-Encoding","gzip,deflate"),n.timeout=5e3,n.send(t)},cc._RF.pop()},{"../component/prefab/PlaymateHead":"PlaymateHead","../module/Modules":"Modules","./Defines":"Defines","./config/vo/ConfigVO":"ConfigVO","./net/proto/ProtoReflect":"ProtoReflect"}],ModelPve:[function(e,t,o){"use strict";var n,i;cc._RF.push(t,"31413S68+BDIpYWSEyxxci3","ModelPve"),Object.defineProperty(o,"__esModule",{value:!0}),(i=n||(n={}))[i.TIME=0]="TIME",i[i.STEP=1]="STEP";var r=function(){function e(){this._pfbScore=null,this._pfbMask=null,this._pfbBlock=null,this._pfbBomb=null,this._pfbObstacle=null,this._pfbWall=null,this._pfbTableware=null,this._pfbTransport=null,this._pfbPs=null,this._pfbGate=null,this._pfbBonusBall=null,this._pfbTileBg=null,this.mapData=null,this.levelData=null,this.curLevel=1,this.levelType=n.STEP,this.remainStep=0,this.remainTime=0,this.curScore=0,this.spawnPetStep=0,this.spawnBugStep=0,this.objectiveCnt=[],this.objectiveSpawnCnt=[],this.freeBlocks=[],this.freeBombs=[],this.freeObstacles=[]}return e.prototype.initFreeNodes=function(){this.freeBlocks=[],this.freeBombs=[],this.freeObstacles=[]},Object.defineProperty(e.prototype,"pfbScore",{get:function(){return this._pfbScore},set:function(e){this._pfbScore=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pfbMask",{get:function(){return this._pfbMask},set:function(e){this._pfbMask=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pfbBlock",{get:function(){return this._pfbBlock},set:function(e){this._pfbBlock=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pfbBomb",{get:function(){return this._pfbBomb},set:function(e){this._pfbBomb=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pfbObstacle",{get:function(){return this._pfbObstacle},set:function(e){this._pfbObstacle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pfbWall",{get:function(){return this._pfbWall},set:function(e){this._pfbWall=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pfbTableware",{get:function(){return this._pfbTableware},set:function(e){this._pfbTableware=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pfbTransport",{get:function(){return this._pfbTransport},set:function(e){this._pfbTransport=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pfbPs",{get:function(){return this._pfbPs},set:function(e){this._pfbPs=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pfbGate",{get:function(){return this._pfbGate},set:function(e){this._pfbGate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pfbBonusBall",{get:function(){return this._pfbBonusBall},set:function(e){this._pfbBonusBall=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pfbTileBg",{get:function(){return this._pfbTileBg},set:function(e){this._pfbTileBg=e},enumerable:!0,configurable:!0}),e.prototype.popBlock=function(){var e=null;return(e=0<this.freeBlocks.length?this.freeBlocks.pop():cc.instantiate(this.pfbBlock)).active=!0,e},e.prototype.pushBlock=function(e){e.active=!1,e.x=1e4,this.freeBlocks.push(e)},e.prototype.popBomb=function(){var e=null;return(e=0<this.freeBombs.length?this.freeBombs.pop():cc.instantiate(this.pfbBomb)).active=!0,e},e.prototype.pushBomb=function(e){e.active=!1,e.x=1e4,this.freeBombs.push(e)},e.prototype.popObstacle=function(){var e=null;return(e=0<this.freeObstacles.length?this.freeObstacles.pop():cc.instantiate(this.pfbObstacle)).active=!0,e},e.prototype.pushObstacle=function(e){e.active=!1,e.x=1e4,this.freeObstacles.push(e)},e}();o.default=r,cc._RF.pop()},{}],ModelPvp:[function(e,t,o){"use strict";cc._RF.push(t,"cec79lmtkZDhLlTB7t2Tedz","ModelPvp"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this._pfbScore=null,this._pfbBlock=null,this._pfbBomb=null,this._pfbObstacle=null,this._pfbTileBg=null,this.remainTime=0,this.curScore=0,this.spawnPetStep=0,this.spawnBugStep=0,this.objectiveCnt=[],this.objectiveSpawnCnt=[],this.freeBlocks=[],this.freeBombs=[],this.freeObstacles=[]}return e.prototype.initFreeNodes=function(){this.freeBlocks=[],this.freeBombs=[],this.freeObstacles=[]},Object.defineProperty(e.prototype,"pfbScore",{get:function(){return this._pfbScore},set:function(e){this._pfbScore=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pfbBlock",{get:function(){return this._pfbBlock},set:function(e){this._pfbBlock=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pfbBomb",{get:function(){return this._pfbBomb},set:function(e){this._pfbBomb=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pfbObstacle",{get:function(){return this._pfbObstacle},set:function(e){this._pfbObstacle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pfbTileBg",{get:function(){return this._pfbTileBg},set:function(e){this._pfbTileBg=e},enumerable:!0,configurable:!0}),e.prototype.popBlock=function(){var e=null;return(e=0<this.freeBlocks.length?this.freeBlocks.pop():cc.instantiate(this.pfbBlock)).active=!0,e},e.prototype.pushBlock=function(e){e.active=!1,e.x=1e4,this.freeBlocks.push(e)},e.prototype.popBomb=function(){var e=null;return(e=0<this.freeBombs.length?this.freeBombs.pop():cc.instantiate(this.pfbBomb)).active=!0,e},e.prototype.pushBomb=function(e){e.active=!1,e.x=1e4,this.freeBombs.push(e)},e.prototype.popObstacle=function(){var e=null;return(e=0<this.freeObstacles.length?this.freeObstacles.pop():cc.instantiate(this.pfbObstacle)).active=!0,e},e.prototype.pushObstacle=function(e){e.active=!1,e.x=1e4,this.freeObstacles.push(e)},e}();o.default=n,cc._RF.pop()},{}],ModuleManager:[function(e,t,o){"use strict";cc._RF.push(t,"22440A5T0JAyKzRJgdSXWh9","ModuleManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Modules"),i=function(){function e(){}return Object.defineProperty(e,"INSTANCE",{get:function(){return this.singleInstance||(this.singleInstance=new e),this.singleInstance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.subModules||(this.subModules=[],n.create()),this.subModules.forEach(function(e){e.init()})},e.prototype.addModule=function(e){this.subModules.push(e)},e}();o.ModuleManager=i,o.InitManager=function(){i.INSTANCE.init()},o.AddModule=function(e){i.INSTANCE.addModule(e)},cc._RF.pop()},{"./Modules":"Modules"}],Modules:[function(e,t,o){"use strict";cc._RF.push(t,"146b11+G0xAO6Rbjs34+oxl","Modules"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../component/page/login/AccModule"),i=e("../component/page/home/HomeModule"),r=e("../component/game/PlayMoudle");o.create=function(){o.Acc=new n.default,o.Home=new i.default,o.Play=new r.default},cc._RF.pop()},{"../component/game/PlayMoudle":"PlayMoudle","../component/page/home/HomeModule":"HomeModule","../component/page/login/AccModule":"AccModule"}],NetByteArray:[function(e,t,o){"use strict";cc._RF.push(t,"06975GWSmBDaIi8/tEr3iRx","NetByteArray"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,r,a,s=function(){function e(){}return e.ENDIAN_LITTLE="littleEndian",e.ENDIAN_BIG="bigEndian",e}();o.Endian=s,(i=n=o.EndianConst||(o.EndianConst={}))[i.ENDIAN_LITTLE=0]="ENDIAN_LITTLE",i[i.ENDIAN_BIG=1]="ENDIAN_BIG",(a=r||(r={}))[a.SIZE_OF_BOOLEAN=1]="SIZE_OF_BOOLEAN",a[a.SIZE_OF_INT8=1]="SIZE_OF_INT8",a[a.SIZE_OF_INT16=2]="SIZE_OF_INT16",a[a.SIZE_OF_INT32=4]="SIZE_OF_INT32",a[a.SIZE_OF_UINT8=1]="SIZE_OF_UINT8",a[a.SIZE_OF_UINT16=2]="SIZE_OF_UINT16",a[a.SIZE_OF_UINT32=4]="SIZE_OF_UINT32",a[a.SIZE_OF_FLOAT32=4]="SIZE_OF_FLOAT32",a[a.SIZE_OF_FLOAT64=8]="SIZE_OF_FLOAT64";var c=function(){function e(e,t){var o;void 0===t&&(t=0),this.bufferExtSize=0,this.EOF_BYTE=-1,this.EOF_CODE_POINT=-1,t<0&&(t=0),this.bufferExtSize=t;var n=0;if(e){var i=void 0;if(e instanceof Uint8Array?n=(i=e).length:(i=new Uint8Array(e),n=e.byteLength),0===t)o=new Uint8Array(n);else o=new Uint8Array(t*(1+(n/t|0)));o.set(i)}else o=new Uint8Array(t);this.writePosition=n,this.curPosition=0,this.bufBytes=o,this.data=new DataView(o.buffer),this.endian=s.ENDIAN_BIG}return Object.defineProperty(e.prototype,"endian",{get:function(){return this.$endian===n.ENDIAN_LITTLE?s.ENDIAN_LITTLE:s.ENDIAN_BIG},set:function(e){this.$endian=e===s.ENDIAN_LITTLE?n.ENDIAN_LITTLE:n.ENDIAN_BIG,this.$isLittleEndian=this.$endian===n.ENDIAN_LITTLE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readAvailable",{get:function(){return this.writePosition-this.curPosition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this.data.buffer.slice(0,this.writePosition)},set:function(e){var t,o=e.byteLength,n=new Uint8Array(e),i=this.bufferExtSize;0===i?t=new Uint8Array(o):t=new Uint8Array((1+(o/i|0))*i);t.set(n),this.writePosition=o,this.bufBytes=t,this.data=new DataView(t.buffer)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rawBuffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bytes",{get:function(){return this.bufBytes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataView",{get:function(){return this.data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.curPosition},set:function(e){(this.curPosition=e)>this.writePosition&&(this.writePosition=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.writePosition},set:function(e){this.writePosition=e,this.data.byteLength>e&&(this.curPosition=e),this._validateBuffer(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bytesAvailable",{get:function(){return this.data.byteLength-this.curPosition},enumerable:!0,configurable:!0}),e.prototype.clear=function(){var e=new ArrayBuffer(this.bufferExtSize);this.data=new DataView(e),this.bufBytes=new Uint8Array(e),this.curPosition=0,this.writePosition=0},e.prototype.validate=function(e){var t=this.bufBytes.length;if(0<t&&this.curPosition+e<=t)return!0;DyGame.$error(1)},e.prototype.readBoolean=function(){if(this.validate(r.SIZE_OF_BOOLEAN))return!!this.bufBytes[this.position++]},e.prototype.readByte=function(){if(this.validate(r.SIZE_OF_INT8))return this.data.getInt8(this.position++)},e.prototype.readBytes=function(e,t,o){if(void 0===t&&(t=0),void 0===o&&(o=0),e){var n=this.curPosition,i=this.writePosition-n;if(i<0)DyGame.$error(1);else{if(0===o)o=i;else if(i<o)return void DyGame.$error(1);var r=e.curPosition;e.curPosition=0,e.validateBuffer(t+o),e.curPosition=r,e.bufBytes.set(this.bufBytes.subarray(n,n+o),t),this.position+=o}}},e.prototype.readDouble=function(){return 4294967296*this.readUnsignedInt()+this.readUnsignedInt()},e.prototype.readFloat=function(){if(this.validate(r.SIZE_OF_FLOAT32)){var e=this.data.getFloat32(this.curPosition,this.$isLittleEndian);return this.position+=r.SIZE_OF_FLOAT32,e}},e.prototype.readInt=function(){if(this.validate(r.SIZE_OF_INT32)){var e=this.data.getInt32(this.curPosition,this.$isLittleEndian);return this.position+=r.SIZE_OF_INT32,e}},e.prototype.readShort=function(){if(this.validate(r.SIZE_OF_INT16)){var e=this.data.getInt16(this.curPosition,this.$isLittleEndian);return this.position+=r.SIZE_OF_INT16,e}},e.prototype.readUnsignedByte=function(){if(this.validate(r.SIZE_OF_UINT8))return this.bufBytes[this.position++]},e.prototype.readUnsignedInt=function(){if(this.validate(r.SIZE_OF_UINT32)){var e=this.data.getUint32(this.position,this.$isLittleEndian);return this.position+=r.SIZE_OF_UINT32,e}},e.prototype.readUnsignedShort=function(){if(this.validate(r.SIZE_OF_UINT16)){var e=this.data.getUint16(this.position,this.$isLittleEndian);return this.position+=r.SIZE_OF_UINT16,e}},e.prototype.readUTF=function(){var e=this.readUnsignedShort();return 0<e?this.readUTFBytes(e):""},e.prototype.readUTFBytes=function(e){if(this.validate(e)){var t=this.data,o=new Uint8Array(t.buffer,t.byteOffset+this.curPosition,e);return this.position+=e,this.decodeUTF8(o)}},e.prototype.writeBoolean=function(e){this.validateBuffer(r.SIZE_OF_BOOLEAN),this.bufBytes[this.position++]=+e},e.prototype.writeByte=function(e){this.validateBuffer(r.SIZE_OF_INT8),this.bufBytes[this.position++]=255&e},e.prototype.writeBytes=function(e,t,o){var n;t<0||o<0||0<(n=0===o?e.length-t:Math.min(e.length-t,o))&&(this.validateBuffer(n),this.bufBytes.set(e.bufBytes.subarray(t,n),this.curPosition),this.position=this.curPosition+n)},e.prototype.writeDouble=function(e){var t=Math.floor(e/4294967296);this.writeUnsignedInt(t),this.writeUnsignedInt((4294967295&e)>>>0)},e.prototype.writeFloat=function(e){this.validateBuffer(r.SIZE_OF_FLOAT32),this.data.setFloat32(this.curPosition,e,this.$isLittleEndian),this.position+=r.SIZE_OF_FLOAT32},e.prototype.writeInt=function(e){this.validateBuffer(r.SIZE_OF_INT32),this.data.setInt32(this.curPosition,e,this.$isLittleEndian),this.position+=r.SIZE_OF_INT32},e.prototype.writeShort=function(e){this.validateBuffer(r.SIZE_OF_INT16),this.data.setInt16(this.curPosition,e,this.$isLittleEndian),this.position+=r.SIZE_OF_INT16},e.prototype.writeUnsignedInt=function(e){this.validateBuffer(r.SIZE_OF_UINT32),this.data.setUint32(this.curPosition,e,this.$isLittleEndian),this.position+=r.SIZE_OF_UINT32},e.prototype.writeUnsignedShort=function(e){this.validateBuffer(r.SIZE_OF_UINT16),this.data.setUint16(this.curPosition,e,this.$isLittleEndian),this.position+=r.SIZE_OF_UINT16},e.prototype.writeUTF=function(e){var t=this.encodeUTF8(e),o=t.length;this.validateBuffer(r.SIZE_OF_UINT16+o),this.data.setUint16(this.curPosition,o,this.$isLittleEndian),this.position+=r.SIZE_OF_UINT16,this._writeUint8Array(t,!1)},e.prototype.writeUTFBytes=function(e){this._writeUint8Array(this.encodeUTF8(e))},e.prototype.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},e.prototype._writeUint8Array=function(e,t){void 0===t&&(t=!0);var o=this.curPosition,n=o+e.length;t&&this.validateBuffer(n),this.bytes.set(e,o),this.position=n},e.prototype.validateBuffer=function(e){this.writePosition=Math.max(this.writePosition,e),e+=this.curPosition,this._validateBuffer(e)},e.prototype._validateBuffer=function(e){if(this.data.byteLength<e){var t=this.bufferExtSize,o=void 0;if(0===t)o=new Uint8Array(e);else o=new Uint8Array((1+(e/t>>0))*t);o.set(this.bufBytes),this.bufBytes=o,this.data=new DataView(o.buffer)}},e.prototype.inRange=function(e,t,o){return t<=e&&e<=o},e.prototype.div=function(e,t){return Math.floor(e/t)},e.prototype.encoderError=function(e){DyGame.$error(1026,e)},e.prototype.decoderError=function(e,t){return e&&DyGame.$error(1),t||65533},e.prototype.encodeUTF8=function(e){for(var t=0,o=this.stringToCodePoints(e),n=[];o.length>t;){var i=o[t++];if(this.inRange(i,55296,57343))this.encoderError(i);else if(this.inRange(i,0,127))n.push(i);else{var r=void 0,a=void 0;for(this.inRange(i,128,2047)?(r=1,a=192):this.inRange(i,2048,65535)?(r=2,a=224):this.inRange(i,65536,1114111)&&(r=3,a=240),n.push(this.div(i,Math.pow(64,r))+a);0<r;){var s=this.div(i,Math.pow(64,r-1));n.push(128+s%64),r-=1}}}return new Uint8Array(n)},e.prototype.decodeUTF8=function(e){for(var t,o=0,n="",i=0,r=0,a=0,s=0;e.length>o;){var c=e[o++];if(c===this.EOF_BYTE)t=0!==r?this.decoderError(!1):this.EOF_CODE_POINT;else if(0===r)this.inRange(c,0,127)?t=c:(this.inRange(c,194,223)?(r=1,s=128,i=c-192):this.inRange(c,224,239)?(r=2,s=2048,i=c-224):this.inRange(c,240,244)?(r=3,s=65536,i=c-240):this.decoderError(!1),i*=Math.pow(64,r),t=null);else if(this.inRange(c,128,191))if(a+=1,i+=(c-128)*Math.pow(64,r-a),a!==r)t=null;else{var l=i,d=s;s=a=r=i=0,t=this.inRange(l,d,1114111)&&!this.inRange(l,55296,57343)?l:this.decoderError(!1,c)}else s=a=r=i=0,o--,t=this.decoderError(!1,c);null!==t&&t!==this.EOF_CODE_POINT&&(t<=65535?0<t&&(n+=String.fromCharCode(t)):(t-=65536,n+=String.fromCharCode(55296+(t>>10&1023)),n+=String.fromCharCode(56320+(1023&t))))}return n},e.prototype.stringToCodePoints=function(e){for(var t=[],o=0,n=e.length;o<e.length;){var i=e.charCodeAt(o);if(this.inRange(i,55296,57343))if(this.inRange(i,56320,57343))t.push(65533);else if(o===n-1)t.push(65533);else{var r=e.charCodeAt(o+1);if(this.inRange(r,56320,57343)){var a=1023&i,s=1023&r;o+=1,t.push(65536+(a<<10)+s)}else t.push(65533)}else t.push(i);o+=1}return t},e}();o.ByteArray=c,cc._RF.pop()},{}],NetController:[function(e,t,o){"use strict";cc._RF.push(t,"0bdfbrU9rBJsLt+PVaDqda+","NetController"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./socket/SocketDefine"),c=e("./NetByteArray"),l=e("./proto/ProtoReflect"),d=e("./proto/ProtoCrypto"),r=e("./socket/GameWebSocket"),u=e("./proto/ProtoDispatcher"),n=e("../persist/GamePersist"),a=e("../../component/page/login/AccManager"),s=e("../Misc"),h=e("../runtime/RuntimeManager"),p=e("../Defines"),f=function(){function e(){this.isLoadingPreload=!1,this.connectFailedTimes=0,this.connectedSuccess=!1,this.coreNode=new cc.Node("node-netcontroller"),n.default.RootNodeNet.addChild(this.coreNode),this.protoBuffer=new c.ByteArray,this.socket=new r.default,this.coreNode.addChild(this.socket.node),this.socket.type=r.default.TYPE_BINARY,this.socket.on(i.SOCKET_DATA,this.onSocketData,this),this.socket.on(i.SOCKET_CONNECT,this.onSocketOpen,this),this.socket.on(i.SOCKET_CLOSE,this.onSocketClose,this),this.socket.on(i.SOCKET_IO_ERROR,this.onSocketError,this)}return Object.defineProperty(e,"INSTANCE",{get:function(){return this.singleInstance||(this.singleInstance=new e),e.singleInstance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Connected",{get:function(){return this.socket.connected},enumerable:!0,configurable:!0}),e.prototype.emit=function(e,t){this.node.emit(e,t)},e.prototype.on=function(e,t,o,n){this.coreNode.on(e,t,o,n)},e.prototype.off=function(e,t,o,n){this.coreNode.off(e,t,o,n)},Object.defineProperty(e.prototype,"node",{get:function(){return this.coreNode},enumerable:!0,configurable:!0}),e.prototype.reConnect=function(e,t,o,n){this.protoBuffer=null,this.socket.node.destroy(),this.socket=null,this.protoBuffer=new c.ByteArray,this.socket=new r.default,this.coreNode.addChild(this.socket.node),this.socket.type=r.default.TYPE_BINARY,this.socket.on(i.SOCKET_DATA,this.onSocketData,this),this.socket.on(i.SOCKET_CONNECT,this.onSocketOpen,this),this.socket.on(i.SOCKET_CLOSE,this.onSocketClose,this),this.socket.on(i.SOCKET_IO_ERROR,this.onSocketError,this),this.connect(e,t,o,n)},e.prototype.connect=function(e,t,o,n){this.host=e,this.port=t,this.path=o,this.isSecurity=n,this.connectedSuccess=!1,this.doConnect()},e.prototype.send=function(e){this.socket.writeBytes(e.encode())},e.prototype.onSocketOpen=function(){this.connectedSuccess=!0,this.connectFailedTimes=0,this.socket.on(i.SOCKET_CLOSE,this.onSocketClose,this);var e=new cc.Event.EventCustom(i.SOCKET_CONNECT,!1);this.coreNode.emit(i.SOCKET_CONNECT,e)},e.prototype.onSocketClose=function(){if(this.connectedSuccess){if(!h.default.INSTANCE.IsBackground&&!this.isLoadingPreload){var e=n.default.INSTANCE.RootUI;return e?"HomeUI"===e.uiName()?0<a.default.INSTANCE.RetryTimes?(this.isLoadingPreload=!0,void s.goToPreload()):void a.default.INSTANCE.reConnectServer():void("PlayUI"!==e.uiName()?"LoginUI"!==e.uiName()&&(s.goToPreload(),this.isLoadingPreload=!0):s.goToHome(p.OpenHomeFrom.UI_PLAY)):(s.goToPreload(),void(this.isLoadingPreload=!0))}}else if(this.connectFailedTimes++,5<this.connectFailedTimes)s.goToPreload(),this.isLoadingPreload=!0;else{if(!this.host)return void s.goToPreload();this.doConnect()}},e.prototype.onSocketError=function(){},e.prototype.onSocketData=function(){var e=this.protoBuffer.length;e===this.protoBuffer.position&&1024<=e&&this.protoBuffer.clear(),this.socket.readBytes(this.protoBuffer,this.protoBuffer.length),this.parseProto()},e.prototype.doConnect=function(){var e=(this.isSecurity?"wss://":"ws://")+this.host+":"+this.port;this.path&&(e+="/"+this.path),this.socket.connectByUrl(e)},e.prototype.parseProto=function(){for(;this.protoBuffer.length!==this.protoBuffer.position;){var e=this.protoBuffer.readUnsignedShort();if(e>this.protoBuffer.bytesAvailable){this.protoBuffer.position=this.protoBuffer.position-2;break}var t=new c.ByteArray;this.protoBuffer.readBytes(t,0,e);var o=t.readUnsignedByte();o&&(t=d.decode(o,t));var n=t.readUnsignedByte(),i=(n<<8)+t.readUnsignedByte(),r=l.ProtoMsgMap[i];if(r&&r.decode&&r.EVENT_NAME){var a=r.decode(t);a.MSG_ID=i;var s=r.EVENT_NAME;u.DispatcherList[n].emit(s,a)}}},e}();o.default=f,cc._RF.pop()},{"../../component/page/login/AccManager":"AccManager","../Defines":"Defines","../Misc":"Misc","../persist/GamePersist":"GamePersist","../runtime/RuntimeManager":"RuntimeManager","./NetByteArray":"NetByteArray","./proto/ProtoCrypto":"ProtoCrypto","./proto/ProtoDispatcher":"ProtoDispatcher","./proto/ProtoReflect":"ProtoReflect","./socket/GameWebSocket":"GameWebSocket","./socket/SocketDefine":"SocketDefine"}],NetUtil:[function(e,t,o){"use strict";cc._RF.push(t,"e97cbrOI+xGl57y9BdAI/Cl","NetUtil"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./NetController"),i=function(){function e(){}return e.SendMsg=function(e){n.default.INSTANCE.send(e)},e}();o.default=i,cc._RF.pop()},{"./NetController":"NetController"}],NodePool:[function(e,t,o){"use strict";cc._RF.push(t,"df046ECo4ZH3pW4unt5EfU8","NodePool"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.initPool=function(e){i.INSTANCE.initPool(e)},e.getNodeBlock=function(){return i.INSTANCE.getNodeBlock()},e.getNodeBomb=function(){return i.INSTANCE.getNodeBomb()},e.getNodeWall=function(){return i.INSTANCE.getNodeWall()},e.getNodeTableware=function(){return i.INSTANCE.getNodeTableware()},e.getNodeObstacle=function(){return i.INSTANCE.getNodeObstacle()},e.getNodeScore=function(){return i.INSTANCE.getNodeScore()},e.getNodePs=function(){return i.INSTANCE.getNodePs()},e.putNodeBlock=function(e){i.INSTANCE.putNodeBlock(e)},e.putNodeBomb=function(e){i.INSTANCE.putNodeBomb(e)},e.putNodeWall=function(e){i.INSTANCE.putNodeWall(e)},e.putNodeTableware=function(e){i.INSTANCE.putNodeTableware(e)},e.putNodeObstacle=function(e){i.INSTANCE.putNodeObstacle(e)},e.putNodeScore=function(e){i.INSTANCE.putNodeScore(e)},e.putNodePs=function(e){i.INSTANCE.putNodePs(e)},e}();o.default=n;var i=function(){function e(){}return Object.defineProperty(e,"INSTANCE",{get:function(){return this.singleInstance||(this.singleInstance=new e),this.singleInstance},enumerable:!0,configurable:!0}),e.prototype.initPool=function(e){this.model=e,this.nodPoolScore?this.nodPoolScore.clear():this.nodPoolScore=new cc.NodePool},e.prototype.getNodeBlock=function(){return 0<this.nodPoolBlock.size()?this.nodPoolBlock.get():cc.instantiate(this.model.pfbBlock)},e.prototype.getNodeBomb=function(){return 0<this.nodPoolBomb.size()?this.nodPoolBomb.get():cc.instantiate(this.model.pfbBomb)},e.prototype.getNodeWall=function(){return 0<this.nodPoolWall.size()?this.nodPoolWall.get():cc.instantiate(this.model.pfbWall)},e.prototype.getNodeTableware=function(){return 0<this.nodPoolTableware.size()?this.nodPoolTableware.get():cc.instantiate(this.model.pfbTableware)},e.prototype.getNodeObstacle=function(){return 0<this.nodPoolObstacle.size()?this.nodPoolObstacle.get():cc.instantiate(this.model.pfbObstacle)},e.prototype.getNodeScore=function(){return 0<this.nodPoolScore.size()?this.nodPoolScore.get():cc.instantiate(this.model.pfbScore)},e.prototype.getNodePs=function(){return 0<this.nodPoolPs.size()?this.nodPoolPs.get():cc.instantiate(this.model.pfbPs)},e.prototype.putNodeBlock=function(e){this.nodPoolBlock.put(e)},e.prototype.putNodeBomb=function(e){this.nodPoolBomb.put(e)},e.prototype.putNodeWall=function(e){this.nodPoolWall.put(e)},e.prototype.putNodeTableware=function(e){this.nodPoolTableware.put(e)},e.prototype.putNodeObstacle=function(e){this.nodPoolObstacle.put(e)},e.prototype.putNodeScore=function(e){this.nodPoolScore.put(e)},e.prototype.putNodePs=function(e){this.nodPoolPs.put(e)},e}();cc._RF.pop()},{}],Obstacle:[function(e,t,o){"use strict";cc._RF.push(t,"e1352cPnltJI4HJ+ljaYigQ","Obstacle"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../PlayDefine"),r=e("../../../../dyGame/DYNotify"),n=e("./BaseTile"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.spine_dog=null,e.spine_cat=null,e.spine_rabbit=null,e._collectPosition=cc.v2(-108,905),e.hasRec=!1,e}return __extends(e,n),Object.defineProperty(e.prototype,"collectPosition",{get:function(){return this._collectPosition},set:function(e){this._collectPosition=e},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){var t=this;n.prototype.onLoad.call(this),this._tileType=i.TILE_TYPE.LEAF,this.spine=this.node.getChildByName("nodSpine").getComponent("sp.Skeleton"),this.spine.animation=null,this.node.on("touchstart",this.onTouch,this),this.spine.setCompleteListener(function(e){t.spine.animation=null}),this.randomPlayAni()},e.prototype.onTouch=function(e){this.spine.setAnimation(0,"animation2",!1)},e.prototype.init=function(){this.node.active=!0,this.node.scale=1,this.node.getChildByName("nodSpine").active=!0,this.node.getChildByName("nodSpine").scale=1},e.prototype.setContentSize=function(e,t){this.node.setContentSize(e,t)},e.prototype.setArrPosition=function(e,t){this.x=e,this.y=t,this.node.setPosition(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2)},e.prototype.setSpfByType=function(e){switch(this.init(),e){case i.LEAF_TYPE.TYPE_1:this.spine.skeletonData=this.spine_cat;break;case i.LEAF_TYPE.TYPE_2:this.spine.skeletonData=this.spine_dog;break;case i.LEAF_TYPE.TYPE_2:this.spine.skeletonData=this.spine_rabbit}},e.prototype.newTile=function(e,t,o){void 0===o&&(o=!0),this.node.setPosition(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2+700),this.x=e,this.y=t,o&&this.moveTo(e,t,null)},e.prototype.moveTo=function(e,t,o,n){void 0===n&&(n=!0);var i=this;if(this.x!=e&&n&&this.newTile(e,t,!1),this.x=e,this.y=t,this.node.stopActionByTag(1),n)var r=cc.sequence(cc.moveTo(.15,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2-15)),cc.moveTo(.1,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2+5)),cc.moveTo(.1,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2)),cc.callFunc(function(){i.onTouch(null),o&&o()}));else r=cc.sequence(cc.moveTo(.3,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2)),cc.callFunc(function(){o&&o()}));this.node.runAction(r),r.setTag(1)},e.prototype.recoveryObstacle=function(e,t){this.hasRec,this.hasRec=!0;var o=this;o.node.zIndex=1003;var n=cc.sequence(cc.moveBy(.1,0,-100),cc.callFunc(function(){e&&e()}),cc.moveTo(.4,o._collectPosition.x,o._collectPosition.y),cc.scaleTo(.2,0),cc.callFunc(function(){t&&t(),r.default.post(i.GET_OBJECTIVE,{tileType:i.TILE_TYPE.LEAF,type:o.type}),o.destroyTile()}));o.node.runAction(n)},e.prototype.destroyTile=function(){this._game.PlayUI.model.pushObstacle(this.node)},e.prototype.onDestroy=function(){n.prototype.onDestroy.call(this),this.unschedule(this.onTouch)},e.prototype.randomPlayAni=function(){var e=20*Math.random()+10;this.unschedule(this.onTouch),this.schedule(this.onTouch,e)},e.prototype.billowAct=function(e,t,o){this.onTouch(null),n.prototype.billowAct.call(this,e,t,o)},e.prototype.bothSideAct=function(e,t){this.onTouch(null),n.prototype.bothSideAct.call(this,e,t)},__decorate([c(cc.RawAsset)],e.prototype,"spine_dog",void 0),__decorate([c(cc.RawAsset)],e.prototype,"spine_cat",void 0),__decorate([c(cc.RawAsset)],e.prototype,"spine_rabbit",void 0),e=__decorate([s],e)}(n.default);o.default=l,cc._RF.pop()},{"../../../../dyGame/DYNotify":"DYNotify","../PlayDefine":"PlayDefine","./BaseTile":"BaseTile"}],PanelHeader_pve:[function(e,t,o){"use strict";cc._RF.push(t,"c42c0UtNb1G8pIo3EklVA7n","PanelHeader_pve"),Object.defineProperty(o,"__esModule",{value:!0});var d=e("../PlayDefine"),u=e("../GameData"),n=e("../../../../dyGame/DYNotify"),i=e("./panelGuide_pve"),h=e("./StateMgr"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labCountDown=null,e.labLevel=null,e.labScore=null,e.pfbTableware=null,e.nodObjective=null,e.nodLastTime=null,e.nodLastStep=null,e.nodPanelTile=null,e.panelGuide=null,e.nodGameOver=null,e.nodScoreProgress=null,e.objective=null,e.layerGame=null,e.leaves=0,e.passedTime=0,e.remainTime=10,e._isObjectiveDone=[!1,!1,!1,!1,!1],e}return __extends(e,t),o=e,Object.defineProperty(e,"INSTANCE",{get:function(){return o.singleInstance},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){this.PlayUI=cc.find("Canvas").getComponent("PlayUI_pve"),o.singleInstance=this,n.default.regObserver(this,this.onNotify,d.GET_OBJECTIVE),this.nodLastTime.active=!1,this.nodLastStep.active=!1},e.prototype.getPositionAR=function(e,t){for(var o=[],n=0;n<this.nodObjective.children.length;++n){var i=this.nodObjective.children[n].getChildByName("sprite"),r=i.parent.convertToWorldSpaceAR(i.getPosition()),a=this.nodPanelTile.convertToNodeSpaceAR(r);o.push(a)}for(n=0;n<this.objective.length;++n)if(this.objective[n].tileType==e&&this.objective[n].type==t)return o[n]},e.prototype.gameOver=function(){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(e){return[2,new Promise(function(e,t){n.nodGameOver.active=!0;var o=n.nodGameOver.getComponent(cc.Animation);o.play("aniBonusTime"),o.on("finished",function(){n.nodGameOver.active=!1,e()},n)})]})})},e.prototype.isObjectiveDone=function(e,t){for(var o=0;o<this.objective.length;++o)if(this.objective[o].tileType==e&&this.objective[o].type==t)return this._isObjectiveDone[o];return!0},e.prototype.onNotify=function(e,t,o){var n=e;t==d.GET_OBJECTIVE&&(o?n.getObjective(o):n.refeshData())},e.prototype.getObjective=function(e){switch(e.tileType){case d.TILE_TYPE.BOMB:u.default.useBombCnt[e.type-1]++;break;case d.TILE_TYPE.WALL:u.default.delWallCnt[e.type-1]++;break;case d.TILE_TYPE.LEAF:u.default.collectLeavesCnt[e.type-1]++;break;case d.TILE_TYPE.TABLEWARE:u.default.delTablawareCnt[e.type-1]++}this.refeshData()},e.prototype.getScore=function(e){u.default.score+=e,this.labScore.string=u.default.score+"";var t=this.nodScoreProgress.getChildByName("nodBg"),o=this.nodScoreProgress.getChildByName("nodBar"),n=this.nodScoreProgress.getChildByName("nodStar"),i=u.default.mapData["level_"+u.default.curLevel].score;o.width=u.default.score/i[3]*t.width;var r=t.convertToWorldSpaceAR(cc.v2(i[0]/i[3]*t.width,0)),a=t.convertToWorldSpaceAR(cc.v2(i[1]/i[3]*t.width,0)),s=t.convertToWorldSpaceAR(cc.v2(i[2]/i[3]*t.width,0));if(n.children[0].x=n.convertToNodeSpaceAR(r).x,n.children[1].x=n.convertToNodeSpaceAR(a).x,n.children[2].x=n.convertToNodeSpaceAR(s).x,n.children[3].x=n.convertToNodeSpaceAR(r).x,n.children[4].x=n.convertToNodeSpaceAR(a).x,n.children[5].x=n.convertToNodeSpaceAR(s).x,u.default.score>=i[2])for(var c=3;c<6;++c)n.children[c].active||(n.children[c].active=!0,n.children[c].getComponent(cc.Animation).play("aniSpawnStar"));else if(u.default.score>=i[1]){for(c=3;c<5;++c)n.children[c].active||(n.children[c].active=!0,n.children[c].getComponent(cc.Animation).play("aniSpawnStar"));n.children[5].active=!1}else u.default.score>=i[0]?n.children[3].active||(n.children[3].active=!0,n.children[3].getComponent(cc.Animation).play("aniSpawnStar")):n.children[3].active=!1,n.children[4].active=!1,n.children[5].active=!1},e.prototype.refeshData=function(){for(var e=0;e<u.default.levelData.objective.length;++e){var t=this.nodObjective.children[e].getChildByName("labObjective").getComponent(cc.Label);switch(u.default.levelData.objective[e].tileType){case d.TILE_TYPE.BLOCK:(o=this.objective[e].count-u.default.collectFruitCnt[u.default.levelData.objective[e].type-1])<=0?(o=0,this._isObjectiveDone[e]=!0,t.string="x"+o,t.node.active=!1,this.nodObjective.children[e].getChildByName("sprAchieved").active=!0,1==u.default.curLevel&&this.panelGuide.level1_tip4(e)):t.string="x"+o;break;case d.TILE_TYPE.BOMB:(o=this.objective[e].count-u.default.useBombCnt[u.default.levelData.objective[e].type-1])<=0?(o=0,this._isObjectiveDone[e]=!0,t.string="x"+o,t.node.active=!1,this.nodObjective.children[e].getChildByName("sprAchieved").active=!0):t.string="x"+o;break;case d.TILE_TYPE.WALL:(o=this.objective[e].count-u.default.delWallCnt[u.default.levelData.objective[e].type-1])<=0?(o=0,this._isObjectiveDone[e]=!0,t.string="x"+o,t.node.active=!1,this.nodObjective.children[e].getChildByName("sprAchieved").active=!0):t.string="x"+o;break;case d.TILE_TYPE.LEAF:(o=this.objective[e].count-u.default.collectLeavesCnt[u.default.levelData.objective[e].type-1])<=0?(o=0,this._isObjectiveDone[e]=!0,t.string="x"+o,t.node.active=!1,this.nodObjective.children[e].getChildByName("sprAchieved").active=!0):t.string="x"+o;break;case d.TILE_TYPE.TABLEWARE:var o;(o=this.objective[e].count-u.default.delTablawareCnt[u.default.levelData.objective[e].type-1])<=0?(o=0,this._isObjectiveDone[e]=!0,t.string="x"+o,t.node.active=!1,this.nodObjective.children[e].getChildByName("sprAchieved").active=!0):t.string="x"+o}}this.layerGame.moveAllTileDown(!0)},e.prototype.start=function(){},e.prototype.checkWin=function(){for(var e=!0,t=!1,o=0;o<u.default.levelData.objective.length;++o)switch(u.default.levelData.objective[o].tileType){case d.TILE_TYPE.BLOCK:(t=u.default.collectFruitCnt[u.default.levelData.objective[o].type-1]>=this.objective[o].count)||(e=t);break;case d.TILE_TYPE.BOMB:(t=u.default.useBombCnt[u.default.levelData.objective[o].type-1]>=this.objective[o].count)||(e=t);break;case d.TILE_TYPE.LEAF:(t=u.default.collectLeavesCnt[u.default.levelData.objective[o].type-1]>=this.objective[o].count)||(e=t);break;case d.TILE_TYPE.WALL:(t=u.default.delWallCnt[u.default.levelData.objective[o].type-1]>=this.objective[o].count)||(e=t);break;case d.TILE_TYPE.TABLEWARE:(t=u.default.delTablawareCnt[u.default.levelData.objective[o].type-1]>=this.objective[o].count)||(e=t)}return e&&(h.default.INSTANCE.isStopOperate=!0),e},e.prototype.init=function(e){u.default.clear(),this.getScore(0),this.layerGame=e,this.remainTime=d.ONE_GAME_TIME,this.labScore.string="0",this.objective=u.default.levelData.objective,this._isObjectiveDone=[!1,!1,!1,!1,!1],this.remainTime=u.default.levelData.time,u.default.step=u.default.levelData.step;for(var t=0;t<this.nodObjective.children.length;++t){this.nodObjective.children[t].active=!1,this.nodObjective.children[t].getChildByName("sprAchieved").active=!1,this.nodObjective.children[t].getChildByName("labObjective").active=!0;for(var o=this.nodObjective.children[t].getChildByName("sprite").children,n=0;n<o.length;++n)o[n].destroy()}for(t=0;t<this.objective.length;++t){switch(this.nodObjective.children[t].active=!0,this.nodObjective.children[t].getChildByName("labObjective").getComponent(cc.Label).string="x"+this.objective[t].count,this.objective[t].tileType){case d.TILE_TYPE.BLOCK:var i=cc.instantiate(this.PlayUI.model.pfbBlock),r=i.getComponent("Block");i.parent=this.nodObjective.children[t].getChildByName("sprite"),r.init(),r.type=this.objective[t].type,r.setContentSize(80,80),i.scale=1,i.zIndex=0,i.x=0,i.y=0;break;case d.TILE_TYPE.BOMB:var a=cc.instantiate(this.PlayUI.model.pfbBomb);a.parent=this.nodObjective.children[t].getChildByName("sprite"),(r=a.getComponent("Bomb")).init(),r.type=this.objective[t].type,this.objective[t].type==d.BOMB_TYPE.BOMB_ONE_COLOR&&(r.subType=d.BLOCK_COLOR.COLORS),r.setContentSize(80,80),a.scale=1,a.zIndex=0,a.x=0,a.y=0;break;case d.TILE_TYPE.LEAF:var s=cc.instantiate(this.PlayUI.model.pfbObstacle);s.parent=this.nodObjective.children[t].getChildByName("sprite"),(r=s.getComponent("Obstacle")).type=this.objective[t].type,r.canTouch=!1,r.setContentSize(80,80),s.scale=1,s.zIndex=0,s.x=0,s.y=0;break;case d.TILE_TYPE.TABLEWARE:var c=cc.instantiate(this.PlayUI.model.pfbTableware);c.parent=this.nodObjective.children[t].getChildByName("sprite"),(r=c.getComponent("Tableware")).type=this.objective[t].type,r.canTouch=!1,r.setContentSize(80,80),c.scale=1,c.zIndex=0,c.x=0,c.y=0;break;case d.TILE_TYPE.WALL:var l=cc.instantiate(this.PlayUI.model.pfbWall);l.parent=this.nodObjective.children[t].getChildByName("sprite"),(r=l.getComponent("Wall")).type=this.objective[t].type,r.setContentSize(80,80),l.scale=1,l.zIndex=0,l.x=0,l.y=0}}this.labLevel.string="第"+u.default.curLevel+"关",0==u.default.step?(h.default.INSTANCE.isTimeLevel=!0,this.nodLastTime.active=!0,this.nodLastStep.active=!1,this.labCountDown.string=this.remainTime+"",this.labCountDown.node.parent.getChildByName("labSec").getComponent(cc.Label).string="秒"):(h.default.INSTANCE.isTimeLevel=!1,this.nodLastTime.active=!1,this.nodLastStep.active=!0,this.labCountDown.string=u.default.step+"",this.labCountDown.node.parent.getChildByName("labSec").getComponent(cc.Label).string="步")},e.prototype.addStep=function(){if(0<u.default.step){if(u.default.step--,this.labCountDown.string=u.default.step.toString(),10==u.default.step&&!h.default.INSTANCE.isStopOperate)this.node.parent.getChildByName("nodBoard").getChildByName("nodTip").children[0].runAction(cc.sequence(cc.moveBy(.2,200,0),cc.delayTime(1),cc.moveBy(.2,-200,0)));u.default.step<=0&&(h.default.INSTANCE.isStopOperate=!0,this.layerGame.moveAllTileDown(!0))}},e.prototype.panelHeader=function(e,t){},e.prototype.update=function(e){u.default.gameBegan&&(this.passedTime+=e,1<=this.passedTime&&(1<=this.remainTime&&(this.remainTime=this.remainTime-1,this.passedTime=this.passedTime-1,this.labCountDown.string=this.remainTime+"",this.remainTime<=5&&1<=this.remainTime?this.PlayUI.Audio.countDownAudio():0===this.remainTime&&(this.PlayUI.Audio.timeEndAudio(),h.default.INSTANCE.isStopOperate=!0,this.layerGame.moveAllTileDown(!0))),this.remainTime<1&&(this.passedTime=0)))},e.prototype.onDestroy=function(){n.default.removeAllObservers(this)},__decorate([s(cc.Label)],e.prototype,"labCountDown",void 0),__decorate([s(cc.Label)],e.prototype,"labLevel",void 0),__decorate([s(cc.Label)],e.prototype,"labScore",void 0),__decorate([s(cc.Prefab)],e.prototype,"pfbTableware",void 0),__decorate([s(cc.Node)],e.prototype,"nodObjective",void 0),__decorate([s(cc.Node)],e.prototype,"nodLastTime",void 0),__decorate([s(cc.Node)],e.prototype,"nodLastStep",void 0),__decorate([s(cc.Node)],e.prototype,"nodPanelTile",void 0),__decorate([s(i.default)],e.prototype,"panelGuide",void 0),__decorate([s(cc.Node)],e.prototype,"nodGameOver",void 0),__decorate([s(cc.Node)],e.prototype,"nodScoreProgress",void 0),e=o=__decorate([a],e);var o}(cc.Component);o.default=c,cc._RF.pop()},{"../../../../dyGame/DYNotify":"DYNotify","../GameData":"GameData","../PlayDefine":"PlayDefine","./StateMgr":"StateMgr","./panelGuide_pve":"panelGuide_pve"}],PanelHeader:[function(e,t,o){"use strict";cc._RF.push(t,"5e463/+hV5NyoE0iybrwkWX","PanelHeader"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./GameData"),r=e("../../module/Modules"),a=e("./PlayDefine"),s=e("./PlayManager"),c=e("../../common/net/NetUtil"),l=e("../../common/net/proto/mods/ProtoSectionPlay"),n=cc._decorator,d=n.ccclass,u=n.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodBlueIcon=null,e.nodRedIcon=null,e.nodProgress=null,e.labBlueName=null,e.labRedName=null,e.labBlueCount=null,e.labRedCount=null,e.labOutCount=null,e.labCountDown=null,e.sprBonusTime=null,e.sprGrayBg=null,e.fontGreen=null,e.fontRed=null,e.pvpTeach=!1,e.pvpAi=!1,e.passedTime=0,e.remainTime=10,e.myAnimalCount=0,e.opponentAnimalCount=0,e}return __extends(e,t),e.prototype.onLoad=function(){this.PlayUI=cc.find("Canvas").getComponent("PlayUI")},e.prototype.start=function(){this.setPlayMsg(),this.init(),this.setProgress()},e.prototype.init=function(){this.remainTime=a.ONE_GAME_TIME,this.labCountDown.string=this.remainTime+"",this.labBlueCount.string="x0",this.labRedCount.string="x0",this.labOutCount.string="",this.myAnimalCount=0,this.opponentAnimalCount=0},e.prototype.setProgress=function(){var e=0;(e=0==this.myAnimalCount+this.opponentAnimalCount?.5:(this.myAnimalCount+2)/(this.myAnimalCount+this.opponentAnimalCount+4))<.2?e=.2:.8<e&&(e=.8);var t=this.nodProgress.getChildByName("nodMask"),o=this.nodProgress.getChildByName("sprRed"),n=this.nodProgress.getChildByName("sprStar");t.width=o.width*e,n.x=t.width-o.width/2},e.prototype.setHead=function(e,t){e.parent=this.nodBlueIcon,t.parent=this.nodRedIcon;var o=e.getComponent("PlaymateHead"),n=t.getComponent("PlaymateHead");e.setPosition(0,0),t.setPosition(0,0),o.setSize(110,110),n.setSize(110,110),o.HeadUrl=r.Play.DataPlay.showHeadImg,n.HeadUrl=r.Play.DataPlay.OpponentHeadUrl},e.prototype.setPlayMsg=function(){this.labBlueName.string=r.Play.DataPlay.MyName,this.labRedName.string=r.Play.DataPlay.OpponentName},e.prototype.getAnimal=function(e,t){t==r.Play.DataPlay.MySide?(this.labBlueCount.string="x"+e,this.myAnimalCount=e):(this.labRedCount.string="x"+e,this.opponentAnimalCount=e),this.showOutCount(),this.setProgress()},e.prototype.showOutCount=function(){var e=this.myAnimalCount-this.opponentAnimalCount;0<e?(this.labOutCount.font=this.fontGreen,this.labOutCount.string="超过对方"+e+"个"):e<0?(this.labOutCount.font=this.fontRed,this.labOutCount.string="落后对方"+-e+"个"):this.labOutCount.string=""},e.prototype.panelHeader=function(e,t){},e.prototype.update=function(e){var t=this;if(i.default.gameBegan){if(this.passedTime+=e,1<=this.passedTime){if(1<=this.remainTime){if(this.remainTime=this.remainTime-1,this.passedTime=this.passedTime-1,this.labCountDown.string=this.remainTime+"",this.remainTime<=5&&1<=this.remainTime){var o=cc.sequence(cc.callFunc(function(){t.labCountDown.node.color=new cc.Color(255,0,0,255)}),cc.delayTime(.2),cc.callFunc(function(){t.labCountDown.node.color=new cc.Color(255,255,255,255)}));this.labCountDown.node.runAction(o),this.PlayUI.Audio.countDownAudio()}else 0===this.remainTime&&this.PlayUI.Audio.timeEndAudio();(this.pvpTeach||this.pvpAi)&&50==this.remainTime&&(r.Play.DataPlay.Phase=2,this.pvpTeach&&s.default.INSTANCE.PlayUI.layerGame.pvpGuide.setGuide(a.GUIDE_TYPE.TIME50))}if((this.pvpTeach||this.pvpAi)&&30==this.remainTime&&(r.Play.DataPlay.Phase=3,this.pvpTeach&&s.default.INSTANCE.PlayUI.layerGame.pvpGuide.setGuide(a.GUIDE_TYPE.TIME30)),(this.pvpTeach||this.pvpAi)&&10==this.remainTime&&(r.Play.DataPlay.Phase=4),(this.pvpTeach||this.pvpAi)&&0==this.remainTime&&(r.Play.DataPlay.Phase=1,this.pvpTeach&&s.default.INSTANCE.PlayUI.onPlayFinish(null),this.pvpAi)){var n=new l.PlayAiFinishC2S;n.saveAnimalCount=this.myAnimalCount,this.myAnimalCount>this.opponentAnimalCount?n.winSide=r.Play.DataPlay.MySide:this.myAnimalCount==this.opponentAnimalCount?n.winSide=0:n.winSide=r.Play.DataPlay.AiSide,c.default.SendMsg(n)}}this.remainTime<1&&(this.passedTime=0)}},__decorate([u(cc.Node)],e.prototype,"nodBlueIcon",void 0),__decorate([u(cc.Node)],e.prototype,"nodRedIcon",void 0),__decorate([u(cc.Node)],e.prototype,"nodProgress",void 0),__decorate([u(cc.Label)],e.prototype,"labBlueName",void 0),__decorate([u(cc.Label)],e.prototype,"labRedName",void 0),__decorate([u(cc.Label)],e.prototype,"labBlueCount",void 0),__decorate([u(cc.Label)],e.prototype,"labRedCount",void 0),__decorate([u(cc.Label)],e.prototype,"labOutCount",void 0),__decorate([u(cc.Label)],e.prototype,"labCountDown",void 0),__decorate([u(cc.Sprite)],e.prototype,"sprBonusTime",void 0),__decorate([u(cc.Node)],e.prototype,"sprGrayBg",void 0),__decorate([u(cc.RawAsset)],e.prototype,"fontGreen",void 0),__decorate([u(cc.RawAsset)],e.prototype,"fontRed",void 0),e=__decorate([d],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../common/net/NetUtil":"NetUtil","../../common/net/proto/mods/ProtoSectionPlay":"ProtoSectionPlay","../../module/Modules":"Modules","./GameData":"GameData","./PlayDefine":"PlayDefine","./PlayManager":"PlayManager"}],PanelLevelChoose:[function(e,t,o){"use strict";cc._RF.push(t,"52a49je7k5Fu7sO44kJQpS9","PanelLevelChoose"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../GrayFrag"),r=e("../../../module/Modules"),i=e("../../../common/persist/GamePersist"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodHead=null,e.pHeadPerfab=null,e.nodBtnLevel=null,e.spfBtnNormal=null,e.spfBtnLocked=null,e.LevelChoose=null,e}return __extends(e,t),e.prototype.onLoad=function(){cc._renderType!==cc.game.RENDER_TYPE_CANVAS&&(this.grayShader(),this.resetShader())},e.prototype.start=function(){this.setBtnStat(),this.LevelChoose=this.node.parent.getComponent("LevelChoose")},e.prototype.setBtnStat=function(){for(var e=0;e<this.nodBtnLevel.children.length;++e)this.nodBtnLevel.children[e]&&(this.nodBtnLevel.children[e].on("click",this.levelChoose,this),this.nodBtnLevel.children[e].name="BtnLevel_"+e,this.nodBtnLevel.children[e].getComponent("BtnLevel").setLevel(e+1),this.nodBtnLevel.children[e].getChildByName("labLevel").active=!0);for(e=0;e<r.Home.DataPlayer.Level;++e)this.nodBtnLevel.children[e]&&(this.nodBtnLevel.children[e].getChildByName("sprBg").getComponent(cc.Sprite).spriteFrame=this.spfBtnNormal,this.nodBtnLevel.children[e].getComponent("BtnLevel").setStar(r.Home.DataPlayer.PveStats[e]));var t=this.nodBtnLevel.children[r.Home.DataPlayer.Level];t?t.getComponent("BtnLevel").setCurLevel():(t=this.nodBtnLevel.children[r.Home.DataPlayer.Level-1]).getComponent("BtnLevel").setCurLevel(!0);for(e=r.Home.DataPlayer.Level+1;e<this.nodBtnLevel.children.length;++e)this.nodBtnLevel.children[e]&&(this.nodBtnLevel.children[e].getComponent("BtnLevel").setInteractable(this.grayProgram,!1),this.nodBtnLevel.children[e].getChildByName("sprBg").getComponent(cc.Sprite).spriteFrame=this.spfBtnLocked);this.setHead()},e.prototype.setHead=function(){var e=r.Home.DataPlayer.Level;r.Home.DataPlayer.Level==this.nodBtnLevel.children.length&&(e=r.Home.DataPlayer.Level-1);var t=this.nodBtnLevel.children[e],o=this.nodBtnLevel.convertToWorldSpaceAR(t.getPosition());this.nodHead.setPosition(this.nodHead.parent.convertToNodeSpaceAR(o));var n=cc.instantiate(this.pHeadPerfab);n.parent=this.nodHead.getChildByName("head"),n.setPosition(0,0);var i=n.getComponent("PlaymateHead");i.HeadUrl=r.Home.DataPlayer.MyHeadUrl,i.setSize(110,110)},e.prototype.levelChoose=function(e){i.default.INSTANCE.btnAudio_1();var t=e.target.name.substring(9);this.LevelChoose.levelChoose(Number(t)+1)},e.prototype.grayShader=function(){this.grayProgram=new cc.GLProgram,cc.sys.isNative?this.grayProgram.initWithString(n.default.default_vert,n.default.gray_frag):(this.grayProgram.initWithVertexShaderByteArray(n.default.default_vert,n.default.gray_frag),this.grayProgram.addAttribute(cc.macro.ATTRIBUTE_NAME_POSITION,cc.macro.VERTEX_ATTRIB_POSITION),this.grayProgram.addAttribute(cc.macro.ATTRIBUTE_NAME_COLOR,cc.macro.VERTEX_ATTRIB_COLOR),this.grayProgram.addAttribute(cc.macro.ATTRIBUTE_NAME_TEX_COORD,cc.macro.VERTEX_ATTRIB_TEX_COORDS)),this.grayProgram.link(),this.grayProgram.updateUniforms()},e.prototype.resetShader=function(){this.normalProgram=new cc.GLProgram,cc.sys.isNative?this.normalProgram.initWithString(n.default.default_vert,n.default.gray_nomal):(this.normalProgram.initWithVertexShaderByteArray(n.default.default_vert,n.default.gray_nomal),this.normalProgram.addAttribute(cc.macro.ATTRIBUTE_NAME_POSITION,cc.macro.VERTEX_ATTRIB_POSITION),this.normalProgram.addAttribute(cc.macro.ATTRIBUTE_NAME_COLOR,cc.macro.VERTEX_ATTRIB_COLOR),this.normalProgram.addAttribute(cc.macro.ATTRIBUTE_NAME_TEX_COORD,cc.macro.VERTEX_ATTRIB_TEX_COORDS)),this.normalProgram.link(),this.normalProgram.updateUniforms()},__decorate([c(cc.Node)],e.prototype,"nodHead",void 0),__decorate([c(cc.Prefab)],e.prototype,"pHeadPerfab",void 0),__decorate([c(cc.Node)],e.prototype,"nodBtnLevel",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"spfBtnNormal",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"spfBtnLocked",void 0),e=__decorate([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../../common/persist/GamePersist":"GamePersist","../../../module/Modules":"Modules","../../GrayFrag":"GrayFrag"}],PanelSelectServer:[function(e,t,o){"use strict";cc._RF.push(t,"e9f81qnhjBH5Y9G1j0H/Qs5","PanelSelectServer"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../BasePanel"),i=e("../../../common/config/vo/ConfigVO"),r=e("./AccManager"),a=e("../../../common/persist/GamePersist"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.panelNode=null,e.contentNode=null,e.rootNode=null,e.closeBtn=null,e.serverGroup=null,e.groupLen=null,e.grouplist=null,e.default=0,e}return __extends(e,t),e.prototype.start=function(){this.serverGroup=Partner.SERVER_GROUP,this.grouplist=i.ServerList.getExtra("group_list")[this.serverGroup],this.groupLen=this.grouplist.length,this.closeBtn.node.on(cc.Node.EventType.TOUCH_END,this.onCloseBtn,this);for(var e=0;e<this.groupLen;e++)this.createPanel(i.ServerList.get(this.grouplist[e]).name,e),1===i.ServerList.get(this.grouplist[e]).default&&(this.default=e)},e.prototype.createPanel=function(e,t){var o=cc.instantiate(this.panelNode);o.active=!0,o.getChildByName("btn").getChildByName("name").getComponent(cc.Label).string=e,o.parent=this.contentNode;var n=this;o.getChildByName("btn").on(cc.Node.EventType.TOUCH_END,function(e){a.default.INSTANCE.btnAudio_1(),n.switchServer(t)},this)},e.prototype.switchServer=function(e){var t=this.grouplist[e];r.default.INSTANCE.setServerData(t),this.rootNode.destroy()},e.prototype.onCloseBtn=function(){a.default.INSTANCE.btnAudio_1(),this.rootNode.destroy()},__decorate([l(cc.Node)],e.prototype,"panelNode",void 0),__decorate([l(cc.Node)],e.prototype,"contentNode",void 0),__decorate([l(cc.Node)],e.prototype,"rootNode",void 0),__decorate([l(cc.Button)],e.prototype,"closeBtn",void 0),e=__decorate([c],e)}(n.default);o.default=d,cc._RF.pop()},{"../../../common/config/vo/ConfigVO":"ConfigVO","../../../common/persist/GamePersist":"GamePersist","../../BasePanel":"BasePanel","./AccManager":"AccManager"}],Particle:[function(e,t,o){"use strict";cc._RF.push(t,"152cbpXJLtBy4iSgV9iAL85","Particle"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../PlayDefine"),i=e("../NodePool"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Particle=null,e.sprite=null,e.spfStars=[],e.spfTableWare=[],e.spfWall=[],e}return __extends(e,t),e.prototype.setArrPosition=function(e,t){this.node.setPosition(80*(e-4)+40,80*t+40)},e.prototype.play=function(e,t){if(this.node.opacity=255,this.sprite.spriteFrame=null,this.Particle.texture=null,t){switch(e){case n.PARTICAL_TYPE.BLOCK:this.Particle.texture=this.spfStars[t-1];break;case n.PARTICAL_TYPE.TABLEWARE:this.Particle.texture=this.spfTableWare[t-1];break;case n.PARTICAL_TYPE.WALL:this.Particle.texture=this.spfWall[t-1]}this.Particle.resetSystem(),this.scheduleOnce(function(){this.stop()},.2)}this.scheduleOnce(function(){i.default.putNodePs(this.node)},3)},e.prototype.playBoomColAnim=function(){this.node.opacity=255;this.getComponent(cc.Animation);var e=cc.sequence(cc.fadeTo(1,0),cc.callFunc(function(){}));this.node.runAction(e),this.scheduleOnce(function(){i.default.putNodePs(this.node)},3)},e.prototype.stop=function(){this.Particle.stopSystem(),this.getComponent(cc.Animation).stop()},__decorate([s(cc.ParticleSystem)],e.prototype,"Particle",void 0),__decorate([s(cc.Sprite)],e.prototype,"sprite",void 0),__decorate([s(cc.Texture2D)],e.prototype,"spfStars",void 0),__decorate([s(cc.Texture2D)],e.prototype,"spfTableWare",void 0),__decorate([s(cc.Texture2D)],e.prototype,"spfWall",void 0),e=__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../NodePool":"NodePool","../PlayDefine":"PlayDefine"}],PlayDefine:[function(e,t,o){"use strict";var n,i,r,a,s,c,l,d,u,h,p,f;cc._RF.push(t,"c2780izCx1En6M8KlRYVvoB","PlayDefine"),Object.defineProperty(o,"__esModule",{value:!0}),o.EVENT_SLOT_CLICK="event_board_slot_click",o.EVENT_TILE_CLICK="event_board_tile_click",o.BOARD_TILE_COMPONENT="PlayAnimalTile",o.BOARD_SLOT_COMPONENT="PlayAnimalSlot",o.ROOM_COMPONENT="PlayRoom",o.ROOM_AUDIO_COMPONENT="PlayAudio",o.BOARD_COMPONENT="PlayBoard",o.ROUND_INDICATOR_COMPONENT="PlayRoundIndicator",o.OVER_COMPONENT="PlayOver",o.ONE_GAME_TIME=60,o.Event_type={RANK_RESULT:"rankResult",GAMESTART:"gameStart"},o.PLAY_PVE="PlayPVE",o.GAME_WIN="PlayWin",o.GAME_LOST="PlayLost",o.RANK_RESULT="rankResult",o.GET_OBJECTIVE="GetObjective",o.GET_SHARE_CNT="GetShareCnt",o.STEP_SPAWN_PET=8,o.STEP_SPAWN_BUG=8,o.SCORE={level_1:100,level_2:200,level_3:300,level_4:400,level_5:500,level_6:600,level_7:700,level_8:800,level_9:900,level_10:1e3},(n=o.GAME_STAT||(o.GAME_STAT={}))[n.GAMEING=1]="GAMEING",n[n.BONUSTIME=2]="BONUSTIME",n[n.CHECKRESULT=3]="CHECKRESULT",n[n.GAMEOVER=4]="GAMEOVER",o.PHASE=[{phase:1,color_num:3,step:0},{phase:2,color_num:4,step:30},{phase:3,color_num:5,step:60},{phase:4,color_num:5,step:100}],o.MAX_MATCH=200,(i=o.GRID_TYPE||(o.GRID_TYPE={}))[i.EMPTY=0]="EMPTY",i[i.TILE=1]="TILE",i[i.TRANSPORT=2]="TRANSPORT",i[i.UPGATE=3]="UPGATE",i[i.DOWNGATE=4]="DOWNGATE",(r=o.TILE_TYPE||(o.TILE_TYPE={}))[r.BLOCK=1]="BLOCK",r[r.BOMB=2]="BOMB",r[r.LEAF=3]="LEAF",r[r.WALL=4]="WALL",r[r.TABLEWARE=5]="TABLEWARE",(a=o.BLOCK_COLOR||(o.BLOCK_COLOR={}))[a.RED=1]="RED",a[a.GREEN=2]="GREEN",a[a.BLUE=3]="BLUE",a[a.YELLOW=4]="YELLOW",a[a.PURPLE=5]="PURPLE",a[a.COLORS=6]="COLORS",(s=o.BOMB_TYPE||(o.BOMB_TYPE={}))[s.BOMB_ROW=1]="BOMB_ROW",s[s.BOMB_COLUMN=2]="BOMB_COLUMN",s[s.BOMB_AROUND=3]="BOMB_AROUND",s[s.BOMB_ONE_COLOR=4]="BOMB_ONE_COLOR",(c=o.LEAF_TYPE||(o.LEAF_TYPE={}))[c.TYPE_1=1]="TYPE_1",c[c.TYPE_2=2]="TYPE_2",c[c.TYPE_3=3]="TYPE_3",c[c.TYPE_4=4]="TYPE_4",(l=o.WALL_TYPE||(o.WALL_TYPE={}))[l.TYPE_1=1]="TYPE_1",l[l.TYPE_2=2]="TYPE_2",l[l.TYPE_3=3]="TYPE_3",l[l.TYPE_4=4]="TYPE_4",(d=o.TABLEWARE_TYPE||(o.TABLEWARE_TYPE={}))[d.TYPE_1=1]="TYPE_1",d[d.TYPE_2=2]="TYPE_2",d[d.TYPE_3=3]="TYPE_3",d[d.TYPE_4=4]="TYPE_4",(u=o.TRANSPORT_TYPE||(o.TRANSPORT_TYPE={}))[u.LEFT=1]="LEFT",u[u.RIGHT=2]="RIGHT",(h=o.PARTICAL_TYPE||(o.PARTICAL_TYPE={}))[h.BOMB_COL=1]="BOMB_COL",h[h.BLOCK=2]="BLOCK",h[h.TABLEWARE=3]="TABLEWARE",h[h.WALL=4]="WALL",o.OBSTACLE_TYPE||(o.OBSTACLE_TYPE={}),(p=o.PlaySide||(o.PlaySide={}))[p.UNKNOWN=0]="UNKNOWN",p[p.RED=1]="RED",p[p.BLU=2]="BLU",(f=o.GUIDE_TYPE||(o.GUIDE_TYPE={}))[f.WELCOME=1]="WELCOME",f[f.MATCH=2]="MATCH",f[f.TIME=3]="TIME",f[f.HEAD=4]="HEAD",f[f.COUNT=5]="COUNT",f[f.SAVE=6]="SAVE",f[f.TIME50=7]="TIME50",f[f.TIME30=8]="TIME30",f[f.TIME10=9]="TIME10",f[f.BOBM_SUC=10]="BOMB_SUC",f[f.SAVE_SUC=11]="SAVE_SUC",f[f.BOMB_COL=100]="BOMB_COL",f[f.BOMB_A=101]="BOMB_A",f[f.ZZJ=102]="ZZJ",cc._RF.pop()},{}],PlayManager:[function(e, t, o){"use strict";cc._RF.push(t,"a7b79lhZJNMyZhgGsCrFcEj","PlayManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../common/net/proto/mods/ProtoSectionPlay"),i=e("../../common/net/proto/mods/ProtoSectionRoom"),r=e("../../common/net/NetUtil"),a=e("../../module/Modules"),s=function(){function t(){this.confirmEnterRoom=!1,this.bGameOver=!1}return Object.defineProperty(t,"INSTANCE",{get:function(){return this.singleInstance||(this.singleInstance=new t),this.singleInstance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsOpponentLeave",{get:function(){return this.isOpponentLeave},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PlayUI",{get:function(){return this.playUI},set:function(e){this.playUI=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PlayUI_pve",{get:function(){return this.playUI_pve},set:function(e){this.playUI_pve=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"PveEnterType",{get:function(){return this.pveEnterType},set:function(e){this.pveEnterType=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LevelChooseUI",{get:function(){return this.levelChoose},set:function(e){this.levelChoose=e},enumerable:!0,configurable:!0}),t.prototype.getAnimalRequest=function(e,t){var o=new n.PlaySaveAnimalC2S;r.default.SendMsg(o)},t.prototype.onPvpFinish=function(e){var t=new n.PlayPvpFinishC2S;t.matchOnce=e,r.default.SendMsg(t)},t.prototype.getAnimalResponse=function(e){if(this.playUI){var t=e.saveCount,o=e.animalSide;this.playUI.getAnimal(t,o)}},t.prototype.newRound=function(e){this.playUI.newRound()},t.prototype.onReadyResponse=function(e){this.playUI.onReadyResponse()},t.prototype.onBack=function(){this.bGameOver=!1,this.playUI=null,this.isOpponentLeave=null,this.invisibleRequest(),cc.director.loadScene("home")},t.prototype.invisibleRequest=function(){var e=new i.RoomInvisibleC2S;r.default.SendMsg(e)},t.prototype.newPhase=function(e){a.Play.DataPlay.Phase=e.phaseId},t.prototype.startPve=function(e){switch(t.INSTANCE.PveEnterType){case 0:Partner.energyTest()||1==e.started?this.LevelChooseUI.enterPveGame():this.PlayUI_pve.showEnergyEmpty(1);break;case 1:Partner.energyTest()||1==e.started?this.PlayUI_pve.nextLevel():this.PlayUI_pve.showEnergyEmpty(1);break;case 2:Partner.energyTest()||1==e.started?this.PlayUI_pve.playAgain():this.PlayUI_pve.showEnergyEmpty(1);case 3:Partner.energyTest()||1==e.started?this.PlayUI_pve.playAgain():this.PlayUI_pve.showEnergyEmpty(1)}},t.prototype.onContinueResponse=function(e){if(!this.isOpponentLeave){var t=e.continueList,o=t.length;if(!(o<1)){if(1<o)return this.makeConfirmRequest(),void this.didOneMorePlayStart();t[0]===a.Play.DataPlay.OpponentId?this.playUI&&this.playUI.setContinueBtn(2):this.playUI&&this.playUI.setContinueBtn(4)}}},t.prototype.makeConfirmRequest=function(){var e=new i.RoomPlayConfirmC2S;r.default.SendMsg(e)},t.prototype.didOneMorePlayStart=function(){this.playUI.didOneMorePlay()},t.prototype.onOneMorePlayStart=function(e){this.playUI?a.Play.DataPlay.CurRoomId===e&&(this.bGameOver=!1,this.playUI.onOneMorePlay()):cc.warn("room:"+e+" playui not exist when one more play")},t.prototype.onOpponentLeave=function(){this.isOpponentLeave=!0,this.playUI.setContinueBtn(3)},t.prototype.onPlayFinish=function(e){this.playUI.onPlayFinish(e)},t.prototype.readyRequest=function(){var e=new n.PlayReadyC2S;e.roomId=a.Home.DataRoom.currentRoom,r.default.SendMsg(e)},t}();o.default=s,cc._RF.pop()},{"../../common/net/NetUtil":"NetUtil","../../common/net/proto/mods/ProtoSectionPlay":"ProtoSectionPlay","../../common/net/proto/mods/ProtoSectionRoom":"ProtoSectionRoom","../../module/Modules":"Modules"}],PlayMoudle:[function(e,t,o){"use strict";cc._RF.push(t,"15a3d7YfZJCUJj1bdSl1Z3K","PlayMoudle"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../module/BaseModule"),i=e("./PlayNetHandler"),r=e("../../module/data/mod/DataPlay"),a=function(e){function t(){return e.call(this,t.MODULE_NAME)||this}return __extends(t,e),t.prototype.onCreated=function(){this.protoPlayHandler=new i.default,this.dataPlay=new r.default},Object.defineProperty(t.prototype,"DataPlay",{get:function(){return this.dataPlay},enumerable:!0,configurable:!0}),t.prototype.resetPlay=function(){this.dataPlay=new r.default},t.MODULE_NAME="home",t}(n.default);o.default=a,cc._RF.pop()},{"../../module/BaseModule":"BaseModule","../../module/data/mod/DataPlay":"DataPlay","./PlayNetHandler":"PlayNetHandler"}],PlayNetHandler:[function(e,t,o){"use strict";cc._RF.push(t,"3ae56qM7ahE+bEUsHOpW8wa","PlayNetHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../common/net/proto/mods/ProtoSectionPlay"),i=e("../../common/net/proto/mods/ProtoSectionRoom"),r=e("../../common/net/proto/ProtoDispatcher"),a=e("./PlayManager"),s=e("../../common/net/proto/mods/ProtoSectionRank"),c=e("../../../dyGame/DYNotify"),l=e("./PlayDefine"),d=function(){function e(){r.PlayDispatcher.on(n.PlaySaveAnimalS2C.EVENT_NAME,this.onSaveAnimalResponse,this),r.PlayDispatcher.on(n.PlayReadyS2C.EVENT_NAME,this.onReadyResponse,this),r.PlayDispatcher.on(n.PlayNewRoundS2C.EVENT_NAME,this.onNewRoundResponse,this),r.PlayDispatcher.on(n.PlayContinueS2C.EVENT_NAME,this.onContinueResponse,this),r.PlayDispatcher.on(n.PlayNewPhaseS2C.EVENT_NAME,this.onNewPhaseResponse,this),r.PlayDispatcher.on(n.PlayStartPveS2C.EVENT_NAME,this.onStartPve,this),r.RoomDispatcher.on(i.RoomPlayFinishS2C.EVENT_NAME,this.onPlayFinish,this),r.RoomDispatcher.on(i.RoomOpponentLeaveS2C.EVENT_NAME,this.onOpponentLeave,this),r.RankDispatcher.on(s.RankPveRankS2C.EVENT_NAME,this.onPveRankDataReceived,this)}return e.prototype.onSaveAnimalResponse=function(e){var t=e.detail;a.default.INSTANCE.getAnimalResponse(t)},e.prototype.onReadyResponse=function(e){var t=e.detail;a.default.INSTANCE.onReadyResponse(t)},e.prototype.onContinueResponse=function(e){var t=e.detail;a.default.INSTANCE.onContinueResponse(t)},e.prototype.onNewRoundResponse=function(e){var t=e.detail;a.default.INSTANCE.newRound(t)},e.prototype.onNewPhaseResponse=function(e){var t=e.detail;a.default.INSTANCE.newPhase(t)},e.prototype.onStartPve=function(e){var t=e.detail;a.default.INSTANCE.startPve(t)},e.prototype.onPlayFinish=function(e){var t=e.detail;a.default.INSTANCE.onPlayFinish(t)},e.prototype.onOpponentLeave=function(e){e.detail;a.default.INSTANCE.PlayUI&&a.default.INSTANCE.onOpponentLeave()},e.prototype.onPveRankDataReceived=function(e){var t=e.detail;c.default.post(l.RANK_RESULT,t)},e}();o.default=d,cc._RF.pop()},{"../../../dyGame/DYNotify":"DYNotify","../../common/net/proto/ProtoDispatcher":"ProtoDispatcher","../../common/net/proto/mods/ProtoSectionPlay":"ProtoSectionPlay","../../common/net/proto/mods/ProtoSectionRank":"ProtoSectionRank","../../common/net/proto/mods/ProtoSectionRoom":"ProtoSectionRoom","./PlayDefine":"PlayDefine","./PlayManager":"PlayManager"}],PlayPlaymateHead:[function(e,t,o){"use strict";cc._RF.push(t,"8f120LZskpKE7lPDdiN57qd","PlayPlaymateHead"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./PlaymateHead"),i=e("../game/PlayDefine"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefabPlaymateHead=null,e.colorFrameNode=null,e.unknownHead=null,e.nameBgSprite=null,e.nameLabel=null,e.sexIconNode=null,e.nameBgOriginalWidth=0,e.nodePlaymateHead=null,e}return __extends(e,t),e.getComponent=function(e){return e.getComponent("PlayPlaymateHead")},e.prototype.onLoad=function(){this.nameBgOriginalWidth=this.nameBgSprite.node.width,this.nodePlaymateHead=cc.instantiate(this.prefabPlaymateHead),this.nodePlaymateHead.parent=this.node,this.nodePlaymateHead.setPosition(0,0)},e.prototype.start=function(){this.colorFrameNode.setLocalZOrder(100)},e.prototype.setPlaymate=function(e){this.unknownHead.node.active=!1,n.default.GetComponent(this.nodePlaymateHead).HeadUrl=e},e.prototype.setScale=function(e){this.node.scale=e},e.prototype.setColorFrame=function(e){this.colorFrameNode.active=!0,e===i.PlaySide.BLU?(this.colorFrameNode.getChildByName("blueBg").active=!0,this.colorFrameNode.getChildByName("redBg").active=!1):(this.colorFrameNode.getChildByName("blueBg").active=!1,this.colorFrameNode.getChildByName("redBg").active=!0)},e.prototype.setName=function(e){this.nameBgSprite.node.active=!0,this.nameLabel.node.active=!0,this.nameLabel.string=e},e.prototype.setSex=function(e){this.sexIconNode.active=!0,1===e?(this.sexIconNode.getChildByName("female").active=!1,this.sexIconNode.getChildByName("male").active=!0):(this.sexIconNode.getChildByName("male").active=!1,this.sexIconNode.getChildByName("female").active=!0)},__decorate([s(cc.Prefab)],e.prototype,"prefabPlaymateHead",void 0),__decorate([s(cc.Node)],e.prototype,"colorFrameNode",void 0),__decorate([s(cc.Sprite)],e.prototype,"unknownHead",void 0),__decorate([s(cc.Sprite)],e.prototype,"nameBgSprite",void 0),__decorate([s(cc.Label)],e.prototype,"nameLabel",void 0),__decorate([s(cc.Node)],e.prototype,"sexIconNode",void 0),e=__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../game/PlayDefine":"PlayDefine","./PlaymateHead":"PlaymateHead"}],PlayStory:[function(e,t,o){"use strict";cc._RF.push(t,"7832c97tlRC74Dhyb5R8GSQ","PlayStory"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./PlayManager"),i=e("../BaseUI"),r=e("../../common/persist/GamePersist"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(o){function e(){var e=null!==o&&o.apply(this,arguments)||this;return e.story1=null,e.story2=null,e.story3=null,e.enterButton=null,e}return __extends(e,o),e.prototype.onLoad=function(){o.prototype.onLoad.call(this),this.tabAction=cc.sequence(cc.moveTo(0,cc.v2(0,-1280)),cc.callFunc(function(e){e.active=!0},this),cc.moveTo(1,cc.v2(0,0)));var t=this;this.enterButton.active=!0,this.enterButton.opacity=0;var e=cc.sequence(cc.fadeTo(1,255),cc.callFunc(function(){var e=cc.repeatForever(cc.sequence(cc.fadeTo(1,0),cc.fadeTo(1,255)));t.enterButton.runAction(e)}));this.enterButton.runAction(e),this.node.on("touchstart",this.onTouchStart,this)},e.prototype.onTouchStart=function(){r.default.INSTANCE.loadScene("game",function(){n.default.INSTANCE.PlayUI.layerGame.pvpTeach=!0,n.default.INSTANCE.newRound(null)})},e.prototype.start=function(){console.log("enter PlayStory start==========="),o.prototype.start.call(this)},e.prototype.uiName=function(){return"PlayStoryUI"},e.prototype.onContinue=function(e,t){switch(t){case"1":this.story2.active=!0,this.story2.runAction(this.tabAction);break;case"2":this.story3.active=!0,this.story3.runAction(this.tabAction);break;case"end":cc.director.loadScene("game",function(){n.default.INSTANCE.PlayUI.layerGame.pvpTeach=!0,n.default.INSTANCE.newRound(null)})}},__decorate([c(cc.Node)],e.prototype,"story1",void 0),__decorate([c(cc.Node)],e.prototype,"story2",void 0),__decorate([c(cc.Node)],e.prototype,"story3",void 0),__decorate([c(cc.Node)],e.prototype,"enterButton",void 0),e=__decorate([s],e)}(i.default);o.default=l,cc._RF.pop()},{"../../common/persist/GamePersist":"GamePersist","../BaseUI":"BaseUI","./PlayManager":"PlayManager"}],PlayUI_pve:[function(e,t,o){"use strict";cc._RF.push(t,"5eb30Lv2ZxEopxssy+LWgqe","PlayUI_pve"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../BaseUI"),i=e("./LayerGame_pve"),r=e("./PanelHeader_pve"),a=e("./LayerScore_pve"),s=e("../../../../dyGame/DYNotify"),c=e("../PlayDefine"),l=e("../GameData"),d=e("../../../common/net/proto/mods/ProtoSectionPlay"),u=e("../../../module/Modules"),h=e("../../../common/persist/GamePersist"),p=e("../../../../dyGame/DYAudio"),f=e("../Audio"),m=e("../PlayManager"),y=e("../../../common/net/NetUtil"),v=e("./ModelPve"),_=e("../NodePool"),g=cc._decorator,b=g.ccclass,S=g.property,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.panelHeaderNode=null,e.panelHeader=null,e.panelQuick=null,e.layerGameNode=null,e.layerGame=null,e.layerReviveNode=null,e.layerRevive=null,e.layerScoreNode=null,e.layerScore=null,e.Audio=null,e.model=null,e.isOver=!1,e.isBonusOver=!1,e.hasTouched=!1,e}return __extends(e,t),e.prototype.onLoad=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t.prototype.onLoad.call(this),m.default.INSTANCE.PlayUI_pve=this,s.default.regObserver(this,this.onNotify,c.GET_SHARE_CNT),s.default.regObserver(this,this.onNotify,c.GAME_WIN),s.default.regObserver(this,this.onNotify,c.GAME_LOST),this.model=new v.default,this.layerGame.init(this,this.model),this.layerScore.init(this,this.model),[2]})})},e.prototype.start=function(){t.prototype.start.call(this),this.layerGameNode.active=!0,this.layerScoreNode.active=!1,this.panelQuick.active=!1,this.isOver=!1,this.isBonusOver=!1,this.panelQuick.on("touchstart",this.closePanelQuick,this),this.Audio.playBg()},e.prototype.onLoadSceneEnd=function(){this.init()},e.prototype.uiName=function(){return"PlayUI_pve"},e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(e){return this.setPrefab(),_.default.initPool(this.model),this.layerGame.loadLevelData(),this.scheduleOnce(function(){h.default.INSTANCE.onLoadSceneEnd(),t.layerGame.gameBegin()},.2),[2]})})},e.prototype.setPrefab=function(){this.model.pfbScore=this.layerGame.pfbScore,this.model.pfbMask=this.layerGame.pfbMask,this.model.pfbBlock=this.layerGame.pfbBlock,this.model.pfbBomb=this.layerGame.pfbBomb,this.model.pfbObstacle=this.layerGame.pfbObstacle,this.model.pfbWall=this.layerGame.pfbWall,this.model.pfbTableware=this.layerGame.pfbTableware,this.model.pfbTransport=this.layerGame.pfbTransport,this.model.pfbPs=this.layerGame.pfbPs,this.model.pfbGate=this.layerGame.pfbGate,this.model.pfbBonusBall=this.layerGame.pfbBonusBall,this.model.pfbTileBg=this.layerGame.pfbTileBg},e.prototype.closePanelQuick=function(){var e=this;this.hasTouched||(this.hasTouched=!0,l.default.gameBegan=!0,h.default.INSTANCE.panelFadeOut(this.panelQuick,function(){e.panelQuick.active=!1,e.panelQuick.opacity=255,e.hasTouched=!1}))},e.prototype.nextLevel=function(){var e=l.default.curLevel+1;l.default.mapData["level_"+e]?e<=u.Home.DataPlayer.Level+1&&(l.default.curLevel=e,cc.director.loadScene("pve_game")):this.toast("程序员小哥哥还在加班开发中")},e.prototype.playAgain=function(){this.isOver=!1,this.isBonusOver=!1,this.layerGameNode.active=!0,this.layerScoreNode.active=!1;var e=this.panelQuick.getChildByName("nodContent").getChildByName("btnNotQuick");e.stopAllActions(),e.scale=1,this.panelQuick.active=!1,this.layerGame.loadLevelData(),this.layerGame.gameBegin()},e.prototype.btnListener=function(e){switch(e.target.name){case"btnGiveUp":case"btnShare":break;case"btnNextLevel":h.default.INSTANCE.btnAudio_1();var t=new d.PlayStartPveC2S;m.default.INSTANCE.PveEnterType=1,y.default.SendMsg(t);break;case"btnContinue":h.default.INSTANCE.btnAudio_1();t=new d.PlayStartPveC2S;m.default.INSTANCE.PveEnterType=2,y.default.SendMsg(t);break;case"btnGameBack":h.default.INSTANCE.btnAudio_1(),p.default.stopMusic(),cc.director.loadScene("levelChoose");break;case"btnNotQuick":h.default.INSTANCE.btnAudio_1();t=new d.PlayStartPveC2S;m.default.INSTANCE.PveEnterType=3,y.default.SendMsg(t);break;case"btnBack":h.default.INSTANCE.btnAudio_1(),this.pauseGame()}},e.prototype.pauseGame=function(){this.panelQuick.active=!0,h.default.INSTANCE.panelPopUp(this.panelQuick.getChildByName("nodContent"),function(){}),l.default.gameBegan=!1},e.prototype.onNotify=function(o,n,i){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){return t=o,n==c.GAME_WIN?o.scheduleOnce(function(){t.layerScore.win()},1):n==c.GAME_LOST?t.layerScore.lose():n==c.GET_SHARE_CNT&&1===i.success&&t.showEnergyEmpty(2),[2]})})},e.prototype.showEnergyEmpty=function(n){var i=this;h.default.INSTANCE.ForceWaiting(),cc.loader.loadRes("prefab/component/Energy",cc.Prefab,function(e,t){var o=cc.instantiate(t);o.parent=i.node,o.setPosition(0,0),o.getComponent("Energy").setMode(n),h.default.INSTANCE.CancelWaiting(),h.default.INSTANCE.panelPopUp(o.getChildByName("content"),function(){})})},e.prototype.onDestroy=function(){s.default.removeAllObservers(this)},__decorate([S(cc.Node)],e.prototype,"panelHeaderNode",void 0),__decorate([S(r.default)],e.prototype,"panelHeader",void 0),__decorate([S(cc.Node)],e.prototype,"panelQuick",void 0),__decorate([S(cc.Node)],e.prototype,"layerGameNode",void 0),__decorate([S(i.default)],e.prototype,"layerGame",void 0),__decorate([S(cc.Node)],e.prototype,"layerReviveNode",void 0),__decorate([S(a.default)],e.prototype,"layerRevive",void 0),__decorate([S(cc.Node)],e.prototype,"layerScoreNode",void 0),__decorate([S(a.default)],e.prototype,"layerScore",void 0),__decorate([S(f.default)],e.prototype,"Audio",void 0),e=__decorate([b],e)}(n.default);o.default=T,cc._RF.pop()},{"../../../../dyGame/DYAudio":"DYAudio","../../../../dyGame/DYNotify":"DYNotify","../../../common/net/NetUtil":"NetUtil","../../../common/net/proto/mods/ProtoSectionPlay":"ProtoSectionPlay","../../../common/persist/GamePersist":"GamePersist","../../../module/Modules":"Modules","../../BaseUI":"BaseUI","../Audio":"Audio","../GameData":"GameData","../NodePool":"NodePool","../PlayDefine":"PlayDefine","../PlayManager":"PlayManager","./LayerGame_pve":"LayerGame_pve","./LayerScore_pve":"LayerScore_pve","./ModelPve":"ModelPve","./PanelHeader_pve":"PanelHeader_pve"}],PlayUI:[function(e,t,o){"use strict";cc._RF.push(t,"7589fKcvFBK75ULah4BLnY2","PlayUI"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../BaseUI"),i=e("./PlayManager"),r=e("./PanelHeader"),a=e("./LayerGame"),s=e("./LayerScore"),c=e("./GameData"),l=e("../../common/persist/GamePersist"),d=e("../../common/social/SocialManager"),u=e("../../module/Modules"),h=e("../../common/Defines"),p=e("../../common/net/proto/mods/ProtoSectionPlay"),f=e("../../common/net/NetUtil"),m=e("./Audio"),y=e("./ModelPvp"),v=cc._decorator,_=v.ccclass,g=v.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.panelHeaderNode=null,e.panelHeader=null,e.layerGameNode=null,e.layerGame=null,e.layerScoreNode=null,e.layerScore=null,e.guideOver=null,e.readyGoAction=null,e.spriteGameOver=null,e.spritegrayBg=null,e.sprQuitConfirm=null,e.Audio=null,e.model=null,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),(i.default.INSTANCE.PlayUI=this).layerGameNode.active=!0,this.layerScoreNode.active=!1,this.guideOver.active=!1,this.model=new y.default,this.layerGame.init(this,this.model),this.layerScore.init(this,this.model)},e.prototype.start=function(){t.prototype.start.call(this),this.Audio.playBg()},e.prototype.onLoadSceneEnd=function(){this.init()},e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.setPrefab(),this.layerGame.gameBegain(),this.beReady(1.5),this.loadHead(),l.default.INSTANCE.onLoadSceneEnd(),this.layerGameNode.active=!0,this.layerScoreNode.active=!1,i.default.INSTANCE.PlayUI.layerGame.pvpTeach?this.layerGame.guide():this.readygoAction(),[2]})})},e.prototype.setPrefab=function(){this.model.pfbScore=this.layerGame.pfbScore,this.model.pfbBlock=this.layerGame.pfbBlock,this.model.pfbBomb=this.layerGame.pfbBomb,this.model.pfbObstacle=this.layerGame.pfbObstacle,this.model.pfbTileBg=this.layerGame.pfbTileBg},e.prototype.loadHead=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,this.loadRes("prefab/component/PlaymateHead")];case 1:return t=e.sent(),this.nodHead_1=cc.instantiate(t),this.nodHead_2=cc.instantiate(t),this.panelHeader.setHead(this.nodHead_1,this.nodHead_2),[2]}})})},e.prototype.beReady=function(e){void 0===e&&(e=0),0<e?this.scheduleOnce(function(){i.default.INSTANCE.readyRequest()},e):i.default.INSTANCE.readyRequest()},e.prototype.newRound=function(){this.layerGame.pvpTeach||(c.default.gameBegan=!0),this.layerGame.canTouch=!0},e.prototype.onReadyResponse=function(){},e.prototype.getAnimal=function(e,t){this.panelHeader.getAnimal(e,t)},e.prototype.onPlayFinish=function(e){var t=this;if(this.layerGame.gameOver(),c.default.gameBegan=!1,this.layerGame.pvpTeach){this.guideOver.active=!0,this.guideOver.on("touchstart",function(){u.Home.OpenHomeFrom=h.OpenHomeFrom.UI_GUIDE,i.default.INSTANCE.onBack()});var o=new p.PlayGuideFinishC2S;o.guideFinish=1,f.default.SendMsg(o)}else{this.spriteGameOver.active=!0;var n=this.spriteGameOver.getComponent(cc.Animation);n.play("aniGameOver"),n.on("finished",function(){t.spriteGameOver.active=!1,t.layerScoreNode.active=!0,i.default.INSTANCE.onPvpFinish(t.layerGame.maxMatchCount),t.layerScore.playFinish(e,t.nodHead_1)},this)}},e.prototype.didOneMorePlay=function(){},e.prototype.setContinueBtn=function(e){this.layerScore.setContinueBtn(e)},e.prototype.onOneMorePlay=function(){this.layerGameNode.active=!0,this.layerScoreNode.active=!1,this.layerGame.gameBegain(),this.beReady(1.5),this.loadHead(),this.panelHeader.init(),this.readygoAction()},e.prototype.uiName=function(){return"PlayUI"},e.prototype.loadRes=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(o,e){cc.loader.loadRes(t,function(e,t){o(e?null:t)})})]})})},e.prototype.shareBtn=function(){l.default.INSTANCE.btnAudio_1();var e=d.default.INSTANCE.makeFlauntParam();Partner.doFlaunt(e,function(){})},e.prototype.btnListener=function(e){var t=this;switch(e.target.name){case"btnGiveUp":l.default.INSTANCE.panelFadeOut(this.sprQuitConfirm,function(){t.sprQuitConfirm.active=!1,t.sprQuitConfirm.opacity=255}),l.default.INSTANCE.btnAudio_1(),this.layerScore.giveUp();break;case"btnShare":l.default.INSTANCE.btnAudio_1(),this.shareBtn();break;case"btnContinue":l.default.INSTANCE.btnAudio_1(),this.layerScore.continue();break;case"btnBack":l.default.INSTANCE.btnAudio_1(),i.default.INSTANCE.onBack();break;case"continue":l.default.INSTANCE.btnAudio_2(),l.default.INSTANCE.panelFadeOut(this.sprQuitConfirm,function(){t.sprQuitConfirm.active=!1,t.sprQuitConfirm.opacity=255});break;case"backButton":l.default.INSTANCE.btnAudio_1(),i.default.INSTANCE.PlayUI.layerGame.pvpTeach?this.toast("请先完成教学哦"):(this.sprQuitConfirm.active=!0,l.default.INSTANCE.panelPopUp(this.sprQuitConfirm.getChildByName("nodContent")));break;case"btnNewGame":l.default.INSTANCE.btnAudio_1(),u.Home.OpenHomeFrom=h.OpenHomeFrom.UI_GUIDE,i.default.INSTANCE.onBack()}},e.prototype.readygoAction=function(){var e=this;this.scheduleOnce(function(){e.readyGoAction.active=!0,e.readyGoAction.getComponent(cc.Animation).play("readyGo"),e.layerGame.guide()},.2)},__decorate([g(cc.Node)],e.prototype,"panelHeaderNode",void 0),__decorate([g(r.default)],e.prototype,"panelHeader",void 0),__decorate([g(cc.Node)],e.prototype,"layerGameNode",void 0),__decorate([g(a.default)],e.prototype,"layerGame",void 0),__decorate([g(cc.Node)],e.prototype,"layerScoreNode",void 0),__decorate([g(s.default)],e.prototype,"layerScore",void 0),__decorate([g(cc.Node)],e.prototype,"guideOver",void 0),__decorate([g(cc.Node)],e.prototype,"readyGoAction",void 0),__decorate([g(cc.Node)],e.prototype,"spriteGameOver",void 0),__decorate([g(cc.Node)],e.prototype,"spritegrayBg",void 0),__decorate([g(cc.Node)],e.prototype,"sprQuitConfirm",void 0),__decorate([g(m.default)],e.prototype,"Audio",void 0),e=__decorate([_],e)}(n.default);o.default=b,cc._RF.pop()},{"../../common/Defines":"Defines","../../common/net/NetUtil":"NetUtil","../../common/net/proto/mods/ProtoSectionPlay":"ProtoSectionPlay","../../common/persist/GamePersist":"GamePersist","../../common/social/SocialManager":"SocialManager","../../module/Modules":"Modules","../BaseUI":"BaseUI","./Audio":"Audio","./GameData":"GameData","./LayerGame":"LayerGame","./LayerScore":"LayerScore","./ModelPvp":"ModelPvp","./PanelHeader":"PanelHeader","./PlayManager":"PlayManager"}],PlayerNetHandler:[function(e,t,o){"use strict";cc._RF.push(t,"2e79dAsJ3NMxJiVwWFCaoB0","PlayerNetHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../common/net/proto/ProtoDispatcher"),i=e("../../../common/net/proto/mods/ProtoSectionPlayer"),p=e("./HomeManager"),r=e("../../../common/persist/GamePersist"),a=e("../../../common/net/proto/ProtoReflect"),s=e("../../../module/Modules"),c=e("../../../../dyGame/DYNotify"),l=e("../../game/PlayDefine"),d=function(){function e(){n.PlayerDispatcher.on(i.PlayerSelfInfoS2C.EVENT_NAME,this.onSelfInfo,this),n.PlayerDispatcher.on(i.PlayerFortuneS2C.EVENT_NAME,this.onFortune,this),n.PlayerDispatcher.on(i.PlayerPlayStatS2C.EVENT_NAME,this.onPlayStat,this),n.PlayerDispatcher.on(i.PlayerPveStatS2C.EVENT_NAME,this.onPveStat,this),n.PlayerDispatcher.on(i.PlayerShareGameS2C.EVENT_NAME,this.onShare,this),r.default.INSTANCE.OnProtoError(a.ProtoSection.player,this.onProtoError,this)}return e.prototype.onShare=function(e){var t=e.detail;s.Home.DataPlayer.ShareCnt=t.times,console.log(t),c.default.post(l.GET_SHARE_CNT,t)},e.prototype.onProtoError=function(e){var t=e.detail.errMsg;r.default.INSTANCE.Toast(t)},e.prototype.onSelfInfo=function(e){var t=e.detail;p.default.INSTANCE.onReceiveSelfInfoS2C(t)},e.prototype.onFortune=function(e){var t=e.detail,o=t.type,n=t.val;p.default.INSTANCE.onReceiveFortune(o,n)},e.prototype.onPlayStat=function(e){var t=e.detail,o=t.stat.cntTotal,n=t.stat.cntWin,i=t.stat.saveOnce,r=t.stat.matchOnce,a=t.stat.pveTotal,s=t.stat.pveWin,c=t.stat.pvpWinOneweek,l=t.stat.pvpTotalOneweek,d=t.stat.maxSuccessiveWin,u=t.stat.level,h=t.stat.guide;p.default.INSTANCE.onReceivePlayStat(o,n,i,r,a,s,c,l,d,u,h)},e.prototype.onPveStat=function(e){var t=e.detail,o=[];o.push(t.pvestat.level1Score),o.push(t.pvestat.level2Score),o.push(t.pvestat.level3Score),o.push(t.pvestat.level4Score),o.push(t.pvestat.level5Score),o.push(t.pvestat.level6Score),o.push(t.pvestat.level7Score),o.push(t.pvestat.level8Score),o.push(t.pvestat.level9Score),o.push(t.pvestat.level10Score),o.push(t.pvestat.level11Score),o.push(t.pvestat.level12Score),o.push(t.pvestat.level13Score),o.push(t.pvestat.level14Score),o.push(t.pvestat.level15Score),p.default.INSTANCE.onReceivePveStat(o)},e}();o.default=d,cc._RF.pop()},{"../../../../dyGame/DYNotify":"DYNotify","../../../common/net/proto/ProtoDispatcher":"ProtoDispatcher","../../../common/net/proto/ProtoReflect":"ProtoReflect","../../../common/net/proto/mods/ProtoSectionPlayer":"ProtoSectionPlayer","../../../common/persist/GamePersist":"GamePersist","../../../module/Modules":"Modules","../../game/PlayDefine":"PlayDefine","./HomeManager":"HomeManager"}],PlaymateHead:[function(e,t,o){"use strict";cc._RF.push(t,"e7a4eyqV7VES7T57YzX9W4T","PlaymateHead"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imgHead=null,e.playmateId=0,e}return __extends(e,t),e.GetComponent=function(e){return e.getComponent("PlaymateHead")},e.prototype.setSize=function(e,t){this.node.setContentSize(e,t),this.imgHead.node.setContentSize(e,t)},e.prototype.start=function(){},e.prototype.showUnknownHead=function(){this.imgHead.node.active=!1},Object.defineProperty(e.prototype,"HeadUrl",{set:function(o){if(this.headImgUrl!==o&&!(o.length<1)){var n=this;if(this.headImgUrl=o,"head_"!=this.headImgUrl.substr(0,5)){var e=Partner.HEAD_IMG_HOST+this.headImgUrl;cc.loader.load(e,function(e,t){if(e)return cc.warn("load head img:"+o+" err:"+e),void(n.imgHead.node.active=!1);n.imgHead.spriteFrame=new cc.SpriteFrame(t)})}else{var t=this.headImgUrl.substring(0,this.headImgUrl.lastIndexOf("."));cc.loader.loadRes("res/ui/prefab/createRole/img_"+t,cc.SpriteFrame,function(e,t){if(e)return cc.warn("load head img:"+o+" err:"+e),void(n.imgHead.node.active=!1);n.imgHead.spriteFrame=t})}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"PlaymateId",{get:function(){return this.playmateId},set:function(e){this.playmateId=e},enumerable:!0,configurable:!0}),__decorate([r(cc.Sprite)],e.prototype,"imgHead",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],PolygonHitTest:[function(e,t,o){"use strict";cc._RF.push(t,"bbe5c+J0L9Ls7vIu+H1gU1+","PolygonHitTest"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.requireComponent,a=n.menu,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.node._oldHitTest=this.node._hitTest.bind(this.node),this.node._hitTest=this.polygonHitTest.bind(this.node)},t.prototype.polygonHitTest=function(e,t){var o=this.getComponent(cc.PolygonCollider);return o?((e=this.convertToNodeSpace(e)).x-=this.getContentSize().width/2,e.y-=this.getContentSize().height/2,cc.Intersection.pointInPolygon(e,o.points)):this._oldHitTest(e,t)},t=__decorate([i,r(cc.PolygonCollider),a("Component/PolygonHitTest")],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],Preload:[function(e,t,o){"use strict";cc._RF.push(t,"e53d1BlkntD7okx5HH0u79l","Preload"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../common/config/ConfigEntry"),n=e("../../BaseUI"),r=e("../../../common/net/NetController"),a=e("../../game/GameData"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.loadTip=null,e.loadProgress=null,e.progressBar=null,e.phase=0,e}return __extends(e,n),e.prototype.onLoad=function(){n.prototype.onLoad.call(this)},e.prototype.uiName=function(){return"PreloadUI"},e.prototype.start=function(){return __awaiter(this,void 0,void 0,function(){var t,o;return __generator(this,function(e){switch(e.label){case 0:return n.prototype.start.call(this),this.loadProgress.string="0%",t=this,Partner.resUpdate(function(){t.loadConfigs()}),r.default.INSTANCE.isLoadingPreload=!1,[4,this.loadConfig("config/Map")];case 1:return o=e.sent(),a.default.mapData=o,[2]}})})},e.prototype.loadConfig=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(o,e){cc.loader.loadRes(t,function(e,t){o(e?null:t)})})]})})},e.prototype.loadConfigs=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return(t=this).loadTip.string="请稍后，正在加载配置...",t.progressBar.progress=.6,t.loadProgress.string="70%",[4,i.loadAllConfig()];case 1:return e.sent(),t.loadTip.string="加载完成，即将进入游戏！",t.gotToLogin(),[2]}})})},e.prototype.preLoadScene=function(o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,t){cc.director.preloadScene(o,function(){e()})})]})})},e.prototype.gotToLogin=function(){cc.director.loadScene("login")},__decorate([l(cc.Label)],e.prototype,"loadTip",void 0),__decorate([l(cc.Label)],e.prototype,"loadProgress",void 0),__decorate([l(cc.ProgressBar)],e.prototype,"progressBar",void 0),e=__decorate([c],e)}(n.default);o.default=d,cc._RF.pop()},{"../../../common/config/ConfigEntry":"ConfigEntry","../../../common/net/NetController":"NetController","../../BaseUI":"BaseUI","../../game/GameData":"GameData"}],ProtoCrypto:[function(e,t,l){"use strict";cc._RF.push(t,"f3e05KC5RlP4bqckd0ZoQ90","ProtoCrypto"),Object.defineProperty(l,"__esModule",{value:!0});var d=e("../NetByteArray");function u(e){return Math.floor(e/128)%128+e%128}l.KeyList=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255],l.KeyMask=237,l.encode=function(e,t,o){o.position=0;var n=l.KeyList[e],i=n<<8,r=new d.ByteArray;r.writeUnsignedShort(o.length+4),r.writeByte(e^l.KeyMask),r.writeUnsignedShort(t^n+i),r.writeByte(0);for(var a=0,s=0;s<o.length;s++){var c=o.readUnsignedByte();a+=c,r.writeByte(c^n)}return r.position=5,r.writeByte(u(a)^n),r},l.decode=function(e,t){for(var o,n,i=new d.ByteArray,r=l.KeyList[e^l.KeyMask],a=0,s=t.position;s<t.length;s++)3===s?o=t.readUnsignedByte()^r:(n=t.readUnsignedByte()^r,3<s&&(a+=n),i.writeByte(n));if(o!==u(a)){var c=new Error("InvalidMsg");throw c.message="checksum is not same",c}return i.position=0,i},cc._RF.pop()},{"../NetByteArray":"NetByteArray"}],ProtoDefine:[function(e,t,o){"use strict";cc._RF.push(t,"fd613Zga4RAZoJr3rT/Fh7R","ProtoDefine"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],ProtoDispatcher:[function(e,t,o){"use strict";cc._RF.push(t,"1a75fyihy9NAbyBx2PvOEB3","ProtoDispatcher"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../event/EventDispatcher"),i=[];o.DispatcherList=i,o.DebugDispatcher=new n.default,i[9]=o.DebugDispatcher,o.AccDispatcher=new n.default,i[10]=o.AccDispatcher,o.PlayerDispatcher=new n.default,i[11]=o.PlayerDispatcher,o.RoomDispatcher=new n.default,i[12]=o.RoomDispatcher,o.ActivityDispatcher=new n.default,i[13]=o.ActivityDispatcher,o.ChatDispatcher=new n.default,i[14]=o.ChatDispatcher,o.GoodsDispatcher=new n.default,i[15]=o.GoodsDispatcher,o.TaskDispatcher=new n.default,i[16]=o.TaskDispatcher,o.AwardDispatcher=new n.default,i[17]=o.AwardDispatcher,o.PaymentDispatcher=new n.default,i[18]=o.PaymentDispatcher,o.RankDispatcher=new n.default,i[19]=o.RankDispatcher,o.PlayDispatcher=new n.default,i[20]=o.PlayDispatcher,o.fillDispatcher=function(e){var t;t=new cc.Node("node-proto-dispatcher-debug"),o.DebugDispatcher.node=t,e.addChild(t),t=new cc.Node("node-proto-dispatcher-acc"),o.AccDispatcher.node=t,e.addChild(t),t=new cc.Node("node-proto-dispatcher-player"),o.PlayerDispatcher.node=t,e.addChild(t),t=new cc.Node("node-proto-dispatcher-room"),o.RoomDispatcher.node=t,e.addChild(t),t=new cc.Node("node-proto-dispatcher-activity"),o.ActivityDispatcher.node=t,e.addChild(t),t=new cc.Node("node-proto-dispatcher-chat"),o.ChatDispatcher.node=t,e.addChild(t),t=new cc.Node("node-proto-dispatcher-goods"),o.GoodsDispatcher.node=t,e.addChild(t),t=new cc.Node("node-proto-dispatcher-task"),o.TaskDispatcher.node=t,e.addChild(t),t=new cc.Node("node-proto-dispatcher-award"),o.AwardDispatcher.node=t,e.addChild(t),t=new cc.Node("node-proto-dispatcher-payment"),o.PaymentDispatcher.node=t,e.addChild(t),t=new cc.Node("node-proto-dispatcher-rank"),o.RankDispatcher.node=t,e.addChild(t),t=new cc.Node("node-proto-dispatcher-play"),o.PlayDispatcher.node=t,e.addChild(t)},cc._RF.pop()},{"../../event/EventDispatcher":"EventDispatcher"}],ProtoReflect:[function(e,t,o){"use strict";cc._RF.push(t,"f468axHYnJOJJRHOmca+7wh","ProtoReflect"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,r=e("./mods/ProtoSectionDebug"),a=e("./mods/ProtoSectionAcc"),s=e("./mods/ProtoSectionPlayer"),c=e("./mods/ProtoSectionRoom"),l=e("./mods/ProtoSectionActivity"),d=e("./mods/ProtoSectionChat"),u=e("./mods/ProtoSectionGoods"),h=e("./mods/ProtoSectionTask"),p=e("./mods/ProtoSectionRank"),f=e("./mods/ProtoSectionPlay");(n=o.ProtoSection||(o.ProtoSection={}))[n.debug=9]="debug",n[n.acc=10]="acc",n[n.player=11]="player",n[n.room=12]="room",n[n.activity=13]="activity",n[n.chat=14]="chat",n[n.goods=15]="goods",n[n.task=16]="task",n[n.award=17]="award",n[n.payment=18]="payment",n[n.rank=19]="rank",n[n.play=20]="play",o.ProtoMsgMap={2304:r.DebugErrorS2C,2560:a.AccLoginS2C,2562:a.AccCreateS2C,2564:a.AccEnterS2C,2565:a.AccKickOfflineS2C,2566:a.AccReloginS2C,2567:a.AccServertimeS2C,2570:a.AccBanS2C,2571:a.AccMaintainS2C,2816:s.PlayerSelfInfoS2C,2817:s.PlayerFortuneS2C,2818:s.PlayerPlayStatS2C,2819:s.PlayerShareGameS2C,2820:s.PlayerPveStatS2C,2847:s.PlayerDailyClearedS2C,2877:s.PlayerCommitAddressS2C,2878:s.PlayerAddressS2C,3072:c.RoomMatchRequestS2C,3073:c.RoomInviteRequestS2C,3074:c.RoomInviteTimeoutS2C,3075:c.RoomPlayWithS2C,3076:c.RoomPlayCreateS2C,3077:c.RoomPlayConfirmS2C,3078:c.RoomPlayStartS2C,3082:c.RoomPlayFinishS2C,3083:c.RoomOpponentLeaveS2C,3084:c.RoomInviterS2C,3086:c.RoomInvisibleS2C,3087:c.RoomMatchTimeoutS2C,3329:l.ActivityListS2C,3330:l.ActivityInfoS2C,3585:d.ChatCommonLanguageS2C,3586:d.ChatFaceS2C,3587:d.ChatTextS2C,3588:d.ChatVoiceS2C,3589:d.ChatNoticeS2C,3840:u.GoodsPullS2C,3841:u.GoodsUpdateS2C,3871:u.GoodsExchangeS2C,3872:u.GoodsExchangeRemainS2C,3891:u.GoodsTurntableRunS2C,3892:u.GoodsTurntableRecordPullS2C,3893:u.GoodsTurntableRecordNewS2C,4097:h.TaskListS2C,4098:h.TaskUpdateS2C,4099:h.TaskGainAwardS2C,4865:p.RankPlayStarS2C,4866:p.RankPveRankS2C,5120:f.PlayReadyS2C,5121:f.PlayNewRoundS2C,5122:f.PlaySaveAnimalS2C,5123:f.PlayMoveTileS2C,5124:f.PlayContinueS2C,5126:f.PlayNewPhaseS2C,5131:f.PlayStartPveS2C},(i=o.ProtoErrorCode||(o.ProtoErrorCode={}))[i["成功"]=0]="成功",i[i["未知错误"]=1]="未知错误",i[i["房间已满"]=2]="房间已满",i[i["房间不存在"]=3]="房间不存在",i[i["需要微信重新登陆授权"]=4]="需要微信重新登陆授权",i[i["失败"]=5]="失败",i[i["系统错误"]=1e3]="系统错误",i[i["数据库错误"]=1001]="数据库错误",i[i["mnesia数据库错误"]=1002]="mnesia数据库错误",i[i["对象不存在"]=1003]="对象不存在",i[i["参数错误"]=1004]="参数错误",i[i["没有权限访问"]=1005]="没有权限访问",i[i["玩家数据流量超过限制"]=1006]="玩家数据流量超过限制",i[i["玩家数据包超过限制"]=1007]="玩家数据包超过限制",i[i["请求超时"]=1008]="请求超时",i[i["跨服服务暂不可用"]=1009]="跨服服务暂不可用",i[i["认证失败"]=1100]="认证失败",i[i["维护状态"]=1101]="维护状态",i[i["需要重新登陆"]=1102]="需要重新登陆",i[i["时间不合法"]=1103]="时间不合法",i[i["玩家作弊"]=1104]="玩家作弊",i[i["内容包含非法信息或长度不合适"]=1105]="内容包含非法信息或长度不合适",i[i["名称已存在"]=1106]="名称已存在",i[i["性别不合法"]=1107]="性别不合法",i[i["玩家不存在"]=1108]="玩家不存在",i[i["房卡不足"]=1200]="房卡不足",i[i["金币不足"]=1201]="金币不足",i[i["经验不足"]=1202]="经验不足",i[i["积分不足"]=1203]="积分不足",i[i["材料不足"]=1204]="材料不足",i[i["VIP等级不足"]=1205]="VIP等级不足",i[i["玩家等级不符"]=1206]="玩家等级不符",i[i["cd时间非法"]=1207]="cd时间非法",i[i["次数不足"]=1208]="次数不足",i[i["购买次数不足"]=1209]="购买次数不足",i[i["红包已兑完"]=1210]="红包已兑完",i[i["玩家满级"]=1300]="玩家满级",i[i["铜钱到达上限"]=1301]="铜钱到达上限",i[i["金币到达上限"]=1302]="金币到达上限",i[i["代金劵到达上限"]=1303]="代金劵到达上限",i[i["背包可拓展格数已达上限"]=1304]="背包可拓展格数已达上限",i[i["已达上限"]=1305]="已达上限",i[i["未开启"]=1400]="未开启",i[i["未激活"]=1401]="未激活",i[i["未完成"]=1402]="未完成",i[i["未通过"]=1403]="未通过",i[i["进行中"]=1404]="进行中",i[i["已完成"]=1405]="已完成",i[i["已领取"]=1406]="已领取",i[i["已被其他玩家领取"]=1407]="已被其他玩家领取",i[i["条件不满足"]=1500]="条件不满足",i[i["已过期"]=1501]="已过期",i[i["没有符合条件的目标"]=1502]="没有符合条件的目标",i[i["对应目标不存在"]=1503]="对应目标不存在",i[i["对应目标已达成, 无须重复操作"]=1504]="对应目标已达成, 无须重复操作",i[i["不能对自己执行该操作"]=1600]="不能对自己执行该操作",i[i["玩家不存在或者离线"]=1601]="玩家不存在或者离线",i[i["未收到邀请"]=1602]="未收到邀请",i[i["活动未开启"]=1700]="活动未开启",i[i["活动已结束"]=1701]="活动已结束",i[i["副本已结束"]=1800]="副本已结束",i[i["地图已满"]=1801]="地图已满",i[i["已在地图内"]=1802]="已在地图内",i[i["所有地图均人满"]=1803]="所有地图均人满",i[i["没有房间"]=1804]="没有房间",i[i["不在副本内"]=1805]="不在副本内",i[i["目标位置不可到达"]=1806]="目标位置不可到达",i[i["背包已满"]=1900]="背包已满",i[i["物品不存在"]=1901]="物品不存在",i[i["物品不可使用"]=1902]="物品不可使用",i[i["物品类型不支持"]=1903]="物品类型不支持",i[i["物品类型不符"]=1904]="物品类型不符",i[i["物品正在冷却"]=1905]="物品正在冷却",i[i["物品数量不足"]=1906]="物品数量不足",i[i["当前已在房间中"]=2e3]="当前已在房间中",i[i["牌局已经开始"]=2001]="牌局已经开始",i[i["尚未首充"]=2002]="尚未首充",i[i["本期夺宝活动已结束"]=2003]="本期夺宝活动已结束",i[i["房间主人已经离开"]=2004]="房间主人已经离开",i[i["姓名不能为空"]=2100]="姓名不能为空",i[i["必须11位号码"]=2101]="必须11位号码",i[i["地址不正确"]=2102]="地址不正确",cc._RF.pop()},{"./mods/ProtoSectionAcc":"ProtoSectionAcc","./mods/ProtoSectionActivity":"ProtoSectionActivity","./mods/ProtoSectionChat":"ProtoSectionChat","./mods/ProtoSectionDebug":"ProtoSectionDebug","./mods/ProtoSectionGoods":"ProtoSectionGoods","./mods/ProtoSectionPlay":"ProtoSectionPlay","./mods/ProtoSectionPlayer":"ProtoSectionPlayer","./mods/ProtoSectionRank":"ProtoSectionRank","./mods/ProtoSectionRoom":"ProtoSectionRoom","./mods/ProtoSectionTask":"ProtoSectionTask"}],ProtoSectionAcc:[function(e,t,o){"use strict";cc._RF.push(t,"09398UeMkpMH4P3CA9qH/0b","ProtoSectionAcc"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../NetByteArray"),i=function(){function e(){this.MSG_ID=2560}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeUTF(this.platform),e.writeUTF(this.gameAccountId),e.writeUTF(this.gameAccountSign),e.writeUTF(this.channelOpenId),e.writeUTF(this.channelParam),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.AccLoginC2S=i;var r=function(){function e(){this.MSG_ID=2562}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.AccCreateC2S=r;var a=function(){function e(){this.MSG_ID=2563}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeByte(this.head),e.writeByte(this.sex),e.writeUTF(this.name),e.writeUTF(this.params),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.AccCreateWithParamsC2S=a;var s=function(){function e(){this.MSG_ID=2564}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeDouble(this.id),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.AccEnterC2S=s;var c=function(){function e(){this.MSG_ID=2566}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeUTF(this.loginKey),e.writeUTF(this.openId),e.writeDouble(this.id),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.AccReloginC2S=c;var l=function(){function e(){this.MSG_ID=2567}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.AccServertimeC2S=l;var d=function(){function o(){}return o.decode=function(e){var t=new o;return t.code=e.readUnsignedShort(),t.id=e.readDouble(),t.channelOpenId=e.readUTF(),t.gameAccountId=e.readUTF(),t.gameAccountSign=e.readUTF(),t.gameLoginKey=e.readUTF(),t},o.EVENT_NAME="AccLoginS2C",o}();o.AccLoginS2C=d;var u=function(){function o(){}return o.decode=function(e){var t=new o;return t.code=e.readUnsignedShort(),t.id=e.readDouble(),t},o.EVENT_NAME="AccCreateS2C",o}();o.AccCreateS2C=u;var h=function(){function o(){}return o.decode=function(e){var t=new o;return t.code=e.readUnsignedShort(),t},o.EVENT_NAME="AccEnterS2C",o}();o.AccEnterS2C=h;var p=function(){function o(){}return o.decode=function(e){var t=new o;return t.content=e.readUTF(),t},o.EVENT_NAME="AccKickOfflineS2C",o}();o.AccKickOfflineS2C=p;var f=function(){function o(){}return o.decode=function(e){var t=new o;return t.code=e.readUnsignedShort(),t},o.EVENT_NAME="AccReloginS2C",o}();o.AccReloginS2C=f;var m=function(){function o(){}return o.decode=function(e){var t=new o;return t.time=e.readUnsignedInt(),t},o.EVENT_NAME="AccServertimeS2C",o}();o.AccServertimeS2C=m;var y=function(){function o(){}return o.decode=function(e){var t=new o;return t.reason=e.readUnsignedByte(),t.endTime=e.readUnsignedInt(),t},o.EVENT_NAME="AccBanS2C",o}();o.AccBanS2C=y;var v=function(){function o(){}return o.decode=function(e){var t=new o;return t.state=e.readUnsignedShort(),t.desc=e.readUTF(),t},o.EVENT_NAME="AccMaintainS2C",o}();o.AccMaintainS2C=v,cc._RF.pop()},{"../../NetByteArray":"NetByteArray"}],ProtoSectionActivity:[function(e,t,o){"use strict";cc._RF.push(t,"3bc879/JIpP0qxTXwOpiFq9","ProtoSectionActivity"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../NetByteArray"),r=e("../ProtoType"),i=function(){function e(){this.MSG_ID=3329}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.ActivityListC2S=i;var a=function(){function e(){this.MSG_ID=3330}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeByte(this.actid),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.ActivityInfoC2S=a;var s=function(){function i(){}return i.decode=function(e){var t,o=new i;o.list=new Array,t=e.readShort();for(var n=0;n<t;n++)o.list.push(r.PActivity.decode(e));return o},i.EVENT_NAME="ActivityListS2C",i}();o.ActivityListS2C=s;var c=function(){function o(){}return o.decode=function(e){var t=new o;return t.val=r.PActivity.decode(e),t},o.EVENT_NAME="ActivityInfoS2C",o}();o.ActivityInfoS2C=c,cc._RF.pop()},{"../../NetByteArray":"NetByteArray","../ProtoType":"ProtoType"}],ProtoSectionAward:[function(e,t,o){"use strict";cc._RF.push(t,"3961arjwIVNw6wSvX7sExP8","ProtoSectionAward"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],ProtoSectionChat:[function(e,t,o){"use strict";cc._RF.push(t,"0e61b4u1NJCkrLkQGluKSWR","ProtoSectionChat"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../NetByteArray"),i=function(){function e(){this.MSG_ID=3585}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeUnsignedInt(this.id),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.ChatCommonLanguageC2S=i;var r=function(){function e(){this.MSG_ID=3586}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeUTF(this.content),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.ChatFaceC2S=r;var a=function(){function e(){this.MSG_ID=3587}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeUTF(this.content),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.ChatTextC2S=a;var s=function(){function e(){this.MSG_ID=3588}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeUTF(this.content),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.ChatVoiceC2S=s;var c=function(){function o(){}return o.decode=function(e){var t=new o;return t.playerId=e.readDouble(),t.id=e.readUnsignedInt(),t},o.EVENT_NAME="ChatCommonLanguageS2C",o}();o.ChatCommonLanguageS2C=c;var l=function(){function o(){}return o.decode=function(e){var t=new o;return t.playerId=e.readDouble(),t.content=e.readUTF(),t},o.EVENT_NAME="ChatFaceS2C",o}();o.ChatFaceS2C=l;var d=function(){function o(){}return o.decode=function(e){var t=new o;return t.playerId=e.readDouble(),t.content=e.readUTF(),t},o.EVENT_NAME="ChatTextS2C",o}();o.ChatTextS2C=d;var u=function(){function o(){}return o.decode=function(e){var t=new o;return t.playerId=e.readDouble(),t.content=e.readUTF(),t},o.EVENT_NAME="ChatVoiceS2C",o}();o.ChatVoiceS2C=u;var h=function(){function o(){}return o.decode=function(e){var t=new o;return t.content=e.readUTF(),t},o.EVENT_NAME="ChatNoticeS2C",o}();o.ChatNoticeS2C=h,cc._RF.pop()},{"../../NetByteArray":"NetByteArray"}],ProtoSectionDebug:[function(e,t,o){"use strict";cc._RF.push(t,"586acwFHlRNh6b0B3Q9l2DZ","ProtoSectionDebug"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function o(){}return o.decode=function(e){var t=new o;return t.msgid=e.readUnsignedShort(),t.code=e.readUnsignedShort(),t},o.EVENT_NAME="DebugErrorS2C",o}();o.DebugErrorS2C=n,cc._RF.pop()},{}],ProtoSectionGoods:[function(e,t,o){"use strict";cc._RF.push(t,"909faKsomdD/bCeZnZT86D6","ProtoSectionGoods"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../NetByteArray"),r=e("../ProtoType"),i=function(){function e(){this.MSG_ID=3840}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.GoodsPullC2S=i;var a=function(){function e(){this.MSG_ID=3871}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeUnsignedInt(this.id),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.GoodsExchangeC2S=a;var s=function(){function e(){this.MSG_ID=3872}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.GoodsExchangeRemainC2S=s;var c=function(){function e(){this.MSG_ID=3891}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.GoodsTurntableRunC2S=c;var l=function(){function e(){this.MSG_ID=3892}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.GoodsTurntableRecordPullC2S=l;var d=function(){function i(){}return i.decode=function(e){var t,o=new i;o.goodsList=new Array,t=e.readShort();for(var n=0;n<t;n++)o.goodsList.push(r.PGoods.decode(e));return o},i.EVENT_NAME="GoodsPullS2C",i}();o.GoodsPullS2C=d;var u=function(){function i(){}return i.decode=function(e){var t,o=new i;o.goodsList=new Array,t=e.readShort();for(var n=0;n<t;n++)o.goodsList.push(r.PGoods.decode(e));return o},i.EVENT_NAME="GoodsUpdateS2C",i}();o.GoodsUpdateS2C=u;var h=function(){function i(){}return i.decode=function(e){var t,o=new i;o.id=e.readUnsignedInt(),o.goodsList=new Array,t=e.readShort();for(var n=0;n<t;n++)o.goodsList.push(r.PGoods.decode(e));return o},i.EVENT_NAME="GoodsExchangeS2C",i}();o.GoodsExchangeS2C=h;var p=function(){function i(){}return i.decode=function(e){var t,o=new i;o.exchangeList=new Array,t=e.readShort();for(var n=0;n<t;n++)o.exchangeList.push(r.PExchangeRemain.decode(e));return o},i.EVENT_NAME="GoodsExchangeRemainS2C",i}();o.GoodsExchangeRemainS2C=p;var f=function(){function i(){}return i.decode=function(e){var t,o=new i;o.id=e.readUnsignedInt(),o.goodsList=new Array,t=e.readShort();for(var n=0;n<t;n++)o.goodsList.push(r.PGoods.decode(e));return o},i.EVENT_NAME="GoodsTurntableRunS2C",i}();o.GoodsTurntableRunS2C=f;var m=function(){function i(){}return i.decode=function(e){var t,o=new i;o.recordList=new Array,t=e.readShort();for(var n=0;n<t;n++)o.recordList.push(r.PTurntableRecord.decode(e));return o},i.EVENT_NAME="GoodsTurntableRecordPullS2C",i}();o.GoodsTurntableRecordPullS2C=m;var y=function(){function o(){}return o.decode=function(e){var t=new o;return t.record=r.PTurntableRecord.decode(e),t},o.EVENT_NAME="GoodsTurntableRecordNewS2C",o}();o.GoodsTurntableRecordNewS2C=y,cc._RF.pop()},{"../../NetByteArray":"NetByteArray","../ProtoType":"ProtoType"}],ProtoSectionPayment:[function(e,t,o){"use strict";cc._RF.push(t,"05a97tJKHtNCacJrQXAjrvv","ProtoSectionPayment"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],ProtoSectionPlayer:[function(e,t,o){"use strict";cc._RF.push(t,"04ab3NvmOFMI5GinGI/648W","ProtoSectionPlayer"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../NetByteArray"),i=e("../ProtoType"),r=e("../ProtoCrypto"),a=function(){function o(){this.MSG_ID=2819}return o.prototype.encode=function(){var e=new n.ByteArray;e.writeUnsignedInt(this.reason);var t=(o.EncryptIndex+1)%r.KeyMask;return o.EncryptIndex=t,r.encode(t,this.MSG_ID,e)},o.EncryptIndex=0,o}();o.PlayerShareGameC2S=a;var s=function(){function e(){this.MSG_ID=2821}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeUnsignedInt(this.point),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.PlayerClickC2S=s;var c=function(){function o(){this.MSG_ID=2877}return o.prototype.encode=function(){var e=new n.ByteArray;e.writeUTF(this.name),e.writeUTF(this.phone),e.writeUTF(this.street);var t=(o.EncryptIndex+1)%r.KeyMask;return o.EncryptIndex=t,r.encode(t,this.MSG_ID,e)},o.EncryptIndex=0,o}();o.PlayerCommitAddressC2S=c;var l=function(){function e(){this.MSG_ID=2878}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.PlayerAddressC2S=l;var d=function(){function o(){}return o.decode=function(e){var t=new o;return t.player=i.PPlayer.decode(e),t},o.EVENT_NAME="PlayerSelfInfoS2C",o}();o.PlayerSelfInfoS2C=d;var u=function(){function o(){}return o.decode=function(e){var t=new o;return t.type=e.readUnsignedByte(),t.val=e.readUnsignedInt(),t},o.EVENT_NAME="PlayerFortuneS2C",o}();o.PlayerFortuneS2C=u;var h=function(){function o(){}return o.decode=function(e){var t=new o;return t.stat=i.PPlayStat.decode(e),t},o.EVENT_NAME="PlayerPlayStatS2C",o}();o.PlayerPlayStatS2C=h;var p=function(){function o(){}return o.decode=function(e){var t=new o;return t.success=e.readUnsignedInt(),t.times=e.readUnsignedInt(),t},o.EVENT_NAME="PlayerShareGameS2C",o}();o.PlayerShareGameS2C=p;var f=function(){function o(){}return o.decode=function(e){var t=new o;return t.pvestat=i.PPveStat.decode(e),t},o.EVENT_NAME="PlayerPveStatS2C",o}();o.PlayerPveStatS2C=f;var m=function(){function t(){}return t.decode=function(e){return new t},t.EVENT_NAME="PlayerDailyClearedS2C",t}();o.PlayerDailyClearedS2C=m;var y=function(){function t(){}return t.decode=function(e){return new t},t.EVENT_NAME="PlayerCommitAddressS2C",t}();o.PlayerCommitAddressS2C=y;var v=function(){function o(){}return o.decode=function(e){var t=new o;return t.name=e.readUTF(),t.phone=e.readUTF(),t.street=e.readUTF(),t},o.EVENT_NAME="PlayerAddressS2C",o}();o.PlayerAddressS2C=v,cc._RF.pop()},{"../../NetByteArray":"NetByteArray","../ProtoCrypto":"ProtoCrypto","../ProtoType":"ProtoType"}],ProtoSectionPlay:[function(e,t,o){"use strict";cc._RF.push(t,"3761e6il8xMDIqlqsYstrek","ProtoSectionPlay"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../NetByteArray"),i=e("../ProtoCrypto"),r=function(){function o(){this.MSG_ID=5120}return o.prototype.encode=function(){var e=new n.ByteArray;e.writeUnsignedInt(this.roomId);var t=(o.EncryptIndex+1)%i.KeyMask;return o.EncryptIndex=t,i.encode(t,this.MSG_ID,e)},o.EncryptIndex=0,o}();o.PlayReadyC2S=r;var a=function(){function e(){this.MSG_ID=5122}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.PlaySaveAnimalC2S=a;var s=function(){function e(){this.MSG_ID=5123}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeByte(this.fromSlotIndex),e.writeByte(this.destSlotIndex),e.writeUnsignedInt(this.roundId),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.PlayMoveTileC2S=s;var c=function(){function o(){this.MSG_ID=5124}return o.prototype.encode=function(){var e=new n.ByteArray,t=(o.EncryptIndex+1)%i.KeyMask;return o.EncryptIndex=t,i.encode(t,this.MSG_ID,e)},o.EncryptIndex=0,o}();o.PlayContinueC2S=c;var l=function(){function o(){this.MSG_ID=5125}return o.prototype.encode=function(){var e=new n.ByteArray,t=(o.EncryptIndex+1)%i.KeyMask;return o.EncryptIndex=t,i.encode(t,this.MSG_ID,e)},o.EncryptIndex=0,o}();o.PlayGiveUpC2S=l;var d=function(){function e(){this.MSG_ID=5127}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeUnsignedInt(this.pveId),e.writeByte(this.pveWin),e.writeUnsignedInt(this.pveScore),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.PlayPveFinishC2S=d;var u=function(){function e(){this.MSG_ID=5128}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeUnsignedInt(this.matchOnce),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.PlayPvpFinishC2S=u;var h=function(){function e(){this.MSG_ID=5129}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeUnsignedInt(this.guideFinish),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.PlayGuideFinishC2S=h;var p=function(){function e(){this.MSG_ID=5130}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeUnsignedInt(this.saveAnimalCount),e.writeUnsignedInt(this.winSide),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.PlayAiFinishC2S=p;var f=function(){function e(){this.MSG_ID=5131}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.PlayStartPveC2S=f;var m=function(){function o(){}return o.decode=function(e){var t=new o;return t.roomId=e.readUnsignedInt(),t},o.EVENT_NAME="PlayReadyS2C",o}();o.PlayReadyS2C=m;var y=function(){function o(){}return o.decode=function(e){var t=new o;return t.playmateId=e.readDouble(),t.roundId=e.readUnsignedInt(),t.roundDeadline=e.readUnsignedInt(),t},o.EVENT_NAME="PlayNewRoundS2C",o}();o.PlayNewRoundS2C=y;var v=function(){function o(){}return o.decode=function(e){var t=new o;return t.saveCount=e.readUnsignedInt(),t.animalSide=e.readUnsignedByte(),t},o.EVENT_NAME="PlaySaveAnimalS2C",o}();o.PlaySaveAnimalS2C=v;var _=function(){function o(){}return o.decode=function(e){var t=new o;return t.fromSlotIndex=e.readUnsignedByte(),t.destSlotIndex=e.readUnsignedByte(),t.moveResult=e.readUnsignedByte(),t.roundId=e.readUnsignedInt(),t},o.EVENT_NAME="PlayMoveTileS2C",o}();o.PlayMoveTileS2C=_;var g=function(){function i(){}return i.decode=function(e){var t,o=new i;o.roomId=e.readUnsignedInt(),o.continueList=new Array,t=e.readShort();for(var n=0;n<t;n++)o.continueList.push(e.readDouble());return o},i.EVENT_NAME="PlayContinueS2C",i}();o.PlayContinueS2C=g;var b=function(){function o(){}return o.decode=function(e){var t=new o;return t.phaseId=e.readUnsignedByte(),t.phaseDeadline=e.readUnsignedInt(),t},o.EVENT_NAME="PlayNewPhaseS2C",o}();o.PlayNewPhaseS2C=b;var S=function(){function o(){}return o.decode=function(e){var t=new o;return t.started=e.readUnsignedByte(),t},o.EVENT_NAME="PlayStartPveS2C",o}();o.PlayStartPveS2C=S,cc._RF.pop()},{"../../NetByteArray":"NetByteArray","../ProtoCrypto":"ProtoCrypto"}],ProtoSectionRank:[function(e,t,o){"use strict";cc._RF.push(t,"df3211z0uBEUq+W5PZCRFbc","ProtoSectionRank"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../NetByteArray"),r=e("../ProtoType"),i=function(){function e(){this.MSG_ID=4865}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeUnsignedInt(this.posStart),e.writeUnsignedInt(this.posEnd),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.RankPlayStarC2S=i;var a=function(){function e(){this.MSG_ID=4866}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeUnsignedInt(this.level),e.writeUnsignedInt(this.posStart),e.writeUnsignedInt(this.posEnd),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.RankPveRankC2S=a;var s=function(){function i(){}return i.decode=function(e){var t,o=new i;o.myPos=e.readUnsignedInt(),o.playmates=new Array,t=e.readShort();for(var n=0;n<t;n++)o.playmates.push(r.PStarRank.decode(e));return o},i.EVENT_NAME="RankPlayStarS2C",i}();o.RankPlayStarS2C=s;var c=function(){function i(){}return i.decode=function(e){var t,o=new i;o.level=e.readUnsignedInt(),o.myPos=e.readUnsignedInt(),o.playmates=new Array,t=e.readShort();for(var n=0;n<t;n++)o.playmates.push(r.PPveRank.decode(e));return o},i.EVENT_NAME="RankPveRankS2C",i}();o.RankPveRankS2C=c,cc._RF.pop()},{"../../NetByteArray":"NetByteArray","../ProtoType":"ProtoType"}],ProtoSectionRoom:[function(e,t,o){"use strict";cc._RF.push(t,"13644eQLtBFjJF/FeRUzqz1","ProtoSectionRoom"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../NetByteArray"),r=e("../ProtoType"),i=function(){function e(){this.MSG_ID=3072}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.RoomMatchRequestC2S=i;var a=function(){function e(){this.MSG_ID=3073}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.RoomInviteRequestC2S=a;var s=function(){function e(){this.MSG_ID=3075}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeUTF(this.inviteeParam),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.RoomPlayWithC2S=s;var c=function(){function e(){this.MSG_ID=3077}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.RoomPlayConfirmC2S=c;var l=function(){function e(){this.MSG_ID=3084}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeUTF(this.inviterParam),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.RoomInviterC2S=l;var d=function(){function e(){this.MSG_ID=3086}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.RoomInvisibleC2S=d;var u=function(){function t(){}return t.decode=function(e){return new t},t.EVENT_NAME="RoomMatchRequestS2C",t}();o.RoomMatchRequestS2C=u;var h=function(){function o(){}return o.decode=function(e){var t=new o;return t.inviteeParam=e.readUTF(),t},o.EVENT_NAME="RoomInviteRequestS2C",o}();o.RoomInviteRequestS2C=h;var p=function(){function o(){}return o.decode=function(e){var t=new o;return t.roomId=e.readUnsignedInt(),t},o.EVENT_NAME="RoomInviteTimeoutS2C",o}();o.RoomInviteTimeoutS2C=p;var f=function(){function o(){}return o.decode=function(e){var t=new o;return t.roomId=e.readUnsignedInt(),t},o.EVENT_NAME="RoomPlayWithS2C",o}();o.RoomPlayWithS2C=f;var m=function(){function i(){}return i.decode=function(e){var t,o=new i;o.roomId=e.readUnsignedInt(),o.roomType=e.readUnsignedByte(),o.roomOwner=e.readDouble(),o.redId=e.readDouble(),o.bluId=e.readDouble(),o.playmates=new Array,t=e.readShort();for(var n=0;n<t;n++)o.playmates.push(r.PPlaymate.decode(e));return o},i.EVENT_NAME="RoomPlayCreateS2C",i}();o.RoomPlayCreateS2C=m;var y=function(){function i(){}return i.decode=function(e){var t,o=new i;o.confirmList=new Array,t=e.readShort();for(var n=0;n<t;n++)o.confirmList.push(e.readDouble());return o},i.EVENT_NAME="RoomPlayConfirmS2C",i}();o.RoomPlayConfirmS2C=y;var v=function(){function o(){}return o.decode=function(e){var t=new o;return t.roomId=e.readUnsignedInt(),t},o.EVENT_NAME="RoomPlayStartS2C",o}();o.RoomPlayStartS2C=v;var _=function(){function o(){}return o.decode=function(e){var t=new o;return t.roomId=e.readUnsignedInt(),t.winSide=e.readUnsignedByte(),t.winPlaymateId=e.readDouble(),t.saveAnimalCount=e.readUnsignedInt(),t.score=e.readUnsignedInt(),t.winScore=e.readUnsignedInt(),t.winCount=e.readUnsignedInt(),t.dailyWin=e.readUnsignedInt(),t.dailyCnt=e.readUnsignedInt(),t.weeklyWin=e.readUnsignedInt(),t.weeklyCnt=e.readUnsignedInt(),t.showContinue=e.readUnsignedByte(),t},o.EVENT_NAME="RoomPlayFinishS2C",o}();o.RoomPlayFinishS2C=_;var g=function(){function o(){}return o.decode=function(e){var t=new o;return t.opponentId=e.readDouble(),t},o.EVENT_NAME="RoomOpponentLeaveS2C",o}();o.RoomOpponentLeaveS2C=g;var b=function(){function o(){}return o.decode=function(e){var t=new o;return t.inviterParam=e.readUTF(),t.playmate=r.PPlaymate.decode(e),t},o.EVENT_NAME="RoomInviterS2C",o}();o.RoomInviterS2C=b;var S=function(){function t(){}return t.decode=function(e){return new t},t.EVENT_NAME="RoomInvisibleS2C",t}();o.RoomInvisibleS2C=S;var T=function(){function t(){}return t.decode=function(e){return new t},t.EVENT_NAME="RoomMatchTimeoutS2C",t}();o.RoomMatchTimeoutS2C=T,cc._RF.pop()},{"../../NetByteArray":"NetByteArray","../ProtoType":"ProtoType"}],ProtoSectionTask:[function(e,t,o){"use strict";cc._RF.push(t,"93c416Xvp1Heb8//L4T4KKo","ProtoSectionTask"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../NetByteArray"),r=e("../ProtoType"),i=function(){function e(){this.MSG_ID=4097}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.TaskListC2S=i;var a=function(){function e(){this.MSG_ID=4099}return e.prototype.encode=function(){var e=new n.ByteArray;return e.writeUnsignedShort(0),e.writeByte(0),e.writeUnsignedShort(this.MSG_ID),e.writeUnsignedInt(this.id),e.position=0,e.writeUnsignedShort(e.length-2),e},e}();o.TaskGainAwardC2S=a;var s=function(){function i(){}return i.decode=function(e){var t,o=new i;o.task=new Array,t=e.readShort();for(var n=0;n<t;n++)o.task.push(r.PTask.decode(e));return o},i.EVENT_NAME="TaskListS2C",i}();o.TaskListS2C=s;var c=function(){function i(){}return i.decode=function(e){var t,o=new i;o.task=new Array,t=e.readShort();for(var n=0;n<t;n++)o.task.push(r.PTask.decode(e));return o},i.EVENT_NAME="TaskUpdateS2C",i}();o.TaskUpdateS2C=c;var l=function(){function t(){}return t.decode=function(e){return new t},t.EVENT_NAME="TaskGainAwardS2C",t}();o.TaskGainAwardS2C=l,cc._RF.pop()},{"../../NetByteArray":"NetByteArray","../ProtoType":"ProtoType"}],ProtoType:[function(e,t,o){"use strict";cc._RF.push(t,"99ccf3nxFRGj7SjAyxFdgMy","ProtoType"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function o(){}return o.decode=function(e){var t=new o;return t.id=e.readDouble(),t.name=e.readUTF(),t.sex=e.readUnsignedByte(),t.headImg=e.readUTF(),t.score=e.readDouble(),t.win=e.readUnsignedInt(),t.nowsec=e.readUTF(),t.energyFullTime=e.readUTF(),t},o}();o.PPlayer=n;var i=function(){function o(){}return o.decode=function(e){var t=new o;return t.actid=e.readUnsignedByte(),t.status=e.readUnsignedByte(),t.secsLeft=e.readUnsignedInt(),t},o}();o.PActivity=i;var r=function(){function o(){}return o.decode=function(e){var t=new o;return t.type=e.readUnsignedByte(),t.value=e.readUnsignedInt(),t},o}();o.PWealth=r;var a=function(){function o(){}return o.decode=function(e){var t=new o;return t.goodsId=e.readUnsignedInt(),t.goodsNum=e.readUnsignedInt(),t},o}();o.PGoods=a;var s=function(){function o(){}return o.decode=function(e){var t=new o;return t.id=e.readUnsignedInt(),t.num=e.readUnsignedInt(),t},o}();o.PExchangeRemain=s;var c=function(){function o(){}return o.decode=function(e){var t=new o;return t.turntableId=e.readUnsignedInt(),t.playerName=e.readUTF(),t.time=e.readUnsignedInt(),t},o}();o.PTurntableRecord=c;var l=function(){function o(){}return o.decode=function(e){var t=new o;return t.id=e.readDouble(),t.name=e.readUTF(),t.headImg=e.readUTF(),t.sex=e.readUnsignedByte(),t.star=e.readUnsignedInt(),t},o}();o.PPlaymate=l;var d=function(){function o(){}return o.decode=function(e){var t=new o;return t.cntTotal=e.readUnsignedInt(),t.cntWin=e.readUnsignedInt(),t.matchOnce=e.readUnsignedInt(),t.saveOnce=e.readUnsignedInt(),t.pveWin=e.readUnsignedInt(),t.pveTotal=e.readUnsignedInt(),t.pvpWinOneweek=e.readUnsignedInt(),t.pvpTotalOneweek=e.readUnsignedInt(),t.maxSuccessiveWin=e.readUnsignedInt(),t.level=e.readUnsignedInt(),t.guide=e.readUnsignedInt(),t},o}();o.PPlayStat=d;var u=function(){function o(){}return o.decode=function(e){var t=new o;return t.level1Score=e.readUnsignedInt(),t.level2Score=e.readUnsignedInt(),t.level3Score=e.readUnsignedInt(),t.level4Score=e.readUnsignedInt(),t.level5Score=e.readUnsignedInt(),t.level6Score=e.readUnsignedInt(),t.level7Score=e.readUnsignedInt(),t.level8Score=e.readUnsignedInt(),t.level9Score=e.readUnsignedInt(),t.level10Score=e.readUnsignedInt(),t.level11Score=e.readUnsignedInt(),t.level12Score=e.readUnsignedInt(),t.level13Score=e.readUnsignedInt(),t.level14Score=e.readUnsignedInt(),t.level15Score=e.readUnsignedInt(),t},o}();o.PPveStat=u;var h=function(){function o(){}return o.decode=function(e){var t=new o;return t.id=e.readDouble(),t.name=e.readUTF(),t.headImg=e.readUTF(),t.sex=e.readUnsignedByte(),t.star=e.readUnsignedInt(),t.rateOfWin=e.readUnsignedInt(),t},o}();o.PStarRank=h;var p=function(){function o(){}return o.decode=function(e){var t=new o;return t.id=e.readDouble(),t.name=e.readUTF(),t.headImg=e.readUTF(),t.sex=e.readUnsignedByte(),t.score=e.readUnsignedInt(),t},o}();o.PPveRank=p;var f=function(){function o(){}return o.decode=function(e){var t=new o;return t.id=e.readUnsignedInt(),t.progress=e.readUnsignedInt(),t.status=e.readUnsignedByte(),t},o}();o.PTask=f;var m=function(){function o(){}return o.decode=function(e){var t=new o;return t.id=e.readDouble(),t.score=e.readUnsignedInt(),t},o}();o.PPlaymateScore=m;var y=function(){function o(){}return o.decode=function(e){var t=new o;return t.roundId=e.readUnsignedInt(),t.x=e.readUTF(),t.angle=e.readUTF(),t.y=e.readUTF(),t},o}();o.PBabyPos=y,cc._RF.pop()},{}],PvpGuide:[function(e,t,o){"use strict";cc._RF.push(t,"0b014aBdsxMIrQon+plO1of","PvpGuide"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./GameData"),s=e("./PlayDefine"),n=cc._decorator,i=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodMask=null,e.mask_frame=null,e.timeNode=null,e.headNode=null,e.countNode=null,e.tipsLabel=null,e.blackBoardNode=null,e.continueNode=null,e.pointSprite=null,e.panelTile=null,e.guideQueue=null,e.queueSize=0,e.curGuideType=0,e}return __extends(e,t),e.prototype.onLoad=function(){this.node.on("touchstart",this.onTouchStart,this)},e.prototype.onTouchStart=function(e){var t=this.nodMask.convertTouchToNodeSpaceAR(e),o=cc.rect(-this.nodMask.width/2,-this.nodMask.height/2,this.nodMask.width,this.nodMask.height);if(cc.rectContainsPoint(o,t)){var n=this.panelTile.convertToNodeSpaceAR(this.nodMask.convertToWorldSpaceAR(t)),i=this.getXYByPosition(n);switch(this.curGuideType){case s.GUIDE_TYPE.BOMB_COL:case s.GUIDE_TYPE.BOMB_A:case s.GUIDE_TYPE.ZZJ:var r=this.node.parent.getComponent("LayerGame").tiles[i.x][i.y].getComponent("Bomb");null!=r&&(this.pointSprite.node.active=!1,this.nodMask.opacity=0,r.onTouchStart()),a.default.gameBegan=!0,this.node.active=!1}}else{if(100<=this.curGuideType)return;a.default.gameBegan=!0,this.node.active=!1}this.node.active||this.performGuide()},e.prototype.getXYByPosition=function(e){return{x:Math.floor(e.x/80)+4,y:Math.floor(e.y/80)}},e.prototype.performGuide=function(){if(!(this.queueSize<=0)){a.default.gameBegan=!1;var e;e=this.guideQueue.pop(),this.queueSize--;var t=e[0],o=e[1];this.curGuideType=t,this.node.active=!0,this.continueNode.active=!0,this.nodMask.opacity=200;var n=null;switch(t){case s.GUIDE_TYPE.WELCOME:this.tipsLabel.string="让我先来介绍一下游戏规则",this.blackBoardNode.setPositionY(160),this.nodMask.setPosition(1e4,1e4),this.mask_frame.setPosition(this.nodMask.getPosition());break;case s.GUIDE_TYPE.MATCH:this.tipsLabel.string="点击2个及以上相邻的同类水果即可消除",this.blackBoardNode.setPositionY(160),this.nodMask.setPosition(1e4,1e4),this.mask_frame.setPosition(this.nodMask.getPosition());break;case s.GUIDE_TYPE.SAVE:this.tipsLabel.string="你的任务是通过消除水果将宠物移动到棋盘外，从而让他们回家，来试试吧",this.blackBoardNode.setPositionY(160),this.nodMask.setPosition(1e4,1e4),this.mask_frame.setPosition(this.nodMask.getPosition());break;case s.GUIDE_TYPE.SAVE_SUC:this.tipsLabel.string="真棒，你刚刚拯救了第一只宠物",this.blackBoardNode.setPositionY(160),this.nodMask.setPosition(1e4,1e4),this.mask_frame.setPosition(this.nodMask.getPosition());break;case s.GUIDE_TYPE.TIME:this.tipsLabel.string="这里显示了游戏时间，游戏按照难度分为4个阶段",this.blackBoardNode.setPositionY(160),this.nodMask.setPosition(this.timeNode.getPosition()),this.nodMask.setContentSize(this.timeNode.getContentSize()),this.mask_frame.setPosition(this.nodMask.getPosition()),this.mask_frame.setContentSize(this.nodMask.getContentSize()),this.mask_frame.scale=5,this.mask_frame.runAction(cc.scaleTo(1,1.5));var i=cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.3),cc.scaleTo(.5,1.2)));this.mask_frame.runAction(i);break;case s.GUIDE_TYPE.HEAD:this.tipsLabel.string="这是头像部分，你总是蓝方",this.blackBoardNode.setPositionY(160),this.nodMask.setPosition(this.headNode.getPosition()),this.nodMask.setContentSize(this.headNode.getContentSize());break;case s.GUIDE_TYPE.COUNT:this.tipsLabel.string="这里显示了你和对手得到的宠物数量。\n不要输给你的对手哦",this.blackBoardNode.setPositionY(160),this.nodMask.setPosition(this.countNode.getPosition()),this.nodMask.setContentSize(this.countNode.getContentSize()),this.mask_frame.setPosition(this.nodMask.getPosition()),this.mask_frame.setContentSize(this.nodMask.getContentSize()),this.mask_frame.scale=5,this.mask_frame.runAction(cc.scaleTo(1,1.5));i=cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1.1)));this.mask_frame.runAction(i);break;case s.GUIDE_TYPE.TIME50:this.tipsLabel.string="剩余50秒，\n游戏进入第2阶段，新添加一种水果，难度加大啦",this.blackBoardNode.setPositionY(160),this.nodMask.setPosition(1e4,1e4),this.mask_frame.setPosition(this.nodMask.getPosition());break;case s.GUIDE_TYPE.TIME30:this.tipsLabel.string="剩余30秒，\n游戏进入第3阶段，再添加一种水果，难度更大啦",this.blackBoardNode.setPositionY(160),this.nodMask.setPosition(1e4,1e4),this.mask_frame.setPosition(this.nodMask.getPosition());break;case s.GUIDE_TYPE.TIME10:this.tipsLabel.string="最后10秒进入奖励阶段，这里你可以消除单个的水果，把握最后的时间超越对手吧",this.blackBoardNode.setPositionY(160),this.nodMask.setPosition(1e4,1e4),this.mask_frame.setPosition(this.nodMask.getPosition());break;case s.GUIDE_TYPE.BOMB_SUC:this.nodMask.opacity=0,this.tipsLabel.string="真棒，就是这样!",this.blackBoardNode.setPositionY(160),this.nodMask.setPosition(1e4,1e4),this.mask_frame.setPosition(this.nodMask.getPosition());break;case s.GUIDE_TYPE.BOMB_COL:this.tipsLabel.string="恭喜你！\n合成了辣椒，它可以消除一整列的水果哦",this.continueNode.active=!1,this.pointSprite.node.active=!0,n=this.node.convertToNodeSpaceAR(o),650<o.y&&this.blackBoardNode.setPositionY(-160),this.pointSprite.node.setPosition(n),this.pointSprite.getComponent(cc.Animation).play("aniGuide"),this.nodMask.setPosition(n),this.nodMask.setContentSize(80,80),this.mask_frame.setPosition(this.nodMask.getPosition()),this.mask_frame.setContentSize(110,110),this.mask_frame.scale=5,this.mask_frame.runAction(cc.scaleTo(1,1.5));i=cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1.1)));this.mask_frame.runAction(i);break;case s.GUIDE_TYPE.BOMB_A:this.tipsLabel.string="恭喜你！\n合成了炸弹，它可以消除周围的9个水果哦",this.continueNode.active=!1,this.pointSprite.node.active=!0,n=this.node.convertToNodeSpaceAR(o),800<o.y&&this.blackBoardNode.setPositionY(-160),this.pointSprite.node.setPosition(n),this.pointSprite.getComponent(cc.Animation).play("aniGuide"),this.nodMask.setPosition(n),this.nodMask.setContentSize(80,80),this.mask_frame.setPosition(this.nodMask.getPosition()),this.mask_frame.setContentSize(110,110),this.mask_frame.scale=5,this.mask_frame.runAction(cc.scaleTo(1,1.5));i=cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1.1)));this.mask_frame.runAction(i);break;case s.GUIDE_TYPE.ZZJ:this.tipsLabel.string="恭喜你！\n合成了榨汁机，它可以消除所以相同种类的水果",this.continueNode.active=!1,this.pointSprite.node.active=!0,n=this.node.convertToNodeSpaceAR(o),800<o.y&&this.blackBoardNode.setPositionY(-160),this.pointSprite.node.setPosition(n),this.pointSprite.getComponent(cc.Animation).play("aniGuide"),this.nodMask.setPosition(n),this.nodMask.setContentSize(80,80),this.mask_frame.setPosition(this.nodMask.getPosition()),this.mask_frame.setContentSize(110,110),this.mask_frame.scale=5,this.mask_frame.runAction(cc.scaleTo(1,1.5));i=cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1.1)));this.mask_frame.runAction(i)}}},e.prototype.setGuide=function(e,t){void 0===t&&(t=null),null==this.guideQueue&&(this.guideQueue=[]);var o=[];o[0]=e,o[1]=t,this.guideQueue.unshift(o),this.queueSize++,this.node.active||this.performGuide()},__decorate([r(cc.Node)],e.prototype,"nodMask",void 0),__decorate([r(cc.Node)],e.prototype,"mask_frame",void 0),__decorate([r(cc.Node)],e.prototype,"timeNode",void 0),__decorate([r(cc.Node)],e.prototype,"headNode",void 0),__decorate([r(cc.Node)],e.prototype,"countNode",void 0),__decorate([r(cc.Label)],e.prototype,"tipsLabel",void 0),__decorate([r(cc.Node)],e.prototype,"blackBoardNode",void 0),__decorate([r(cc.Node)],e.prototype,"continueNode",void 0),__decorate([r(cc.Sprite)],e.prototype,"pointSprite",void 0),__decorate([r(cc.Node)],e.prototype,"panelTile",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./GameData":"GameData","./PlayDefine":"PlayDefine"}],RankItemPve:[function(e,t,o){"use strict";cc._RF.push(t,"1b60dLHX1hCcbG5eBurUupf","RankItemPve"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../module/Modules"),i=cc._decorator,r=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.medal_1=null,e.medal_2=null,e.medal_3=null,e.labRank=null,e.labName=null,e.labScore=null,e.nodBg_1=null,e.nodBg_2=null,e.ranknum_blue=null,e.ranknum_red=null,e}return __extends(e,t),e.prototype.updateItem=function(e,t){0==(this.itemID=e)?(this.medal_1.active=!0,this.medal_2.active=!1,this.medal_3.active=!1,this.labRank.node.active=!1):1==e?(this.medal_1.active=!1,this.medal_2.active=!0,this.medal_3.active=!1,this.labRank.node.active=!1):2==e?(this.medal_1.active=!1,this.medal_2.active=!1,this.medal_3.active=!0,this.labRank.node.active=!1):(this.medal_1.active=!1,this.medal_2.active=!1,this.medal_3.active=!1,this.labRank.node.active=!0,this.labRank.string=e+1+""),this.labName.string=t.name,this.labScore.string=t.score,(n.Home.PveRank.myPos||0)==e+1?(this.labRank.font=this.ranknum_blue,this.labName.node.color=cc.color(37,88,165,255),this.labScore.node.color=cc.color(37,88,165,255),this.nodBg_1.active=!1,this.nodBg_2.active=!0):(this.labRank.font=this.ranknum_red,this.labName.node.color=cc.color(186,70,25,255),this.labScore.node.color=cc.color(186,70,25,255),this.nodBg_1.active=!0,this.nodBg_2.active=!1)},__decorate([a(cc.Node)],e.prototype,"medal_1",void 0),__decorate([a(cc.Node)],e.prototype,"medal_2",void 0),__decorate([a(cc.Node)],e.prototype,"medal_3",void 0),__decorate([a(cc.Label)],e.prototype,"labRank",void 0),__decorate([a(cc.Label)],e.prototype,"labName",void 0),__decorate([a(cc.Label)],e.prototype,"labScore",void 0),__decorate([a(cc.Node)],e.prototype,"nodBg_1",void 0),__decorate([a(cc.Node)],e.prototype,"nodBg_2",void 0),__decorate([a(cc.RawAsset)],e.prototype,"ranknum_blue",void 0),__decorate([a(cc.RawAsset)],e.prototype,"ranknum_red",void 0),e=__decorate([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../../../module/Modules":"Modules"}],RankItem:[function(e,t,o){"use strict";cc._RF.push(t,"477edNkel1IarzOWsV95K6k","RankItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../../common/Misc"),i=cc._decorator,r=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labRank=null,e.labName=null,e.labGrade=null,e.labRate=null,e}return __extends(e,t),e.prototype.updateItem=function(e,t){this.itemID=e,this.labName.string=t.name;var o=n.calcShowStarCount(t.star);this.labGrade.string=n.getGradeName(t.star)+" "+o+"星",this.labRate.string=n.formatPercent(t.rateOfWin/100),this.labRank.string=e+1+""},__decorate([a(cc.Label)],e.prototype,"labRank",void 0),__decorate([a(cc.Label)],e.prototype,"labName",void 0),__decorate([a(cc.Label)],e.prototype,"labGrade",void 0),__decorate([a(cc.Label)],e.prototype,"labRate",void 0),e=__decorate([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../../../../common/Misc":"Misc"}],RankPve:[function(e,t,o){"use strict";cc._RF.push(t,"363a4GhONtOCYKV1FXeRKfj","RankPve"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../module/Modules"),s=e("../../../common/config/vo/ConfigVO"),r=e("../GameData"),n=e("../../../../dyGame/DYNotify"),a=e("../../../common/net/NetUtil"),c=e("../../../common/net/proto/mods/ProtoSectionRank"),l=e("../../../common/persist/GamePersist"),d=e("../../../common/Defines"),u=e("../PlayDefine"),h=cc._decorator,p=h.ccclass,f=h.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pListItem=null,e.nodeGlobalContainer=null,e.pGlobalRankList=null,e.nodFriendToggle=null,e.nodGlobalToggle=null,e.pInRankNode=null,e.textGlobalRankPos=null,e.textOutsideGlobalRank=null,e.ranknum_blue=null,e.ranknum_white=null,e.pNobodyLabel=null,e}return __extends(e,t),(o=e).GetComponent=function(e){return e.getComponent(o)},e.prototype.onFriendRank=function(){l.default.INSTANCE.btnAudio_1(),Partner.supportSocialFriend()?(Partner.postMsg(1,{valuekey:d.ValueKey.levelScore}),this.node.getChildByName("nodFriendRank").active=!0,this.nodeGlobalContainer.active=!1,this.node.getChildByName("nodNotSupport").active=!1,this.node.getChildByName("nobodyLabel").active=!1,this.isShowFriendRank=!0):this.showNotSupport()},e.prototype.onGlobalRank=function(){l.default.INSTANCE.btnAudio_1(),this.nodeGlobalContainer.active=!0,this.node.getChildByName("nodNotSupport").active=!1,this.node.getChildByName("nodFriendRank").active=!1,this.isShowFriendRank=!1},e.prototype.onNotify=function(e,t,o){var n=e;t==u.Event_type.RANK_RESULT&&o.level==r.default.curLevel&&(i.Home.PveRank=o,n.showGlobalRank())},e.prototype.start=function(){},e.prototype.initDisplay=function(){this.display=this.node.getChildByName("nodFriendRank").getComponent(cc.Sprite),this.tex=new cc.Texture2D;var e=window.wx.getOpenDataContext().canvas;e.width=720,e.height=1280},e.prototype.init=function(){n.default.regObserver(this,this.onNotify,u.Event_type.RANK_RESULT),this.nodFriendToggle.on("click",this.onFriendRank,this),this.nodGlobalToggle.on("click",this.onGlobalRank,this),this.showRank(),this.pNobodyLabel.node.active=!1,Partner.supportSocialFriend()&&window.wx&&this.initDisplay()},e.prototype.onDisable=function(){cc.find("rank_list/view/content",this.pGlobalRankList).removeAllChildren(),this.nodeGlobalContainer.active=!0,this.node.getChildByName("nodFriendRank").active=!1,this.isShowFriendRank=!1,this.tex=null},e.prototype.onDestroy=function(){n.default.removeAllObservers(this)},e.prototype.showRank=function(){var e=new c.RankPveRankC2S;e.level=r.default.curLevel,e.posStart=1,e.posEnd=50,a.default.SendMsg(e)},e.prototype.showGlobalRank=function(){this.nodeGlobalContainer.active=!0,this.node.getChildByName("nodNotSupport").active=!1,cc.find("rank_list/view/content",this.pGlobalRankList).removeAllChildren();var e=i.Home.PveRank.playmates;!e||e.length<=0?this.showNobody():this.fillGlobalRank()},e.prototype.fillGlobalRank=function(){var e=i.Home.PveRank.playmates;this.getComponent("ListView").showRank(e)},e.prototype.showNobody=function(){this.nodeGlobalContainer.active=!1,this.node.getChildByName("nodNotSupport").active=!1,this.node.getChildByName("nobodyLabel").active=!0},e.prototype.showNotSupport=function(){this.nodeGlobalContainer.active=!1,this.node.getChildByName("nodNotSupport").active=!0},e.prototype.gatherHonorConf=function(){var e={},t=s.Honor.getExtra("range");e.range=t;for(var o={},n=0;n<t.length;n++){var i=t[n][0],r=s.Honor.get(i).name;o[i]=r}e.name=o;var a=s.Honor.getExtra("max_star")[0];return e.maxStar=a,e},e.prototype._updateSubDomainCanvas=function(){if(this.tex&&this.isShowFriendRank){var e=window.wx.getOpenDataContext().canvas;this.tex.initWithElement(e),this.tex.handleLoadedTexture(),this.display.spriteFrame=new cc.SpriteFrame(this.tex)}},e.prototype.update=function(){this._updateSubDomainCanvas()},__decorate([f(cc.Prefab)],e.prototype,"pListItem",void 0),__decorate([f(cc.Node)],e.prototype,"nodeGlobalContainer",void 0),__decorate([f(cc.Node)],e.prototype,"pGlobalRankList",void 0),__decorate([f(cc.Node)],e.prototype,"nodFriendToggle",void 0),__decorate([f(cc.Node)],e.prototype,"nodGlobalToggle",void 0),__decorate([f(cc.Node)],e.prototype,"pInRankNode",void 0),__decorate([f(cc.Label)],e.prototype,"textGlobalRankPos",void 0),__decorate([f(cc.Label)],e.prototype,"textOutsideGlobalRank",void 0),__decorate([f(cc.RawAsset)],e.prototype,"ranknum_blue",void 0),__decorate([f(cc.RawAsset)],e.prototype,"ranknum_white",void 0),__decorate([f(cc.Label)],e.prototype,"pNobodyLabel",void 0),e=o=__decorate([p],e);var o}(cc.Component);o.default=m,cc._RF.pop()},{"../../../../dyGame/DYNotify":"DYNotify","../../../common/Defines":"Defines","../../../common/config/vo/ConfigVO":"ConfigVO","../../../common/net/NetUtil":"NetUtil","../../../common/net/proto/mods/ProtoSectionRank":"ProtoSectionRank","../../../common/persist/GamePersist":"GamePersist","../../../module/Modules":"Modules","../GameData":"GameData","../PlayDefine":"PlayDefine"}],RankScript:[function(e,t,o){"use strict";cc._RF.push(t,"27ff99kZ4RGaJAaABVwE/a0","RankScript"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,a=e("../../../../module/Modules"),s=e("../../../../common/Misc"),c=e("../../../../common/config/vo/ConfigVO"),r=e("../../../../common/persist/GamePersist"),l=e("../../../../common/net/proto/mods/ProtoSectionRank"),d=e("../HomeManager"),u=e("./RankTopThreePlayer"),h=e("../../../../common/net/NetUtil"),p=e("../../../../common/Defines"),f=e("../../../../common/social/SocialManager"),m=cc._decorator,y=m.ccclass,v=m.property;(i=n||(n={}))[i.Friend=1]="Friend",i[i.Global=2]="Global";var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeGlobalContainer=null,e.pGlobalFirstNode=null,e.pGlobalSecondNode=null,e.pGlobalThirdNode=null,e.pGlobalRankList=null,e.pInRankNode=null,e.textGlobalRankPos=null,e.textOutsideGlobalRank=null,e.pNobodyLabel=null,e.nodNotSupport=null,e.nodFriendRank=null,e.isShowFriendRank=!1,e}return __extends(e,t),(o=e).GetComponent=function(e){return e.getComponent(o)},e.prototype.onLoad=function(){},e.prototype.init=function(){this.requestRankData(),Partner.supportSocialFriend()&&window.wx&&this.initDisplay()},e.prototype.onDisable=function(){this.isShowFriendRank=!1,this.tex=null},e.prototype.initDisplay=function(){this.display=this.nodFriendRank.getComponent(cc.Sprite),this.tex=new cc.Texture2D;var e=window.wx.getOpenDataContext().canvas;e.width=720,e.height=1280},e.prototype.onDestroy=function(){a.Home.DataRank.GlobalRankData=null,d.default.INSTANCE.RankPanel=null},e.prototype.closeLayerBtn=function(){var e=this;r.default.INSTANCE.btnAudio_2(),r.default.INSTANCE.panelFadeOut(this.node,function(){e.node.destroy()})},e.prototype.radioButtonClicked=function(e,t){r.default.INSTANCE.btnAudio_1(),"2"===t?this.showFriendRank():"1"===t&&(a.Home.DataRank.GlobalRankData&&0<a.Home.DataRank.GlobalRankData.length?this.showGlobalRank():this.requestRankData())},e.prototype.showFriendRank=function(){this.rankType!==n.Friend&&(this.rankType=n.Friend,this.hideGlobalRank(),Partner.supportSocialFriend()?(Partner.postMsg(2,{valuekey:p.ValueKey.gameRate}),this.nodFriendRank.active=!0,this.isShowFriendRank=!0):this.showNotSupport())},e.prototype.hideMirrorRank=function(){var e={name:"HideRank"};Partner.sendDomainMsg(e)},e.prototype.closeMirrorRank=function(){},e.prototype.showGlobalRank=function(){if(this.rankType!==n.Global){this.rankType=n.Global,this.hideFriendRank(),this.nodNotSupport.active=!1,this.nodeGlobalContainer.active=!0;var e=a.Home.DataRank.GlobalRankData;if(!e||e.length<=0)this.showNobody();else 0<cc.find("rank_list/view/content",this.pGlobalRankList).childrenCount||(this.fillGlobalRank(),this.myRankInfo(n.Global))}},e.prototype.requestRankData=function(){r.default.INSTANCE.ForceWaiting();var e=new l.RankPlayStarC2S;e.posStart=1,e.posEnd=50,h.default.SendMsg(e)},e.prototype.onReceiveRankData=function(){r.default.INSTANCE.CancelWaiting(),this.showGlobalRank()},e.prototype.fillGlobalRank=function(){var e=a.Home.DataRank.GlobalRankData;this.getComponent("ListView").showRank(e);for(var t=0,o=0;o<e.length;o++){var n=o+1;if(1===(t=n))u.default.GetComponent(this.pGlobalFirstNode).setRankPlayer(e[o]);else if(2===n){u.default.GetComponent(this.pGlobalSecondNode).setRankPlayer(e[o])}else{if(3!==n)break;u.default.GetComponent(this.pGlobalThirdNode).setRankPlayer(e[o])}}for(t+=1;t<=3;t++){if(1===t)u.default.GetComponent(this.pGlobalFirstNode).setEmpty();else if(2===t){u.default.GetComponent(this.pGlobalSecondNode).setEmpty()}else if(3===t){u.default.GetComponent(this.pGlobalThirdNode).setEmpty()}}cc.find("rank_list/view/content",this.pGlobalRankList)||cc.error("can't find rank list content")},e.prototype.myRankInfo=function(e){var t=a.Home.DataRank.MyRank||0;0===t?(this.textOutsideGlobalRank.active=!0,this.pInRankNode.getChildByName("randNumBg_sp").active=!1):this.textGlobalRankPos.string=""+t,this.pInRankNode.getChildByName("name_label").getComponent(cc.Label).string=a.Play.DataPlay.MyName;var o=a.Home.DataPlayer.FortuneStar,n=s.calcShowStarCount(o);this.pInRankNode.getChildByName("grade_label").getComponent(cc.Label).string=s.getGradeName(o)+" "+n+"星";var i=this.pInRankNode.getChildByName("winrate_label").getComponent(cc.Label);if(0===a.Home.DataPlayer.PlayCntTotal)i.string="0";else{var r=a.Home.DataPlayer.PlayCntWin/a.Home.DataPlayer.PlayCntTotal;i.string=s.formatPercent(r)}},e.prototype.showNobody=function(){this.nodeGlobalContainer.active=!1,this.pNobodyLabel.node.active=!0},e.prototype.showNotSupport=function(){this.nodeGlobalContainer.active=!1,this.pNobodyLabel.node.active=!1,this.nodNotSupport.active=!0},e.prototype.hideGlobalRank=function(){this.nodeGlobalContainer.active=!1},e.prototype.hideFriendRank=function(){this.nodFriendRank.active=!1,this.isShowFriendRank=!1},e.prototype.gatherHonorConf=function(){var e={},t=c.Honor.getExtra("range");e.range=t;for(var o={},n=0;n<t.length;n++){var i=t[n][0],r=c.Honor.get(i).name;o[i]=r}e.name=o;var a=c.Honor.getExtra("max_star")[0];return e.maxStar=a,e},e.prototype.shareBtn=function(){r.default.INSTANCE.btnAudio_1();var e=f.default.INSTANCE.makeFlauntParam();Partner.doFlaunt(e,function(){})},e.prototype.showAdBtn=function(){r.default.INSTANCE.btnAudio_1(),Partner.supportAd()&&(Partner.initVideoAd(function(){Partner.videoAd=null}),Partner.showVideoAd())},e.prototype._updateSubDomainCanvas=function(){if(this.tex&&this.isShowFriendRank){var e=window.wx.getOpenDataContext().canvas;this.tex.initWithElement(e),this.tex.handleLoadedTexture(),this.display.spriteFrame=new cc.SpriteFrame(this.tex)}},e.prototype.update=function(){this._updateSubDomainCanvas()},__decorate([v(cc.Node)],e.prototype,"nodeGlobalContainer",void 0),__decorate([v(cc.Node)],e.prototype,"pGlobalFirstNode",void 0),__decorate([v(cc.Node)],e.prototype,"pGlobalSecondNode",void 0),__decorate([v(cc.Node)],e.prototype,"pGlobalThirdNode",void 0),__decorate([v(cc.Node)],e.prototype,"pGlobalRankList",void 0),__decorate([v(cc.Node)],e.prototype,"pInRankNode",void 0),__decorate([v(cc.Label)],e.prototype,"textGlobalRankPos",void 0),__decorate([v(cc.Node)],e.prototype,"textOutsideGlobalRank",void 0),__decorate([v(cc.Label)],e.prototype,"pNobodyLabel",void 0),__decorate([v(cc.Node)],e.prototype,"nodNotSupport",void 0),__decorate([v(cc.Node)],e.prototype,"nodFriendRank",void 0),e=o=__decorate([y],e);var o}(cc.Component);o.default=_,cc._RF.pop()},{"../../../../common/Defines":"Defines","../../../../common/Misc":"Misc","../../../../common/config/vo/ConfigVO":"ConfigVO","../../../../common/net/NetUtil":"NetUtil","../../../../common/net/proto/mods/ProtoSectionRank":"ProtoSectionRank","../../../../common/persist/GamePersist":"GamePersist","../../../../common/social/SocialManager":"SocialManager","../../../../module/Modules":"Modules","../HomeManager":"HomeManager","./RankTopThreePlayer":"RankTopThreePlayer"}],RankTopThreePlayer:[function(e,t,o){"use strict";cc._RF.push(t,"007e5kVdHBHbqgVFRaQx11z","RankTopThreePlayer"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../../common/Misc"),n=cc._decorator,i=n.ccclass,r=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.textHonor=null,e.textName=null,e.nodeHead=null,e.imgMale=null,e.imgFemale=null,e}return __extends(e,t),(o=e).GetComponent=function(e){return e.getComponent(o)},e.prototype.start=function(){},e.prototype.setEmpty=function(){this.imgFemale.node.active=!1,this.imgMale.node.active=!1,this.textHonor.string="",this.textName.string=""},e.prototype.setRankPlayer=function(e){var t=e.headImg;if(Partner.needPreloadOpponentHead()){var o=Partner.getOpenIdByHeadImgUrl(t);Partner.preloadOpponentHead(o)}var n=e.id,i=e.star;a.showHeadImg(this.nodeHead,n,t),this.textName.string=e.name,this.textHonor.string=a.getGradeName(i);var r=1===e.sex;this.imgFemale.node.active=!r,this.imgMale.node.active=r},__decorate([r(cc.Label)],e.prototype,"textHonor",void 0),__decorate([r(cc.Label)],e.prototype,"textName",void 0),__decorate([r(cc.Node)],e.prototype,"nodeHead",void 0),__decorate([r(cc.Sprite)],e.prototype,"imgMale",void 0),__decorate([r(cc.Sprite)],e.prototype,"imgFemale",void 0),e=o=__decorate([i],e);var o}(cc.Component);o.default=s,cc._RF.pop()},{"../../../../common/Misc":"Misc"}],RoomDefine:[function(e,t,o){"use strict";var n;cc._RF.push(t,"2c35eCAXSdPg5ZXuXdiOiy0","RoomDefine"),Object.defineProperty(o,"__esModule",{value:!0}),(n=o.RoomType||(o.RoomType={}))[n.INVITE=1]="INVITE",n[n.MATCH=2]="MATCH",cc._RF.pop()},{}],RoomNetHandler:[function(e,t,o){"use strict";cc._RF.push(t,"4fe56pP98lIW4e8A2HBra7w","RoomNetHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../common/net/proto/ProtoDispatcher"),i=e("../../../common/net/proto/mods/ProtoSectionRoom"),r=e("../../../common/net/proto/mods/ProtoSectionRank"),c=e("./HomeManager"),a=e("../../../module/Modules"),s=e("../../../common/net/proto/mods/ProtoSectionGoods"),l=e("../../../common/net/proto/mods/ProtoSectionTask"),d=e("../../../common/Events"),u=e("../../../common/persist/GamePersist"),h=e("../../../common/net/proto/ProtoReflect"),p=e("../../game/PlayManager"),f=e("../../../module/data/mod/DataRank"),m=function(){function e(){n.RoomDispatcher.on(i.RoomMatchRequestS2C.EVENT_NAME,this.onMatchRequestReceived,this),n.RoomDispatcher.on(i.RoomMatchTimeoutS2C.EVENT_NAME,this.onMatchTimeOutReceived,this),n.RoomDispatcher.on(i.RoomInvisibleS2C.EVENT_NAME,this.onInvisibleRequestReceived,this),n.RoomDispatcher.on(i.RoomPlayConfirmS2C.EVENT_NAME,this.onConfirmReceived,this),n.RoomDispatcher.on(i.RoomPlayCreateS2C.EVENT_NAME,this.onPlayCreate,this),n.RoomDispatcher.on(i.RoomPlayStartS2C.EVENT_NAME,this.onPlayStart,this),n.RoomDispatcher.on(i.RoomInviteRequestS2C.EVENT_NAME,this.onInviteRequestReceived,this),n.RoomDispatcher.on(i.RoomOpponentLeaveS2C.EVENT_NAME,this.onOpponentLeave,this),n.RankDispatcher.on(r.RankPlayStarS2C.EVENT_NAME,this.onRankDataReceived,this),n.GoodsDispatcher.on(s.GoodsPullS2C.EVENT_NAME,this.onPlayerGoodsResponse,this),n.GoodsDispatcher.on(s.GoodsUpdateS2C.EVENT_NAME,this.onUpdataPlayerGoodsResponse,this),n.GoodsDispatcher.on(s.GoodsTurntableRecordPullS2C.EVENT_NAME,this.onBigLotteryRecordReceived,this),n.GoodsDispatcher.on(s.GoodsTurntableRecordNewS2C.EVENT_NAME,this.onUpdataBigLotteryRecordReceived,this),n.TaskDispatcher.on(l.TaskListS2C.EVENT_NAME,this.onPlayerTaskReceived,this),n.TaskDispatcher.on(l.TaskUpdateS2C.EVENT_NAME,this.onUpdataPlayerTaskReceived,this),u.default.INSTANCE.OnProtoError(h.ProtoSection.room,this.onProtoRoomError,this),u.default.INSTANCE.OnProtoError(h.ProtoSection.rank,this.onProtoRankError,this)}return e.prototype.onProtoRoomError=function(e){var t=e.detail.errMsg;u.default.INSTANCE.Toast(t)},e.prototype.onProtoRankError=function(e){var t=e.detail.errMsg;u.default.INSTANCE.Toast(t)},e.prototype.onPlayCreate=function(e){var t=e.detail;if(c.default.INSTANCE.HomeUI){var o=t.roomId,n=t.playmates,i=t.redId,r=t.bluId,a=t.roomType,s=t.roomOwner;o<1?cc.warn("服务器通知新的一局开始 但是房间Id:"+o+" 不合法"):c.default.INSTANCE.onPlayCreate(o,a,s,i,r,n)}},e.prototype.onConfirmReceived=function(e){e.detail},e.prototype.onPlayStart=function(e){var t=e.detail.roomId;t<1?cc.warn("服务器通知新的一局开始 但是房间Id:"+t+" 不合法"):p.default.INSTANCE.PlayUI?p.default.INSTANCE.onOneMorePlayStart(t):c.default.INSTANCE.HomeUI&&c.default.INSTANCE.onPlayStart(t)},e.prototype.onOpponentLeave=function(e){var t=e.detail;c.default.INSTANCE.HomeUI&&c.default.INSTANCE.onOpponentLeave(t.opponentId)},e.prototype.onMatchRequestReceived=function(e){},e.prototype.onMatchTimeOutReceived=function(e){c.default.INSTANCE.HomeUI&&(c.default.INSTANCE.onPvpAiCreate(),c.default.INSTANCE.HomeUI.activePvpAi())},e.prototype.onInvisibleRequestReceived=function(e){},e.prototype.onInviteRequestReceived=function(e){var t=e.detail;c.default.INSTANCE.HomeUI&&c.default.INSTANCE.onReceiveInviteParam(t.inviteeParam)},e.prototype.onRankDataReceived=function(e){var t=e.detail;a.Home.DataRank.GlobalRankData=t.playmates,a.Home.DataRank.MyRank=t.myPos,c.default.INSTANCE.onReceiveRankData()},e.prototype.onPveRankDataReceived=function(e){var t=e.detail;a.Home.PveRank=new f.PveDataRank,a.Home.PveRank.GlobalRankData=t.playmates,a.Home.PveRank.MyRank=t.myPos,c.default.INSTANCE.onReceivePveRankData()},e.prototype.onPlayerGoodsResponse=function(e){var t=e.detail;a.Home.DataPlayer.PalyerGoodsData=t.goodsList},e.prototype.onUpdataPlayerGoodsResponse=function(e){var t=e.detail;a.Home.DataPlayer.UpdataPlayerGoods(t.goodsList),a.Home.emit(d.EVENT_MODULE_PLAYER_PRIZE)},e.prototype.onBigLotteryRecordReceived=function(e){var t=e.detail;a.Home.DataPlayer.BigLotteryRecordData=t.recordList},e.prototype.onUpdataBigLotteryRecordReceived=function(e){var t=e.detail;a.Home.DataPlayer.UpdataBigLotteryRecord(t.record),a.Home.emit(d.EVENT_MODULE_BIG_LOTTERY)},e.prototype.onPlayerTaskReceived=function(e){var t=e.detail;a.Home.DataPlayer.PlayerTaskData=t.task},e.prototype.onUpdataPlayerTaskReceived=function(e){var t=e.detail;cc.log(t.task),a.Home.DataPlayer.UpdataPlayerTask(t.task),a.Home.emit(d.EVENT_MODULE_PLAYER_TASK)},e}();o.default=m,cc._RF.pop()},{"../../../common/Events":"Events","../../../common/net/proto/ProtoDispatcher":"ProtoDispatcher","../../../common/net/proto/ProtoReflect":"ProtoReflect","../../../common/net/proto/mods/ProtoSectionGoods":"ProtoSectionGoods","../../../common/net/proto/mods/ProtoSectionRank":"ProtoSectionRank","../../../common/net/proto/mods/ProtoSectionRoom":"ProtoSectionRoom","../../../common/net/proto/mods/ProtoSectionTask":"ProtoSectionTask","../../../common/persist/GamePersist":"GamePersist","../../../module/Modules":"Modules","../../../module/data/mod/DataRank":"DataRank","../../game/PlayManager":"PlayManager","./HomeManager":"HomeManager"}],RuntimeManager:[function(e,t,o){"use strict";cc._RF.push(t,"cf4df3rHC1GfbzfZ9nbJwt7","RuntimeManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../net/NetController"),i=e("../persist/GamePersist"),r=e("../../component/page/home/HomeManager"),a=cc._decorator,s=a.ccclass,c=(a.property,function(){function e(){this.reLaunchOptions=null,this.isBackground=!1}return t=e,Object.defineProperty(e,"INSTANCE",{get:function(){return t.singleInstance||(t.singleInstance=new t),t.singleInstance},enumerable:!0,configurable:!0}),e.prototype.init=function(){var t=this;Partner.registerOnShowCallback(function(e){t.onShow(e)}),Partner.registerOnHideCallback(function(){t.onHide()})},Object.defineProperty(e.prototype,"IsBackground",{get:function(){return this.isBackground},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ReLaunchOptions",{get:function(){var e=this.reLaunchOptions;return this.reLaunchOptions=null,e},enumerable:!0,configurable:!0}),e.prototype.onHide=function(){this.isBackground=!0,i.default.INSTANCE.RootUI.onAppHide()},e.prototype.onShow=function(e){if(this.isBackground){this.isBackground=!1,i.default.INSTANCE.RootUI.onAppShow();var t=e.scene||-1;e.reLaunch||1007===t||1008===t?this.reLaunchOptions=e:this.reLaunchOptions=null,n.default.INSTANCE.Connected?r.default.INSTANCE.onReLaunch():n.default.INSTANCE.onSocketClose()}},e=t=__decorate([s],e);var t}());o.default=c,cc._RF.pop()},{"../../component/page/home/HomeManager":"HomeManager","../net/NetController":"NetController","../persist/GamePersist":"GamePersist"}],ScoreMsg:[function(e,t,o){"use strict";cc._RF.push(t,"1ca0fTgITBPc7jSdPsSUM2M","ScoreMsg"),Object.defineProperty(o,"__esModule",{value:!0});var d=e("../NodePool"),n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labScore=null,e.font_red=null,e.font_green=null,e.font_purple=null,e.font_blue=null,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.setMessage=function(e,t,o,n){e<=4?this.labScore.font=this.font_blue:4<e&&e<=6?this.labScore.font=this.font_green:6<e&&e<=8?this.labScore.font=this.font_purple:9<=e&&(this.labScore.font=this.font_red),this.labScore.string=t+"";this.labScore.node.getContentSize();this.node.opacity=255;var i=20*(Math.random()-.5),r=20*(Math.random()-.5);this.node.setPosition(80*(o-4)+40+i,80*n+80+r);var a=cc.delayTime(.2),s=cc.spawn([cc.moveBy(1.3,cc.p(0,70)),cc.fadeTo(1.3,0)]),c=cc.callFunc(function(){d.default.putNodeScore(this.node)},this),l=cc.sequence([a,s,c]);this.node.runAction(l)},e.prototype.onDestroy=function(){},__decorate([r(cc.Label)],e.prototype,"labScore",void 0),__decorate([r(cc.RawAsset)],e.prototype,"font_red",void 0),__decorate([r(cc.RawAsset)],e.prototype,"font_green",void 0),__decorate([r(cc.RawAsset)],e.prototype,"font_purple",void 0),__decorate([r(cc.RawAsset)],e.prototype,"font_blue",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{"../NodePool":"NodePool"}],Setting:[function(e,t,o){"use strict";cc._RF.push(t,"8b91eA8lJBIO6ppNyrm5JMC","Setting"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.btnBack=function(){this.node.active=!1},__decorate([r(cc.Label)],e.prototype,"label",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],SocialManager:[function(e,t,o){"use strict";cc._RF.push(t,"6a91fMwXk5D54zfMpSztnIN","SocialManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../module/Modules"),i=e("../persist/GamePersist"),r=e("../Misc"),a=cc._decorator,s=a.ccclass,c=(a.property,function(){function e(){}return t=e,Object.defineProperty(e,"INSTANCE",{get:function(){return t.singleInstance||(t.singleInstance=new t),t.singleInstance},enumerable:!0,configurable:!0}),e.prototype.setUserStar=function(e){Partner.setUserStar(e)},e.prototype.makeInviteParam=function(e){if("Dev"===Partner.PARTNER_NAME)return e;if("Wechat"===Partner.PARTNER_NAME){var t=r.randInviteShare(),o=n.Home.DataPlayer.MyId;return{imageUrl:Partner.shareImgUrl(t.img),query:"inviter="+e+"&from="+o+"&time="+i.default.INSTANCE.ServerTime,title:t.title}}},e.prototype.makeFlauntParam=function(){var e=r.randFlauntShare(),t=n.Home.DataPlayer.MyId;return{imageUrl:Partner.shareImgUrl(e.img),query:"from="+t+"&time="+i.default.INSTANCE.ServerTime,title:e.title}},e.prototype.makeManualParam=function(){var e=r.randManualShare(),t=n.Home.DataPlayer.MyId;return{imageUrl:Partner.shareImgUrl(e.img),query:"from="+t+"&time="+i.default.INSTANCE.ServerTime,title:e.title}},e.prototype.init=function(){var e=this;Partner.showShareMenu(),Partner.registerShareAppCallback(function(){return e.onShareApp()})},e.prototype.onShareApp=function(){var e=r.randManualShare();return{imageUrl:Partner.shareImgUrl(e.img),query:"from="+n.Home.DataPlayer.MyId+"&time="+i.default.INSTANCE.ServerTime,title:e.title}},e=t=__decorate([s],e);var t}());o.default=c,cc._RF.pop()},{"../../module/Modules":"Modules","../Misc":"Misc","../persist/GamePersist":"GamePersist"}],SocketDefine:[function(e,t,o){"use strict";cc._RF.push(t,"64d73hzZj5ABotj37M3KOq5","SocketDefine"),Object.defineProperty(o,"__esModule",{value:!0}),o.SOCKET_CLOSE="SOCKET_CLOSE",o.SOCKET_CONNECT="SOCKET_CONNECT",o.SOCKET_IO_ERROR="SOCKET_IO_ERROR",o.SOCKET_DATA="SOCKET_DATA",cc._RF.pop()},{}],SpriteFrameSet:[function(e,t,o){"use strict";cc._RF.push(t,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var n=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});t.exports=n,cc._RF.pop()},{}],StateMgr:[function(e,t,o){"use strict";cc._RF.push(t,"bbd22PNhUJE+qA6amEmlK2C","StateMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../GameData"),i=e("./PanelHeader_pve"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"INSTANCE",{get:function(){return this.singleInstance||(this.singleInstance=new t),this.singleInstance},enumerable:!0,configurable:!0}),t.prototype.init=function(){this._isGameBegin=!1,this._isTransportBegin=!1,this._isGameOver=!1,this._isStopOperate=!1,this._isBlockMatchOver=!0,this._isAllDownOver=!0,this._isComposeOver=!0,this._isBombOver=!0,this._isCollectOver=!0,this._isAnimalDownOver=!0,this._isTransportOver=!0,this._isBonusActionOver=!1,this._isBonusOver=!1},Object.defineProperty(t.prototype,"isGameBegin",{get:function(){return this._isGameBegin},set:function(e){this._isGameBegin=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isTransportBegin",{get:function(){return this._isTransportBegin},set:function(e){this._isTransportBegin=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isStopOperate",{get:function(){return this._isStopOperate},set:function(e){this._isStopOperate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGameOver",{get:function(){return this._isGameOver},set:function(e){this._isGameOver=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBlockMatchOver",{get:function(){return this._isBlockMatchOver},set:function(e){this._isBlockMatchOver=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isComposeOver",{get:function(){return this._isComposeOver},set:function(e){this._isComposeOver=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBombOver",{get:function(){return this._isBombOver},set:function(e){this._isBombOver=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCollectOver",{get:function(){return this._isCollectOver},set:function(e){this._isCollectOver=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAnimalDownOver",{get:function(){return this._isAnimalDownOver},set:function(e){this._isAnimalDownOver=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isTransportOver",{get:function(){return this._isTransportOver},set:function(e){this._isTransportOver=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAllDownOver",{get:function(){return this._isAllDownOver},set:function(e){this._isAllDownOver=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBonusActionOver",{get:function(){return this._isBonusActionOver},set:function(e){this._isBonusActionOver=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBonusOver",{get:function(){return this._isBonusOver},set:function(e){this._isBonusOver=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isTimeLevel",{get:function(){return this._isTimeLevel},set:function(e){this._isTimeLevel=e},enumerable:!0,configurable:!0}),t.prototype.canTouch=function(){},t.prototype.canCompose=function(){},t.prototype.canAllDown=function(){var e=!0;return this._isBombOver&&this._isComposeOver&&this._isAnimalDownOver||(e=!1),e},t.prototype.canCollect=function(){var e=!0;return this._isBombOver&&this._isComposeOver||(e=!1),e},t.prototype.canTransport=function(){var e=!0;return this._isBombOver&&this._isComposeOver&&this._isAnimalDownOver&&this._isAllDownOver&&!this._isTransportBegin||(e=!1),e},t.prototype.canOperate=function(){var e=!0;return 0<n.default.levelData.grid.transport.length?this._isBombOver&&this._isComposeOver&&this._isAnimalDownOver&&this._isCollectOver&&this._isTransportOver&&this._isAllDownOver&&this._isBlockMatchOver||(e=!1):this._isStopOperate&&(e=!1),e},t.prototype.canGameOver=function(){var e=!0;return this._isBombOver&&this._isCollectOver&&this._isComposeOver&&this._isAllDownOver&&this._isTransportOver&&!this._isGameOver&&this._isComposeOver&&this._isBlockMatchOver||(e=!1),!e||this._isStopOperate||i.default.INSTANCE.checkWin()||(e=!1),e},t.prototype.canBonus=function(){var e=!0;return(!this._isBonusActionOver||this._isBonusOver||this._isTimeLevel)&&(e=!1),e},t}(cc.Component);o.default=r,cc._RF.pop()},{"../GameData":"GameData","./PanelHeader_pve":"PanelHeader_pve"}],Tableware:[function(e,t,o){"use strict";cc._RF.push(t,"72439ZamuZEmIkQn+9mpxCB","Tableware"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../PlayDefine"),i=e("../../../../dyGame/DYNotify"),r=e("../GameData"),a=e("./BaseTile"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprTile=null,e.spf_shaozi=null,e.spf_panzi=null,e.spf_panzi_2=null,e}return __extends(e,t),e.prototype.onLoad=function(){this._tileType=n.TILE_TYPE.TABLEWARE,this.node.on("touchstart",this.onTouchStart,this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},e.prototype.onTouchStart=function(){if(this._canTouch){this.node.stopActionByTag(3);var e=cc.sequence(cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.2,.9,.9),cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.2,.9,.9),cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.2,.9,.9),cc.scaleTo(.15,1.05,1.05),cc.scaleTo(.05,1,1),cc.delayTime(1.5));this.node.runAction(e),e.setTag(3)}},e.prototype.init=function(){this.node.active=!0,this.node.scale=1,this.sprTile.node.active=!0,this.sprTile.node.scale=1},e.prototype.setContentSize=function(e,t){this.node.setContentSize(e,t),this.sprTile.node.setContentSize(e,t)},e.prototype.setArrPosition=function(e,t){this.x=e,this.y=t,this.node.setPosition(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2)},e.prototype.setSpfByType=function(e){switch(e){case n.TABLEWARE_TYPE.TYPE_1:this.sprTile.spriteFrame=this.spf_shaozi;break;case n.TABLEWARE_TYPE.TYPE_2:this.sprTile.spriteFrame=this.spf_panzi;break;case n.TABLEWARE_TYPE.TYPE_3:this.sprTile.spriteFrame=this.spf_panzi_2}},e.prototype.newTile=function(e,t,o){void 0===o&&(o=!0),this.node.setPosition(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2+700),o&&this.moveTo(e,t,null)},e.prototype.moveTo=function(e,t,o,n){void 0===n&&(n=!0);if(this.x!=e&&n&&this.newTile(e,t,!1),this.x=e,this.y=t,this.node.stopActionByTag(1),n)var i=cc.sequence(cc.moveTo(.15,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2-15)),cc.moveTo(.1,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2+5)),cc.moveTo(.1,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2)),cc.callFunc(function(){o&&o()}));else i=cc.sequence(cc.moveTo(.8,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2)),cc.callFunc(function(){o&&o()}));this.node.runAction(i),i.setTag(1)},e.prototype.affected=function(){this.destroyTile()},e.prototype.recoveryObstacle=function(){var e=this;e.node.zIndex=1e3;var t=cc.sequence(cc.moveTo(.2,e.node.width*(e.x-4)+e.node.width/2,-200),cc.callFunc(function(){e.destroyTile(),e._game.moveAllTileDown()}));e.node.runAction(t)},e.prototype.destroyTile=function(){if(!this._isDestroying){this._isDestroying=!0;var o=this;r.default.delWallCnt[this.type-1]++;var e=cc.sequence(cc.scaleTo(.2,0),cc.callFunc(function(e,t){o._game.tiles[o.x][o.y]=null,i.default.post(n.GET_OBJECTIVE,{tileType:n.TILE_TYPE.TABLEWARE,type:o.type}),o.node.destroy()}.bind(o,o.x,o.y),o));this.node.runAction(e)}},__decorate([l(cc.Sprite)],e.prototype,"sprTile",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spf_shaozi",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spf_panzi",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spf_panzi_2",void 0),e=__decorate([c],e)}(a.default);o.default=d,cc._RF.pop()},{"../../../../dyGame/DYNotify":"DYNotify","../GameData":"GameData","../PlayDefine":"PlayDefine","./BaseTile":"BaseTile"}],Tips:[function(e,t,o){"use strict";cc._RF.push(t,"0a6e3B36utHDIypRWUbqA4W","Tips"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.show=function(){this.node.active=!0,this.node.opacity=255;for(var e=Math.floor(6*Math.random()),t=0;t<this.node.children.length;++t)this.node.children[t].active=e==t},t.prototype.hide=function(){this.node.active=!1},t=__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{}],Toast:[function(e,t,o){"use strict";cc._RF.push(t,"5979dL6QVRMgqWaEZNvTZay","Toast"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../common/persist/GamePersist"),n=cc._decorator,i=n.ccclass,r=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.textMsg=null,e.imgBackground=null,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.setMessage=function(e){this.textMsg.string=e;var t=this.textMsg.node.getContentSize();this.imgBackground.node.setContentSize(t.width+90,t.height+70),this.node.opacity=255,this.node.position=new cc.Vec2(0,0);var o=cc.delayTime(.6),n=cc.spawn([cc.moveBy(1.3,cc.p(0,70)),cc.fadeTo(1.3,0)]),i=cc.callFunc(function(){a.default.ToastPool.put(this.node)},this),r=cc.sequence([o,n,i]);this.node.runAction(r)},e.prototype.onDestroy=function(){},__decorate([r(cc.Label)],e.prototype,"textMsg",void 0),__decorate([r(cc.Sprite)],e.prototype,"imgBackground",void 0),e=__decorate([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../../common/persist/GamePersist":"GamePersist"}],UIDefines:[function(e,t,o){"use strict";var n;cc._RF.push(t,"a7632wyGldCyarB8ITWi349","UIDefines"),Object.defineProperty(o,"__esModule",{value:!0}),(n=o.ConfirmType||(o.ConfirmType={}))[n.YES_NO=0]="YES_NO",n[n.YES=1]="YES",cc._RF.pop()},{}],UInt64:[function(e,t,o){"use strict";cc._RF.push(t,"7d851arFfRNi5ymQDzzqxL/","UInt64"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e,t){this.low=0,this.high=0,this.high=e,this.low=t}return e.prototype.Set=function(e,t){this.high=e,this.low=t},e.prototype.SetVal=function(e){this.low=e>>>31,this.low=e>>>1,this.high=(4294967295&e)>>>0},e.prototype.Low=function(){return this.low},e.prototype.High=function(){return this.high},Object.defineProperty(e.prototype,"IsZero",{get:function(){return 0===this.high&&0===this.low},enumerable:!0,configurable:!0}),e.prototype.ToNumber=function(){return 4294967296*this.low+this.high},e.prototype.Equal=function(e){return e.High()===this.high&&e.Low()===this.low},e}();o.default=n,cc._RF.pop()},{}],Wall:[function(e,t,o){"use strict";cc._RF.push(t,"6f620QSE4BDYbjDdUE8ybjA","Wall"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../PlayDefine"),i=e("../GameData"),r=e("../../../../dyGame/DYNotify"),a=e("./BaseTile"),s=cc._decorator,c=s.ccclass,l=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprTile=null,e.spf_type_1_1=null,e.spf_type_1_2=null,e.spf_type_2_1=null,e.spf_type_2_2=null,e._state=null,e}return __extends(e,t),e.prototype.onLoad=function(){this._tileType=n.TILE_TYPE.WALL},e.prototype.start=function(){},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},e.prototype.init=function(){this.node.active=!0,this.node.scale=1,this.sprTile.node.active=!0,this.sprTile.node.scale=1},e.prototype.setContentSize=function(e,t){this.node.setContentSize(e,t),this.sprTile.node.setContentSize(e,t)},e.prototype.setArrPosition=function(e,t){this.x=e,this.y=t,this.node.setPosition(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2)},Object.defineProperty(e.prototype,"type",{set:function(e){this._type=e,this.setState(e),this.setSpfByType(e)},enumerable:!0,configurable:!0}),e.prototype.setState=function(e){switch(e){case n.TABLEWARE_TYPE.TYPE_1:case n.TABLEWARE_TYPE.TYPE_2:this._state=2}},e.prototype.setSpfByType=function(e){switch(e){case n.TABLEWARE_TYPE.TYPE_1:switch(this._state){case 2:this.sprTile.spriteFrame=this.spf_type_1_1;break;case 1:this.sprTile.spriteFrame=this.spf_type_1_2}break;case n.TABLEWARE_TYPE.TYPE_2:switch(this._state){case 2:this.sprTile.spriteFrame=this.spf_type_2_1;break;case 1:this.sprTile.spriteFrame=this.spf_type_2_2}}},e.prototype.newTile=function(e,t){this.node.setPosition(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2+700),this.moveTo(e,t)},e.prototype.moveTo=function(e,t,o){void 0===o&&(o=!0);if(this.x=e,this.y=t,this.node.stopActionByTag(1),o)var n=cc.sequence(cc.moveTo(.1,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2-15)),cc.moveTo(.1,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2+5)),cc.moveTo(.1,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2)),cc.callFunc(function(){}));else n=cc.moveTo(.8,cc.p(this.node.width*(e-4)+this.node.width/2,this.node.height*t+this.node.height/2));this.node.runAction(n),n.setTag(1)},e.prototype.affected=function(){this.destroyTile()},e.prototype.recoveryObstacle=function(){var e=this;e.node.zIndex=1e3;var t=cc.sequence(cc.moveTo(.2,e.node.width*(e.x-4)+e.node.width/2,-200),cc.callFunc(function(){e.destroyTile(),e._game.moveAllTileDown()}));e.node.runAction(t)},e.prototype.destroyTile=function(){if(!this._isDestroying){var e=this;if(e._state--,0<e._state)this.setSpfByType(this._type);else{this._isDestroying=!0;var t=cc.sequence(cc.delayTime(.2),cc.callFunc(function(){e._state<=0&&(e._game.tiles[e.x][e.y]=null,i.default.delWallCnt[e._type-1]++,r.default.post(n.GET_OBJECTIVE),e.node.destroy())}));this.node.runAction(t)}}},__decorate([l(cc.Sprite)],e.prototype,"sprTile",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spf_type_1_1",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spf_type_1_2",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spf_type_2_1",void 0),__decorate([l(cc.SpriteFrame)],e.prototype,"spf_type_2_2",void 0),e=__decorate([c],e)}(a.default);o.default=d,cc._RF.pop()},{"../../../../dyGame/DYNotify":"DYNotify","../GameData":"GameData","../PlayDefine":"PlayDefine","./BaseTile":"BaseTile"}],"es6-promise":[function(z,o,n){(function(j,Y){"use strict";cc._RF.push(o,"69553483qVNBo2hbPdVXB73","es6-promise");var e,t,W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==Y?Y:void 0,t=function(){function l(e){return"function"==typeof e}var o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,t=void 0,i=void 0,s=function(e,t){h[n]=e,h[n+1]=t,2===(n+=2)&&(i?i(p):_())};var e="undefined"!=typeof window?window:void 0,r=e||{},a=r.MutationObserver||r.WebKitMutationObserver,c="undefined"==typeof self&&void 0!==j&&"[object process]"==={}.toString.call(j),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function u(){var e=setTimeout;return function(){return e(p,1)}}var h=new Array(1e3);function p(){for(var e=0;e<n;e+=2){(0,h[e])(h[e+1]),h[e]=void 0,h[e+1]=void 0}n=0}var f,m,y,v,_=void 0;function g(e,t){var o=this,n=new this.constructor(T);void 0===n[S]&&F(n);var i=o._state;if(i){var r=arguments[i-1];s(function(){return U(i,n,r,o._result)})}else M(o,n,e,t);return n}function b(e){if(e&&"object"===(void 0===e?"undefined":W(e))&&e.constructor===this)return e;var t=new this(T);return w(t,e),t}c?_=function(){return j.nextTick(p)}:a?(m=0,y=new a(p),v=document.createTextNode(""),y.observe(v,{characterData:!0}),_=function(){v.data=m=++m%2}):d?((f=new MessageChannel).port1.onmessage=p,_=function(){return f.port2.postMessage(0)}):_=void 0===e&&"function"==typeof z?function(){try{var e=z("vertx");return void 0!==(t=e.runOnLoop||e.runOnContext)?function(){t(p)}:u()}catch(e){return u()}}():u();var S=Math.random().toString(36).substring(16);function T(){}var P=void 0,C=1,E=2,A=new L;function N(e){try{return e.then}catch(e){return A.error=e,A}}function I(e,t,o){var n,i,r,a;t.constructor===e.constructor&&o===g&&t.constructor.resolve===b?(r=e,(a=t)._state===C?O(r,a._result):a._state===E?R(r,a._result):M(a,void 0,function(e){return w(r,e)},function(e){return R(r,e)})):o===A?(R(e,A.error),A.error=null):void 0===o?O(e,t):l(o)?(n=t,i=o,s(function(t){var o=!1,e=function(e,t,o,n){try{e.call(t,o,n)}catch(e){return e}}(i,n,function(e){o||(o=!0,n!==e?w(t,e):O(t,e))},function(e){o||(o=!0,R(t,e))},t._label);!o&&e&&(o=!0,R(t,e))},e)):O(e,t)}function w(e,t){var o,n;e===t?R(e,new TypeError("You cannot resolve a promise with itself")):(n=void 0===(o=t)?"undefined":W(o),null===o||"object"!==n&&"function"!==n?O(e,t):I(e,t,N(t)))}function B(e){e._onerror&&e._onerror(e._result),D(e)}function O(e,t){e._state===P&&(e._result=t,e._state=C,0!==e._subscribers.length&&s(D,e))}function R(e,t){e._state===P&&(e._state=E,e._result=t,s(B,e))}function M(e,t,o,n){var i=e._subscribers,r=i.length;e._onerror=null,i[r]=t,i[r+C]=o,i[r+E]=n,0===r&&e._state&&s(D,e)}function D(e){var t=e._subscribers,o=e._state;if(0!==t.length){for(var n=void 0,i=void 0,r=e._result,a=0;a<t.length;a+=3)n=t[a],i=t[a+o],n?U(o,n,i,r):i(r);e._subscribers.length=0}}function L(){this.error=null}var k=new L;function U(e,t,o,n){var i=l(o),r=void 0,a=void 0,s=void 0,c=void 0;if(i){if((r=function(e,t){try{return e(t)}catch(e){return k.error=e,k}}(o,n))===k?(c=!0,a=r.error,r.error=null):s=!0,t===r)return void R(t,new TypeError("A promises callback cannot return that same promise."))}else r=n,s=!0;t._state!==P||(i&&s?w(t,r):c?R(t,a):e===C?O(t,r):e===E&&R(t,r))}var G=0;function F(e){e[S]=G++,e._state=void 0,e._result=void 0,e._subscribers=[]}var x=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(T),this.promise[S]||F(this.promise),o(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?O(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&O(this.promise,this._result))):R(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===P&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(t,e){var o=this._instanceConstructor,n=o.resolve;if(n===b){var i=N(t);if(i===g&&t._state!==P)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(o===H){var r=new o(T);I(r,t,i),this._willSettleAt(r,e)}else this._willSettleAt(new o(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},e.prototype._settledAt=function(e,t,o){var n=this.promise;n._state===P&&(this._remaining--,e===E?R(n,o):this._result[t]=o),0===this._remaining&&O(n,this._result)},e.prototype._willSettleAt=function(e,t){var o=this;M(e,void 0,function(e){return o._settledAt(C,t,e)},function(e){return o._settledAt(E,t,e)})},e}();var H=function(){function t(e){this[S]=G++,this._result=this._state=void 0,this._subscribers=[],T!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){w(t,e)},function(e){R(t,e)})}catch(e){R(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var o=this.constructor;return this.then(function(e){return o.resolve(t()).then(function(){return e})},function(e){return o.resolve(t()).then(function(){throw e})})},t}();return H.prototype.then=g,H.all=function(e){return new x(this,e).promise},H.race=function(i){var r=this;return o(i)?new r(function(e,t){for(var o=i.length,n=0;n<o;n++)r.resolve(i[n]).then(e,t)}):new r(function(e,t){return t(new TypeError("You must pass an array to race."))})},H.resolve=b,H.reject=function(e){var t=new this(T);return R(t,e),t},H._setScheduler=function(e){i=e},H._setAsap=function(e){s=e},H._asap=s,H.polyfill=function(){var e=void 0;if(void 0!==Y)e=Y;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var o=null;try{o=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===o&&!t.cast)return}e.Promise=H},H.Promise=H},"object"===(void 0===n?"undefined":W(n))&&void 0!==o?(e.ES6Promise=t(),o.exports=t()):"function"==typeof define&&define.amd?(e.ES6Promise=t(),define(t)):e.ES6Promise=t(),ES6Promise.polyfill(),Promise=ES6Promise,cc._RF.pop()}).call(this,z("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:5}],jszip:[function(d,n,r){(function(o,i){"use strict";cc._RF.push(n,"15325UzKChEXbarQq9wPCoI","jszip");var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){if("object"==(void 0===r?"undefined":a(r))&&void 0!==n)n.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof __global?t=__global:"undefined"!=typeof window?t=window:void 0!==o?t=o:"undefined"!=typeof self&&(t=self),t.JSZip=e()}}(function(){return function i(r,a,s){function c(o,e){if(!a[o]){if(!r[o]){var t="function"==typeof d&&d;if(!e&&t)return t(o,!0);if(l)return l(o,!0);throw new Error("Cannot find module '"+o+"'")}var n=a[o]={exports:{}};r[o][0].call(n.exports,function(e){var t=r[o][1][e];return c(t||e)},n,n.exports,i,r,a,s)}return a[o].exports}for(var l="function"==typeof d&&d,e=0;e<s.length;e++)c(s[e]);return c}({1:[function(e,t,o){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(e){for(var t,o,n,i,r,a,s,c="",l=0;l<e.length;)i=(t=e.charCodeAt(l++))>>2,r=(3&t)<<4|(o=e.charCodeAt(l++))>>4,a=(15&o)<<2|(n=e.charCodeAt(l++))>>6,s=63&n,isNaN(o)?a=s=64:isNaN(n)&&(s=64),c=c+d.charAt(i)+d.charAt(r)+d.charAt(a)+d.charAt(s);return c},o.decode=function(e){var t,o,n,i,r,a,s="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)t=d.indexOf(e.charAt(c++))<<2|(i=d.indexOf(e.charAt(c++)))>>4,o=(15&i)<<4|(r=d.indexOf(e.charAt(c++)))>>2,n=(3&r)<<6|(a=d.indexOf(e.charAt(c++))),s+=String.fromCharCode(t),64!=r&&(s+=String.fromCharCode(o)),64!=a&&(s+=String.fromCharCode(n));return s}},{}],2:[function(e,t){function o(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}o.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},t.exports=o},{}],3:[function(e,t,o){o.STORE={magic:"\0\0",compress:function(e){return e},uncompress:function(e){return e},compressInputType:null,uncompressInputType:null},o.DEFLATE=e("./flate")},{"./flate":8}],4:[function(e,t){var a=e("./utils"),s=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];t.exports=function(e,t){if(void 0===e||!e.length)return 0;var o="string"!==a.getTypeOf(e);void 0===t&&(t=0);var n=0;t^=-1;for(var i=0,r=e.length;i<r;i++)n=o?e[i]:e.charCodeAt(i),t=t>>>8^s[255&(t^n)];return-1^t}},{"./utils":21}],5:[function(e,t){function o(){this.data=null,this.length=0,this.index=0}var n=e("./utils");o.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,o=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)o=(o<<8)+this.byteAt(t);return this.index+=e,o},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1)}},t.exports=o},{"./utils":21}],6:[function(e,t,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!1,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],7:[function(e,t,o){var n=e("./utils");o.string2binary=function(e){return n.string2binary(e)},o.string2Uint8Array=function(e){return n.transformTo("uint8array",e)},o.uint8Array2String=function(e){return n.transformTo("string",e)},o.string2Blob=function(e){var t=n.transformTo("arraybuffer",e);return n.arrayBuffer2Blob(t)},o.arrayBuffer2Blob=function(e){return n.arrayBuffer2Blob(e)},o.transformTo=function(e,t){return n.transformTo(e,t)},o.getTypeOf=function(e){return n.getTypeOf(e)},o.checkSupport=function(e){return n.checkSupport(e)},o.MAX_VALUE_16BITS=n.MAX_VALUE_16BITS,o.MAX_VALUE_32BITS=n.MAX_VALUE_32BITS,o.pretty=function(e){return n.pretty(e)},o.findCompression=function(e){return n.findCompression(e)},o.isRegExp=function(e){return n.isRegExp(e)}},{"./utils":21}],8:[function(e,t,o){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako");o.uncompressInputType=n?"uint8array":"array",o.compressInputType=n?"uint8array":"array",o.magic="\b\0",o.compress=function(e,t){return i.deflateRaw(e,{level:t.level||-1})},o.uncompress=function(e){return i.inflateRaw(e)}},{pako:24}],9:[function(e,t){function o(e,t){return this instanceof o?(this.files={},this.comment=null,this.root="",e&&this.load(e,t),void(this.clone=function(){var e=new o;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e})):new o(e,t)}var n=e("./base64");(o.prototype=e("./object")).load=e("./load"),o.support=e("./support"),o.defaults=e("./defaults"),o.utils=e("./deprecatedPublicUtils"),o.base64={encode:function(e){return n.encode(e)},decode:function(e){return n.decode(e)}},o.compressions=e("./compressions"),t.exports=o},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(e,t){var a=e("./base64"),s=e("./zipEntries");t.exports=function(e,t){var o,n,i,r;for((t=t||{}).base64&&(e=a.decode(e)),o=(n=new s(e,t)).files,i=0;i<o.length;i++)r=o[i],this.file(r.fileName,r.decompressed,{binary:!0,optimizedBinaryString:!0,date:r.date,dir:r.dir,comment:r.fileComment.length?r.fileComment:null,unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions,createFolders:t.createFolders});return n.zipComment.length&&(this.comment=n.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(e,t){(function(o){t.exports=function(e,t){return new o(e,t)},t.exports.test=function(e){return o.isBuffer(e)}}).call(this,void 0!==i?i:void 0)},{}],12:[function(e,t){function o(e){this.data=e,this.length=this.data.length,this.index=0}var n=e("./uint8ArrayReader");(o.prototype=new n).readData=function(e){this.checkOffset(e);var t=this.data.slice(this.index,this.index+e);return this.index+=e,t},t.exports=o},{"./uint8ArrayReader":18}],13:[function(e,t){var o=e("./support"),E=e("./utils"),A=e("./crc32"),N=e("./signature"),s=e("./defaults"),v=e("./base64"),_=e("./compressions"),c=e("./compressedObject"),n=e("./nodeBuffer"),I=e("./utf8"),g=e("./stringWriter"),b=e("./uint8ArrayWriter"),i=function(e){if(e._data instanceof c&&(e._data=e._data.getContent(),e.options.binary=!0,e.options.base64=!1,"uint8array"===E.getTypeOf(e._data))){var t=e._data;e._data=new Uint8Array(t.length),0!==t.length&&e._data.set(t,0)}return e._data},r=function(e){var t=i(e);return"string"===E.getTypeOf(t)?!e.options.binary&&o.nodebuffer?n(t,"utf-8"):e.asBinary():t},a=function(e){var t=i(this);return null==t?"":(this.options.base64&&(t=v.decode(t)),t=e&&this.options.binary?f.utf8decode(t):E.transformTo("string",t),e||this.options.binary||(t=E.transformTo("string",f.utf8encode(t))),t)},l=function(e,t,o){this.name=e,this.dir=o.dir,this.date=o.date,this.comment=o.comment,this.unixPermissions=o.unixPermissions,this.dosPermissions=o.dosPermissions,this._data=t,this.options=o,this._initialMetadata={dir:o.dir,date:o.date}};l.prototype={asText:function(){return a.call(this,!0)},asBinary:function(){return a.call(this,!1)},asNodeBuffer:function(){var e=r(this);return E.transformTo("nodebuffer",e)},asUint8Array:function(){var e=r(this);return E.transformTo("uint8array",e)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var w=function(e,t){var o,n="";for(o=0;o<t;o++)n+=String.fromCharCode(255&e),e>>>=8;return n},S=function(){var e,t,o={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===o[t]&&(o[t]=arguments[e][t]);return o},d=function(e,t,o){var n,i,r=E.getTypeOf(t);if(!0!==(i=(i=o)||{}).base64||null!==i.binary&&void 0!==i.binary||(i.binary=!0),(i=S(i,s)).date=i.date||new Date,null!==i.compression&&(i.compression=i.compression.toUpperCase()),"string"==typeof(o=i).unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(e=h(e)),o.createFolders&&(n=u(e))&&p.call(this,n,!0),o.dir||null==t)o.base64=!1,o.binary=!1,r=t=null;else if("string"===r)o.binary&&!o.base64&&!0!==o.optimizedBinaryString&&(t=E.string2binary(t));else{if(o.base64=!1,o.binary=!0,!(r||t instanceof c))throw new Error("The data of '"+e+"' is in an unsupported format !");"arraybuffer"===r&&(t=E.transformTo("uint8array",t))}var a=new l(e,t,o);return this.files[e]=a},u=function(e){"/"==e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},h=function(e){return"/"!=e.slice(-1)&&(e+="/"),e},p=function(e,t){return t=void 0!==t&&t,e=h(e),this.files[e]||d.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]},T=function(e,t,o){var n,i=new c;return e._data instanceof c?(i.uncompressedSize=e._data.uncompressedSize,i.crc32=e._data.crc32,0===i.uncompressedSize||e.dir?(t=_.STORE,i.compressedContent="",i.crc32=0):e._data.compressionMethod===t.magic?i.compressedContent=e._data.getCompressedContent():(n=e._data.getContent(),i.compressedContent=t.compress(E.transformTo(t.compressInputType,n),o))):((!(n=r(e))||0===n.length||e.dir)&&(t=_.STORE,n=""),i.uncompressedSize=n.length,i.crc32=A(n),i.compressedContent=t.compress(E.transformTo(t.compressInputType,n),o)),i.compressedSize=i.compressedContent.length,i.compressionMethod=t.magic,i},P=function(e,t,o,n,i){var r,a,s,c,l=(o.compressedContent,E.transformTo("string",I.utf8encode(t.name))),d=t.comment||"",u=E.transformTo("string",I.utf8encode(d)),h=l.length!==t.name.length,p=u.length!==d.length,f=t.options,m="",y="",v="";s=t._initialMetadata.dir!==t.dir?t.dir:f.dir,c=t._initialMetadata.date!==t.date?t.date:f.date;var _,g,b,S=0,T=0;s&&(S|=16),"UNIX"===i?(T=798,S|=(_=t.unixPermissions,g=s,(b=_)||(b=g?16893:33204),(65535&b)<<16)):(T=20,S|=63&(t.dosPermissions||0)),r=c.getHours(),r<<=6,r|=c.getMinutes(),r<<=5,r|=c.getSeconds()/2,a=c.getFullYear()-1980,a<<=4,a|=c.getMonth()+1,a<<=5,a|=c.getDate(),h&&(y=w(1,1)+w(A(l),4)+l,m+="up"+w(y.length,2)+y),p&&(v=w(1,1)+w(this.crc32(u),4)+u,m+="uc"+w(v.length,2)+v);var P="";P+="\n\0",P+=h||p?"\0\b":"\0\0",P+=o.compressionMethod,P+=w(r,2),P+=w(a,2),P+=w(o.crc32,4),P+=w(o.compressedSize,4),P+=w(o.uncompressedSize,4),P+=w(l.length,2),P+=w(m.length,2);var C=N.LOCAL_FILE_HEADER+P+l+m;return{fileRecord:C,dirRecord:N.CENTRAL_FILE_HEADER+w(T,2)+P+w(u.length,2)+"\0\0\0\0"+w(S,4)+w(n,4)+l+m+u,compressedObject:o}},f={load:function(){throw new Error("Load method is not defined. Is the file jszip.json-load.js included ?")},filter:function(e){var t,o,n,i,r=[];for(t in this.files)this.files.hasOwnProperty(t)&&(n=this.files[t],i=new l(n.name,n._data,S(n.options)),o=t.slice(this.root.length,t.length),t.slice(0,this.root.length)===this.root&&e(o,i)&&r.push(i));return r},file:function(o,e,t){if(1===arguments.length){if(E.isRegExp(o)){var n=o;return this.filter(function(e,t){return!t.dir&&n.test(e)})}return this.filter(function(e,t){return!t.dir&&e===o})[0]||null}return o=this.root+o,d.call(this,o,e,t),this},folder:function(o){if(!o)return this;if(E.isRegExp(o))return this.filter(function(e,t){return t.dir&&o.test(e)});var e=this.root+o,t=p.call(this,e),n=this.clone();return n.root=t.name,n},remove:function(o){o=this.root+o;var e=this.files[o];if(e||("/"!=o.slice(-1)&&(o+="/"),e=this.files[o]),e&&!e.dir)delete this.files[o];else for(var t=this.filter(function(e,t){return t.name.slice(0,o.length)===o}),n=0;n<t.length;n++)delete this.files[t[n].name];return this},generate:function(e){e=S(e||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip"}),E.checkSupport(e.type),("darwin"===e.platform||"freebsd"===e.platform||"linux"===e.platform||"sunos"===e.platform)&&(e.platform="UNIX"),"win32"===e.platform&&(e.platform="DOS");var t,o,n=[],i=0,r=0,a=E.transformTo("string",this.utf8encode(e.comment||this.comment||""));for(var s in this.files)if(this.files.hasOwnProperty(s)){var c=this.files[s],l=c.options.compression||e.compression.toUpperCase(),d=_[l];if(!d)throw new Error(l+" is not a valid compression method !");var u=c.options.compressionOptions||e.compressionOptions||{},h=T.call(this,c,d,u),p=P.call(this,s,c,h,i,e.platform);i+=p.fileRecord.length+h.compressedSize,r+=p.dirRecord.length,n.push(p)}var f;f=N.CENTRAL_DIRECTORY_END+"\0\0\0\0"+w(n.length,2)+w(n.length,2)+w(r,4)+w(i,4)+w(a.length,2)+a;var m=e.type.toLowerCase();for(t="uint8array"===m||"arraybuffer"===m||"blob"===m||"nodebuffer"===m?new b(i+r+f.length):new g(i+r+f.length),o=0;o<n.length;o++)t.append(n[o].fileRecord),t.append(n[o].compressedObject.compressedContent);for(o=0;o<n.length;o++)t.append(n[o].dirRecord);t.append(f);var y=t.finalize();switch(e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return E.transformTo(e.type.toLowerCase(),y);case"blob":return E.arrayBuffer2Blob(E.transformTo("arraybuffer",y),e.mimeType);case"base64":return e.base64?v.encode(y):y;default:return y}},crc32:function(e,t){return A(e,t)},utf8encode:function(e){return E.transformTo("string",I.utf8encode(e))},utf8decode:function(e){return I.utf8decode(e)}};t.exports=f},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(e,t,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\b"},{}],15:[function(e,t){function o(e,t){this.data=e,t||(this.data=i.string2binary(this.data)),this.length=this.data.length,this.index=0}var n=e("./dataReader"),i=e("./utils");(o.prototype=new n).byteAt=function(e){return this.data.charCodeAt(e)},o.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)},o.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.index,this.index+e);return this.index+=e,t},t.exports=o},{"./dataReader":5,"./utils":21}],16:[function(e,t){var o=e("./utils"),n=function(){this.data=[]};n.prototype={append:function(e){e=o.transformTo("string",e),this.data.push(e)},finalize:function(){return this.data.join("")}},t.exports=n},{"./utils":21}],17:[function(e,t,n){(function(e){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer=void 0!==e,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var t=new ArrayBuffer(0);try{n.blob=0===new Blob([t],{type:"application/zip"}).size}catch(e){try{var o=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);o.append(t),n.blob=0===o.getBlob("application/zip").size}catch(e){n.blob=!1}}}}).call(this,void 0!==i?i:void 0)},{}],18:[function(e,t){function o(e){e&&(this.data=e,this.length=this.data.length,this.index=0)}var n=e("./dataReader");(o.prototype=new n).byteAt=function(e){return this.data[e]},o.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),o=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),r=this.length-4;0<=r;--r)if(this.data[r]===t&&this.data[r+1]===o&&this.data[r+2]===n&&this.data[r+3]===i)return r;return-1},o.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.index,this.index+e);return this.index+=e,t},t.exports=o},{"./dataReader":5}],19:[function(e,t){var o=e("./utils"),n=function(e){this.data=new Uint8Array(e),this.index=0};n.prototype={append:function(e){0!==e.length&&(e=o.transformTo("uint8array",e),this.data.set(e,this.index),this.index+=e.length)},finalize:function(){return this.data}},t.exports=n},{"./utils":21}],20:[function(e,t,o){for(var s=e("./utils"),c=e("./support"),n=e("./nodeBuffer"),l=new Array(256),i=0;i<256;i++)l[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;l[254]=l[254]=1;var r=function(e,t){var o;for((t=t||e.length)>e.length&&(t=e.length),o=t-1;0<=o&&128==(192&e[o]);)o--;return o<0?t:0===o?t:o+l[e[o]]>t?o:t},a=function(e){var t,o,n,i,r=e.length,a=new Array(2*r);for(t=o=0;t<r;)if((n=e[t++])<128)a[o++]=n;else if(4<(i=l[n]))a[o++]=65533,t+=i-1;else{for(n&=2===i?31:3===i?15:7;1<i&&t<r;)n=n<<6|63&e[t++],i--;1<i?a[o++]=65533:n<65536?a[o++]=n:(n-=65536,a[o++]=55296|n>>10&1023,a[o++]=56320|1023&n)}return a.length!==o&&(a.subarray?a=a.subarray(0,o):a.length=o),s.applyFromCharCode(a)};o.utf8encode=function(e){return c.nodebuffer?n(e,"utf-8"):function(e){var t,o,n,i,r,a=e.length,s=0;for(i=0;i<a;i++)55296==(64512&(o=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=e.charCodeAt(i+1)))&&(o=65536+(o-55296<<10)+(n-56320),i++),s+=o<128?1:o<2048?2:o<65536?3:4;for(t=c.uint8array?new Uint8Array(s):new Array(s),i=r=0;r<s;i++)55296==(64512&(o=e.charCodeAt(i)))&&i+1<a&&56320==(64512&(n=e.charCodeAt(i+1)))&&(o=65536+(o-55296<<10)+(n-56320),i++),o<128?t[r++]=o:(o<2048?t[r++]=192|o>>>6:(o<65536?t[r++]=224|o>>>12:(t[r++]=240|o>>>18,t[r++]=128|o>>>12&63),t[r++]=128|o>>>6&63),t[r++]=128|63&o);return t}(e)},o.utf8decode=function(e){if(c.nodebuffer)return s.transformTo("nodebuffer",e).toString("utf-8");for(var t=[],o=0,n=(e=s.transformTo(c.uint8array?"uint8array":"array",e)).length;o<n;){var i=r(e,Math.min(o+65536,n));t.push(c.uint8array?a(e.subarray(o,i)):a(e.slice(o,i))),o=i}return t.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(e,t,l){function o(e){return e}function n(e,t){for(var o=0;o<e.length;++o)t[o]=255&e.charCodeAt(o);return t}function i(e){var t=65536,o=[],n=e.length,i=l.getTypeOf(e),r=0,a=!0;try{switch(i){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,d(0))}}catch(e){a=!1}if(!a){for(var s="",c=0;c<e.length;c++)s+=String.fromCharCode(e[c]);return s}for(;r<n&&1<t;)try{o.push("array"===i||"nodebuffer"===i?String.fromCharCode.apply(null,e.slice(r,Math.min(r+t,n))):String.fromCharCode.apply(null,e.subarray(r,Math.min(r+t,n)))),r+=t}catch(e){t=Math.floor(t/2)}return o.join("")}function r(e,t){for(var o=0;o<e.length;o++)t[o]=e[o];return t}var a=e("./support"),s=e("./compressions"),d=e("./nodeBuffer");l.string2binary=function(e){for(var t="",o=0;o<e.length;o++)t+=String.fromCharCode(255&e.charCodeAt(o));return t},l.arrayBuffer2Blob=function(t,o){l.checkSupport("blob"),o=o||"application/zip";try{return new Blob([t],{type:o})}catch(e){try{var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return n.append(t),n.getBlob(o)}catch(e){throw new Error("Bug : can't construct the Blob.")}}},l.applyFromCharCode=i;var c={};c.string={string:o,array:function(e){return n(e,new Array(e.length))},arraybuffer:function(e){return c.string.uint8array(e).buffer},uint8array:function(e){return n(e,new Uint8Array(e.length))},nodebuffer:function(e){return n(e,d(e.length))}},c.array={string:i,array:o,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return d(e)}},c.arraybuffer={string:function(e){return i(new Uint8Array(e))},array:function(e){return r(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:o,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return d(new Uint8Array(e))}},c.uint8array={string:i,array:function(e){return r(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:o,nodebuffer:function(e){return d(e)}},c.nodebuffer={string:i,array:function(e){return r(e,new Array(e.length))},arraybuffer:function(e){return c.nodebuffer.uint8array(e).buffer},uint8array:function(e){return r(e,new Uint8Array(e.length))},nodebuffer:o},l.transformTo=function(e,t){if(t||(t=""),!e)return t;l.checkSupport(e);var o=l.getTypeOf(t);return c[o][e](t)},l.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":a.nodebuffer&&d.test(e)?"nodebuffer":a.uint8array&&e instanceof Uint8Array?"uint8array":a.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},l.checkSupport=function(e){if(!a[e.toLowerCase()])throw new Error(e+" is not supported by this browser")},l.MAX_VALUE_16BITS=65535,l.MAX_VALUE_32BITS=-1,l.pretty=function(e){var t,o,n="";for(o=0;o<(e||"").length;o++)n+="\\x"+((t=e.charCodeAt(o))<16?"0":"")+t.toString(16).toUpperCase();return n},l.findCompression=function(e){for(var t in s)if(s.hasOwnProperty(t)&&s[t].magic===e)return s[t];return null},l.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(e,t){function o(e,t){this.files=[],this.loadOptions=t,e&&this.load(e)}var n=e("./stringReader"),i=e("./nodeBufferReader"),r=e("./uint8ArrayReader"),a=e("./utils"),s=e("./signature"),c=e("./zipEntry"),l=e("./support"),d=e("./object");o.prototype={checkSignature:function(e){var t=this.reader.readString(4);if(t!==e)throw new Error("Corrupted zip or bug : unexpected signature ("+a.pretty(t)+", expected "+a.pretty(e)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=d.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,o,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),o=this.reader.readString(t),this.zip64ExtensibleData[e]={id:e,length:t,value:o}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===s.CENTRAL_FILE_HEADER;)(e=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(-1===e){var t=!0;try{this.reader.setIndex(0),this.checkSignature(s.LOCAL_FILE_HEADER),t=!1}catch(e){}throw new Error(t?"Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip.json/documentation/howto/read_zip.html":"Corrupted zip : can't find end of central directory")}if(this.reader.setIndex(e),this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,-1===(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR)))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(e){var t=a.getTypeOf(e);this.reader="string"!==t||l.uint8array?"nodebuffer"===t?new i(e):new r(a.transformTo("uint8array",e)):new n(e,this.loadOptions.optimizedBinaryString)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=o},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(e,t){function o(e,t){this.options=e,this.loadOptions=t}var n=e("./stringReader"),r=e("./utils"),i=e("./compressedObject"),a=e("./object");o.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(o,n,i){return function(){var e=o.index;o.setIndex(n);var t=o.readData(i);return o.setIndex(e),t}},prepareContent:function(e,t,o,n,i){return function(){var e=r.transformTo(n.uncompressInputType,this.getCompressedContent()),t=n.uncompress(e);if(t.length!==i)throw new Error("Bug : uncompressed data size mismatch");return t}},readLocalPart:function(e){var t,o;if(e.skip(22),this.fileNameLength=e.readInt(2),o=e.readInt(2),this.fileName=e.readString(this.fileNameLength),e.skip(o),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(null===(t=r.findCompression(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new i,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(e,e.index,this.compressedSize,t),this.decompressed.getContent=this.prepareContent(e,e.index,this.compressedSize,t,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=r.transformTo("string",this.decompressed.getContent()),a.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(e){if(this.versionMadeBy=e.readInt(2),this.versionNeeded=e.readInt(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4),this.fileNameLength=e.readInt(2),this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=e.readString(this.fileNameLength),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readString(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===e&&(this.dosPermissions=63&this.externalFileAttributes),3===e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileName.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=new n(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,o,n,i=e.index;for(this.extraFields=this.extraFields||{};e.index<i+this.extraFieldsLength;)t=e.readInt(2),o=e.readInt(2),n=e.readString(o),this.extraFields[t]={id:t,length:o,value:n}},handleUTF8:function(){if(this.useUTF8())this.fileName=a.utf8decode(this.fileName),this.fileComment=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();null!==e&&(this.fileName=e);var t=this.findExtraFieldUnicodeComment();null!==t&&(this.fileComment=t)}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=new n(e.value);return 1!==t.readInt(1)?null:a.crc32(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readString(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=new n(e.value);return 1!==t.readInt(1)?null:a.crc32(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readString(e.length-5))}return null}},t.exports=o},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(e,t){var o={};(0,e("./lib/utils/common").assign)(o,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=o},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(e,t,o){function n(e,t){var o=new l(t);if(o.push(e,!0),o.err)throw o.msg;return o.result}var a=e("./zlib/deflate.js"),s=e("./utils/common"),c=e("./utils/strings"),i=e("./zlib/messages"),r=e("./zlib/zstream"),l=function(e){this.options=s.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var o=a.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==o)throw new Error(i[o]);t.header&&a.deflateSetHeader(this.strm,t.header)};l.prototype.push=function(e,t){var o,n,i=this.strm,r=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:!0===t?4:0,i.input="string"==typeof e?c.string2buf(e):e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new s.Buf8(r),i.next_out=0,i.avail_out=r),1!==(o=a.deflate(i,n))&&0!==o)return this.onEnd(o),!(this.ended=!0);(0===i.avail_out||0===i.avail_in&&4===n)&&this.onData("string"===this.options.to?c.buf2binstring(s.shrinkBuf(i.output,i.next_out)):s.shrinkBuf(i.output,i.next_out))}while((0<i.avail_in||0===i.avail_out)&&1!==o);return 4!==n||(o=a.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,0===o)},l.prototype.onData=function(e){this.chunks.push(e)},l.prototype.onEnd=function(e){0===e&&(this.result="string"===this.options.to?this.chunks.join(""):s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},o.Deflate=l,o.deflate=n,o.deflateRaw=function(e,t){return(t=t||{}).raw=!0,n(e,t)},o.gzip=function(e,t){return(t=t||{}).gzip=!0,n(e,t)}},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(e,t,o){function n(e,t){var o=new s(t);if(o.push(e,!0),o.err)throw o.msg;return o.result}var l=e("./zlib/inflate.js"),d=e("./utils/common"),u=e("./utils/strings"),h=e("./zlib/constants"),i=e("./zlib/messages"),r=e("./zlib/zstream"),a=e("./zlib/gzheader"),s=function(e){this.options=d.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r,this.strm.avail_out=0;var o=l.inflateInit2(this.strm,t.windowBits);if(o!==h.Z_OK)throw new Error(i[o]);this.header=new a,l.inflateGetHeader(this.strm,this.header)};s.prototype.push=function(e,t){var o,n,i,r,a,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:!0===t?h.Z_FINISH:h.Z_NO_FLUSH,s.input="string"==typeof e?u.binstring2buf(e):e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new d.Buf8(c),s.next_out=0,s.avail_out=c),(o=l.inflate(s,h.Z_NO_FLUSH))!==h.Z_STREAM_END&&o!==h.Z_OK)return this.onEnd(o),!(this.ended=!0);s.next_out&&(0===s.avail_out||o===h.Z_STREAM_END||0===s.avail_in&&n===h.Z_FINISH)&&("string"===this.options.to?(i=u.utf8border(s.output,s.next_out),r=s.next_out-i,a=u.buf2string(s.output,i),s.next_out=r,s.avail_out=c-r,r&&d.arraySet(s.output,s.output,i,r,0),this.onData(a)):this.onData(d.shrinkBuf(s.output,s.next_out)))}while(0<s.avail_in&&o!==h.Z_STREAM_END);return o===h.Z_STREAM_END&&(n=h.Z_FINISH),n!==h.Z_FINISH||(o=l.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===h.Z_OK)},s.prototype.onData=function(e){this.chunks.push(e)},s.prototype.onEnd=function(e){e===h.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):d.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},o.Inflate=s,o.inflate=n,o.inflateRaw=function(e,t){return(t=t||{}).raw=!0,n(e,t)},o.ungzip=n},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(e,t,o){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;o.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var o=t.shift();if(o){if("object"!=(void 0===o?"undefined":a(o)))throw new TypeError(o+"must be non-object");for(var n in o)o.hasOwnProperty(n)&&(e[n]=o[n])}}return e},o.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,o,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(o,o+n),i);else for(var r=0;r<n;r++)e[i+r]=t[o+r]},flattenChunks:function(e){var t,o,n,i,r,a;for(t=n=0,o=e.length;t<o;t++)n+=e[t].length;for(a=new Uint8Array(n),t=i=0,o=e.length;t<o;t++)r=e[t],a.set(r,i),i+=r.length;return a}},r={arraySet:function(e,t,o,n,i){for(var r=0;r<n;r++)e[i+r]=t[o+r]},flattenChunks:function(e){return[].concat.apply([],e)}};o.setTyped=function(e){e?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,i)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,r))},o.setTyped(n)},{}],28:[function(e,t,o){function c(e,t){if(t<65537&&(e.subarray&&r||!e.subarray&&i))return String.fromCharCode.apply(null,l.shrinkBuf(e,t));for(var o="",n=0;n<t;n++)o+=String.fromCharCode(e[n]);return o}var l=e("./common"),i=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){r=!1}for(var d=new l.Buf8(256),n=0;n<256;n++)d[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;d[254]=d[254]=1,o.string2buf=function(e){var t,o,n,i,r,a=e.length,s=0;for(i=0;i<a;i++)55296==(64512&(o=e.charCodeAt(i)))&&i+1<a&&(56320==(64512&(n=e.charCodeAt(i+1)))&&(o=65536+(o-55296<<10)+(n-56320),i++)),s+=o<128?1:o<2048?2:o<65536?3:4;for(t=new l.Buf8(s),i=r=0;r<s;i++)55296==(64512&(o=e.charCodeAt(i)))&&i+1<a&&(56320==(64512&(n=e.charCodeAt(i+1)))&&(o=65536+(o-55296<<10)+(n-56320),i++)),o<128?t[r++]=o:(o<2048?t[r++]=192|o>>>6:(o<65536?t[r++]=224|o>>>12:(t[r++]=240|o>>>18,t[r++]=128|o>>>12&63),t[r++]=128|o>>>6&63),t[r++]=128|63&o);return t},o.buf2binstring=function(e){return c(e,e.length)},o.binstring2buf=function(e){for(var t=new l.Buf8(e.length),o=0,n=t.length;o<n;o++)t[o]=e.charCodeAt(o);return t},o.buf2string=function(e,t){var o,n,i,r,a=t||e.length,s=new Array(2*a);for(o=n=0;o<a;)if((i=e[o++])<128)s[n++]=i;else if(4<(r=d[i]))s[n++]=65533,o+=r-1;else{for(i&=2===r?31:3===r?15:7;1<r&&o<a;)i=i<<6|63&e[o++],r--;1<r?s[n++]=65533:i<65536?s[n++]=i:(i-=65536,s[n++]=55296|i>>10&1023,s[n++]=56320|1023&i)}return c(s,n)},o.utf8border=function(e,t){var o;for((t=t||e.length)>e.length&&(t=e.length),o=t-1;0<=o&&128==(192&e[o]);)o--;return o<0?t:0===o?t:o+d[e[o]]>t?o:t}},{"./common":27}],29:[function(e,t){t.exports=function(e,t,o,n){for(var i=65535&e|0,r=e>>>16&65535|0,a=0;0!==o;){for(o-=a=2e3<o?2e3:o;r=r+(i=i+t[n++]|0)|0,--a;);i%=65521,r%=65521}return i|r<<16|0}},{}],30:[function(e,t){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(e,t){var s=function(){for(var e,t=[],o=0;o<256;o++){e=o;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[o]=e}return t}();t.exports=function(e,t,o,n){var i=s,r=n+o;e^=-1;for(var a=n;a<r;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}},{}],32:[function(e,t,o){function c(e,t){return e.msg=P[t],t}function l(e){return(e<<1)-(4<e?9:0)}function d(e){for(var t=e.length;0<=--t;)e[t]=0}function u(e){var t=e.state,o=t.pending;o>e.avail_out&&(o=e.avail_out),0!==o&&(g.arraySet(e.output,t.pending_buf,t.pending_out,o,e.next_out),e.next_out+=o,t.pending_out+=o,e.total_out+=o,e.avail_out-=o,t.pending-=o,0===t.pending&&(t.pending_out=0))}function h(e,t){b._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,u(e.strm)}function p(e,t){e.pending_buf[e.pending++]=t}function f(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function r(e,t){var o,n,i=e.max_chain_length,r=e.strstart,a=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-x?e.strstart-(e.w_size-x):0,l=e.window,d=e.w_mask,u=e.prev,h=e.strstart+F,p=l[r+a-1],f=l[r+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(l[(o=t)+a]===f&&l[o+a-1]===p&&l[o]===l[r]&&l[++o]===l[r+1]){r+=2,o++;do{}while(l[++r]===l[++o]&&l[++r]===l[++o]&&l[++r]===l[++o]&&l[++r]===l[++o]&&l[++r]===l[++o]&&l[++r]===l[++o]&&l[++r]===l[++o]&&l[++r]===l[++o]&&r<h);if(n=F-(h-r),r=h-F,a<n){if(e.match_start=t,s<=(a=n))break;p=l[r+a-1],f=l[r+a]}}}while((t=u[t&d])>c&&0!=--i);return a<=e.lookahead?a:e.lookahead}function m(e){var t,o,n,i,r,a,s,c,l,d,u=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=u+(u-x)){for(g.arraySet(e.window,e.window,u,u,0),e.match_start-=u,e.strstart-=u,e.block_start-=u,t=o=e.hash_size;n=e.head[--t],e.head[t]=u<=n?n-u:0,--o;);for(t=o=u;n=e.prev[--t],e.prev[t]=u<=n?n-u:0,--o;);i+=u}if(0===e.strm.avail_in)break;if(a=e.strm,s=e.window,c=e.strstart+e.lookahead,l=i,d=void 0,d=a.avail_in,l<d&&(d=l),o=0===d?0:(a.avail_in-=d,g.arraySet(s,a.input,a.next_in,d,c),1===a.state.wrap?a.adler=S(a.adler,s,d,c):2===a.state.wrap&&(a.adler=T(a.adler,s,d,c)),a.next_in+=d,a.total_in+=d,d),e.lookahead+=o,e.lookahead+e.insert>=G)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+G-1])&e.hash_mask,e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<G)););}while(e.lookahead<x&&0!==e.strm.avail_in)}function n(e,t){for(var o,n;;){if(e.lookahead<x){if(m(e),e.lookahead<x&&t===C)return Y;if(0===e.lookahead)break}if(o=0,e.lookahead>=G&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+G-1])&e.hash_mask,o=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==o&&e.strstart-o<=e.w_size-x&&(e.match_length=r(e,o)),e.match_length>=G)if(n=b._tr_tally(e,e.strstart-e.match_start,e.match_length-G),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=G){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+G-1])&e.hash_mask,o=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=b._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(h(e,!1),0===e.strm.avail_out))return Y}return e.insert=e.strstart<G-1?e.strstart:G-1,t===E?(h(e,!0),0===e.strm.avail_out?z:V):e.last_lit&&(h(e,!1),0===e.strm.avail_out)?Y:W}function i(e,t){for(var o,n,i;;){if(e.lookahead<x){if(m(e),e.lookahead<x&&t===C)return Y;if(0===e.lookahead)break}if(o=0,e.lookahead>=G&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+G-1])&e.hash_mask,o=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=G-1,0!==o&&e.prev_length<e.max_lazy_match&&e.strstart-o<=e.w_size-x&&(e.match_length=r(e,o),e.match_length<=5&&(1===e.strategy||e.match_length===G&&4096<e.strstart-e.match_start)&&(e.match_length=G-1)),e.prev_length>=G&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-G,n=b._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-G),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+G-1])&e.hash_mask,o=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=G-1,e.strstart++,n&&(h(e,!1),0===e.strm.avail_out))return Y}else if(e.match_available){if((n=b._tr_tally(e,0,e.window[e.strstart-1]))&&h(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return Y}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=b._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<G-1?e.strstart:G-1,t===E?(h(e,!0),0===e.strm.avail_out?z:V):e.last_lit&&(h(e,!1),0===e.strm.avail_out)?Y:W}function y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=O,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new g.Buf16(2*k),this.dyn_dtree=new g.Buf16(2*(2*D+1)),this.bl_tree=new g.Buf16(2*(2*L+1)),d(this.dyn_ltree),d(this.dyn_dtree),d(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new g.Buf16(U+1),this.heap=new g.Buf16(2*M+1),d(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new g.Buf16(2*M+1),d(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function a(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=B,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?H:j,e.adler=2===t.wrap?0:1,t.last_flush=C,b._tr_init(t),A):c(e,N)}function v(e){var t,o=a(e);return o===A&&((t=e.state).window_size=2*t.w_size,d(t.head),t.max_lazy_match=_[t.level].max_lazy,t.good_match=_[t.level].good_length,t.nice_match=_[t.level].nice_length,t.max_chain_length=_[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=G-1,t.match_available=0,t.ins_h=0),o}function s(e,t,o,n,i,r){if(!e)return N;var a=1;if(t===I&&(t=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),i<1||R<i||o!==O||n<8||15<n||t<0||9<t||r<0||w<r)return c(e,N);8===n&&(n=9);var s=new y;return(e.state=s).strm=e,s.wrap=a,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+G-1)/G),s.window=new g.Buf8(2*s.w_size),s.head=new g.Buf16(s.hash_size),s.prev=new g.Buf16(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new g.Buf8(s.pending_buf_size),s.d_buf=s.lit_bufsize>>1,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=r,s.method=o,v(e)}var _,g=e("../utils/common"),b=e("./trees"),S=e("./adler32"),T=e("./crc32"),P=e("./messages"),C=0,E=4,A=0,N=-2,I=-1,w=4,B=2,O=8,R=9,M=286,D=30,L=19,k=2*M+1,U=15,G=3,F=258,x=F+G+1,H=42,j=113,Y=1,W=2,z=3,V=4,Z=function(e,t,o,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=o,this.max_chain=n,this.func=i};_=[new Z(0,0,0,0,function(e,t){var o=65535;for(o>e.pending_buf_size-5&&(o=e.pending_buf_size-5);;){if(e.lookahead<=1){if(m(e),0===e.lookahead&&t===C)return Y;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+o;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,h(e,!1),0===e.strm.avail_out))return Y;if(e.strstart-e.block_start>=e.w_size-x&&(h(e,!1),0===e.strm.avail_out))return Y}return e.insert=0,t===E?(h(e,!0),0===e.strm.avail_out?z:V):(e.strstart>e.block_start&&(h(e,!1),e.strm.avail_out),Y)}),new Z(4,4,8,4,n),new Z(4,5,16,8,n),new Z(4,6,32,32,n),new Z(4,4,16,16,i),new Z(8,16,32,32,i),new Z(8,16,128,128,i),new Z(8,32,128,256,i),new Z(32,128,258,1024,i),new Z(32,258,258,4096,i)],o.deflateInit=function(e,t){return s(e,t,O,15,8,0)},o.deflateInit2=s,o.deflateReset=v,o.deflateResetKeep=a,o.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?N:(e.state.gzhead=t,A):N},o.deflate=function(e,t){var o,n,i,r;if(!e||!e.state||5<t||t<0)return e?c(e,N):N;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||666===n.status&&t!==E)return c(e,0===e.avail_out?-5:N);if(n.strm=e,o=n.last_flush,n.last_flush=t,n.status===H)if(2===n.wrap)e.adler=0,p(n,31),p(n,139),p(n,8),n.gzhead?(p(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),p(n,255&n.gzhead.time),p(n,n.gzhead.time>>8&255),p(n,n.gzhead.time>>16&255),p(n,n.gzhead.time>>24&255),p(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),p(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(p(n,255&n.gzhead.extra.length),p(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=T(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(p(n,0),p(n,0),p(n,0),p(n,0),p(n,0),p(n,9===n.level?2:2<=n.strategy||n.level<2?4:0),p(n,3),n.status=j);else{var a=O+(n.w_bits-8<<4)<<8;a|=(2<=n.strategy||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(a|=32),a+=31-a%31,n.status=j,f(n,a),0!==n.strstart&&(f(n,e.adler>>>16),f(n,65535&e.adler)),e.adler=1}if(69===n.status)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>i&&(e.adler=T(e.adler,n.pending_buf,n.pending-i,i)),u(e),i=n.pending,n.pending!==n.pending_buf_size));)p(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=T(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=T(e.adler,n.pending_buf,n.pending-i,i)),u(e),i=n.pending,n.pending===n.pending_buf_size)){r=1;break}p(n,r=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0)}while(0!==r);n.gzhead.hcrc&&n.pending>i&&(e.adler=T(e.adler,n.pending_buf,n.pending-i,i)),0===r&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=T(e.adler,n.pending_buf,n.pending-i,i)),u(e),i=n.pending,n.pending===n.pending_buf_size)){r=1;break}p(n,r=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0)}while(0!==r);n.gzhead.hcrc&&n.pending>i&&(e.adler=T(e.adler,n.pending_buf,n.pending-i,i)),0===r&&(n.status=103)}else n.status=103;if(103===n.status&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&u(e),n.pending+2<=n.pending_buf_size&&(p(n,255&e.adler),p(n,e.adler>>8&255),e.adler=0,n.status=j)):n.status=j),0!==n.pending){if(u(e),0===e.avail_out)return n.last_flush=-1,A}else if(0===e.avail_in&&l(t)<=l(o)&&t!==E)return c(e,-5);if(666===n.status&&0!==e.avail_in)return c(e,-5);if(0!==e.avail_in||0!==n.lookahead||t!==C&&666!==n.status){var s=2===n.strategy?function(e,t){for(var o;;){if(0===e.lookahead&&(m(e),0===e.lookahead)){if(t===C)return Y;break}if(e.match_length=0,o=b._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,o&&(h(e,!1),0===e.strm.avail_out))return Y}return e.insert=0,t===E?(h(e,!0),0===e.strm.avail_out?z:V):e.last_lit&&(h(e,!1),0===e.strm.avail_out)?Y:W}(n,t):3===n.strategy?function(e,t){for(var o,n,i,r,a=e.window;;){if(e.lookahead<=F){if(m(e),e.lookahead<=F&&t===C)return Y;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=G&&0<e.strstart&&(n=a[i=e.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i]){r=e.strstart+F;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<r);e.match_length=F-(r-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=G?(o=b._tr_tally(e,1,e.match_length-G),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(o=b._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),o&&(h(e,!1),0===e.strm.avail_out))return Y}return e.insert=0,t===E?(h(e,!0),0===e.strm.avail_out?z:V):e.last_lit&&(h(e,!1),0===e.strm.avail_out)?Y:W}(n,t):_[n.level].func(n,t);if((s===z||s===V)&&(n.status=666),s===Y||s===z)return 0===e.avail_out&&(n.last_flush=-1),A;if(s===W&&(1===t?b._tr_align(n):5!==t&&(b._tr_stored_block(n,0,0,!1),3===t&&(d(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),u(e),0===e.avail_out))return n.last_flush=-1,A}return t!==E?A:n.wrap<=0?1:(2===n.wrap?(p(n,255&e.adler),p(n,e.adler>>8&255),p(n,e.adler>>16&255),p(n,e.adler>>24&255),p(n,255&e.total_in),p(n,e.total_in>>8&255),p(n,e.total_in>>16&255),p(n,e.total_in>>24&255)):(f(n,e.adler>>>16),f(n,65535&e.adler)),u(e),0<n.wrap&&(n.wrap=-n.wrap),0!==n.pending?A:1)},o.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==H&&69!==t&&73!==t&&91!==t&&103!==t&&t!==j&&666!==t?c(e,N):(e.state=null,t===j?c(e,-3):A):N},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(e,t){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],34:[function(e,t){t.exports=function(e,t){var o,n,i,r,a,s,c,l,d,u,h,p,f,m,y,v,_,g,b,S,T,P,C,E,A;o=e.state,n=e.next_in,E=e.input,i=n+(e.avail_in-5),r=e.next_out,A=e.output,a=r-(t-e.avail_out),s=r+(e.avail_out-257),c=o.dmax,l=o.wsize,d=o.whave,u=o.wnext,h=o.window,p=o.hold,f=o.bits,m=o.lencode,y=o.distcode,v=(1<<o.lenbits)-1,_=(1<<o.distbits)-1;e:do{f<15&&(p+=E[n++]<<f,f+=8,p+=E[n++]<<f,f+=8),g=m[p&v];t:for(;;){if(p>>>=b=g>>>24,f-=b,0===(b=g>>>16&255))A[r++]=65535&g;else{if(!(16&b)){if(0==(64&b)){g=m[(65535&g)+(p&(1<<b)-1)];continue t}if(32&b){o.mode=12;break e}e.msg="invalid literal/length code",o.mode=30;break e}S=65535&g,(b&=15)&&(f<b&&(p+=E[n++]<<f,f+=8),S+=p&(1<<b)-1,p>>>=b,f-=b),f<15&&(p+=E[n++]<<f,f+=8,p+=E[n++]<<f,f+=8),g=y[p&_];o:for(;;){if(p>>>=b=g>>>24,f-=b,!(16&(b=g>>>16&255))){if(0==(64&b)){g=y[(65535&g)+(p&(1<<b)-1)];continue o}e.msg="invalid distance code",o.mode=30;break e}if(T=65535&g,f<(b&=15)&&(p+=E[n++]<<f,(f+=8)<b&&(p+=E[n++]<<f,f+=8)),c<(T+=p&(1<<b)-1)){e.msg="invalid distance too far back",o.mode=30;break e}if(p>>>=b,f-=b,(b=r-a)<T){if(d<(b=T-b)&&o.sane){e.msg="invalid distance too far back",o.mode=30;break e}if(C=h,(P=0)===u){if(P+=l-b,b<S){for(S-=b;A[r++]=h[P++],--b;);P=r-T,C=A}}else if(u<b){if(P+=l+u-b,(b-=u)<S){for(S-=b;A[r++]=h[P++],--b;);if(P=0,u<S){for(S-=b=u;A[r++]=h[P++],--b;);P=r-T,C=A}}}else if(P+=u-b,b<S){for(S-=b;A[r++]=h[P++],--b;);P=r-T,C=A}for(;2<S;)A[r++]=C[P++],A[r++]=C[P++],A[r++]=C[P++],S-=3;S&&(A[r++]=C[P++],1<S&&(A[r++]=C[P++]))}else{for(P=r-T;A[r++]=A[P++],A[r++]=A[P++],A[r++]=A[P++],2<(S-=3););S&&(A[r++]=A[P++],1<S&&(A[r++]=A[P++]))}break}}break}}while(n<i&&r<s);n-=S=f>>3,p&=(1<<(f-=S<<3))-1,e.next_in=n,e.next_out=r,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=r<s?s-r+257:257-(r-s),o.hold=p,o.bits=f}},{}],35:[function(e,t,o){function L(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new U.Buf16(320),this.work=new U.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function n(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=V,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new U.Buf32(d),t.distcode=t.distdyn=new U.Buf32(u),t.sane=1,t.back=-1,W):z}function r(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,n(e)):z}function a(e,t){var o,n;return e&&e.state?(n=e.state,t<0?(o=0,t=-t):(o=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?z:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=o,n.wbits=t,r(e))):z}function s(e,t){var o,n;return e?(n=new i,(e.state=n).window=null,(o=a(e,t))!==W&&(e.state=null),o):z}function k(e){if(h){var t;for(c=new U.Buf32(512),l=new U.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(H(j,e.lens,0,288,c,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;H(Y,e.lens,0,32,l,0,e.work,{bits:5}),h=!1}e.lencode=c,e.lenbits=9,e.distcode=l,e.distbits=5}var c,l,U=e("../utils/common"),G=e("./adler32"),F=e("./crc32"),x=e("./inffast"),H=e("./inftrees"),j=1,Y=2,W=0,z=-2,V=1,d=852,u=592,h=!0;o.inflateReset=r,o.inflateReset2=a,o.inflateResetKeep=n,o.inflateInit=function(e){return s(e,15)},o.inflateInit2=s,o.inflate=function(e,t){var o,n,i,r,a,s,c,l,d,u,h,p,f,m,y,v,_,g,b,S,T,P,C,E,A,N,I,w,B,O,R=0,M=new U.Buf8(4),D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return z;12===(o=e.state).mode&&(o.mode=13),a=e.next_out,i=e.output,c=e.avail_out,r=e.next_in,n=e.input,s=e.avail_in,l=o.hold,d=o.bits,u=s,h=c,P=W;e:for(;;)switch(o.mode){case V:if(0===o.wrap){o.mode=13;break}for(;d<16;){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}if(2&o.wrap&&35615===l){M[o.check=0]=255&l,M[1]=l>>>8&255,o.check=F(o.check,M,2,0),d=l=0,o.mode=2;break}if(o.flags=0,o.head&&(o.head.done=!1),!(1&o.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",o.mode=30;break}if(8!=(15&l)){e.msg="unknown compression method",o.mode=30;break}if(d-=4,T=8+(15&(l>>>=4)),0===o.wbits)o.wbits=T;else if(T>o.wbits){e.msg="invalid window size",o.mode=30;break}o.dmax=1<<T,e.adler=o.check=1,o.mode=512&l?10:12,d=l=0;break;case 2:for(;d<16;){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}if(o.flags=l,8!=(255&o.flags)){e.msg="unknown compression method",o.mode=30;break}if(57344&o.flags){e.msg="unknown header flags set",o.mode=30;break}o.head&&(o.head.text=l>>8&1),512&o.flags&&(M[0]=255&l,M[1]=l>>>8&255,o.check=F(o.check,M,2,0)),d=l=0,o.mode=3;case 3:for(;d<32;){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}o.head&&(o.head.time=l),512&o.flags&&(M[0]=255&l,M[1]=l>>>8&255,M[2]=l>>>16&255,M[3]=l>>>24&255,o.check=F(o.check,M,4,0)),d=l=0,o.mode=4;case 4:for(;d<16;){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}o.head&&(o.head.xflags=255&l,o.head.os=l>>8),512&o.flags&&(M[0]=255&l,M[1]=l>>>8&255,o.check=F(o.check,M,2,0)),d=l=0,o.mode=5;case 5:if(1024&o.flags){for(;d<16;){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}o.length=l,o.head&&(o.head.extra_len=l),512&o.flags&&(M[0]=255&l,M[1]=l>>>8&255,o.check=F(o.check,M,2,0)),d=l=0}else o.head&&(o.head.extra=null);o.mode=6;case 6:if(1024&o.flags&&(s<(p=o.length)&&(p=s),p&&(o.head&&(T=o.head.extra_len-o.length,o.head.extra||(o.head.extra=new Array(o.head.extra_len)),U.arraySet(o.head.extra,n,r,p,T)),512&o.flags&&(o.check=F(o.check,n,p,r)),s-=p,r+=p,o.length-=p),o.length))break e;o.length=0,o.mode=7;case 7:if(2048&o.flags){if(0===s)break e;for(p=0;T=n[r+p++],o.head&&T&&o.length<65536&&(o.head.name+=String.fromCharCode(T)),T&&p<s;);if(512&o.flags&&(o.check=F(o.check,n,p,r)),s-=p,r+=p,T)break e}else o.head&&(o.head.name=null);o.length=0,o.mode=8;case 8:if(4096&o.flags){if(0===s)break e;for(p=0;T=n[r+p++],o.head&&T&&o.length<65536&&(o.head.comment+=String.fromCharCode(T)),T&&p<s;);if(512&o.flags&&(o.check=F(o.check,n,p,r)),s-=p,r+=p,T)break e}else o.head&&(o.head.comment=null);o.mode=9;case 9:if(512&o.flags){for(;d<16;){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}if(l!==(65535&o.check)){e.msg="header crc mismatch",o.mode=30;break}d=l=0}o.head&&(o.head.hcrc=o.flags>>9&1,o.head.done=!0),e.adler=o.check=0,o.mode=12;break;case 10:for(;d<32;){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}e.adler=o.check=L(l),d=l=0,o.mode=11;case 11:if(0===o.havedict)return e.next_out=a,e.avail_out=c,e.next_in=r,e.avail_in=s,o.hold=l,o.bits=d,2;e.adler=o.check=1,o.mode=12;case 12:if(5===t||6===t)break e;case 13:if(o.last){l>>>=7&d,d-=7&d,o.mode=27;break}for(;d<3;){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}switch(o.last=1&l,d-=1,3&(l>>>=1)){case 0:o.mode=14;break;case 1:if(k(o),o.mode=20,6===t){l>>>=2,d-=2;break e}break;case 2:o.mode=17;break;case 3:e.msg="invalid block type",o.mode=30}l>>>=2,d-=2;break;case 14:for(l>>>=7&d,d-=7&d;d<32;){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",o.mode=30;break}if(o.length=65535&l,d=l=0,o.mode=15,6===t)break e;case 15:o.mode=16;case 16:if(p=o.length){if(s<p&&(p=s),c<p&&(p=c),0===p)break e;U.arraySet(i,n,r,p,a),s-=p,r+=p,c-=p,a+=p,o.length-=p;break}o.mode=12;break;case 17:for(;d<14;){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}if(o.nlen=257+(31&l),l>>>=5,d-=5,o.ndist=1+(31&l),l>>>=5,d-=5,o.ncode=4+(15&l),l>>>=4,d-=4,286<o.nlen||30<o.ndist){e.msg="too many length or distance symbols",o.mode=30;break}o.have=0,o.mode=18;case 18:for(;o.have<o.ncode;){for(;d<3;){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}o.lens[D[o.have++]]=7&l,l>>>=3,d-=3}for(;o.have<19;)o.lens[D[o.have++]]=0;if(o.lencode=o.lendyn,o.lenbits=7,C={bits:o.lenbits},P=H(0,o.lens,0,19,o.lencode,0,o.work,C),o.lenbits=C.bits,P){e.msg="invalid code lengths set",o.mode=30;break}o.have=0,o.mode=19;case 19:for(;o.have<o.nlen+o.ndist;){for(;v=(R=o.lencode[l&(1<<o.lenbits)-1])>>>16&255,_=65535&R,!((y=R>>>24)<=d);){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}if(_<16)l>>>=y,d-=y,o.lens[o.have++]=_;else{if(16===_){for(E=y+2;d<E;){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}if(l>>>=y,d-=y,0===o.have){e.msg="invalid bit length repeat",o.mode=30;break}T=o.lens[o.have-1],p=3+(3&l),l>>>=2,d-=2}else if(17===_){for(E=y+3;d<E;){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}d-=y,T=0,p=3+(7&(l>>>=y)),l>>>=3,d-=3}else{for(E=y+7;d<E;){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}d-=y,T=0,p=11+(127&(l>>>=y)),l>>>=7,d-=7}if(o.have+p>o.nlen+o.ndist){e.msg="invalid bit length repeat",o.mode=30;break}for(;p--;)o.lens[o.have++]=T}}if(30===o.mode)break;if(0===o.lens[256]){e.msg="invalid code -- missing end-of-block",o.mode=30;break}if(o.lenbits=9,C={bits:o.lenbits},P=H(j,o.lens,0,o.nlen,o.lencode,0,o.work,C),o.lenbits=C.bits,P){e.msg="invalid literal/lengths set",o.mode=30;break}if(o.distbits=6,o.distcode=o.distdyn,C={bits:o.distbits},P=H(Y,o.lens,o.nlen,o.ndist,o.distcode,0,o.work,C),o.distbits=C.bits,P){e.msg="invalid distances set",o.mode=30;break}if(o.mode=20,6===t)break e;case 20:o.mode=21;case 21:if(6<=s&&258<=c){e.next_out=a,e.avail_out=c,e.next_in=r,e.avail_in=s,o.hold=l,o.bits=d,x(e,h),a=e.next_out,i=e.output,c=e.avail_out,r=e.next_in,n=e.input,s=e.avail_in,l=o.hold,d=o.bits,12===o.mode&&(o.back=-1);break}for(o.back=0;v=(R=o.lencode[l&(1<<o.lenbits)-1])>>>16&255,_=65535&R,!((y=R>>>24)<=d);){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}if(v&&0==(240&v)){for(g=y,b=v,S=_;v=(R=o.lencode[S+((l&(1<<g+b)-1)>>g)])>>>16&255,_=65535&R,!(g+(y=R>>>24)<=d);){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}l>>>=g,d-=g,o.back+=g}if(l>>>=y,d-=y,o.back+=y,o.length=_,0===v){o.mode=26;break}if(32&v){o.back=-1,o.mode=12;break}if(64&v){e.msg="invalid literal/length code",o.mode=30;break}o.extra=15&v,o.mode=22;case 22:if(o.extra){for(E=o.extra;d<E;){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}o.length+=l&(1<<o.extra)-1,l>>>=o.extra,d-=o.extra,o.back+=o.extra}o.was=o.length,o.mode=23;case 23:for(;v=(R=o.distcode[l&(1<<o.distbits)-1])>>>16&255,_=65535&R,!((y=R>>>24)<=d);){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}if(0==(240&v)){for(g=y,b=v,S=_;v=(R=o.distcode[S+((l&(1<<g+b)-1)>>g)])>>>16&255,_=65535&R,!(g+(y=R>>>24)<=d);){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}l>>>=g,d-=g,o.back+=g}if(l>>>=y,d-=y,o.back+=y,64&v){e.msg="invalid distance code",o.mode=30;break}o.offset=_,o.extra=15&v,o.mode=24;case 24:if(o.extra){for(E=o.extra;d<E;){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}o.offset+=l&(1<<o.extra)-1,l>>>=o.extra,d-=o.extra,o.back+=o.extra}if(o.offset>o.dmax){e.msg="invalid distance too far back",o.mode=30;break}o.mode=25;case 25:if(0===c)break e;if(p=h-c,o.offset>p){if((p=o.offset-p)>o.whave&&o.sane){e.msg="invalid distance too far back",o.mode=30;break}p>o.wnext?(p-=o.wnext,f=o.wsize-p):f=o.wnext-p,p>o.length&&(p=o.length),m=o.window}else m=i,f=a-o.offset,p=o.length;for(c<p&&(p=c),c-=p,o.length-=p;i[a++]=m[f++],--p;);0===o.length&&(o.mode=21);break;case 26:if(0===c)break e;i[a++]=o.length,c--,o.mode=21;break;case 27:if(o.wrap){for(;d<32;){if(0===s)break e;s--,l|=n[r++]<<d,d+=8}if(h-=c,e.total_out+=h,o.total+=h,h&&(e.adler=o.check=o.flags?F(o.check,i,h,a-h):G(o.check,i,h,a-h)),h=c,(o.flags?l:L(l))!==o.check){e.msg="incorrect data check",o.mode=30;break}d=l=0}o.mode=28;case 28:if(o.wrap&&o.flags){for(;d<32;){if(0===s)break e;s--,l+=n[r++]<<d,d+=8}if(l!==(4294967295&o.total)){e.msg="incorrect length check",o.mode=30;break}d=l=0}o.mode=29;case 29:P=1;break e;case 30:P=-3;break e;case 31:return-4;case 32:default:return z}return e.next_out=a,e.avail_out=c,e.next_in=r,e.avail_in=s,o.hold=l,o.bits=d,(o.wsize||h!==e.avail_out&&o.mode<30&&(o.mode<27||4!==t))&&(N=(A=e).output,I=e.next_out,w=h-e.avail_out,null===(O=A.state).window&&(O.wsize=1<<O.wbits,O.wnext=0,O.whave=0,O.window=new U.Buf8(O.wsize)),w>=O.wsize?(U.arraySet(O.window,N,I-O.wsize,O.wsize,0),O.wnext=0,O.whave=O.wsize):(w<(B=O.wsize-O.wnext)&&(B=w),U.arraySet(O.window,N,I-w,B,O.wnext),(w-=B)?(U.arraySet(O.window,N,I-w,w,0),O.wnext=w,O.whave=O.wsize):(O.wnext+=B,O.wnext===O.wsize&&(O.wnext=0),O.whave<O.wsize&&(O.whave+=B))),0)?(o.mode=31,-4):(u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,o.total+=h,o.wrap&&h&&(e.adler=o.check=o.flags?F(o.check,i,h,e.next_out-h):G(o.check,i,h,e.next_out-h)),e.data_type=o.bits+(o.last?64:0)+(12===o.mode?128:0)+(20===o.mode||15===o.mode?256:0),(0===u&&0===h||4===t)&&P===W&&(P=-5),P)},o.inflateEnd=function(e){if(!e||!e.state)return z;var t=e.state;return t.window&&(t.window=null),e.state=null,W},o.inflateGetHeader=function(e,t){var o;return e&&e.state?0==(2&(o=e.state).wrap)?z:((o.head=t).done=!1,W):z},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(e,t){var D=e("../utils/common"),L=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],k=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],U=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],G=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,o,n,i,r,a,s){var c,l,d,u,h,p,f,m,y,v=s.bits,_=0,g=0,b=0,S=0,T=0,P=0,C=0,E=0,A=0,N=0,I=null,w=0,B=new D.Buf16(16),O=new D.Buf16(16),R=null,M=0;for(_=0;_<=15;_++)B[_]=0;for(g=0;g<n;g++)B[t[o+g]]++;for(T=v,S=15;1<=S&&0===B[S];S--);if(S<T&&(T=S),0===S)return i[r++]=20971520,i[r++]=20971520,s.bits=1,0;for(b=1;b<S&&0===B[b];b++);for(T<b&&(T=b),_=E=1;_<=15;_++)if(E<<=1,(E-=B[_])<0)return-1;if(0<E&&(0===e||1!==S))return-1;for(O[1]=0,_=1;_<15;_++)O[_+1]=O[_]+B[_];for(g=0;g<n;g++)0!==t[o+g]&&(a[O[t[o+g]]++]=g);if(0===e?(I=R=a,p=19):1===e?(I=L,w-=257,R=k,M-=257,p=256):(I=U,R=G,p=-1),_=b,h=r,d=-1,u=(A=1<<(P=T))-1,1===e&&852<A||2===e&&592<A)return 1;for(C=g=N=0;;){for(0,f=_-C,a[g]<p?(m=0,y=a[g]):a[g]>p?(m=R[M+a[g]],y=I[w+a[g]]):(m=96,y=0),c=1<<_-C,b=l=1<<P;i[h+(N>>C)+(l-=c)]=f<<24|m<<16|y|0,0!==l;);for(c=1<<_-1;N&c;)c>>=1;if(0!==c?(N&=c-1,N+=c):N=0,g++,0==--B[_]){if(_===S)break;_=t[o+a[g]]}if(T<_&&(N&u)!==d){for(0===C&&(C=T),h+=b,E=1<<(P=_-C);P+C<S&&!((E-=B[P+C])<=0);)P++,E<<=1;if(A+=1<<P,1===e&&852<A||2===e&&592<A)return 1;i[d=N&u]=T<<24|P<<16|h-r|0}}return 0!==N&&(i[h+N]=_-C<<24|64<<16|0),s.bits=T,0}},{"../utils/common":27}],37:[function(e,t){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(e,t,o){function n(e){for(var t=e.length;0<=--t;)e[t]=0}function c(e){return e<256?j[e]:j[256+(e>>>7)]}function l(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function d(e,t,o){e.bi_valid>i-o?(e.bi_buf|=t<<e.bi_valid&65535,l(e,e.bi_buf),e.bi_buf=t>>i-e.bi_valid,e.bi_valid+=o-i):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=o)}function u(e,t,o){d(e,o[2*t],o[2*t+1])}function h(e,t){for(var o=0;o|=1&e,e>>>=1,o<<=1,0<--t;);return o>>>1}function p(e,t,o){var n,i,r=new Array(B+1),a=0;for(n=1;n<=B;n++)r[n]=a=a+o[n-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=h(r[s]++,s))}}function s(e){var t;for(t=0;t<A;t++)e.dyn_ltree[2*t]=0;for(t=0;t<N;t++)e.dyn_dtree[2*t]=0;for(t=0;t<I;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*R]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function f(e){8<e.bi_valid?l(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function r(e,t,o,n){var i=2*t,r=2*o;return e[i]<e[r]||e[i]===e[r]&&n[t]<=n[o]}function m(e,t,o){for(var n=e.heap[o],i=o<<1;i<=e.heap_len&&(i<e.heap_len&&r(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!r(t,n,e.heap[i],e.depth));)e.heap[o]=e.heap[i],o=i,i<<=1;e.heap[o]=n}function y(e,t,o){var n,i,r,a,s=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===n?u(e,i,t):(u(e,(r=Y[i])+E+1,t),0!==(a=k[r])&&d(e,i-=W[r],a),u(e,r=c(--n),o),0!==(a=U[r])&&d(e,n-=z[r],a)),s<e.last_lit;);u(e,R,t)}function v(e,t){var o,n,i,r=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=w,o=0;o<c;o++)0!==r[2*o]?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):r[2*o+1]=0;for(;e.heap_len<2;)r[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=l,o=e.heap_len>>1;1<=o;o--)m(e,r,o);for(i=c;o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],m(e,r,1),n=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=n,r[2*i]=r[2*o]+r[2*n],e.depth[i]=(e.depth[o]>=e.depth[n]?e.depth[o]:e.depth[n])+1,r[2*o+1]=r[2*n+1]=i,e.heap[1]=i++,m(e,r,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var o,n,i,r,a,s,c=t.dyn_tree,l=t.max_code,d=t.stat_desc.static_tree,u=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,f=t.stat_desc.max_length,m=0;for(r=0;r<=B;r++)e.bl_count[r]=0;for(c[2*e.heap[e.heap_max]+1]=0,o=e.heap_max+1;o<w;o++)f<(r=c[2*c[2*(n=e.heap[o])+1]+1]+1)&&(r=f,m++),c[2*n+1]=r,l<n||(e.bl_count[r]++,a=0,p<=n&&(a=h[n-p]),s=c[2*n],e.opt_len+=s*(r+a),u&&(e.static_len+=s*(d[2*n+1]+a)));if(0!==m){do{for(r=f-1;0===e.bl_count[r];)r--;e.bl_count[r]--,e.bl_count[r+1]+=2,e.bl_count[f]--,m-=2}while(0<m);for(r=f;0!==r;r--)for(n=e.bl_count[r];0!==n;)l<(i=e.heap[--o])||(c[2*i+1]!==r&&(e.opt_len+=(r-c[2*i+1])*c[2*i],c[2*i+1]=r),n--)}}(e,t),p(r,l,e.bl_count)}function _(e,t,o){var n,i,r=-1,a=t[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),t[2*(o+1)+1]=65535,n=0;n<=o;n++)i=a,a=t[2*(n+1)+1],++s<c&&i===a||(s<l?e.bl_tree[2*i]+=s:0!==i?(i!==r&&e.bl_tree[2*i]++,e.bl_tree[2*M]++):s<=10?e.bl_tree[2*D]++:e.bl_tree[2*L]++,r=i,(s=0)===a?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4))}function g(e,t,o){var n,i,r=-1,a=t[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),n=0;n<=o;n++)if(i=a,a=t[2*(n+1)+1],!(++s<c&&i===a)){if(s<l)for(;u(e,i,e.bl_tree),0!=--s;);else 0!==i?(i!==r&&(u(e,i,e.bl_tree),s--),u(e,M,e.bl_tree),d(e,s-3,2)):s<=10?(u(e,D,e.bl_tree),d(e,s-3,3)):(u(e,L,e.bl_tree),d(e,s-11,7));r=i,(s=0)===a?(c=138,l=3):i===a?(c=6,l=3):(c=7,l=4)}}function b(e,t,o,n){var i,r,a,s;d(e,(C<<1)+(n?1:0),3),r=t,a=o,s=!0,f(i=e),s&&(l(i,a),l(i,~a)),S.arraySet(i.pending_buf,i.window,r,a,i.pending),i.pending+=a}var S=e("../utils/common"),T=0,P=1,C=0,a=29,E=256,A=E+1+a,N=30,I=19,w=2*A+1,B=15,i=16,O=7,R=256,M=16,D=17,L=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],U=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(2*(A+2));n(x);var H=new Array(2*N);n(H);var j=new Array(512);n(j);var Y=new Array(256);n(Y);var W=new Array(a);n(W);var z=new Array(N);n(z);var V,Z,q,K=function(e,t,o,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=o,this.elems=n,this.max_length=i,this.has_stree=e&&e.length},J=function(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t},X=!1;o._tr_init=function(e){X||(function(){var e,t,o,n,i,r=new Array(B+1);for(n=o=0;n<a-1;n++)for(W[n]=o,e=0;e<1<<k[n];e++)Y[o++]=n;for(Y[o-1]=n,n=i=0;n<16;n++)for(z[n]=i,e=0;e<1<<U[n];e++)j[i++]=n;for(i>>=7;n<N;n++)for(z[n]=i<<7,e=0;e<1<<U[n]-7;e++)j[256+i++]=n;for(t=0;t<=B;t++)r[t]=0;for(e=0;e<=143;)x[2*e+1]=8,e++,r[8]++;for(;e<=255;)x[2*e+1]=9,e++,r[9]++;for(;e<=279;)x[2*e+1]=7,e++,r[7]++;for(;e<=287;)x[2*e+1]=8,e++,r[8]++;for(p(x,A+1,r),e=0;e<N;e++)H[2*e+1]=5,H[2*e]=h(e,5);V=new K(x,k,E+1,A,B),Z=new K(H,U,0,N,B),q=new K(new Array(0),G,0,I,O)}(),X=!0),e.l_desc=new J(e.dyn_ltree,V),e.d_desc=new J(e.dyn_dtree,Z),e.bl_desc=new J(e.bl_tree,q),e.bi_buf=0,e.bi_valid=0,s(e)},o._tr_stored_block=b,o._tr_flush_block=function(e,t,o,n){var i,r,a=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,o=4093624447;for(t=0;t<=31;t++,o>>>=1)if(1&o&&0!==e.dyn_ltree[2*t])return T;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return P;for(t=32;t<E;t++)if(0!==e.dyn_ltree[2*t])return P;return T}(e)),v(e,e.l_desc),v(e,e.d_desc),a=function(e){var t;for(_(e,e.dyn_ltree,e.l_desc.max_code),_(e,e.dyn_dtree,e.d_desc.max_code),v(e,e.bl_desc),t=I-1;3<=t&&0===e.bl_tree[2*F[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(r=e.static_len+3+7>>>3)<=i&&(i=r)):i=r=o+5,o+4<=i&&-1!==t?b(e,t,o,n):4===e.strategy||r===i?(d(e,2+(n?1:0),3),y(e,x,H)):(d(e,4+(n?1:0),3),function(e,t,o,n){var i;for(d(e,t-257,5),d(e,o-1,5),d(e,n-4,4),i=0;i<n;i++)d(e,e.bl_tree[2*F[i]+1],3);g(e,e.dyn_ltree,t-1),g(e,e.dyn_dtree,o-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),y(e,e.dyn_ltree,e.dyn_dtree)),s(e),n&&f(e)},o._tr_tally=function(e,t,o){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&o,e.last_lit++,0===t?e.dyn_ltree[2*o]++:(e.matches++,t--,e.dyn_ltree[2*(Y[o]+E+1)]++,e.dyn_dtree[2*c(t)]++),e.last_lit===e.lit_bufsize-1},o._tr_align=function(e){var t;d(e,2,3),u(e,R,x),16===(t=e).bi_valid?(l(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},{"../utils/common":27}],39:[function(e,t){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}]},{},[9])(9)});var e=e||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(f){if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var m=f.document,o=f.URL||f.webkitURL||f,y=m&&m.createElementNS("http://www.w3.org/1999/xhtml","a")||{},v=!f.externalHost&&"download"in y,_=f.webkitRequestFileSystem,g=f.requestFileSystem||_||f.mozRequestFileSystem,r=function(e){(f.setImmediate||f.setTimeout)(function(){throw e},0)},b="application/octet-stream",S=0,T=[],e=function(){for(var e=T.length;e--;){var t=T[e];"string"==typeof t?o.revokeObjectURL(t):t.remove()}T.length=0},P=function(e,t,o){for(var n=(t=[].concat(t)).length;n--;){var i=e["on"+t[n]];if("function"==typeof i)try{i.call(e,o||e)}catch(e){r(e)}}},n=function(n,o){var e,i,t,r=this,a=n.type,s=!1,c=function(){var e=(f.URL||f.webkitURL||f).createObjectURL(n);return T.push(e),e},l=function(){P(r,"writestart progress write writeend".split(" "))},d=function(){!s&&e||(e=c()),i?i.location.href=e:window.open(e,"_blank"),r.readyState=r.DONE,l()},u=function(e){return function(){if(r.readyState!==r.DONE)return e.apply(this,arguments)}},h={create:!0,exclusive:!1};if(r.readyState=r.INIT,o||(o="download"),v){e=c(),m=f.document,(y=m.createElementNS("http://www.w3.org/1999/xhtml","a")).href=e,y.download=o;var p=m.createEvent("MouseEvents");return p.initMouseEvent("click",!0,!1,f,0,0,0,0,0,!1,!1,!1,!1,0,null),y.dispatchEvent(p),r.readyState=r.DONE,void l()}f.chrome&&a&&a!==b&&(t=n.slice||n.webkitSlice,n=t.call(n,0,n.size,b),s=!0),_&&"download"!==o&&(o+=".download"),(a===b||_)&&(i=f),g?(S+=n.size,g(f.TEMPORARY,S,u(function(e){e.root.getDirectory("saved",h,u(function(e){var t=function(){e.getFile(o,h,u(function(o){o.createWriter(u(function(t){t.onwriteend=function(e){i.location.href=o.toURL(),T.push(o),r.readyState=r.DONE,P(r,"writeend",e)},t.onerror=function(){var e=t.error;e.code!==e.ABORT_ERR&&d()},"writestart progress write abort".split(" ").forEach(function(e){t["on"+e]=r["on"+e]}),t.write(n),r.abort=function(){t.abort(),r.readyState=r.DONE},r.readyState=r.WRITING}),d)}),d)};e.getFile(o,{create:!1},u(function(e){e.remove(),t()}),u(function(e){e.code===e.NOT_FOUND_ERR?t():d()}))}),d)}),d)):d()},t=n.prototype,i=function(e,t){return new n(e,t)};return t.abort=function(){this.readyState=this.DONE,P(this,"abort")},t.readyState=t.INIT=0,t.WRITING=1,t.DONE=2,t.error=t.onwritestart=t.onprogress=t.onwrite=t.onabort=t.onerror=t.onwriteend=null,f.addEventListener&&f.addEventListener("unload",e,!1),i.unload=function(){e(),f.removeEventListener("unload",e,!1)},i}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content);void 0!==n&&(n.exports=e),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},d("buffer").Buffer)},{buffer:2}],panelGuide_pve:[function(e,t,o){"use strict";cc._RF.push(t,"5eab108S+FJ7ZvAhGsGQS8Y","panelGuide_pve"),Object.defineProperty(o,"__esModule",{value:!0});var a,n,i=e("../GameData"),r=e("../Board"),s=e("../../../module/Modules");(n=a||(a={}))[n.level1_tip1=1]="level1_tip1",n[n.level1_tip2=2]="level1_tip2",n[n.level1_tip3=3]="level1_tip3",n[n.level2_tip1=4]="level2_tip1",n[n.level2_tip2=5]="level2_tip2",n[n.level2_tip3=6]="level2_tip3",n[n.level2_tip4=7]="level2_tip4",n[n.level2_tip5=8]="level2_tip5",n[n.level2_tip6=9]="level2_tip6",n[n.level2_tip7=10]="level2_tip7",n[n.level2_tip8=11]="level2_tip8",n[n.level3_tip1=12]="level3_tip1",n[n.level3_tip2=13]="level3_tip2",n[n.level3_tip3=14]="level3_tip3",n[n.level3_tip4=15]="level3_tip4",n[n.level4_tip1=16]="level4_tip1",n[n.level5_tip1=17]="level5_tip1",n[n.level5_tip2=18]="level5_tip2",n[n.level6_tip1=19]="level6_tip1",n[n.level8_tip1=20]="level8_tip1",n[n.level10_tip1=21]="level10_tip1",n[n.level12_tip1=22]="level12_tip1",n[n.level13_tip1=23]="level13_tip1",n[n.level14_tip1=24]="level14_tip1";var c=cc._decorator,l=c.ccclass,d=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodLight=null,e.nodMask=null,e.nodFrame=null,e.nodBoard=null,e.nodSprHand=null,e.button=null,e.labTip=null,e.panelTile=null,e.panelBonus=null,e.touchPosition=null,e.game=null,e.hadTouched=!1,e.hadGuide=!1,e.hadDone=!1,e.nextTip=0,e}return __extends(e,t),e.prototype.onLoad=function(){this.node.active=!1},e.prototype.timeTip=function(){this.node.active=!0,this.button.node.active=!0;this.setGuide("注意啦，本关是计时关卡，要在规定时间内完成任务，你准备好了嘛",cc.v2(-200,-314),cc.size(80,160),!1,3,!1),this.button.node.on("click",this.touchEvent,this)},e.prototype.touchEvent=function(){i.default.gameBegan=!0,this.button.node.targetOff(this),this.button.node.stopAllActions(),this.button.node.scale=1,this.button.node.active=!1,this.node.active=!1},e.prototype.showGuide=function(){i.default.gameBegan=!1,this.node.active=!0,this.game=this.node.parent.getComponent("LayerGame_pve"),this.hadTouched=!1,this.hadGuide=!1,this.hadDone=!1,this.initGuide()},e.prototype.initGuide=function(){if(s.Home.DataPlayer.Level>=i.default.curLevel)0<i.default.levelData.time?this.timeTip():(this.node.active=!1,i.default.gameBegan=!0);else{switch(i.default.curLevel){case 1:this.nextTip=a.level1_tip1;break;case 2:this.nextTip=a.level2_tip1;break;case 3:this.nextTip=a.level3_tip1;break;case 4:this.nextTip=a.level4_tip1;break;case 5:this.nextTip=a.level5_tip1;break;case 6:this.nextTip=a.level6_tip1;break;case 8:this.nextTip=a.level8_tip1;break;case 10:this.nextTip=a.level10_tip1;break;case 12:this.nextTip=a.level12_tip1;break;case 13:this.nextTip=a.level13_tip1;break;case 14:this.nextTip=a.level14_tip1}this.guide()}},e.prototype.guide=function(){if(!(s.Home.DataPlayer.Level>=i.default.curLevel||this.hadDone))switch(this.nextTip){case a.level1_tip1:this.level1_tip1();break;case a.level1_tip2:this.level1_tip2();break;case a.level1_tip3:this.level1_tip3();break;case a.level2_tip1:this.level2_tip1();break;case a.level2_tip2:this.level2_tip2();break;case a.level2_tip3:this.level2_tip3();break;case a.level2_tip6:this.level2_tip6();break;case a.level2_tip7:this.level2_tip7();break;case a.level3_tip1:this.level3_tip1();break;case a.level3_tip2:this.level3_tip2();break;case a.level3_tip3:this.level3_tip3();break;case a.level4_tip1:this.level4_tip1();break;case a.level5_tip1:this.level5_tip1();break;case a.level6_tip1:this.level6_tip1();break;case a.level8_tip1:this.level8_tip1();break;case a.level10_tip1:this.level10_tip1();break;case a.level12_tip1:this.level12_tip1();break;case a.level13_tip1:this.level13_tip1();break;case a.level14_tip1:this.level14_tip1();break;default:this.node.active=!1,i.default.gameBegan=!0}},e.prototype.runAction=function(n,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(e,t){var o=cc.sequence(i,cc.callFunc(function(){e()}));n.runAction(o)})]})})},e.prototype.setGuide=function(r,a,s,c,l,d){return void 0===d&&(d=!0),__awaiter(this,void 0,void 0,function(){var t,o,n,i=this;return __generator(this,function(e){return this.node.active=!0,this.panelBonus.active=!0,this.hadTouched=!0,this.nodMask.getComponent(cc.Mask).enabled=d,this.nodFrame.active=d,this.labTip.string=r,this.nodBoard.height=this.labTip.node.height+60,t=cc.v2(38,-100),o=cc.v2(38,455),n=cc.v2(38,158),1==l?this.nodBoard.setPosition(t):2==l?this.nodBoard.setPosition(o):3==l&&this.nodBoard.setPosition(n),this.node.targetOff(this),this.nodLight.setPosition(a),this.nodFrame.scale=1,this.nodLight.scale=1,this.nodMask.setContentSize(s),s=cc.size(s.width+38,s.height+30),this.nodFrame.setContentSize(s),c?(this.nodSprHand.active=!0,this.nodSprHand.setPosition(a.add(cc.v2(80,-this.nodMask.height/2-30)))):this.nodSprHand.active=!1,this.nodLight.stopActionByTag(2),this.nodFrame.stopAllActions(),d?(this.nodFrame.scale=10,this.nodFrame.runAction(cc.sequence(cc.scaleTo(1,1,1),cc.callFunc(function(){i.panelBonus.active=!1,i.hadTouched=!1,i.scaleAction()})))):(this.panelBonus.active=!1,this.hadTouched=!1),[2]})})},e.prototype.scaleAction=function(){var e=cc.repeatForever(cc.sequence(cc.scaleTo(1,1.1,1.1),cc.scaleTo(1,1,1)));this.nodLight.runAction(e),e.setTag(2)},e.prototype.level1_tip1=function(){this.setGuide("2个或以上连在一起的水果点击即可消除哦",cc.v2(-200,-314),cc.size(85,170),!0,2),this.node.on("touchstart",this.touchEvent_level1_tip1,this)},e.prototype.level1_tip2=function(){this.setGuide("消除完这些水果才能通关哦",cc.v2(60,414),cc.size(550,110),!1,1),this.node.on("touchstart",this.touchEvent_level1_tip2,this)},e.prototype.level1_tip3=function(){var e=this.node.getChildByName("boardPos").position;this.setGuide("注意这里还有步数的限制哦",e,cc.size(280,110),!1,1),this.node.on("touchstart",this.touchEvent_level1_tip3,this)},e.prototype.level1_tip4=function(e){if(!(s.Home.DataPlayer.Level>=i.default.curLevel||this.hadGuide)){this.hadGuide=!0;var t=[cc.v2(-156,418),cc.v2(-46,418),cc.v2(64,418),cc.v2(174,418),cc.v2(284,418)];this.setGuide("你已经完成一个水果的消除了，还有的继续加油哦",t[e],cc.size(110,110),!1,1),this.node.on("touchstart",this.touchEvent_level1_tip4,this)}},e.prototype.level2_tip1=function(){this.setGuide("试试5个连续的水果消除有什么效果",cc.v2(200,-114),cc.size(80,400),!0,2),this.node.on("touchstart",this.touchEvent_level2_tip1,this)},e.prototype.level2_tip2=function(){this.hadTouched=!1;this.setGuide("看，合成了一个辣椒，快试试看辣椒有什么用",cc.v2(200,-274),cc.size(80,80),!0,2),this.node.on("touchstart",this.touchEvent_level2_tip2,this)},e.prototype.level2_tip3=function(){this.setGuide("辣椒可以消除一列的水果",cc.v2(200,-274),cc.size(80,80),!1,3,!1),this.node.on("touchstart",this.touchEvent_level2_tip3,this)},e.prototype.level2_tip4=function(){this.setGuide("连续的5个或6个水果可以合成一个辣椒",cc.v2(200,-274),cc.size(80,80),!1,3,!1),this.node.on("touchstart",this.touchEvent_level2_tip4,this)},e.prototype.level2_tip5=function(){this.hadTouched=!1;this.setGuide("试试7个连续的水果消除有什什么效果",cc.v2(-200,-114),cc.size(80,560),!0,2),this.node.on("touchstart",this.touchEvent_level2_tip5,this)},e.prototype.level2_tip6=function(){this.hadTouched=!1;this.setGuide("看，合成了一个炸弹，快试试看炸弹有什么用",cc.v2(-200,-354),cc.size(80,80),!0,2),this.node.on("touchstart",this.touchEvent_level2_tip6,this)},e.prototype.level2_tip7=function(){this.hadTouched=!1;this.setGuide("炸弹可以炸掉周围的9个水果",cc.v2(-200,-354),cc.size(80,80),!1,3,!1),this.node.on("touchstart",this.touchEvent_level2_tip7,this)},e.prototype.level2_tip8=function(){this.setGuide("连续的7个或8个水果可以合成一个炸弹",cc.v2(-200,-354),cc.size(80,80),!1,3,!1),this.node.on("touchstart",this.touchEvent_level2_tip8,this)},e.prototype.level3_tip1=function(){this.node.active=!0;this.setGuide("试试9个连续的水果消除有什么效果",cc.v2(-40,-114),cc.size(240,240),!0,2),this.node.on("touchstart",this.touchEvent_level3_tip1,this)},e.prototype.level3_tip2=function(){this.hadTouched=!1;for(var e=null,t=0;t<r.default.INSTANCE.GRID.length;++t)for(var o=0;o<r.default.INSTANCE.GRID[t].length;++o)this.game.tiles[t][o]&&"Bomb"==this.game.tiles[t][o].name&&(e=this.node.convertToNodeSpaceAR(this.panelTile.convertToWorldSpaceAR(this.game.tiles[t][o].getPosition())));e=e||cc.v2(-40,-434),this.setGuide("看，合成了一个榨汁机，快试试看榨汁机有什么用",e,cc.size(80,80),!0,2),this.node.on("touchstart",this.touchEvent_level3_tip2,this)},e.prototype.level3_tip3=function(){this.hadTouched=!1;this.setGuide("榨汁机可以把相同类型的水果全部消除掉",cc.v2(-40,-434),cc.size(80,80),!1,3,!1),this.node.on("touchstart",this.touchEvent_level3_tip3,this)},e.prototype.level3_tip4=function(){this.hadTouched=!1;this.setGuide("连续9个或以上的水果可以合成一个榨汁机",cc.v2(-40,-434),cc.size(80,80),!1,3,!1),this.node.on("touchstart",this.touchEvent_level3_tip4,this)},e.prototype.level4_tip1=function(){this.setGuide("消除小宠物下方的水果让它掉落至最下端即可让它们回家",cc.v2(-40,-434),cc.size(80,80),!1,3,!1),this.node.on("touchstart",this.touchEvent_level4_tip1,this)},e.prototype.level5_tip1=function(){this.hadTouched=!1;this.setGuide("注意这关需要让不同的宠物回家哦",cc.v2(-40,-434),cc.size(80,80),!1,2,!1),this.node.on("touchstart",this.touchEvent_level5_tip1,this)},e.prototype.level5_tip2=function(){this.setGuide("这个勺子是障碍物，试着在它的周围完成一次消除看看会怎么样",cc.v2(40,-114),cc.size(80,80),!0,2),this.node.on("touchstart",this.touchEvent_level5_tip2,this)},e.prototype.level6_tip1=function(){this.button.node.active=!0;this.setGuide("注意啦，本关是计时关卡，要在规定时间内完成任务，你准备好了嘛",cc.v2(40,-114),cc.size(80,80),!1,3,!1),this.button.node.on("touchstart",this.touchEvent_level6_tip1,this)},e.prototype.level8_tip1=function(){this.setGuide("这里里的砖块需要在周围消除两次水果才能击碎，且被砖块挡住水果是不会下落的哦",cc.v2(-40,46),cc.size(80,80),!1,2),this.node.on("touchstart",this.touchEvent_level8_tip1,this)},e.prototype.level10_tip1=function(){this.setGuide("这个传送门可以把水果隔空传送",cc.v2(-280,46),cc.size(80,80),!1,2),this.node.on("touchstart",this.touchEvent_level10_tip1,this)},e.prototype.level12_tip1=function(){this.setGuide("水果旁讨厌的虫子必须使用辣椒火焰或者炸弹才能消灭呢",cc.v2(-120,-34),cc.size(80,80),!1,2),this.node.on("touchstart",this.touchEvent_level12_tip1,this)},e.prototype.level13_tip1=function(){this.button.node.active=!0,this.setGuide("消灭虫子的大战，准备好了吗？",cc.v2(-280,46),cc.size(80,80),!1,3,!1),this.button.node.on("touchstart",this.touchEvent_level13_tip1,this)},e.prototype.level14_tip1=function(){this.setGuide("水果们都坐上行李传送带啦",cc.v2(0,-114),cc.size(640,80),!1,2),this.node.on("touchstart",this.touchEvent_level14_tip1,this)},e.prototype.touchEvent_level1_tip1=function(e){if(!this.hadTouched){var t=this.nodMask.convertTouchToNodeSpaceAR(e),o=cc.rect(-this.nodMask.width/2,-this.nodMask.height/2,this.nodMask.width,this.nodMask.height);if(cc.rectContainsPoint(o,t)){this.hadTouched=!0;var n=this.panelTile.convertToNodeSpaceAR(this.nodMask.convertToWorldSpaceAR(t)),i=this.getXYByPosition(n);this.game.tiles[i.x][i.y].getComponent("Block").onTouchStart(),this.node.active=!1,this.nextTip=a.level1_tip2}}},e.prototype.touchEvent_level1_tip2=function(e){this.hadTouched||(this.node.active=!1,this.nextTip=a.level1_tip3,this.level1_tip3())},e.prototype.touchEvent_level1_tip3=function(e){this.hadTouched||(this.hadDone=!0,this.node.active=!1)},e.prototype.touchEvent_level1_tip4=function(e){this.hadTouched||(this.node.active=!1)},e.prototype.touchEvent_level2_tip1=function(e){if(!this.hadTouched){var t=this.nodMask.convertTouchToNodeSpaceAR(e),o=cc.rect(-this.nodMask.width/2,-this.nodMask.height/2,this.nodMask.width,this.nodMask.height);if(cc.rectContainsPoint(o,t)){this.hadTouched=!0;var n=this.panelTile.convertToNodeSpaceAR(this.nodMask.convertToWorldSpaceAR(t)),i=this.getXYByPosition(n),r=this.game.tiles[i.x][i.y];this.nextTip=a.level2_tip2,r.getComponent("Block").onTouchStart()}}},e.prototype.touchEvent_level2_tip2=function(e){if(!this.hadTouched){var t=this.nodMask.convertTouchToNodeSpaceAR(e),o=cc.rect(-this.nodMask.width/2,-this.nodMask.height/2,this.nodMask.width,this.nodMask.height);if(cc.rectContainsPoint(o,t)){this.hadTouched=!0;var n=this.panelTile.convertToNodeSpaceAR(this.nodMask.convertToWorldSpaceAR(t)),i=this.getXYByPosition(n),r=this.game.tiles[i.x][i.y];this.nextTip=a.level2_tip3,r.getComponent("Bomb").onTouchStart(),this.node.active=!1}}},e.prototype.touchEvent_level2_tip3=function(e){this.hadTouched||this.level2_tip4()},e.prototype.touchEvent_level2_tip4=function(e){this.hadTouched||(this.node.active=!1,this.level2_tip5())},e.prototype.touchEvent_level2_tip5=function(e){if(!this.hadTouched){var t=this.nodMask.convertTouchToNodeSpaceAR(e),o=cc.rect(-this.nodMask.width/2,-this.nodMask.height/2,this.nodMask.width,this.nodMask.height);if(cc.rectContainsPoint(o,t)){this.hadTouched=!0;var n=this.panelTile.convertToNodeSpaceAR(this.nodMask.convertToWorldSpaceAR(t)),i=this.getXYByPosition(n),r=this.game.tiles[i.x][i.y];this.nextTip=a.level2_tip6,r.getComponent("Block").onTouchStart()}}},e.prototype.touchEvent_level2_tip6=function(e){if(!this.hadTouched){var t=this.nodMask.convertTouchToNodeSpaceAR(e),o=cc.rect(-this.nodMask.width/2,-this.nodMask.height/2,this.nodMask.width,this.nodMask.height);if(cc.rectContainsPoint(o,t)){this.hadTouched=!0;var n=this.panelTile.convertToNodeSpaceAR(this.nodMask.convertToWorldSpaceAR(t)),i=this.getXYByPosition(n),r=this.game.tiles[i.x][i.y];this.nextTip=a.level2_tip7,r.getComponent("Bomb").onTouchStart(),this.node.active=!1}}},e.prototype.touchEvent_level2_tip7=function(e){this.hadTouched||(this.node.active=!1,this.level2_tip8())},e.prototype.touchEvent_level2_tip8=function(e){this.hadTouched||(this.node.active=!1,this.hadDone=!0)},e.prototype.touchEvent_level3_tip1=function(e){if(!this.hadTouched){var t=this.nodMask.convertTouchToNodeSpaceAR(e),o=cc.rect(-this.nodMask.width/2,-this.nodMask.height/2,this.nodMask.width,this.nodMask.height);if(cc.rectContainsPoint(o,t)){this.hadTouched=!0;var n=this.panelTile.convertToNodeSpaceAR(this.nodMask.convertToWorldSpaceAR(t)),i=this.getXYByPosition(n),r=this.game.tiles[i.x][i.y];this.nextTip=a.level3_tip2,r.getComponent("Block").onTouchStart()}}},e.prototype.touchEvent_level3_tip2=function(e){if(!this.hadTouched){var t=this.nodMask.convertTouchToNodeSpaceAR(e),o=cc.rect(-this.nodMask.width/2,-this.nodMask.height/2,this.nodMask.width,this.nodMask.height);if(cc.rectContainsPoint(o,t)){this.hadTouched=!0;var n=this.panelTile.convertToNodeSpaceAR(this.nodMask.convertToWorldSpaceAR(t)),i=this.getXYByPosition(n),r=this.game.tiles[i.x][i.y];this.nextTip=a.level3_tip3,r.getComponent("Bomb").onTouchStart(),this.node.active=!1}}},e.prototype.touchEvent_level3_tip3=function(e){this.hadTouched||(this.node.active=!1,this.level3_tip4())},e.prototype.touchEvent_level3_tip4=function(e){this.hadTouched||(this.node.active=!1,this.hadDone=!0)},e.prototype.touchEvent_level4_tip1=function(e){this.hadTouched||(this.node.active=!1,this.hadDone=!0)},e.prototype.touchEvent_level5_tip1=function(e){this.hadTouched||(this.node.active=!1,this.level5_tip2())},e.prototype.touchEvent_level5_tip2=function(e){this.hadTouched||(this.node.active=!1,this.hadDone=!0)},e.prototype.touchEvent_level6_tip1=function(e){this.hadTouched||(i.default.gameBegan=!0,this.button.node.targetOff(this),this.button.node.active=!1,this.node.active=!1,this.hadDone=!0)},e.prototype.touchEvent_level8_tip1=function(e){this.hadTouched||(this.node.active=!1,this.hadDone=!0)},e.prototype.touchEvent_level10_tip1=function(e){this.hadTouched||(this.node.active=!1,this.hadDone=!0)},e.prototype.touchEvent_level12_tip1=function(e){this.hadTouched||(this.node.active=!1,this.hadDone=!0)},e.prototype.touchEvent_level13_tip1=function(e){this.hadTouched||(i.default.gameBegan=!0,this.button.node.targetOff(this),this.button.node.active=!1,this.node.active=!1,this.hadDone=!0)},e.prototype.touchEvent_level14_tip1=function(e){this.hadTouched||(this.node.active=!1,this.hadDone=!0)},e.prototype.getXYByPosition=function(e){return{x:Math.floor(e.x/80)+4,y:Math.floor(e.y/80)}},__decorate([d(cc.Node)],e.prototype,"nodLight",void 0),__decorate([d(cc.Node)],e.prototype,"nodMask",void 0),__decorate([d(cc.Node)],e.prototype,"nodFrame",void 0),__decorate([d(cc.Node)],e.prototype,"nodBoard",void 0),__decorate([d(cc.Node)],e.prototype,"nodSprHand",void 0),__decorate([d(cc.Button)],e.prototype,"button",void 0),__decorate([d(cc.Label)],e.prototype,"labTip",void 0),__decorate([d(cc.Node)],e.prototype,"panelTile",void 0),__decorate([d(cc.Node)],e.prototype,"panelBonus",void 0),e=__decorate([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../module/Modules":"Modules","../Board":"Board","../GameData":"GameData"}],"polyglot.min":[function(e,t,o){"use strict";cc._RF.push(t,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min");var n,i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=void 0,i=function(t){function e(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||o}function i(e,t,o){var n,i,r,a,s,c,l;return null!=o&&e?(r=(i=e.split(d))[(a=t,s=o,u[(c=a,l=function(e){var t,o,n,i={};for(t in e)if(e.hasOwnProperty(t))for(n in o=e[t])i[o[n]]=t;return i}(h),l[c]||l.en)](s))]||i[0],n=r.replace(/^\s+|\s+$/g,"")):n=e,n}function o(e){t.console&&t.console.warn&&t.console.warn("WARNING: "+e)}e.VERSION="0.4.3",e.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},e.prototype.extend=function(e,t){var o;for(var n in e)e.hasOwnProperty(n)&&(o=e[n],t&&(n=t+"."+n),"object"==(void 0===o?"undefined":r(o))?this.extend(o,n):this.phrases[n]=o)},e.prototype.clear=function(){this.phrases={}},e.prototype.replace=function(e){this.clear(),this.extend(e)},e.prototype.t=function(e,t){var o,n;return"number"==typeof(t=null==t?{}:t)&&(t={smart_count:t}),"string"==typeof this.phrases[e]?o=this.phrases[e]:"string"==typeof t._?o=t._:this.allowMissing?o=e:(this.warn('Missing translation for key: "'+e+'"'),n=e),"string"==typeof o&&(t=function(e){var t={};for(var o in e)t[o]=e[o];return t}(t),n=function(e,t){for(var o in t)"_"!==o&&t.hasOwnProperty(o)&&(e=e.replace(new RegExp("%\\{"+o+"\\}","g"),t[o]));return e}(n=i(o,this.currentLocale,t.smart_count),t)),n},e.prototype.has=function(e){return e in this.phrases};var d="||||",u={chinese:function(e){return 0},german:function(e){return 1!==e?1:0},french:function(e){return 1<e?1:0},russian:function(e){return e%10==1&&e%100!=11?0:2<=e%10&&e%10<=4&&(e%100<10||20<=e%100)?1:2},czech:function(e){return 1===e?0:2<=e&&e<=4?1:2},polish:function(e){return 1===e?0:2<=e%10&&e%10<=4&&(e%100<10||20<=e%100)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0}},h={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return e},"function"==typeof define&&define.amd?define([],function(){return i(n)}):"object"==(void 0===o?"undefined":r(o))?t.exports=i(n):n.Polyglot=i(n),cc._RF.pop()},{}]},{},["es6-promise","jszip","Defines","Events","Misc","UInt64","BaseConfig","ConfigEntry","ConfigVO","EventDispatcher","IEventDispatcher","LoadBatch","LoadDefine","LoadItem","Loader","NetByteArray","NetController","NetUtil","ProtoCrypto","ProtoDefine","ProtoDispatcher","ProtoReflect","ProtoType","ProtoSectionAcc","ProtoSectionActivity","ProtoSectionAward","ProtoSectionChat","ProtoSectionDebug","ProtoSectionGoods","ProtoSectionPayment","ProtoSectionPlay","ProtoSectionPlayer","ProtoSectionRank","ProtoSectionRoom","ProtoSectionTask","GameWebSocket","InternalWebSocket","SocketDefine","GamePersist","RuntimeManager","SocialManager","Animation","BaseComponent","BasePanel","BaseUI","GrayFrag","MemoryDetector","Tips","UIDefines","Algorithm","Audio","Board","GameData","LayerGame","LayerScore","ModelPvp","NodePool","PanelHeader","PlayDefine","PlayManager","PlayMoudle","PlayNetHandler","PlayStory","PlayUI","PvpGuide","BaseTile","Block","Bomb","BonusBall","BtnLevel","Obstacle","Particle","RankItemPve","RankPve","ScoreMsg","Tableware","Wall","LayerGame_pve","LayerScore_pve","LevelChoose","ModelPve","PanelHeader_pve","PanelLevelChoose","PlayUI_pve","StateMgr","panelGuide_pve","DebugNetHandler","HomeManager","HomeModule","HomeUI","PlayerNetHandler","RoomDefine","RoomNetHandler","AchievementLayerScript","InviteDevConfirm","InvitePanel","LayerMatch","RankItem","RankScript","RankTopThreePlayer","Setting","AccCompCreateRole","AccManager","AccModule","AccNetHandler","LoginUI","PanelSelectServer","DotAnimation","Preload","DelayActiveButton","Energy","PlayPlaymateHead","PlaymateHead","Toast","BaseModule","ModuleManager","Modules","DataAcc","DataPlay","DataPlayer","DataRank","DataRoom","Config","DYADMgr","DYAudio","DYAudioH","DYCrypto","DYData","DYGame","DYHttpMgr","DYIAPMgr","DYLoader","DYLoginMgr","DYNotify","DYShareMgr","DYUtils","GrayShader","ListView","PolygonHitTest","LanguageData","LocalizedLabel","LocalizedSprite","SpriteFrameSet","polyglot.min"]);