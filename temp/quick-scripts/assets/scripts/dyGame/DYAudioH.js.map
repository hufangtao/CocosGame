{"version":3,"sources":["DYAudioH.ts"],"names":[],"mappings":";;;;;AAAA;;GAEG;AACH;IAAA;IAQA,CAAC;IAPe,gBAAO,GAArB,UAAsB,GAAG;QACvB,cAAc,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IACvC,CAAC;IAEa,mBAAU,GAAxB,UAAyB,GAAG;QAC1B,cAAc,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;IAC1C,CAAC;IACH,eAAC;AAAD,CARA,AAQC,IAAA;;AAED;IAYE;QAFA,cAAS,GAAG,EAAE,CAAC;QAGb,IAAI,CAAC,QAAQ,GAAG,IAAI,KAAK,EAAE,CAAA;QAC3B,IAAI,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAA;IAC3B,CAAC;IAbD,sBAAkB,0BAAQ;aAA1B;YACE,IAAI,CAAC,cAAc,CAAC,UAAU,EAAE;gBAC9B,cAAc,CAAC,UAAU,GAAG,IAAI,cAAc,EAAE,CAAC;aAClD;YACD,OAAO,cAAc,CAAC,UAAU,CAAC;QACnC,CAAC;;;OAAA;IAUD,gCAAO,GAAP,UAAQ,GAAG;QACT,IAAI,EAAE,CAAC,MAAM,CAAC,OAAO,EAAE;YACrB,GAAG,GAAG,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;SAC3C;QACD,IAAI,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC;QAC7E,IAAI,GAAG,IAAI,GAAG,EAAE;YACd,OAAO;SACR;QACD,IAAI,CAAC,QAAQ,CAAC,WAAW,GAAG,CAAC,CAAA;QAC7B,IAAI,OAAO,CAAC,QAAQ,EAAE;YACpB,GAAG,GAAG,OAAO,CAAC,QAAQ,GAAG,GAAG,CAAC;SAC9B;QACD,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,GAAG,CAAC;QACxB,uCAAuC;QACvC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;IACvB,CAAC;IAED,mCAAU,GAAV,UAAW,GAAG;QACZ,IAAI,WAAW,GAAG,IAAI,KAAK,EAAE,CAAC;QAC9B,IAAI,EAAE,CAAC,MAAM,CAAC,OAAO,EAAE;YACrB,GAAG,GAAG,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;SAC3C;QACD,IAAI,OAAO,CAAC,QAAQ,EAAE;YACpB,GAAG,GAAG,OAAO,CAAC,QAAQ,GAAG,GAAG,CAAC;SAC9B;QACD,WAAW,CAAC,GAAG,GAAG,GAAG,CAAC;QACtB,WAAW,CAAC,WAAW,GAAG,CAAC,CAAA;QAC3B,WAAW,CAAC,IAAI,EAAE,CAAC;IACrB,CAAC;IACH,qBAAC;AAAD,CA9CA,AA8CC,IAAA","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\dyGame","sourcesContent":["/**\r\n * 统一的音效管理器\r\n */\r\nexport default class DYAudioH {\r\n  public static playBgm(url) {\r\n    DYAudioHHelper.Instance.playBgm(url);\r\n  }\r\n\r\n  public static playEffect(url) {\r\n    DYAudioHHelper.Instance.playEffect(url);\r\n  }\r\n}\r\n\r\nclass DYAudioHHelper {\r\n  public static myInstance: DYAudioHHelper;\r\n  public static get Instance() {\r\n    if (!DYAudioHHelper.myInstance) {\r\n      DYAudioHHelper.myInstance = new DYAudioHHelper();\r\n    }\r\n    return DYAudioHHelper.myInstance;\r\n  }\r\n\r\n  bgmAudio;\r\n  effectMap = [];\r\n\r\n  constructor() {\r\n    this.bgmAudio = new Audio()\r\n    this.bgmAudio.loop = true\r\n  }\r\n\r\n  playBgm(url) {\r\n    if (cc.loader.md5Pipe) {\r\n      url = cc.loader.md5Pipe.transformURL(url);\r\n    }\r\n    var src = this.bgmAudio.src.substring(this.bgmAudio.src.length - url.length);\r\n    if (url == src) {\r\n      return;\r\n    }\r\n    this.bgmAudio.currentTime = 0\r\n    if (Partner.CDN_HOST) {\r\n      url = Partner.CDN_HOST + url;\r\n    }\r\n    this.bgmAudio.src = url;\r\n    // this.bgmAudio.src = cc.url.raw(url);\r\n    this.bgmAudio.play();\r\n  }\r\n\r\n  playEffect(url) {\r\n    var effectAudio = new Audio();\r\n    if (cc.loader.md5Pipe) {\r\n      url = cc.loader.md5Pipe.transformURL(url);\r\n    }\r\n    if (Partner.CDN_HOST) {\r\n      url = Partner.CDN_HOST + url;\r\n    }\r\n    effectAudio.src = url;\r\n    effectAudio.currentTime = 0\r\n    effectAudio.play();\r\n  }\r\n}\r\n"]}