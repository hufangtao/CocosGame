{"version":3,"sources":["UIChoosePvp.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\ui","sourcesContent":["import { Home } from \"../module/Modules\";\r\nimport GamePersist from \"../common/persist/GamePersist\";\r\nimport NetUtil from \"../common/net/NetUtil\";\r\nimport { UIFunc } from \"../common/UIFunc\";\r\nimport { PlayerClickC2S } from \"../common/net/proto/mods/ProtoSectionPlayer\";\r\nimport { OpenHomeFrom } from \"../common/Defines\";\r\nimport HomeManager from \"../component/page/home/HomeManager\";\r\nimport { Message } from \"../common/Message\";\r\nimport { DYNotify } from \"../../dyGame/DYNotify\";\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    nodConfirm: cc.Node = null;\r\n    @property(cc.Node)\r\n    nodRooms: cc.Node = null;\r\n    @property(cc.Sprite)\r\n    sprRoomName: cc.Sprite = null;\r\n    @property(cc.Label)\r\n    public labMoneyCount: cc.Label = null;\r\n    @property(cc.SpriteFrame)\r\n    spfRoom1:cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    spfRoom2:cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    spfRoom3:cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    spfRoom4:cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    spfRoom5:cc.SpriteFrame = null;\r\n\r\n    choiceRoomType;//选择的房间类型\r\n\r\n    onEnable() {\r\n        this.nodRooms.getChildByName('room3').getChildByName('sprite').getComponent(cc.Sprite).setState(cc.Sprite.State.GRAY);\r\n        this.nodRooms.getChildByName('room4').getChildByName('sprite').getComponent(cc.Sprite).setState(cc.Sprite.State.GRAY);\r\n        this.nodRooms.getChildByName('room5').getChildByName('sprite').getComponent(cc.Sprite).setState(cc.Sprite.State.GRAY);\r\n        DYNotify.regObserver(Message.EVENT_MODULE_PLAYER_FORTUNE, this.onNotify, this);\r\n        this.updateMmoney();\r\n    }\r\n    onDisable(){\r\n        DYNotify.removeAllObservers(this);\r\n    }\r\n    updateMmoney() {\r\n        this.labMoneyCount.string = Home.DataPlayer.FortuneGold + '';\r\n    }\r\n    startMatch() {\r\n\r\n        const dataPoint = new PlayerClickC2S();\r\n        dataPoint.point = 1;\r\n        NetUtil.SendMsg(dataPoint);\r\n\r\n        Home.OpenHomeFrom = OpenHomeFrom.UI_PLAY;\r\n        Home.DataPlayer.IsMatching = true;\r\n\r\n        GamePersist.INSTANCE.ForceWaiting();\r\n        UIFunc.openUI('UIMatch', () => {\r\n            this.nodConfirm.active = false;\r\n            HomeManager.INSTANCE.makeMatchRequest(this.choiceRoomType);\r\n            GamePersist.INSTANCE.CancelWaiting();\r\n        })\r\n    }\r\n\r\n    // 加载获取金币窗口\r\n    loadUIGetCoin() {\r\n        UIFunc.openUI('UIGetCoin', (node) => {\r\n            node.getComponent('UIGetCoin').setType(1);\r\n        })\r\n    }\r\n\r\n    // 扣去金币提示窗口\r\n    showConfirm(type) {\r\n        let spriteFrame;\r\n\r\n        switch (type) {\r\n            case 1:\r\n                if (Home.DataPlayer.FortuneGold < 100) {\r\n                    this.loadUIGetCoin();\r\n                    return;\r\n                }\r\n                spriteFrame = this.spfRoom1;\r\n                break;\r\n            case 2:\r\n                if (Home.DataPlayer.FortuneGold < 500) {\r\n                    this.loadUIGetCoin();\r\n                    return;\r\n                }\r\n                spriteFrame = this.spfRoom2;\r\n                break;\r\n            case 3:\r\n                if (Home.DataPlayer.FortuneGold < 1000) {\r\n                    this.loadUIGetCoin();\r\n                    return;\r\n                }\r\n                spriteFrame = this.spfRoom3;\r\n                break;\r\n            case 4:\r\n                if (Home.DataPlayer.FortuneGold < 3000) {\r\n                    this.loadUIGetCoin();\r\n                    return;\r\n                }\r\n                spriteFrame = this.spfRoom4;\r\n                break;\r\n            case 5:\r\n                if (Home.DataPlayer.FortuneGold < 5000) {\r\n                    this.loadUIGetCoin();\r\n                    return;\r\n                }\r\n                spriteFrame = this.spfRoom5;\r\n                break;\r\n        }\r\n        this.nodConfirm.active = true;\r\n        this.choiceRoomType = type;\r\n        this.sprRoomName.spriteFrame = spriteFrame;\r\n    }\r\n\r\n    private onNotify(target, tag, param) {\r\n        var self = target;\r\n        if (tag === Message.EVENT_MODULE_PLAYER_FORTUNE) {\r\n            this.updateMmoney();\r\n        }\r\n    }\r\n\r\n    public btnListener(event: cc.Event.EventTouch) {\r\n        var target = event.target;\r\n        target.scale = 1;\r\n        switch (target.name) {\r\n            case 'btnBack':\r\n                UIFunc.closeUI('UIChoosePvp', () => { });\r\n                break;\r\n            case 'room1':\r\n                this.showConfirm(1);\r\n                break;\r\n            case 'room2':\r\n                this.showConfirm(2);\r\n                break;\r\n            case 'room3':\r\n                GamePersist.INSTANCE.toast('暂未开放，敬请期待');\r\n                // this.showConfirm(3);\r\n                break;\r\n            case 'room4':\r\n                GamePersist.INSTANCE.toast('暂未开放，敬请期待');\r\n                // this.showConfirm(4);\r\n                break;\r\n            case 'room5':\r\n                GamePersist.INSTANCE.toast('暂未开放，敬请期待');\r\n                // this.showConfirm(5);\r\n                break;\r\n            case 'btnYes':\r\n                this.startMatch();\r\n                break;\r\n            case 'btnNo':\r\n                this.nodConfirm.active = false;\r\n                break;\r\n        }\r\n    }\r\n}\r\n"]}