{"version":3,"sources":["UIScorePvp.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\ui","sourcesContent":["import PlayUI from \"../component/game/pvp/PlayUI\";\r\nimport { Message } from \"../common/Message\";\r\nimport SocialManager from \"../common/social/SocialManager\";\r\nimport GamePersist from \"../common/persist/GamePersist\";\r\nimport { PlayerWatchAdC2S, PlayerShareGameC2S, PlayerDoubleC2S } from \"../common/net/proto/mods/ProtoSectionPlayer\";\r\nimport NetUtil from \"../common/net/NetUtil\";\r\nimport { PGoods } from \"../common/net/proto/ProtoType\";\r\nimport { Home, Play } from \"../module/Modules\";\r\nimport { RankPlayStarC2S } from \"../common/net/proto/mods/ProtoSectionRank\";\r\nimport { PlayContinueC2S } from \"../common/net/proto/mods/ProtoSectionPlay\";\r\nimport { OpenHomeFrom, ValueKey } from \"../common/Defines\";\r\nimport PlayManager from \"../component/game/PlayManager\";\r\nimport { RoomPlayFinishS2C } from \"../common/net/proto/mods/ProtoSectionRoom\";\r\nimport * as Misc from \"../common/Misc\";\r\nimport { DYNotify } from \"../../dyGame/DYNotify\";\r\nimport { UIFunc } from \"../common/UIFunc\";\r\nimport { ShareManager } from \"../common/ShareManager\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class UIScorePvp extends cc.Component {\r\n    @property(cc.Node)\r\n    nodHead: cc.Node = null;\r\n    @property(cc.Node)\r\n    nodWinSprite: cc.Node = null;\r\n    @property(cc.Node)\r\n    nodLoseSprite: cc.Node = null;\r\n    @property(cc.Node)\r\n    nodDrawSprite: cc.Node = null;\r\n    @property(cc.Node)\r\n    nodWinBgSprite: cc.Node = null;\r\n    @property(cc.Node)\r\n    nodLoseBgSprite: cc.Node = null;\r\n    @property(cc.Node)\r\n    nodShineSprite: cc.Node = null;\r\n    @property(cc.Node)\r\n    nodStars: cc.Node = null;\r\n    @property(cc.Label)\r\n    labSaveAnimalCoint: cc.Label = null;\r\n    @property(cc.Label)\r\n    labWinCount: cc.Label = null;\r\n    @property(cc.Label)\r\n    labDailyCount: cc.Label = null;\r\n    @property(cc.Label)\r\n    labRateDailyWin: cc.Label = null;\r\n    @property(cc.Label)\r\n    labRateWeekWin: cc.Label = null;\r\n    @property(cc.Sprite)\r\n    sprGrade: cc.Sprite = null;\r\n    @property(cc.Button)\r\n    btnContinue: cc.Button = null;\r\n    @property(cc.Node)\r\n    bgParticle: cc.Node = null;\r\n    @property(cc.Node)\r\n    nodNewGrade: cc.Node = null;\r\n    @property(cc.Button)\r\n    btnAd: cc.Button = null;\r\n    @property(cc.Label)\r\n    labCoin: cc.Label = null;\r\n    @property(cc.Label)\r\n    labLoseOrWin: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    labCoinInPanel: cc.Label = null;\r\n\r\n    @property(cc.Node)\r\n    nodDoubleCoin: cc.Node = null;\r\n\r\n    @property(cc.Sprite)\r\n    gameContinueType: cc.Sprite = null;\r\n    @property(cc.SpriteFrame)\r\n    againSF: cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    continueSF: cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    opInviteSF: cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    opLeaveSF: cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    waitagreeSF: cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    noagainGreySF: cc.SpriteFrame = null;\r\n\r\n    PlayUI: PlayUI = null;\r\n\r\n    coinNum: number;// 获取的金币数量\r\n    subContextView\r\n    // 电视晃动\r\n    tvAction(win) {\r\n        let btnAd = this.btnAd.node;\r\n        btnAd.on('click', this.showAdGetProp, this);\r\n        let nodTv = btnAd.getChildByName('icon-tv');\r\n        nodTv.getComponent(cc.Animation).play('tvShake');\r\n    }\r\n\r\n    showAdGetProp() {\r\n        if (window['Partner'].supportAd()) {\r\n            window['Partner'].showVideoAd(() => {\r\n                ShareManager.Instance.notifyWatchAdGetProp();\r\n            }, () => {\r\n                ShareManager.Instance.share(3);\r\n            });\r\n        } else {\r\n            GamePersist.INSTANCE.toast('不支持广告');\r\n            ShareManager.Instance.notifyWatchAdGetProp();\r\n        }\r\n    }\r\n\r\n    public init(playUI) {\r\n        this.PlayUI = playUI;\r\n    }\r\n    onEnable() {\r\n        DYNotify.regObserver(Message.UIRankUpdate, this.onNotify, this);\r\n        DYNotify.regObserver(Message.EVENT_MODULE_PLAYER_PRIZE, this.onNotify, this);\r\n        DYNotify.regObserver(Message.GET_SHARE_CNT, this.onNotify, this);\r\n        DYNotify.regObserver(Message.EVENT_MODULE_PLAYER_FORTUNE, this.onNotify, this);\r\n        this.btnContinue.interactable = true;\r\n        this.nodNewGrade.active = false;\r\n        this.requestRankData();\r\n        this.nodDoubleCoin.active = false;\r\n        this.canLoadUIGetProp = true;\r\n\r\n        this.coinNum = 0;\r\n        this.nodDoubleCoin.getChildByName('content').active = false;\r\n        window['Partner'].postMsg(3, { valuekey: ValueKey.gameRate });\r\n\r\n        this.subContextView = this.node.getChildByName('sprBeyond').getComponent(cc.WXSubContextView);\r\n        if(window['wx']){\r\n            this.subContextView.enabled = false;\r\n        }\r\n    }\r\n\r\n    time = 0;\r\n    update(dt){\r\n        if(!window['wx']){\r\n            return\r\n        }\r\n        this.time += dt;\r\n        if(this.time >= 2 && this.subContextView){\r\n            this.time = 0;\r\n            this.subContextView.update();\r\n        }\r\n    }\r\n\r\n    onDisable() {\r\n        DYNotify.removeAllObservers(this);\r\n    }\r\n    canLoadUIGetProp\r\n    private onNotify(target, tag, param) {\r\n        var self = target;\r\n        if (tag == Message.UIRankUpdate) {\r\n            if (Play.DataPvp.isGradeUp()) {\r\n                self.rankUp();\r\n            }\r\n        } else if (tag === Message.EVENT_MODULE_PLAYER_PRIZE) {\r\n            if (!this.canLoadUIGetProp) {\r\n                return;\r\n            }\r\n            this.canLoadUIGetProp = false;\r\n            UIFunc.openUI('UIGetProp', (node) => {\r\n                this.canLoadUIGetProp = true;\r\n                node.getComponent('UIGetProp').scorePvpAchieveProp();\r\n            })\r\n        } else if (tag == Message.GET_SHARE_CNT) {\r\n            if (param.reason != 3) {\r\n                return;\r\n            }\r\n            if (param.success == 1) {\r\n                self.watchAd();\r\n            } else if (param.success === 2) {\r\n                GamePersist.INSTANCE.toast('今日分享已达上限');\r\n            }\r\n        } else if (tag === Message.EVENT_MODULE_PLAYER_FORTUNE) {\r\n            self.showGetCoin();\r\n        }\r\n    }\r\n\r\n\r\n    // 更新排行\r\n    public requestRankData() {\r\n        GamePersist.INSTANCE.ForceWaiting();\r\n        const rankDataReq = new RankPlayStarC2S();\r\n        rankDataReq.posStart = 1;\r\n        rankDataReq.posEnd = 50;\r\n        NetUtil.SendMsg(rankDataReq);\r\n    }\r\n\r\n\r\n    public continue() {\r\n        GamePersist.INSTANCE.btnAudio_1();\r\n        if (Home.DataRoom.opponentPlaymate.id == 1) {\r\n            Home.OpenHomeFrom = OpenHomeFrom.UI_AIFIN;\r\n            PlayManager.INSTANCE.onBack();\r\n        } else {\r\n            let playContinue = new PlayContinueC2S();\r\n            NetUtil.SendMsg(playContinue);\r\n        }\r\n        UIFunc.closeUI('UIScorePvp',()=>{})\r\n    }\r\n\r\n    public giveUp() {\r\n        GamePersist.INSTANCE.btnAudio_1();\r\n        PlayManager.INSTANCE.onBack();\r\n        UIFunc.closeUI('UIScorePvp',()=>{})\r\n    }\r\n\r\n    private showStar(num) {\r\n        for (let i = 0; i < this.nodStars.children.length; ++i) {\r\n            if (i <= num - 1) {\r\n                this.nodStars.children[i].opacity = 0;\r\n                this.nodStars.children[i].scale = 2;\r\n                let action = cc.sequence(\r\n                    cc.delayTime(0.2 * i),\r\n                    cc.callFunc(function (target) {\r\n                        target.opacity = 255;\r\n                    }, this),\r\n                    cc.scaleTo(0.1, 0.9, 0.9),\r\n                    cc.scaleTo(0.05, 1, 1)\r\n                );\r\n                this.nodStars.children[i].active = true;\r\n                this.nodStars.children[i].runAction(action);\r\n            } else {\r\n                this.nodStars.children[i].active = false;\r\n            }\r\n        }\r\n\r\n        this.gradeUp();\r\n    }\r\n\r\n    // 段位升级\r\n    gradeUp() {\r\n        if (Play.DataPvp.isGradeUp()) {\r\n            // 播放段位升级动画\r\n            let myStar = Home.DataPlayer.FortuneStar;\r\n            let sysHonorId = Misc.calcHonorId(myStar);\r\n            cc.loader.loadRes('res/rank/rank-' + sysHonorId, cc.SpriteFrame, (err, spriteFrame) => {\r\n                this.nodNewGrade.getChildByName('mask').getChildByName('sprGrade').getComponent(cc.Sprite).spriteFrame = spriteFrame;\r\n                // cc.loader.setAutoReleaseRecursively(spriteFrame, true)\r\n            });\r\n            this.nodNewGrade.active = true;\r\n            this.nodNewGrade.parent.getComponent(cc.Animation).play('gradeUp');\r\n            this.scheduleOnce(() => {\r\n                this.rankUp();\r\n            }, 3);\r\n        } else {\r\n\r\n        }\r\n    }\r\n\r\n    // 排行升级\r\n    rankUp() {\r\n        if (Play.DataPvp.isRankUp()) {\r\n            // console.log('rankUp');\r\n            cc.loader.loadRes('prefab/play/RankUp', cc.Prefab, (err, prefab) => {\r\n                let node = cc.instantiate(prefab);\r\n                node.parent = this.node;\r\n                let rankUp = node.getComponent('RankUp');\r\n                rankUp.showAction(true);\r\n                // cc.loader.setAutoReleaseRecursively(prefab, true)\r\n            });\r\n        }\r\n    }\r\n\r\n    public setContinueBtn(type) {\r\n        switch (type) {\r\n            case 0:\r\n                // 失败\r\n                this.gameContinueType.spriteFrame = this.againSF;\r\n                break;\r\n            case 1:\r\n                // 胜利\r\n                this.gameContinueType.spriteFrame = this.continueSF;\r\n                break;\r\n            case 2:\r\n                // 对手请求\r\n                this.gameContinueType.spriteFrame = this.opInviteSF;\r\n                break;\r\n            case 3:\r\n                // 对手离开\r\n                this.gameContinueType.spriteFrame = this.opLeaveSF;\r\n                this.btnContinue.interactable = false;\r\n                break;\r\n            case 4:\r\n                // 等待同意\r\n                this.gameContinueType.spriteFrame = this.waitagreeSF;\r\n                break;\r\n            case 5:\r\n                // 失败ai\r\n                this.gameContinueType.spriteFrame = this.noagainGreySF;\r\n                break;\r\n        }\r\n\r\n        // AI对战结束，显示继续匹配\r\n        if (Home.DataRoom.opponentPlaymate.id == 1) {\r\n            this.btnContinue.interactable = false;\r\n            this.gameContinueType.spriteFrame = this.opLeaveSF;\r\n        }\r\n    }\r\n\r\n    // 显示双倍金币弹窗\r\n    showDoubleCoin() {\r\n        this.nodDoubleCoin.active = true;\r\n        this.labCoinInPanel.string = this.coinNum + '';\r\n        this.scheduleOnce(() => {\r\n            this.nodDoubleCoin.getChildByName('content').active = true;\r\n        }, 1)\r\n    }\r\n\r\n    public playFinish(playResult: RoomPlayFinishS2C, nodHead) {\r\n        this.coinNum = playResult.score;\r\n        this.showGameData(playResult, nodHead)\r\n\r\n        this.showResultUI(playResult.winSide);\r\n        this.headAction();\r\n    }\r\n\r\n    // 显示游戏数据\r\n    showGameData(playResult: RoomPlayFinishS2C, nodHead) {\r\n        var self = this;\r\n        cc.log(playResult.score);\r\n        this.labCoin.string = playResult.score + '';\r\n        let node = cc.instantiate(nodHead);\r\n        node.parent = this.nodHead.getChildByName('head');\r\n        node.setPosition(0, 0);\r\n        node.getComponent('PlaymateHead').setSize(200, 200);\r\n\r\n        let myStar = Home.DataPlayer.FortuneStar;\r\n        let sysHonorId;\r\n        let showStarNum;\r\n        if (Play.DataPvp.isGradeUp()) {\r\n            sysHonorId = Misc.calcHonorId(myStar - 1);\r\n            showStarNum = Misc.calcShowStarCount(myStar);\r\n        } else {\r\n            sysHonorId = Misc.calcHonorId(myStar);\r\n            showStarNum = Misc.calcShowStarCount(myStar);\r\n        }\r\n        cc.loader.loadRes('res/rank/rank-' + sysHonorId, cc.SpriteFrame, (err, spriteFrame) => {\r\n            self.sprGrade.spriteFrame = spriteFrame;\r\n        });\r\n        this.showStar(showStarNum);\r\n\r\n        this.labSaveAnimalCoint.string = playResult.saveAnimalCount + '';\r\n        this.labWinCount.string = playResult.winCount + '';// 连胜\r\n        this.labDailyCount.string = playResult.activeBuffCount + '';\r\n\r\n        var daliyRate = playResult.dailyWin * 100 / playResult.dailyCnt;\r\n        if (!daliyRate) {\r\n            daliyRate = 0;\r\n        }\r\n\r\n        var WeekRate = playResult.weeklyWin * 100 / playResult.weeklyCnt\r\n        if (!WeekRate) {\r\n            WeekRate = 0;\r\n        }\r\n\r\n        this.labRateDailyWin.string = Math.floor(daliyRate) + '%';\r\n        this.labRateWeekWin.string = Math.floor(WeekRate) + '%';\r\n    }\r\n\r\n    // 显示游戏结果的ui\r\n    showResultUI(winSide) {\r\n        //背景光环转动效果\r\n        let shine_action = cc.repeatForever(cc.rotateBy(4, 360));\r\n\r\n        //胜利、失败、平局 显示的动态效果\r\n        let action = cc.sequence(\r\n            cc.callFunc(function (target) {\r\n                target.scale = 2;\r\n            }, this),\r\n            cc.scaleTo(0.1, 0.9, 0.9),\r\n            cc.scaleTo(0.01, 1, 1)\r\n        );\r\n\r\n        if (winSide == 0) {\r\n            // 平局\r\n            this.PlayUI.Audio.victory();\r\n            this.tvAction(false);\r\n            this.nodShineSprite.active = false;\r\n            this.bgParticle.active = false;\r\n\r\n            this.nodWinBgSprite.active = true;\r\n            this.nodLoseBgSprite.active = false;\r\n\r\n            this.nodWinSprite.active = false;\r\n            this.nodLoseSprite.active = false;\r\n            this.nodDrawSprite.active = true;\r\n            this.nodDrawSprite.runAction(action);\r\n            this.labCoin.node.active = false;\r\n            this.labLoseOrWin.string = '平局未能获得金币';\r\n            this.setContinueBtn(1);\r\n        } else if (winSide == Play.DataPlay.MySide) {\r\n            // 胜利\r\n            this.PlayUI.Audio.victory();\r\n            this.tvAction(true);\r\n            this.nodShineSprite.active = true;\r\n            this.nodShineSprite.runAction(shine_action);\r\n            this.bgParticle.active = true;\r\n            this.bgParticle.opacity = 255;\r\n\r\n            this.nodWinBgSprite.active = true;\r\n            this.nodLoseBgSprite.active = false;\r\n\r\n            this.nodWinSprite.active = true;\r\n            this.nodLoseSprite.active = false;\r\n            this.nodDrawSprite.active = false;\r\n            this.nodWinSprite.runAction(action);\r\n            this.labCoin.node.active = true;;\r\n            this.labLoseOrWin.string = '您赢得金币:';\r\n\r\n            this.setContinueBtn(1);\r\n            this.showDoubleCoin();\r\n        } else {\r\n            // 失败\r\n            this.PlayUI.Audio.lose();\r\n            this.tvAction(false);\r\n            this.nodShineSprite.active = false;\r\n            this.bgParticle.active = false;\r\n\r\n            this.nodWinBgSprite.active = false;\r\n            this.nodLoseBgSprite.active = true;\r\n\r\n            this.nodWinSprite.active = false;\r\n            this.nodLoseSprite.active = true;\r\n            this.nodDrawSprite.active = false;\r\n            this.nodLoseSprite.runAction(action);\r\n            this.labCoin.node.active = true;;\r\n            this.labLoseOrWin.string = '您输掉金币:';\r\n            this.setContinueBtn(0);\r\n        }\r\n    }\r\n\r\n    // 头像突出的动态效果\r\n    headAction() {\r\n        let head_frame = this.nodHead;\r\n        let head_action = cc.sequence(cc.callFunc(function (target) {\r\n            target.y = (target.y - 200)\r\n        }, this),\r\n            cc.moveBy(0.2, cc.v2(0, 220)),\r\n            cc.moveBy(0.01, cc.v2(0, -20)));\r\n        head_frame.runAction(head_action);\r\n    }\r\n\r\n    // 收取双倍金币\r\n    doubleCoin() {\r\n        GamePersist.INSTANCE.blockInput();\r\n        this.showAdDoubleCoin();\r\n    }\r\n\r\n    // 显示获得金币效果\r\n    showGetCoin() {\r\n        if (!this.canLoadUIGetProp) {\r\n            return;\r\n        }\r\n        this.canLoadUIGetProp = false;\r\n        UIFunc.openUI('UIGetProp', (node) => {\r\n            node.getComponent('UIGetProp').achieveCoin(this.coinNum, () => {\r\n                this.canLoadUIGetProp = true;\r\n\r\n                this.nodDoubleCoin.active = false;\r\n                this.labCoin.string = this.coinNum * 2 + '';\r\n                UIFunc.closeUI('UIGetProp', () => { })\r\n            });\r\n        })\r\n    }\r\n\r\n    showAdDoubleCoin() {\r\n        if (window['Partner'].supportAd()) {\r\n            window['Partner'].showVideoAd(() => {\r\n                ShareManager.Instance.notifyWatchAdDoubleCoin();\r\n                this.showGetCoin();\r\n            }, () => {\r\n                ShareManager.Instance.share(7);\r\n            });\r\n        } else {\r\n            GamePersist.INSTANCE.toast('不支持广告');\r\n            ShareManager.Instance.notifyWatchAdDoubleCoin();\r\n            this.showGetCoin();\r\n        }\r\n    }\r\n\r\n    // 跳过双倍收取\r\n    hideDoubleCoin() {\r\n        this.nodDoubleCoin.active = false;\r\n    }\r\n}"]}