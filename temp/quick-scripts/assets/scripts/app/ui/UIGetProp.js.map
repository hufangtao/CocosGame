{"version":3,"sources":["UIGetProp.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\ui","sourcesContent":["import DYAudio from \"../../dyGame/DYAudio\";\r\nimport { PGoods } from \"../common/net/proto/ProtoType\";\r\nimport { Home } from \"../module/Modules\";\r\nimport { UIFunc } from \"../common/UIFunc\";\r\nimport Prop from \"../component/page/home/Prop\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class UIGetProp extends cc.Component {\r\n\r\n    @property({ type: cc.AudioClip })\r\n    audGetProp: cc.AudioClip = null;\r\n    @property(cc.Node)\r\n    nodMoreProp: cc.Node = null;\r\n\r\n    Prop: Prop;\r\n    onEnable() {\r\n        let nodBuffs = this.node.getChildByName('nodOneProp').getChildByName('buffs');\r\n        nodBuffs.scale = 1;\r\n        nodBuffs.setPosition(0, 0);\r\n\r\n        this.nodMoreProp.active = false;\r\n        this.node.getChildByName('nodOneProp').active = false;\r\n\r\n        for (let i = 0; i < nodBuffs.children.length - 3; ++i) {\r\n            nodBuffs.children[i].active = false;\r\n            nodBuffs.children[i].setPosition(0, 0);\r\n        }\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    // 播放获得道具音效\r\n    playAudioGetProp() {\r\n        DYAudio.playEffect(this.audGetProp, false);\r\n    }\r\n\r\n    achieveCoin(coinCount, cb) {\r\n        this.node.active = true;\r\n        let nodBuffs = this.node.getChildByName('nodOneProp').getChildByName('buffs');\r\n        nodBuffs.getChildByName('labCount').getComponent(cc.Label).string = coinCount + '';\r\n\r\n        nodBuffs.getChildByName('coin').active = true;\r\n        let animation = this.node.getComponent(cc.Animation);\r\n        animation['closeProp'] = () => {\r\n            this.node.active = false;\r\n            cb && cb();\r\n        }\r\n        animation.play('getProp2');\r\n    }\r\n\r\n    // 多个道具的展示\r\n    moreProp(goodList, cb) {\r\n        // 初始化道具图标及数量\r\n        let nodGoods = this.nodMoreProp.getChildByName('nodGoods');\r\n        for (let i = 0; i < nodGoods.children.length; ++i) {\r\n            nodGoods.children[i].active = false;\r\n        }\r\n        let nodGood;\r\n        for (let i = 0; i < goodList.length; ++i) {\r\n            nodGood = nodGoods.children[i];\r\n            if (!nodGood) {\r\n                break;\r\n            }\r\n            nodGood.active = true;\r\n            for (let j = 0; j < nodGood.children.length - 2; ++j) {\r\n                nodGood.children[j].active = false;\r\n            }\r\n            nodGood.getChildByName('labCount').getComponent(cc.Label).string = goodList[i].goodsNum + '';\r\n            this.showGoodById(nodGood, goodList[i].goodsId);\r\n        }\r\n\r\n        let animation = this.node.getComponent(cc.Animation);\r\n        animation['closeProp'] = () => {\r\n            cb && cb();\r\n        }\r\n        animation.play('getProp3');\r\n    }\r\n\r\n    // 根据goodid显示\r\n    showGoodById(node, id) {\r\n        switch (id) {\r\n            case 1:\r\n                node.getChildByName('buff1').active = true;\r\n                break;\r\n            case 2:\r\n                node.getChildByName('buff2').active = true;\r\n                break;\r\n            case 3:\r\n                node.getChildByName('buff3').active = true;\r\n                break;\r\n            case 4:\r\n                node.getChildByName('buff4').active = true;\r\n                break;\r\n            case 11:\r\n                node.getChildByName('coin').active = true;\r\n                break;\r\n            case 12:\r\n                break;\r\n            case 13:\r\n                break;\r\n            case 14:\r\n                node.getChildByName('energy').active = true;\r\n                break;\r\n\r\n        }\r\n    }\r\n\r\n\r\n    // 广告获得的道具\r\n    hadGetProp = false;\r\n    scorePvpAchieveProp() {\r\n        if (this.hadGetProp) {\r\n            return;\r\n        }\r\n        this.hadGetProp = true;\r\n        setTimeout(() => {\r\n            this.hadGetProp = false;\r\n        }, 1000);\r\n        let param;\r\n        let prop = new PGoods();\r\n        for (let i = 0; i < Home.DataPlayer.PlayerGoodsData.length; ++i) {\r\n            let hadParam = false;\r\n            for (let j = 0; j < Home.DataPlayer.PlayerGoodsDataLast.length; ++j) {\r\n                if (Home.DataPlayer.PlayerGoodsData[i].goodsId == Home.DataPlayer.PlayerGoodsDataLast[j].goodsId) {\r\n                    if (Home.DataPlayer.PlayerGoodsData[i].goodsNum == Home.DataPlayer.PlayerGoodsDataLast[j].goodsNum) {\r\n                        hadParam = true;\r\n                    } else {\r\n                        param = Home.DataPlayer.PlayerGoodsData[i];\r\n                        hadParam = true;\r\n                        prop.goodsId = Home.DataPlayer.PlayerGoodsData[i].goodsId;\r\n                        prop.goodsNum = Home.DataPlayer.PlayerGoodsData[i].goodsNum - Home.DataPlayer.PlayerGoodsDataLast[j].goodsNum;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            if (!hadParam) {\r\n                param = Home.DataPlayer.PlayerGoodsData[i];\r\n                prop.goodsId = Home.DataPlayer.PlayerGoodsData[i].goodsId;\r\n                prop.goodsNum = Home.DataPlayer.PlayerGoodsData[i].goodsNum;\r\n            }\r\n        }\r\n        Home.DataPlayer.UpdataPlayerGoodsLast([param]);\r\n        // console.log('获得道具', prop);\r\n        this.scorePvpPlayGetProp(prop.goodsId, prop.goodsNum);\r\n    }\r\n\r\n    scorePvpPlayGetProp(index, count) {\r\n        let nodBuffs = this.node.getChildByName('nodOneProp').getChildByName('buffs');\r\n        nodBuffs.scale = 1;\r\n        this.node.active = true;\r\n        this.showBuffByIndex(index, count);\r\n        let animation = this.node.getComponent(cc.Animation);\r\n        animation['closeProp'] = () => {\r\n            this.node.active = false;\r\n            UIFunc.closeUI('UIGetProp',()=>{});\r\n        }\r\n        animation.play('getProp2');\r\n    }\r\n\r\n    // home场景广告获得的道具\r\n    homeAchieveProp(Prop) {\r\n        this.Prop = Prop;\r\n        let param;\r\n        let prop = new PGoods();\r\n        for (let i = 0; i < Home.DataPlayer.PlayerGoodsData.length; ++i) {\r\n            let hadParam = false;\r\n            for (let j = 0; j < Home.DataPlayer.PlayerGoodsDataLast.length; ++j) {\r\n                if (Home.DataPlayer.PlayerGoodsData[i].goodsId == Home.DataPlayer.PlayerGoodsDataLast[j].goodsId) {\r\n                    if (Home.DataPlayer.PlayerGoodsData[i].goodsNum == Home.DataPlayer.PlayerGoodsDataLast[j].goodsNum) {\r\n                        hadParam = true;\r\n                    } else {\r\n                        param = Home.DataPlayer.PlayerGoodsData[i];\r\n                        hadParam = true;\r\n                        prop.goodsId = Home.DataPlayer.PlayerGoodsData[i].goodsId;\r\n                        prop.goodsNum = Home.DataPlayer.PlayerGoodsData[i].goodsNum - Home.DataPlayer.PlayerGoodsDataLast[j].goodsNum;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            if (!hadParam) {\r\n                param = Home.DataPlayer.PlayerGoodsData[i];\r\n                prop.goodsId = Home.DataPlayer.PlayerGoodsData[i].goodsId;\r\n                prop.goodsNum = Home.DataPlayer.PlayerGoodsData[i].goodsNum;\r\n            }\r\n        }\r\n        Home.DataPlayer.UpdataPlayerGoodsLast([param]);\r\n        // console.log('获得道具', prop);\r\n        this.playGetProp(prop.goodsId, prop.goodsNum);\r\n    }\r\n\r\n    // 获取道具的位置\r\n    getPropPsByIndex(index: number): cc.Vec2 {\r\n        let nodProp = this.Prop.nodBuffSlot.children[index - 1];\r\n        if (!nodProp) {\r\n            return cc.v2(0, 0);\r\n        }\r\n        let position = nodProp.parent.convertToWorldSpaceAR(nodProp.position);\r\n        return this.node.getChildByName('nodOneProp').convertToNodeSpaceAR(position);\r\n    }\r\n\r\n    // 根据道具显示图标\r\n    showBuffByIndex(index: number, count: number) {\r\n        let nodes = this.node.getChildByName('nodOneProp').getChildByName('buffs');\r\n        nodes.getChildByName('labCount').getComponent(cc.Label).string = count + '';\r\n        nodes.getChildByName('coin').active = false;\r\n        for (let i = 0; i < nodes.children.length - 3; ++i) {\r\n            if (i === index - 1) {\r\n                nodes.children[i].active = true;\r\n            } else {\r\n                nodes.children[i].active = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    // 播放获得道具动画\r\n    playGetProp(index: number, count: number) {\r\n        this.playAudioGetProp();\r\n        this.node.getChildByName('nodOneProp').getChildByName('buffs').position = cc.v2(0, 0);\r\n        let animation = this.node.getComponent(cc.Animation);\r\n        animation.stop('getProp');\r\n        let position = this.getPropPsByIndex(index);\r\n        this.showBuffByIndex(index, count);\r\n        animation['move'] = () => {\r\n            this.node.getChildByName('nodOneProp').getChildByName('buffs').runAction(cc.sequence(\r\n                cc.spawn(\r\n                    cc.moveTo(0.5, position),\r\n                    cc.scaleTo(0.5, 0.2, 0.2)\r\n                ),\r\n                cc.callFunc(() => {\r\n                    this.Prop.updateBuff();\r\n                    UIFunc.closeUI('UIGetProp', () => { })\r\n                })\r\n            ));\r\n        }\r\n        animation.play('getProp');\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}