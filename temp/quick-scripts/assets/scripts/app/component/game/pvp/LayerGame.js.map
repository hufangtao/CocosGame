{"version":3,"sources":["LayerGame.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\component\\game\\pvp","sourcesContent":["import PanelHeader from \"./PanelHeader\";\r\n\r\nimport {\r\n    TILE_TYPE,\r\n    MAX_MATCH,\r\n    BOMB_TYPE,\r\n    GRID_TYPE,\r\n    GUIDE_TYPE, TILE_ZINDEX, BLOCKDES_TYPE, BLOCK_COLOR, WALL_TYPE, PVP_FRUIT_COLOR_CNT, TEACH_FRUIT_COLOR_CNT, PlaySide, ColorType, FaceType, FaceAnimationType\r\n} from \"../PlayDefine\";\r\nimport { Play, Home } from \"../../../module/Modules\";\r\nimport PlayUI from \"./PlayUI\";\r\nimport PvpGuide from \"./PvpGuide\";\r\nimport StateMgr from \"../pve/StateMgr\";\r\nimport * as Algorithm from \"../Algorithm\";\r\nimport { Bottom } from \"./Bottom\";\r\nimport { PlayStolenAnimalC2S, PlayBoardStatusC2S } from \"../../../common/net/proto/mods/ProtoSectionPlay\";\r\nimport NetUtil from \"../../../common/net/NetUtil\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class LayerGame extends cc.Component {\r\n    @property(cc.Prefab)\r\n    pfbScore: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    pfbBlock: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    pfbBomb: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    pfbObstacle: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    pfbTileBg: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    pfbEncourage: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    pfbWall: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    pfbParticle: cc.Prefab = null;\r\n\r\n    @property(cc.Node)\r\n    panelTile: cc.Node = null;\r\n    @property(cc.Node)\r\n    panelSpine: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    panelParticle: cc.Node = null;\r\n\r\n    @property(PanelHeader)\r\n    panelHeader: PanelHeader = null;\r\n\r\n    @property(PvpGuide)\r\n    pvpGuide: PvpGuide = null;\r\n\r\n    @property(cc.Node)\r\n    panelGrid: cc.Node = null;\r\n\r\n    @property(Bottom)\r\n    bottom: Bottom = null;\r\n\r\n    @property(cc.SpriteFrame)\r\n    spfTileBg: cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    spfTileBgLight: cc.SpriteFrame = null;\r\n\r\n    @property(cc.Node)\r\n    nodCloud: cc.Node = null;\r\n\r\n    public pvpTeach = false;\r\n    public pvpAi = false;\r\n    private spawnedBomb = false;\r\n    private first = true;\r\n    private firstDown = false;\r\n    private firstBombCol = true;\r\n    private firstBombColStr = true;\r\n    private firstBombA = true;\r\n    private firstSave = true;\r\n    private firstGenFlower = true;\r\n    private saveDown = 0;\r\n\r\n    public PlayUI: PlayUI = null;\r\n\r\n    public remindTime = 0;// 提示时间\r\n    public oneSec = 0;  // 一秒累加时间\r\n    public accumulatorTime = 0; //蓄力条刷新时间\r\n\r\n    public tiles = [];\r\n    private tileBgs = [];\r\n\r\n    private hadRemind = false;\r\n\r\n    public maxMatchCount = 0;\r\n    public matchCountSum = 0; //蓄力条每次计数\r\n\r\n    public canTouch = false;\r\n\r\n    public bombOver = true;// 炸弹结束\r\n    public downOver = true;// 下落结束\r\n\r\n    public onLoad() {\r\n        this.bottom.init(this);\r\n    }\r\n\r\n    public init(playUI) {\r\n        this.PlayUI = playUI;\r\n    }\r\n\r\n    public start() {\r\n    }\r\n\r\n    public guide() {\r\n        if (this.pvpTeach) {\r\n            this.pvpGuide.setGuide(GUIDE_TYPE.MATCH1);\r\n            this.pvpGuide.setGuide(GUIDE_TYPE.MATCH2);\r\n        }\r\n    }\r\n\r\n    public gameBegain() {\r\n        this.bottom.initCanTouchSlot();\r\n        Play.DataPvp.initFreeNodes();\r\n        this.panelTile.destroyAllChildren();\r\n        this.panelParticle.destroyAllChildren();\r\n        this.panelSpine.destroyAllChildren();\r\n        this.bombOver = true;\r\n\r\n        this.destroyAllTilesOver = true;\r\n        this.remindTime = 0;\r\n        this.oneSec = 0;\r\n        this.hadRemind = false;\r\n\r\n        this.panelTile.parent.getComponent('Board').initMap(this);\r\n    }\r\n\r\n\r\n    // 发送棋盘上宠物个数\r\n    sendBoardPetCnt() {\r\n        let playBoardStatus = new PlayBoardStatusC2S();\r\n        playBoardStatus.animalNum = Play.DataPvp.getBoardPetCnt();\r\n        NetUtil.SendMsg(playBoardStatus);\r\n    }\r\n\r\n    public operateLogic(touchX, touchY, tileType, type, subType, isTouch = false) {\r\n        if (tileType == TILE_TYPE.BLOCK) {\r\n            this.destroyBlock(touchX, touchY, type);\r\n        } else if (tileType == TILE_TYPE.BOMB) {\r\n            this.ignite(touchX, touchY, type, null, isTouch);\r\n        }\r\n    }\r\n\r\n    ignite(touchX, touchY, type, arr, isTouch = false) {\r\n        switch (type) {\r\n            case BOMB_TYPE.BOMB_COLUMN:\r\n                this.bombColumn(touchX, touchY, isTouch, arr);\r\n                break;\r\n            case BOMB_TYPE.BOMB_ROW:\r\n                this.bombRow(touchX, touchY, isTouch, arr);\r\n                break;\r\n            case BOMB_TYPE.BOMB_COLUMNSTRONG:\r\n                this.bombColumnStrong(touchX, touchY, isTouch, arr);\r\n                break;\r\n            case BOMB_TYPE.BOMB_ROWSTRONG:\r\n                this.bombRowStrong(touchX, touchY, isTouch, arr);\r\n                break;\r\n            case BOMB_TYPE.BOMB_AROUND:\r\n                this.bombAround(touchX, touchY, isTouch);\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    private randomMore(count, length, arr, cb) {\r\n        if (count > length) {\r\n            return\r\n        }\r\n        let index = Math.floor(Math.random() * length);\r\n        for (let i = 0; i < arr.length; ++i) {\r\n            if (index == arr[i]) {\r\n                this.randomMore(count, length, arr, cb);\r\n                return;\r\n            }\r\n        }\r\n        if (cb(index)) {\r\n            this.randomMore(count, length, arr, cb);\r\n            return;\r\n        }\r\n        arr.push(index);\r\n        count--;\r\n        if (count > 0) {\r\n            this.randomMore(count, length, arr, cb);\r\n        }\r\n    }\r\n\r\n    // 每操作一次,改变爆竹方向\r\n    private onceOperate() {\r\n        this.changeCracker();\r\n    }\r\n\r\n    // 改变爆竹方向\r\n    private changeCracker() {\r\n        for (let x = 0; x < this.tiles.length; ++x) {\r\n            for (let y = 0; y < this.tiles[0].length; ++y) {\r\n                if (this.tiles[x][y] && this.tiles[x][y].tileType === TILE_TYPE.BOMB) {\r\n                    this.tiles[x][y].changeType();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 增加操作数，点击炸弹不计入\r\n     */\r\n    addOperateCount() {\r\n        Play.DataPvp.operateCount++;\r\n    }\r\n    // 点击方块\r\n    private async destroyBlock(touchX, touchY, curNum) {\r\n        var self = this;\r\n        this.stopRemindAction();\r\n        var arr = [];\r\n        var scanArr = [];\r\n        Algorithm.scanAround(touchX, touchY, -1, -1, curNum, arr, scanArr, this.tiles, false);\r\n\r\n        if (arr.length > 1) {\r\n            this.addOperateCount();\r\n            this.onceOperate();\r\n\r\n            if (this.pvpGuide) {\r\n                this.firstDown = true;\r\n            }\r\n            this.matchCountSum += arr.length;\r\n            if (this.maxMatchCount < arr.length) {\r\n                this.maxMatchCount = arr.length;\r\n            }\r\n\r\n            this.hadRemind = true;\r\n            this.remindTime = 0;\r\n            if (arr.length >= 5) {\r\n                this.PlayUI.Audio.spawnBomb();\r\n\r\n                let bomb;\r\n                let type;\r\n                for (var index in arr) {\r\n                    var x = Number(arr[index].split(\"#\")[0]);\r\n                    var y = Number(arr[index].split(\"#\")[1]);\r\n                    this.tiles[x][y].node.stopAllActions();\r\n                    if (x == touchX && y == touchY) {\r\n                        Algorithm.tileBgEffect(this, 0, x, y, 0.5);\r\n                        bomb = this.tiles[x][y].node;\r\n                        type = bomb.type;\r\n                        bomb.zIndex = TILE_ZINDEX.ACTION;\r\n                    }\r\n                }\r\n\r\n                let actionArr = [];\r\n                for (var index in arr) {\r\n                    var x = Number(arr[index].split(\"#\")[0]);\r\n                    var y = Number(arr[index].split(\"#\")[1]);\r\n                    this.affectAround(x, y);\r\n\r\n                    Algorithm.tileBgEffect(this, 0, x, y, 0.5);\r\n                    if (this.tiles[x][y].node != bomb) {\r\n                        this.tiles[x][y].node.zIndex = TILE_ZINDEX.ACTION_LOW;\r\n                    }\r\n                    let blockComponent = self.tiles[x][y];\r\n                    self.tiles[x][y] = null;\r\n                    blockComponent.canTouch = false;\r\n                    let position = blockComponent.node.position.sub(bomb.position);\r\n                    position.mulSelf(0.1);\r\n                    (function (blockComponent, position) {\r\n                        var action = cc.sequence(\r\n                            cc.spawn(\r\n                                cc.scaleTo(0.05, 1.1),\r\n                                cc.moveBy(0.05, position),\r\n                            ),\r\n                            cc.delayTime(0.05),\r\n                            cc.moveTo(0.1, bomb.getPosition()).easing(cc.easeQuarticActionIn()),\r\n                            cc.callFunc(() => {\r\n                                blockComponent.destroyTile(BLOCKDES_TYPE.NOACTION_NODES);\r\n                            })\r\n                        )\r\n                        Algorithm.addAction(actionArr, blockComponent.node, action);\r\n                    })(blockComponent, position);\r\n                }\r\n\r\n                self.showEncourage(arr);\r\n\r\n                self.chooseBomb(touchX, touchY, arr.length);\r\n\r\n                Play.DataPvp.stepSpawnPet += arr.length;\r\n                // 生成宠物\r\n                // if (Play.DataPvp.objectiveSpawnCnt[0] - this.panelHeader.myAnimalCount < 8) {\r\n                //     this.spawnPets(touchX, touchY, arr);\r\n                // }\r\n                await Algorithm.runActions(actionArr);\r\n\r\n                this.spawnedBomb = true;\r\n                this.canTouch = true;\r\n                this.moveAllTileDown();\r\n            } else {\r\n                //执行消除\r\n                this.PlayUI.Audio.strip();\r\n                for (var index in arr) {\r\n                    var x = Number(arr[index].split(\"#\")[0]);\r\n                    var y = Number(arr[index].split(\"#\")[1]);\r\n                    this.affectAround(x, y);\r\n\r\n                    // 播放粒子\r\n                    Algorithm.tileBgEffect(this, 0, x, y, 0.5);\r\n                    // 销毁方块\r\n                    this.tiles[x][y].node.zIndex = TILE_ZINDEX.ACTION_LOW;\r\n                    this.tiles[x][y].destroyTile(BLOCKDES_TYPE.ACTION_FIRSTDES);\r\n\r\n                }\r\n                // await Algorithm.delay(0.4);\r\n                Play.DataPvp.stepSpawnPet += arr.length;\r\n                this.moveAllTileDown();\r\n\r\n            }\r\n        } else {\r\n            this.tiles[touchX][touchY].node.stopActionByTag(3);\r\n            let action = cc.sequence(\r\n                cc.scaleTo(0.1, 1.1, 1.1),\r\n                cc.scaleTo(0.2, 0.9, 0.9),\r\n                cc.scaleTo(0.1, 1.1, 1.1),\r\n                cc.scaleTo(0.2, 0.9, 0.9),\r\n                cc.scaleTo(0.1, 1.1, 1.1),\r\n                cc.scaleTo(0.2, 0.9, 0.9),\r\n                cc.scaleTo(0.15, 1.05, 1.05),\r\n                cc.scaleTo(0.05, 1, 1),\r\n                cc.delayTime(1.5),\r\n            )\r\n            this.tiles[touchX][touchY].node.runAction(action);\r\n            action.setTag(3);\r\n        }\r\n    }\r\n\r\n    private affectAround(x, y) {\r\n        if (x - 1 >= 0 && x - 1 < 8 && y >= 0 && y < 9) {\r\n            this.destroyprop(x - 1, y);\r\n        }\r\n        if (x + 1 >= 0 && x + 1 < 8 && y >= 0 && y < 9) {\r\n            this.destroyprop(x + 1, y);\r\n        }\r\n        if (x >= 0 && x < 8 && y + 1 >= 0 && y + 1 < 9) {\r\n            this.destroyprop(x, y + 1);\r\n        }\r\n        if (x >= 0 && x < 8 && y - 1 >= 0 && y - 1 < 9) {\r\n            this.destroyprop(x, y - 1);\r\n        }\r\n    }\r\n\r\n    private destroyprop(x, y) {\r\n        if (this.tiles[x][y] && this.tiles[x][y].tileType === TILE_TYPE.WALL) {\r\n            this.tiles[x][y].affected();\r\n        }\r\n    }\r\n\r\n    // 选择生成炸弹\r\n    chooseBomb(x, y, length) {\r\n        if (Play.DataPvp.isSpawnStrongRocket) {\r\n            this.spawnBomb(x, y, BOMB_TYPE.BOMB_COLUMNSTRONG);\r\n        } else {\r\n            this.spawnBomb(x, y, BOMB_TYPE.BOMB_COLUMN);\r\n        }\r\n\r\n        return;\r\n\r\n        if (length < 7) {\r\n            this.spawnBomb(x, y, BOMB_TYPE.BOMB_COLUMN);\r\n        } else {\r\n            this.spawnBomb(x, y, BOMB_TYPE.BOMB_COLUMNSTRONG);\r\n        }\r\n    }\r\n\r\n    // 所有炸弹是否炸完\r\n    isBombOver(arr) {\r\n        for (let i = 0; i < arr.length; ++i) {\r\n            if (!arr[i].isDestroying) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    // 点击炸弹列\r\n    private async bombColumn(touchX, touchY, isTouch, arr) {\r\n        //console.log('bombcol')\r\n        var self = this;\r\n        this.bombOver = false;\r\n\r\n        var nodBomb = this.tiles[touchX][touchY].node;\r\n        var bombComponent = this.tiles[touchX][touchY];\r\n        if (bombComponent.tileType !== TILE_TYPE.BOMB) {\r\n            return;\r\n        }\r\n        this.stopRemindAction();\r\n        this.remindTime = 0;\r\n        // this.canTouch = false;\r\n        this.PlayUI.Audio.bombRow();\r\n        nodBomb.getComponent(cc.Animation).play('aniBombCol');\r\n        Algorithm.bothSiedAct(touchX, touchY, this.tiles);\r\n\r\n        this.tiles[touchX][touchY] = null;\r\n        Algorithm.tileBgEffect(this, 0, touchX, touchY, 0.8);\r\n\r\n        arr = arr || [];\r\n        arr.push(bombComponent);\r\n        for (let i = touchY + 1, j = touchY - 1; i < self.tiles[0].length || j >= 0; ++i, --j) {\r\n            self.bombUp(touchX, touchY, touchX, i, bombComponent, arr);\r\n            self.bombDown(touchX, touchY, touchX, j, bombComponent, arr);\r\n        }\r\n\r\n        await Algorithm.delay(0.4);\r\n        if (isTouch) {\r\n            this.onceOperate();\r\n        }\r\n\r\n        bombComponent.destroyTile();\r\n        if (this.isBombOver(arr)) {\r\n            this.showEncourage(arr);\r\n        }\r\n        this.canTouch = true;\r\n        this.bombOver = true;\r\n        self.moveAllTileDown();\r\n    }\r\n    // 点击炸弹行\r\n    private async bombRow(touchX, touchY, isTouch, arr) {\r\n        var self = this;\r\n        this.bombOver = false;\r\n\r\n        var nodBomb = this.tiles[touchX][touchY].node;\r\n        var bombComponent = this.tiles[touchX][touchY];\r\n        if (bombComponent.tileType !== TILE_TYPE.BOMB) {\r\n            return;\r\n        }\r\n\r\n        this.stopRemindAction();\r\n        this.remindTime = 0;\r\n        // this.canTouch = false;\r\n        this.PlayUI.Audio.bombRow();\r\n        nodBomb.rotation = 90;\r\n        nodBomb.getComponent(cc.Animation).play('aniBombCol');\r\n        // Algorithm.bothSiedAct(touchX, touchY, this.tiles);\r\n        this.tiles[touchX][touchY] = null;\r\n        Algorithm.tileBgEffect(this, 0, touchX, touchY, 0.8);\r\n\r\n        arr = arr || [];\r\n        arr.push(bombComponent);\r\n        for (let i = touchX + 1, j = touchX - 1; i < self.tiles.length || j >= 0; ++i, --j) {\r\n            self.bombRight(touchX, touchY, touchY, i, bombComponent, arr);\r\n            self.bombLeft(touchX, touchY, touchY, j, bombComponent, arr);\r\n        }\r\n\r\n        await Algorithm.delay(0.4);\r\n        if (isTouch) {\r\n            this.onceOperate();\r\n        }\r\n\r\n        bombComponent.destroyTile();\r\n        if (this.isBombOver(arr)) {\r\n            this.showEncourage(arr);\r\n        }\r\n        this.canTouch = true;\r\n        this.bombOver = true;\r\n        self.moveAllTileDown();\r\n    }\r\n\r\n    // 点击炸弹列加强\r\n    private async bombColumnStrong(touchX, touchY, isTouch, arr) {\r\n        //console.log('bombcol')\r\n        var self = this;\r\n        this.bombOver = false;\r\n\r\n        var nodBomb = this.tiles[touchX][touchY].node;\r\n        var bombComponent = this.tiles[touchX][touchY];\r\n        if (bombComponent.tileType !== TILE_TYPE.BOMB) {\r\n            return;\r\n        }\r\n        this.stopRemindAction();\r\n        this.remindTime = 0;\r\n        // this.canTouch = false;\r\n        this.PlayUI.Audio.bombRow();\r\n        nodBomb.getComponent(cc.Animation).play('aniBombColStrong');\r\n        Algorithm.bothSiedAct(touchX, touchY, this.tiles);\r\n\r\n        this.tiles[touchX][touchY] = null;\r\n        Algorithm.tileBgEffect(this, 0, touchX, touchY, 0.8);\r\n\r\n        arr = arr || [];\r\n        arr.push(bombComponent);\r\n        for (let i = touchY + 1, j = touchY - 1; i < self.tiles[0].length || j >= 0; ++i, --j) {\r\n            self.bombUp(touchX, touchY, touchX, i, bombComponent, arr);\r\n            self.bombDown(touchX, touchY, touchX, j, bombComponent, arr);\r\n        }\r\n\r\n        await Algorithm.delay(0.1);\r\n        let tX = touchX - 1;\r\n        if (tX >= 0) {\r\n            for (let i = touchY, j = touchY; i < self.tiles[0].length || j >= 0; ++i, --j) {\r\n                self.bombUp(touchX, touchY, tX, i, bombComponent, arr);\r\n                self.bombDown(touchX, touchY, tX, j, bombComponent, arr);\r\n            }\r\n        }\r\n\r\n        tX = touchX + 1;\r\n        if (tX < self.tiles[0].length) {\r\n            for (let i = touchY, j = touchY; i < self.tiles[0].length || j >= 0; ++i, --j) {\r\n                self.bombUp(touchX, touchY, tX, i, bombComponent, arr);\r\n                self.bombDown(touchX, touchY, tX, j, bombComponent, arr);\r\n            }\r\n        }\r\n\r\n        await Algorithm.delay(0.4);\r\n        if (isTouch) {\r\n            this.onceOperate();\r\n        }\r\n        bombComponent.destroyTile();\r\n        if (this.isBombOver(arr)) {\r\n            this.showEncourage(arr);\r\n        }\r\n        this.canTouch = true;\r\n        this.bombOver = true;\r\n        self.moveAllTileDown();\r\n    }\r\n\r\n    // 点击炸弹行加强\r\n    private async bombRowStrong(touchX, touchY, isTouch, arr) {\r\n        var self = this;\r\n        this.bombOver = false;\r\n\r\n        var nodBomb = this.tiles[touchX][touchY].node;\r\n        var bombComponent = this.tiles[touchX][touchY];\r\n        if (bombComponent.tileType !== TILE_TYPE.BOMB) {\r\n            return;\r\n        }\r\n        this.stopRemindAction();\r\n        this.remindTime = 0;\r\n        this.canTouch = false;\r\n        this.PlayUI.Audio.bombRow();\r\n        nodBomb.rotation = 90;\r\n        nodBomb.getComponent(cc.Animation).play('aniBombColStrong');\r\n        // Algorithm.bothSiedAct(touchX, touchY, this.tiles);\r\n        this.tiles[touchX][touchY] = null;\r\n        Algorithm.tileBgEffect(this, 0, touchX, touchY, 0.8);\r\n\r\n\r\n        arr = arr || [];\r\n        arr.push(bombComponent);\r\n        for (let i = touchX + 1, j = touchX - 1; i < self.tiles.length || j >= 0; ++i, --j) {\r\n            self.bombRight(touchX, touchY, touchY, i, bombComponent, arr);\r\n            self.bombLeft(touchX, touchY, touchY, j, bombComponent, arr);\r\n        }\r\n        await Algorithm.delay(0.2);\r\n\r\n        let tY = touchY - 1;\r\n        if (tY >= 0) {\r\n            for (let i = touchX, j = touchX; i < self.tiles.length || j >= 0; ++i, --j) {\r\n                self.bombRight(touchX, touchY, tY, i, bombComponent, arr);\r\n                self.bombLeft(touchX, touchY, tY, j, bombComponent, arr);\r\n            }\r\n        }\r\n\r\n        tY = touchY + 1;\r\n        if (tY < self.tiles.length) {\r\n            for (let i = touchX, j = touchX; i < self.tiles.length || j >= 0; ++i, --j) {\r\n                self.bombRight(touchX, touchY, tY, i, bombComponent, arr);\r\n                self.bombLeft(touchX, touchY, tY, j, bombComponent, arr);\r\n            }\r\n        }\r\n\r\n        await Algorithm.delay(0.4);\r\n        if (isTouch) {\r\n            this.onceOperate();\r\n        }\r\n        bombComponent.destroyTile();\r\n        if (this.isBombOver(arr)) {\r\n            this.showEncourage(arr);\r\n        }\r\n        this.canTouch = true;\r\n        this.bombOver = true;\r\n        self.moveAllTileDown();\r\n    }\r\n\r\n    playRowBombAni(line) {\r\n        let nodBomb = Play.DataPvp.popBomb();\r\n        if (nodBomb.parent != this.panelTile) {\r\n            nodBomb.parent = this.panelTile;\r\n        }\r\n        let bombComponent = nodBomb.getComponent('BombPvp');\r\n        bombComponent.init();\r\n        nodBomb.y = 80 * line + 40;\r\n        nodBomb.scale = 1;\r\n        nodBomb.rotation = 90;\r\n        nodBomb.getComponent(cc.Animation).play('aniBombCol');\r\n    }\r\n\r\n\r\n\r\n    bombUp(touchX, touchY, x, i, bombComponent, arr) {\r\n        var self = this;\r\n        if (!self.tiles[x][i]) {\r\n            return;\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            let tileComponent = self.tiles[x][i];\r\n            if (!tileComponent || tileComponent.isDestroying) {\r\n                return;\r\n            }\r\n            Algorithm.tileBgEffect(this, 0, x, i, 0.8);\r\n            if (tileComponent.tileType === TILE_TYPE.BOMB) {\r\n                if (tileComponent.type === BOMB_TYPE.BOMB_COLUMN) {\r\n                    tileComponent.ignite(arr, false);\r\n                } else if (touchX === x && tileComponent.type === BOMB_TYPE.BOMB_COLUMNSTRONG\r\n                    && bombComponent.type === BOMB_TYPE.BOMB_COLUMNSTRONG) {\r\n                    tileComponent.ignite(arr, false);\r\n                } else {\r\n                    tileComponent.ignite(arr);\r\n                }\r\n            } else if (tileComponent.tileType === TILE_TYPE.BLOCK) {\r\n                tileComponent.destroyTile(BLOCKDES_TYPE.ACTION_FIRSTDES);\r\n            } else if (tileComponent.tileType === TILE_TYPE.WALL) {\r\n                tileComponent.destroyTile();\r\n            }\r\n            Algorithm.bothSiedAct(x, i, self.tiles)\r\n        }, (i - touchY) * 0.02)\r\n\r\n    }\r\n\r\n    bombDown(touchX, touchY, x, j, bombComponent, arr) {\r\n        var self = this;\r\n        if (!self.tiles[x][j]) {\r\n            return;\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            let tileComponent = self.tiles[x][j];\r\n            if (!tileComponent || tileComponent.isDestroying) {\r\n                return;\r\n            }\r\n            Algorithm.tileBgEffect(this, 0, x, j, 0.8);\r\n            if (tileComponent.tileType === TILE_TYPE.BOMB) {\r\n                if (tileComponent.type === BOMB_TYPE.BOMB_COLUMN) {\r\n                    tileComponent.ignite(arr, false);\r\n                } else if (touchX === x && tileComponent.type === BOMB_TYPE.BOMB_COLUMNSTRONG\r\n                    && bombComponent.type === BOMB_TYPE.BOMB_COLUMNSTRONG) {\r\n                    tileComponent.ignite(arr, false);\r\n                } else {\r\n                    tileComponent.ignite(arr);\r\n                }\r\n            } else if (tileComponent.tileType === TILE_TYPE.BLOCK) {\r\n                tileComponent.destroyTile(BLOCKDES_TYPE.ACTION_FIRSTDES);\r\n            } else if (tileComponent.tileType === TILE_TYPE.WALL) {\r\n                tileComponent.destroyTile();\r\n            }\r\n            Algorithm.bothSiedAct(x, j, self.tiles)\r\n        }, (touchY - j) * 0.02)\r\n    }\r\n\r\n    bombRight(touchX, touchY, y, i, bombComponent, arr) {\r\n        var self = this;\r\n\r\n        if (!self.tiles[i] || !self.tiles[i][y]) {\r\n            return;\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            let tileComponent = self.tiles[i][y];\r\n            if (!tileComponent || tileComponent.isDestroying) {\r\n                return;\r\n            }\r\n            Algorithm.tileBgEffect(this, 0, i, y, 0.8);\r\n            if (tileComponent.tileType === TILE_TYPE.BOMB) {\r\n                if (tileComponent.type === BOMB_TYPE.BOMB_ROW) {\r\n                    tileComponent.ignite(arr, false);\r\n                } else if (touchX === y && tileComponent.type === BOMB_TYPE.BOMB_ROWSTRONG\r\n                    && bombComponent.type === BOMB_TYPE.BOMB_ROWSTRONG) {\r\n                    tileComponent.ignite(arr, false);\r\n                } else {\r\n                    tileComponent.ignite(arr);\r\n                }\r\n            } else if (tileComponent.tileType === TILE_TYPE.BLOCK) {\r\n                tileComponent.destroyTile(BLOCKDES_TYPE.ACTION_FIRSTDES);\r\n            } else if (tileComponent.tileType === TILE_TYPE.WALL) {\r\n                tileComponent.destroyTile();\r\n            }\r\n            // Algorithm.bothSiedAct(i, touchY, self.tiles)\r\n        }, (i - touchX) * 0.02)\r\n\r\n    }\r\n\r\n    bombLeft(touchX, touchY, y, j, bombComponent, arr) {\r\n        var self = this;\r\n        if (!self.tiles[j] || !self.tiles[j][y]) {\r\n            return;\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            let tileComponent = self.tiles[j][y];\r\n            if (!tileComponent || tileComponent.isDestroying) {\r\n                return;\r\n            }\r\n            Algorithm.tileBgEffect(this, 0, j, y, 0.8);\r\n            if (tileComponent.tileType === TILE_TYPE.BOMB) {\r\n                if (tileComponent.type === BOMB_TYPE.BOMB_ROW) {\r\n                    tileComponent.ignite(arr, false);\r\n                } else if (touchX === y && tileComponent.type === BOMB_TYPE.BOMB_ROWSTRONG\r\n                    && bombComponent.type === BOMB_TYPE.BOMB_ROWSTRONG) {\r\n                    tileComponent.ignite(arr, false);\r\n                } else {\r\n                    tileComponent.ignite(arr);\r\n                }\r\n            } else if (tileComponent.tileType === TILE_TYPE.BLOCK) {\r\n                tileComponent.destroyTile(BLOCKDES_TYPE.ACTION_FIRSTDES);\r\n            } else if (tileComponent.tileType === TILE_TYPE.WALL) {\r\n                tileComponent.destroyTile();\r\n            }\r\n            // Algorithm.bothSiedAct(j, touchY, self.tiles)\r\n        }, (touchX - j) * 0.02)\r\n    }\r\n\r\n    // 点击炸弹周围\r\n    private async bombAround(touchX, touchY, isTouch) {\r\n        var self = this;\r\n        this.bombOver = false;\r\n\r\n        var nodBomb = this.tiles[touchX][touchY].node;\r\n        var bombComponent = this.tiles[touchX][touchY];\r\n\r\n        this.stopRemindAction();\r\n        this.remindTime = 0;\r\n        // this.canTouch = false;\r\n\r\n        await this.bombAroundAnimation(touchX, touchY, nodBomb);\r\n        self.moveAllTileDown();\r\n\r\n        self.canTouch = true;\r\n        self.bombOver = true;\r\n\r\n        this.PlayUI.Audio.bombAround();\r\n    }\r\n\r\n    async bombAroundAnimation(touchX, touchY, nodBomb) {\r\n        var self = this;\r\n        return new Promise((resolve, reject) => {\r\n            for (var i = 2; i >= -2; --i) {\r\n                for (var j = 2; j >= -2; --j) {\r\n                    if ((i == 0 && j == 0) || !self.tiles[touchX + i] || !self.tiles[touchX + i][touchY + j]) {\r\n                        continue\r\n                    }\r\n                    // 粒子\r\n                    if (i == 2 || j == 2 || i == -2 || j == -2) {\r\n                        Algorithm.tileBgEffect(self, 2, touchX + i, touchY + j, 0.7);\r\n                    } else {\r\n                        Algorithm.tileBgEffect(self, 0, touchX + i, touchY + j, 0.9);\r\n                    }\r\n\r\n                    if (self.tiles[touchX + i][touchY + j].tileType === TILE_TYPE.BLOCK) {\r\n                        var tileComponent = self.tiles[touchX + i][touchY + j];\r\n                        if (!tileComponent.isDestroying) {\r\n                            tileComponent.billowAct(touchX, touchY, function (i, j, tileComponent) {\r\n                                tileComponent.destroyTile(BLOCKDES_TYPE.ACTION_FIRSTDES);\r\n                            }.bind(self, i, j, tileComponent));\r\n                        }\r\n                    } else if (self.tiles[touchX + i][touchY + j].tileType === TILE_TYPE.BOMB) {\r\n                        var tileComponent = self.tiles[touchX + i][touchY + j];\r\n                        if (!tileComponent.isDestroying) {\r\n                            tileComponent.billowAct(touchX, touchY, function (i, j, tileComponent) {\r\n                                tileComponent.ignite();\r\n                            }.bind(self, i, j, tileComponent));\r\n                        }\r\n                    } else if (self.tiles[touchX + i][touchY + j].tileType === TILE_TYPE.PET) {\r\n                        var tileComponent = self.tiles[touchX + i][touchY + j];\r\n                        tileComponent.billowAct(touchX, touchY, function (i, j, tileComponent) {\r\n                        }.bind(self, i, j, tileComponent));\r\n                    }\r\n                }\r\n            }\r\n            var animComponent = nodBomb.getComponent(cc.Animation);\r\n\r\n            animComponent.onFire = function () {\r\n                let bombComponent = nodBomb.getComponent('BombPvp');\r\n                self.tiles[bombComponent.x][bombComponent.y] = null;\r\n                bombComponent.destroyTile();\r\n                resolve();\r\n            }\r\n            animComponent.play('aniBombArea');\r\n        })\r\n    }\r\n\r\n    async tileDown() {\r\n        for (let x = 0; x < this.tiles.length; ++x) {\r\n            for (let y = 0; y < this.tiles[0].length; ++y) {\r\n                if (this.tiles[x][y]) {\r\n                    continue;\r\n                }\r\n                for (let yy = y + 1; yy < this.tiles[x].length; ++yy) {\r\n                    if (this.tiles[x][yy] && this.tiles[x][yy].tileType === TILE_TYPE.WALL) {\r\n                        break;\r\n                    }\r\n                    if (!this.tiles[x][yy] || (this.tiles[x][yy].tileType === TILE_TYPE.BOMB && this.tiles[x][yy].isDestroying)) {\r\n                        continue;\r\n                    }\r\n                    if (this.tiles[x][yy].tileType === TILE_TYPE.PET && y === 0) {\r\n                        this.tiles[x][y] = this.tiles[x][yy];\r\n                        this.tiles[x][yy] = null;\r\n                        this.tiles[x][y].moveTo(x, y, null);\r\n                        yy--;\r\n                        continue;\r\n                    }\r\n                    this.tiles[x][y] = this.tiles[x][yy];\r\n                    this.tiles[x][yy] = null;\r\n                    this.tiles[x][y].moveTo(x, y, null);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        this.fillVavancy();\r\n    }\r\n\r\n\r\n    // 根据游戏阶段和下方水果颜色，设置下落水果颜色\r\n    getBlockColor(x, y) {\r\n        if (this.pvpTeach) {\r\n            return Math.floor(Math.random() * TEACH_FRUIT_COLOR_CNT) + 1;\r\n        }\r\n        let num = Math.random();\r\n        let arrType = [BLOCK_COLOR.RED, BLOCK_COLOR.GREEN, BLOCK_COLOR.BLUE, BLOCK_COLOR.YELLOW, BLOCK_COLOR.PURPLE, BLOCK_COLOR.SIX];\r\n        for (let i = 0; i < arrType.length; ++i) {\r\n            if (this.tiles[x] && this.tiles[x][y - 1] && arrType[i] === this.tiles[x][y - 1].type) {\r\n                let t = arrType[0];\r\n                arrType[0] = arrType[i];\r\n                arrType[i] = t;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!Play.DataPvp.isSpawnStrongRocket) {\r\n            let color = 0;\r\n            if (num <= 0.25) {\r\n                color = arrType[0];\r\n            } else if (num <= 0.4) {\r\n                color = arrType[2];\r\n            } else if (num <= 0.55) {\r\n                color = arrType[3];\r\n            } else if (num <= 0.7) {\r\n                color = arrType[4];\r\n            } else if (num <= 0.85) {\r\n                color = arrType[5];\r\n            } else if (num <= 1) {\r\n                color = arrType[6];\r\n            }\r\n            return color;\r\n        } else {\r\n            return null;\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * 所有方块向下移动\r\n     */\r\n    public async moveAllTileDown() {\r\n        if (!this.destroyAllTilesOver) {\r\n            return;\r\n        }\r\n        this.hadRemindTime();\r\n        this.downOver = false;\r\n        //console.log('moveDown');\r\n\r\n        this.tileDown();\r\n    }\r\n\r\n    // 空缺地方生成tile\r\n    async fillVavancy() {\r\n        // 因为有花朵，可能存在空格子，所以要从上向下遍历\r\n        let hadNull = false;\r\n        for (let x = 0; x < this.tiles.length; ++x) {\r\n            for (let y = 8; y >= 0; --y) {\r\n                if (!this.tiles[x][y]) {\r\n                    hadNull = true;\r\n                    break;\r\n                }\r\n                if (this.tiles[x][y].tileType === TILE_TYPE.WALL) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (hadNull) {\r\n            for (let x = 0; x < this.tiles.length; ++x) {\r\n                let minY = -1;\r\n\r\n                for (let y = 8; y >= 0; --y) {\r\n                    if (this.tiles[x][y]) {\r\n                        if (this.tiles[x][y].tileType === TILE_TYPE.WALL) {\r\n                            break;\r\n                        } else {\r\n                            continue;\r\n                        }\r\n                    }\r\n                    minY = y;\r\n                }\r\n                if (minY < 0) {\r\n                    continue;\r\n                }\r\n                for (let y = minY; y < 9; ++y) {\r\n                    if (this.tiles[x][y]) {\r\n                        if (this.tiles[x][y].tileType === TILE_TYPE.WALL) {\r\n                            break;\r\n                        } else {\r\n                            continue;\r\n                        }\r\n                    }\r\n\r\n                    if (y - 1 < 0 || (this.tiles[x][y - 1] && this.tiles[x][y - 1].tileType !== TILE_TYPE.BLOCK)) {\r\n                        this.spawnTile(x, y, minY, null);\r\n                    }\r\n                    if (this.tiles[x][y - 1] && this.tiles[x][y - 1].tileType === TILE_TYPE.BLOCK) {\r\n                        let color = this.getBlockColor(x, y);\r\n                        // let color = Math.floor(Math.random() * PVP_FRUIT_COLOR_CNT) + 1;\r\n                        this.spawnTile(x, y, minY, color);\r\n                    }\r\n                }\r\n            }\r\n            this.tileDown();\r\n        } else {\r\n            await Algorithm.delay(0.5);\r\n            this.downOver = true;\r\n\r\n            this.pveTeach();\r\n            this.resetRemindTime();\r\n        }\r\n    }\r\n\r\n    getObstacle() {\r\n        let self = this;\r\n        Play.DataPvp.petCnt++;\r\n        if (self.pvpTeach || self.pvpAi) {\r\n            self.PlayUI.getAnimal(Play.DataPvp.petAllCnt, Play.DataPlay.MySide);\r\n            let randomTime = Math.random() * 5;\r\n            self.scheduleOnce(function () {\r\n                if (self.panelHeader.remainTime > 1) {\r\n                    let randomNum = Math.floor(Math.random() + 0.3);\r\n                    Play.DataPvp.opponentPetAllCnt += randomNum;\r\n                    if (randomNum != 0) {\r\n                        self.PlayUI.getAnimal(Play.DataPvp.opponentPetAllCnt, Play.DataPlay.AiSide);\r\n                    }\r\n                }\r\n            }, randomTime);\r\n        }\r\n\r\n        if (this.pvpTeach && this.firstSave) {\r\n            this.pvpGuide.setGuide(GUIDE_TYPE.SAVE_SUC);\r\n            this.firstSave = false;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    // pve教学\r\n    pveTeach() {\r\n        var self = this;\r\n        // pvp教学第一次消除\r\n        if (this.pvpTeach && this.firstDown && (!this.spawnedBomb)) {\r\n            this.firstDown = false;\r\n        }\r\n\r\n        if (this.pvpTeach && this.spawnedBomb && (this.saveDown == 0) && (this.firstBombA || this.firstBombCol)) {\r\n            for (let x = 0; x < self.tiles.length; ++x) {\r\n                for (let y = 0; y < self.tiles[0].length; ++y) {\r\n                    if (self.tiles[x][y] && self.tiles[x][y].tileType === TILE_TYPE.BOMB) {\r\n                        let bombComponent = self.tiles[x][y];\r\n                        let panelpos = this.panelTile.convertToWorldSpaceAR(bombComponent.node.getPosition());\r\n                        switch (bombComponent.type) {\r\n                            case BOMB_TYPE.BOMB_COLUMN:\r\n                                if (this.firstBombCol) {\r\n                                    this.pvpGuide.setGuide(GUIDE_TYPE.BOMB_COL, panelpos);\r\n                                    this.pvpGuide.setGuide(GUIDE_TYPE.BOMB_SUC);\r\n                                    this.firstBombCol = false;\r\n                                }\r\n                                break;\r\n                            case BOMB_TYPE.BOMB_COLUMNSTRONG:\r\n                                if (this.firstBombA) {\r\n                                    this.pvpGuide.setGuide(GUIDE_TYPE.BOMB_COL_STR, panelpos);\r\n                                    this.pvpGuide.setGuide(GUIDE_TYPE.BOMB_COL_STR_SUC);\r\n                                    this.firstBombA = false;\r\n                                }\r\n                                break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (this.firstDown) {\r\n                this.firstDown = false;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    //生成新的方块\r\n    public spawnTile(x, y, minY, type) {\r\n        // 生成宠物\r\n        if (Play.DataPvp.canSpawnPet()) {\r\n            Play.DataPvp.waittingSpawnPetCount--;\r\n            this.spawnPet(x, y, true, minY);\r\n            this.sendBoardPetCnt();\r\n            return;\r\n        }\r\n\r\n        // 生成火箭\r\n        if (Play.DataPvp.waittingSpawnRocketCount > 0) {\r\n            Play.DataPvp.waittingSpawnRocketCount--;\r\n            this.spawnBomb(x, y, BOMB_TYPE.BOMB_COLUMN, minY, true);\r\n            return;\r\n        }\r\n        if (Play.DataPvp.waittingSpawnStrongRocketCount > 0) {\r\n            Play.DataPvp.waittingSpawnStrongRocketCount--;\r\n            this.spawnBomb(x, y, BOMB_TYPE.BOMB_COLUMNSTRONG, minY, true);\r\n            return;\r\n        }\r\n\r\n        this.spawnBlock(x, y, type, minY);\r\n    }\r\n\r\n\r\n    // 生成炸弹\r\n    private spawnBomb(x: number, y: number, type, minY?, isDown?) {\r\n        if (this.tiles[x][y] && this.tiles[x][y].tileType === TILE_TYPE.BLOCK) {\r\n            this.tiles[x][y].destroyTile(BLOCKDES_TYPE.NOACTION_FIRSTDES);\r\n        }\r\n        let nodBomb = Play.DataPvp.popBomb();\r\n        if (nodBomb.parent != this.panelTile) {\r\n            nodBomb.parent = this.panelTile;\r\n        }\r\n        let bombComponent = this.tiles[x][y] = nodBomb.getComponent('BombPvp');\r\n        bombComponent.init();\r\n        nodBomb.scale = 1;\r\n        nodBomb.zIndex = TILE_ZINDEX.NORMAL;\r\n        let width = 80;\r\n        bombComponent.setContentSize(width, width);\r\n        bombComponent.game = this;\r\n        bombComponent.type = type;\r\n        if (isDown) {\r\n            bombComponent.newTile(x, y, minY)\r\n        } else {\r\n            bombComponent.setArrPosition(x, y)\r\n            bombComponent.genBombAnimation();\r\n        }\r\n    }\r\n\r\n    // 生成宠物\r\n    private spawnPet(x: number, y: number, isDown, minY?) {\r\n        if (this.tiles[x][y] && this.tiles[x][y].tileType === TILE_TYPE.BLOCK) {\r\n            this.tiles[x][y].destroyTile(BLOCKDES_TYPE.NOACTION_FIRSTDES);\r\n        }\r\n        Play.DataPvp.petSpawnCnt++;\r\n        var nodPet = Play.DataPvp.popObstacle();\r\n        if (nodPet.parent != this.panelSpine) {\r\n            nodPet.parent = this.panelSpine;\r\n        }\r\n        var petComponent = this.tiles[x][y] = nodPet.getComponent(\"ObstaclePvp\");\r\n        petComponent.init();\r\n        var width = 80;\r\n        petComponent.game = this;\r\n        petComponent.type = Math.floor(Math.random() * 4 + 1);\r\n        nodPet.scale = 1;\r\n        nodPet.zIndex = TILE_ZINDEX.NORMAL;\r\n        petComponent.setContentSize(width, width);\r\n        if (isDown) {\r\n            petComponent.newTile(x, y, minY)\r\n        } else {\r\n            petComponent.setArrPosition(x, y)\r\n        }\r\n    }\r\n\r\n    // 生成block\r\n    private spawnBlock(x: number, y: number, type?, minY?, isDown?) {\r\n        if (this.tiles[x][y]) {\r\n            this.tiles[x][y].destroyTile(BLOCKDES_TYPE.NOACTION_NODES);\r\n        }\r\n        let nodBlock = Play.DataPvp.popBlock();\r\n        if (nodBlock.parent != this.panelTile) {\r\n            nodBlock.parent = this.panelTile;\r\n        }\r\n        let blockComponent = this.tiles[x][y] = nodBlock.getComponent(\"BlockPvp\");\r\n        blockComponent.init();\r\n        blockComponent.game = this;\r\n        nodBlock.scale = 1;\r\n        nodBlock.zIndex = TILE_ZINDEX.NORMAL;\r\n\r\n        let width = 80;\r\n        blockComponent.setContentSize(width, width);\r\n        let colotCnt = PVP_FRUIT_COLOR_CNT;\r\n        if (this.pvpTeach) {\r\n            colotCnt = TEACH_FRUIT_COLOR_CNT;\r\n        }\r\n        type = type ? type : Math.floor(Math.random() * colotCnt) + 1;\r\n        blockComponent.type = type;\r\n        blockComponent.newTile(x, y, minY, isDown)\r\n    }\r\n\r\n\r\n\r\n    // 生成Wall\r\n    private spawnWall(x: number, y: number, type) {\r\n        if (this.tiles[x][y]) {\r\n            this.tiles[x][y].destroyTile();\r\n            this.tiles[x][y] = null;\r\n        }\r\n        let nodWall = cc.instantiate(Play.DataPvp.pfbWall);\r\n        if (nodWall.parent != this.panelTile) {\r\n            nodWall.parent = this.panelTile;\r\n        }\r\n        nodWall.zIndex = TILE_ZINDEX.NORMAL;\r\n        let wallComponent = this.tiles[x][y] = nodWall.getComponent(\"WallPvp\");\r\n        wallComponent.game = this;\r\n        wallComponent.type = type;\r\n\r\n        let width = 80;\r\n        wallComponent.setContentSize(width, width);\r\n\r\n        wallComponent.setArrPosition(x, y)\r\n    }\r\n\r\n    // 播放粒子\r\n    playParticle(x, y) {\r\n        let node = cc.instantiate(this.pfbParticle);\r\n        node.parent = this.panelParticle;\r\n        node.getComponent('Particle').setArrPosition(x, y);\r\n        node.getComponent('Particle').play();\r\n    }\r\n\r\n    private stopRemindAction() {\r\n        for (var x = 0; x < this.tiles.length; ++x) {\r\n            for (var y = 0; y < this.tiles[0].length; ++y) {\r\n                if (this.tiles[x][y] && this.tiles[x][y].node) {\r\n                    this.tiles[x][y].node.stopActionByTag(2);\r\n                    this.tiles[x][y].node.scale = 1;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public gameOver() {\r\n        this.cancelCloud();\r\n        this.canTouch = false;\r\n        this.stopRemindAction();\r\n        this.hadRemind = true;\r\n\r\n    }\r\n\r\n    resetRemindTime() {\r\n        this.hadRemind = false\r\n        this.oneSec = 0;\r\n        this.remindTime = 0;\r\n    }\r\n    hadRemindTime() {\r\n        this.hadRemind = true;\r\n    }\r\n\r\n    update(dt) {\r\n        if (!Play.DataPvp.gameBegan) {\r\n            return;\r\n        }\r\n\r\n        this.remindTime += dt;\r\n        this.oneSec += dt;\r\n        if (this.oneSec >= 1 && !this.hadRemind && !StateMgr.INSTANCE.isStopOperate) {\r\n            this.oneSec = 0;\r\n            // 提示动画\r\n            var allArr = Algorithm.checkoutMatch(this.tiles, false);\r\n\r\n            if (this.remindTime >= 5 && allArr.length > 0) {\r\n                this.hadRemind = true;\r\n                var index = Math.floor(Math.random() * allArr.length);\r\n                var arr = allArr[index];\r\n                this.stopRemindAction();\r\n\r\n                for (let i = 0; i < arr.length; ++i) {\r\n                    var x = Number(arr[i].split(\"#\")[0]);\r\n                    var y = Number(arr[i].split(\"#\")[1]);\r\n                    this.tiles[x][y].node.stopActionByTag(2);\r\n                    this.tiles[x][y].node.opacity = 255;\r\n\r\n                    var action = cc.repeatForever(\r\n                        cc.sequence(\r\n                            // cc.blink(1, 3),\r\n                            cc.scaleTo(0.1, 1.1, 1.1),\r\n                            cc.scaleTo(0.2, 0.9, 0.9),\r\n                            cc.scaleTo(0.1, 1.1, 1.1),\r\n                            cc.scaleTo(0.2, 0.9, 0.9),\r\n                            cc.scaleTo(0.1, 1.1, 1.1),\r\n                            cc.scaleTo(0.2, 0.9, 0.9),\r\n                            cc.scaleTo(0.15, 1.05, 1.05),\r\n                            cc.scaleTo(0.05, 1, 1),\r\n                            cc.delayTime(1.5),\r\n                        )\r\n                    )\r\n\r\n                    this.tiles[x][y].node.runAction(action);\r\n                    action.setTag(2);\r\n                }\r\n            } else if (allArr.length <= 0) {\r\n                //console.log('没有可消除的组合');\r\n                this.hadRemindTime();\r\n                this.PlayUI.setToast('没有可消除的组合')\r\n                this.canTouch = false;\r\n                this.scheduleOnce(() => {\r\n                    Algorithm.shuffleTiles(this.tiles, () => {\r\n                        this.scheduleOnce(function () {\r\n                            this.canTouch = true;\r\n                            this.moveAllTileDown();\r\n                        }, 1);\r\n                    }, false);\r\n\r\n                }, 2)\r\n            }\r\n        }\r\n    }\r\n\r\n    // 云\r\n    showCloud() {\r\n        this.nodCloud.active = true;\r\n        this.nodCloud.opacity = 255;\r\n\r\n        this.nodCloud.stopActionByTag(1);\r\n        this.nodCloud.getComponent(cc.Animation).play('propCloud');\r\n        this.unschedule(this.hideCloud);\r\n        this.scheduleOnce(this.hideCloud, 10);\r\n    }\r\n    hideCloud() {\r\n        let action = cc.sequence(\r\n            cc.fadeTo(0.5, 0),\r\n            cc.callFunc(() => {\r\n                this.nodCloud.active = false;\r\n                this.nodCloud.opacity = 255;\r\n            })\r\n        )\r\n        this.nodCloud.runAction(action);\r\n        action.setTag(1);\r\n    }\r\n    // 取消云\r\n    cancelCloud() {\r\n        this.unschedule(this.hideCloud);\r\n        this.nodCloud.active = false;\r\n        this.nodCloud.opacity = 255;\r\n    }\r\n\r\n    // 清屏动作\r\n    destroyAllTilesOver;\r\n    destroyAllTiles() {\r\n        this.destroyAllTilesOver = false;\r\n        this.hadRemindTime();\r\n        this.effect(3, 4);\r\n        this.effect(4, 4);\r\n        this.scheduleOnce(() => {\r\n            this.destroyAllTilesOver = true;\r\n            this.moveAllTileDown();\r\n        }, 0.8)\r\n    }\r\n\r\n    // 被抢夺\r\n    beGrabedObstacle() {\r\n        let self = this;\r\n        Play.DataPvp.petBeGrabedCnt++;\r\n        if (self.pvpTeach || self.pvpAi) {\r\n            Play.DataPvp.opponentPetAllCnt++;\r\n            self.PlayUI.getAnimal(Play.DataPvp.opponentPetAllCnt, Play.DataPlay.AiSide);\r\n        }\r\n    }\r\n    // 抢夺\r\n    grabedObstacle() {\r\n        let self = this;\r\n        Play.DataPvp.petGrabCnt++;\r\n        self.PlayUI.getAnimal(Play.DataPvp.petAllCnt, Play.DataPlay.MySide);\r\n    }\r\n\r\n    // 吸取宠物\r\n    async grabPet(count) {\r\n        if (this.pvpAi) {\r\n            count = Math.floor(Math.random() * 8);\r\n            this.grabPetAction(count);\r\n\r\n            if (count > 0) {\r\n                this.PlayUI.setToast('嘿嘿，偷偷拿几个ta不知道', ColorType.Green);\r\n                this.panelHeader.showFace(PlaySide.BLU, FaceType.Happy, FaceAnimationType.Yanhua);\r\n                this.panelHeader.showFace(PlaySide.RED, FaceType.Sand, FaceAnimationType.Xuayun);\r\n                this.PlayUI.Audio.buff2();\r\n            } else {\r\n                this.PlayUI.setToast('额，ta怎么1个宠物都没有', ColorType.Red);\r\n                this.panelHeader.showFace(PlaySide.BLU, FaceType.Sand, FaceAnimationType.Xuayun);\r\n                this.panelHeader.showFace(PlaySide.RED, FaceType.Happy, FaceAnimationType.Yanhua);\r\n                this.PlayUI.Audio.miss();\r\n            }\r\n\r\n        } else {\r\n            this.grabPetAction(count);\r\n        }\r\n        for (let i = 0; i < count; ++i) {\r\n            this.grabedObstacle();\r\n            await Algorithm.delay(0.1);\r\n        }\r\n    }\r\n\r\n    // 吸取宠物动作\r\n    async grabPetAction(count) {\r\n        for (let i = 0; i < count; ++i) {\r\n            var nodPet = Play.DataPvp.popObstacle();\r\n            var petComponent = nodPet.getComponent(\"ObstaclePvp\");\r\n            petComponent._game = this;\r\n            petComponent.init();\r\n            if (nodPet.parent != this.panelSpine) {\r\n                nodPet.parent = this.panelSpine;\r\n            }\r\n            nodPet.setPosition(petComponent._collectPosition2);\r\n            petComponent.grabPet();\r\n            await Algorithm.delay(0.1);\r\n        }\r\n    }\r\n\r\n    // 失去宠物\r\n    losePet() {\r\n        let count = 0;\r\n        this.canTouch = false;\r\n        for (let x = 0; x < this.tiles.length; ++x) {\r\n            for (let y = 0; y < this.tiles[0].length; ++y) {\r\n                if (this.tiles[x][y] && this.tiles[x][y].tileType === TILE_TYPE.PET) {\r\n                    this.tiles[x][y].runGrabAction(count);\r\n                    count++;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.pvpAi) {\r\n            if (count > 0) {\r\n                this.PlayUI.setToast('天，对手偷偷拿了你的宠物', ColorType.Red);\r\n                this.panelHeader.showFace(PlaySide.BLU, FaceType.Sand, FaceAnimationType.Xuayun);\r\n                this.panelHeader.showFace(PlaySide.RED, FaceType.Happy, FaceAnimationType.Yanhua);\r\n                this.PlayUI.Audio.trick();\r\n            } else {\r\n                this.PlayUI.setToast('晕，你啥都没有，恰好对方一无所获', ColorType.Green);\r\n                this.panelHeader.showFace(PlaySide.BLU, FaceType.Happy, FaceAnimationType.Yanhua);\r\n                this.panelHeader.showFace(PlaySide.RED, FaceType.Sand, FaceAnimationType.Xuayun);\r\n                this.PlayUI.Audio.opponentMiss();\r\n            }\r\n        } else {\r\n            // 发送偷取个数\r\n            // console.log('失去' + count);\r\n            let playStolenAnimal = new PlayStolenAnimalC2S();\r\n            playStolenAnimal.num = count;\r\n            NetUtil.SendMsg(playStolenAnimal);\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            this.canTouch = true;\r\n        }, count * 0.1);\r\n    }\r\n\r\n    // 打乱顺序\r\n    prop4() {\r\n        Algorithm.shuffleTiles(this.tiles, () => {\r\n\r\n        }, false)\r\n    }\r\n\r\n    // 鼓励词\r\n    showEncourage(arr) {\r\n        if (arr.length <= 0) {\r\n            return;\r\n        }\r\n        let num = 0;\r\n        if (typeof (arr[0]) === 'string') {\r\n            num = arr.length;\r\n        } else {\r\n            for (let i = 0; i < arr.length; ++i) {\r\n                if (arr[i].type === BOMB_TYPE.BOMB_COLUMN) {\r\n                    num += 9;\r\n                } else if (arr[i].type === BOMB_TYPE.BOMB_ROW) {\r\n                    num += 9;\r\n                } else if (arr[i].type === BOMB_TYPE.BOMB_COLUMNSTRONG) {\r\n                    num += 25;\r\n                } else if (arr[i].type === BOMB_TYPE.BOMB_ROWSTRONG) {\r\n                    num += 25;\r\n                }\r\n            }\r\n        }\r\n\r\n        let type = 0;\r\n        if (num >= 33) {\r\n            type = 5;\r\n            this.PlayUI.Audio.unbelievable();\r\n        } else if (num >= 26) {\r\n            type = 4;\r\n            this.PlayUI.Audio.amazing();\r\n        } else if (num >= 15) {\r\n            type = 3;\r\n            this.PlayUI.Audio.excellent();\r\n        } else if (num >= 8) {\r\n            type = 2;\r\n            this.PlayUI.Audio.great();\r\n        } else if (num >= 6) {\r\n            type = 1;\r\n            this.PlayUI.Audio.good();\r\n        }\r\n\r\n        if (type !== 0) {\r\n            let node = Play.DataPvp.popEncourage();\r\n            node.parent = this.panelParticle;\r\n            node.getComponent('Encourage').setType(type);\r\n        }\r\n    }\r\n\r\n    // 生成一个花\r\n    async gainFlower(row) {\r\n        let arr = [];\r\n        for (let i = 0; i < this.tiles.length; ++i) {\r\n            // 从最下一行选择一个水果，替换成花朵\r\n            if (!this.tiles[i][row - 1] || this.tiles[i][row - 1].tileType === TILE_TYPE.BLOCK) {\r\n                arr.push(this.tiles[i][row - 1]);\r\n            }\r\n        }\r\n        if (arr.length > 0) {\r\n            let index = Math.floor(Math.random() * arr.length);\r\n            if (arr[index]) {\r\n                var nodWall = Play.DataPvp.popWall();\r\n                var wallComponent = nodWall.getComponent(\"WallPvp\");\r\n                wallComponent._game = this;\r\n                wallComponent.init();\r\n                wallComponent.type = WALL_TYPE.TYPE_1;\r\n                if (nodWall.parent != this.panelSpine) {\r\n                    nodWall.parent = this.panelSpine;\r\n                }\r\n                nodWall.setPosition(wallComponent._collectPosition2);\r\n                wallComponent.getFlower(arr[index].x, arr[index].y);\r\n                nodWall.zIndex = TILE_ZINDEX.ACTION;\r\n\r\n                await Algorithm.delay(1);\r\n                this.spawnWall(arr[index].x, arr[index].y, WALL_TYPE.TYPE_1);\r\n                if (this.pvpTeach && this.firstGenFlower) {\r\n                    let bombComponent = this.tiles[arr[index].x][arr[index].y];\r\n                    let panelpos = this.panelTile.convertToWorldSpaceAR(bombComponent.node.getPosition());\r\n                    this.pvpGuide.setGuide(GUIDE_TYPE.GEN_FLOWER1, panelpos);\r\n                    this.firstGenFlower = false;\r\n                }\r\n            }\r\n        } else {\r\n            // console.log('没有空位啦');\r\n        }\r\n    }\r\n\r\n    onDestroy() {\r\n        cc.director.getScheduler().unscheduleAllForTarget(this);\r\n        this.node.targetOff(this.node);\r\n    }\r\n\r\n    // 背景波浪动画,消除全屏\r\n    effect(x, y) {\r\n        if (!this.tileBgs[x] || !this.tileBgs[x][y] || this.tileBgs[x][y].hadAction) {\r\n            this.scheduleOnce(() => {\r\n                if (this.tileBgs[x + 1] && this.tileBgs[x + 1][y] && !this.tileBgs[x + 1][y].hadAction) {\r\n                    this.effect(x + 1, y);\r\n                }\r\n                if (this.tileBgs[x - 1] && this.tileBgs[x - 1][y] && !this.tileBgs[x - 1][y].hadAction) {\r\n                    this.effect(x - 1, y);\r\n\r\n                }\r\n                if (this.tileBgs[x] && this.tileBgs[x][y + 1] && !this.tileBgs[x][y + 1].hadAction) {\r\n                    this.effect(x, y + 1);\r\n\r\n                }\r\n                if (this.tileBgs[x] && this.tileBgs[x][y - 1] && !this.tileBgs[x][y - 1].hadAction) {\r\n                    this.effect(x, y - 1);\r\n\r\n                }\r\n            }, 0.1)\r\n            return;\r\n        }\r\n        this.tileBgs[x][y].hadAction = true;\r\n\r\n        let action = cc.sequence(\r\n            cc.fadeTo(0.06, 150),\r\n            cc.callFunc(() => {\r\n                if (this.tiles[x][y]) {\r\n                    if (this.tiles[x][y].tileType === TILE_TYPE.PET) {\r\n\r\n                    } else if (this.tiles[x][y].tileType === TILE_TYPE.WALL) {\r\n                        this.tiles[x][y].destroyTile(2);\r\n                    } else if (this.tiles[x][y].tileType === TILE_TYPE.BOMB) {\r\n                        this.tiles[x][y].ignite();\r\n                    } else {\r\n                        this.tiles[x][y].destroyTile(BLOCKDES_TYPE.ACTION_FIRSTDES);\r\n                    }\r\n                }\r\n\r\n                if (this.tileBgs[x + 1] && this.tileBgs[x + 1][y] && !this.tileBgs[x + 1][y].hadAction) {\r\n                    this.effect(x + 1, y);\r\n                }\r\n                if (this.tileBgs[x - 1] && this.tileBgs[x - 1][y] && !this.tileBgs[x - 1][y].hadAction) {\r\n                    this.effect(x - 1, y);\r\n\r\n                }\r\n                if (this.tileBgs[x] && this.tileBgs[x][y + 1] && !this.tileBgs[x][y + 1].hadAction) {\r\n                    this.effect(x, y + 1);\r\n\r\n                }\r\n                if (this.tileBgs[x] && this.tileBgs[x][y - 1] && !this.tileBgs[x][y - 1].hadAction) {\r\n                    this.effect(x, y - 1);\r\n\r\n                }\r\n            }),\r\n            cc.fadeTo(0.12, 255),\r\n            cc.fadeOut(0.24),\r\n            cc.callFunc(() => {\r\n                this.tileBgs[x][y].hadAction = false;\r\n            })\r\n        );\r\n\r\n        this.tileBgs[x][y].getChildByName('sprLight').runAction(action);\r\n    }\r\n\r\n}\r\n"]}