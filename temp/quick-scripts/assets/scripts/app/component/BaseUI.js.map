{"version":3,"sources":["BaseUI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\component","sourcesContent":["import { UI_LAYER_POP_TIPS, ZORDER_UI_LAYER_POP_TIPS, UI_LAYER_WAITING, ZORDER_UI_LAYER_WAITING } from \"../common/Defines\";\r\nimport Toast from \"./prefab/Toast\";\r\nimport GamePersist from \"../common/persist/GamePersist\";\r\nimport { IRootUI, IPanel } from \"../common/Misc\";\r\n\r\n// 所有场景入口UI的基类\r\nconst { ccclass, property } = cc._decorator;\r\n@ccclass\r\nexport default class BaseUI extends cc.Component implements IRootUI {\r\n\r\n  @property(cc.Prefab)\r\n  public toastPrefab: cc.Prefab = null;\r\n\r\n  private panelLayer: cc.Node = null;\r\n  public toastLayer: cc.Node = null;\r\n  private waitingLayer: cc.Node = null;\r\n\r\n  public onLoad() {\r\n    GamePersist.ToastPool.clear();\r\n    \r\n    \r\n    if (CC_DEBUG) {\r\n      // cc.director.setDisplayStats(false);\r\n      // MemoryDetector.showMemoryStatus();\r\n    }\r\n    \r\n    const canvas = this.node.getComponent(cc.Canvas);\r\n    if (canvas) {\r\n      if (canvas.designResolution.width / canvas.designResolution.height <= cc.view.getCanvasSize().width / cc.view.getCanvasSize().height) {\r\n        canvas.fitHeight = true;\r\n        canvas.fitWidth = false;\r\n      } else {\r\n        canvas.fitHeight = false;\r\n        canvas.fitWidth = true;\r\n      }\r\n\r\n      // panel layer\r\n      this.panelLayer = new cc.Node(UI_LAYER_POP_TIPS);\r\n      this.panelLayer.parent = this.node;\r\n      this.panelLayer.setPosition(0, 0);\r\n      this.panelLayer.zIndex = 99;\r\n      // toast layer\r\n      this.toastLayer = new cc.Node(UI_LAYER_POP_TIPS);\r\n      this.toastLayer.parent = canvas.node;\r\n      this.toastLayer.x = 0;\r\n      this.toastLayer.y = 0;\r\n      this.toastLayer.zIndex = ZORDER_UI_LAYER_POP_TIPS;\r\n      // waiting layer\r\n      this.waitingLayer = new cc.Node(UI_LAYER_WAITING);\r\n      this.waitingLayer.parent = canvas.node;\r\n      this.waitingLayer.setPosition(0, 0);\r\n      this.waitingLayer.zIndex = ZORDER_UI_LAYER_WAITING;\r\n    }\r\n  }\r\n\r\n  public start() {\r\n    GamePersist.INSTANCE.RootUI = this;\r\n    this.onLoadSceneEnd();\r\n  }\r\n\r\n  onLoadSceneEnd() {\r\n    GamePersist.INSTANCE.onLoadSceneEnd();\r\n  }\r\n\r\n  public uiName(): string {\r\n    throw (new Error(\"must define your ui'name\"));\r\n  }\r\n\r\n\r\n  // 显示面板\r\n  public showPanel(panel: IPanel) {\r\n    const viewNode: cc.Node = panel.viewNode();\r\n    viewNode.parent = this.panelLayer;\r\n  }\r\n\r\n  // 销毁panel中的节点 \r\n  public destroyPanel() {\r\n    this.panelLayer.removeAllChildren(true);\r\n  }\r\n\r\n  // 显示等待\r\n  public showWaiting(node: cc.Node, msg?: string) {\r\n\r\n  }\r\n\r\n  public onAppHide() {\r\n  }\r\n\r\n  public onAppShow() {\r\n  }\r\n}\r\n"]}