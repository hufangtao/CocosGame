{"version":3,"sources":["RoomNetHandler.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\component\\page\\home","sourcesContent":["import {\r\n    RoomDispatcher,\r\n    RankDispatcher,\r\n    GoodsDispatcher,\r\n    TaskDispatcher\r\n} from \"../../../common/net/proto/ProtoDispatcher\";\r\nimport {\r\n    RoomMatchRequestS2C,\r\n    RoomInvisibleS2C,\r\n    RoomPlayStartS2C,\r\n    RoomPlayCreateS2C,\r\n    RoomPlayConfirmS2C,\r\n    RoomInviteRequestS2C,\r\n    RoomOpponentLeaveS2C,\r\n    RoomMatchTimeoutS2C, RoomReadyTimeoutS2C\r\n} from \"../../../common/net/proto/mods/ProtoSectionRoom\";\r\nimport { RankPlayStarS2C, RankPveRankS2C } from \"../../../common/net/proto/mods/ProtoSectionRank\";\r\nimport HomeManager from \"./HomeManager\";\r\n// import PlayManager from \"../play/PlayManager\";\r\nimport * as Modules from \"../../../module/Modules\";\r\nimport {\r\n    GoodsTurntableRecordPullS2C,\r\n    GoodsTurntableRecordNewS2C,\r\n    GoodsUpdateS2C,\r\n    GoodsPullC2S,\r\n    GoodsPullS2C,\r\n    GoodsTurntableRunS2C\r\n} from \"../../../common/net/proto/mods/ProtoSectionGoods\";\r\nimport { TaskListS2C, TaskUpdateS2C } from \"../../../common/net/proto/mods/ProtoSectionTask\";\r\nimport GamePersist from \"../../../common/persist/GamePersist\";\r\nimport { ProtoSection } from \"../../../common/net/proto/ProtoReflect\";\r\nimport { IProtoError } from \"../../../common/Defines\";\r\nimport PlayManager from \"../../game/PlayManager\";\r\nimport { PveDataRank } from \"../../../module/data/mod/DataRank\";\r\nimport { Message } from \"../../../common/Message\";\r\nimport { DYNotify } from \"../../../../dyGame/DYNotify\";\r\n\r\nexport default class RoomNetHandler {\r\n    constructor() {\r\n        RoomDispatcher.on(RoomMatchRequestS2C.EVENT_NAME, this.onMatchRequestReceived, this);\r\n        RoomDispatcher.on(RoomMatchTimeoutS2C.EVENT_NAME, this.onMatchTimeOutReceived, this);\r\n        RoomDispatcher.on(RoomInvisibleS2C.EVENT_NAME, this.onInvisibleRequestReceived, this);\r\n        RoomDispatcher.on(RoomPlayConfirmS2C.EVENT_NAME, this.onConfirmReceived, this);\r\n        RoomDispatcher.on(RoomPlayCreateS2C.EVENT_NAME, this.onPlayCreate, this);\r\n        RoomDispatcher.on(RoomPlayStartS2C.EVENT_NAME, this.onPlayStart, this);\r\n        RoomDispatcher.on(RoomReadyTimeoutS2C.EVENT_NAME, this.onReadyTimeout, this);\r\n        RoomDispatcher.on(RoomInviteRequestS2C.EVENT_NAME, this.onInviteRequestReceived, this);\r\n        RoomDispatcher.on(RoomOpponentLeaveS2C.EVENT_NAME, this.onOpponentLeave, this);\r\n        RoomDispatcher.on(RoomInviteRequestS2C.EVENT_NAME, this.onInviteRequestReceived, this);\r\n\r\n        // 排行榜\r\n        RankDispatcher.on(RankPlayStarS2C.EVENT_NAME, this.onRankDataReceived, this);\r\n        // RankDispatcher.on(RankPveRankS2C.EVENT_NAME, this.onPveRankDataReceived, this);\r\n\r\n        // 获取玩家物品\r\n        GoodsDispatcher.on(GoodsPullS2C.EVENT_NAME, this.onPlayerGoodsResponse, this);\r\n        GoodsDispatcher.on(GoodsUpdateS2C.EVENT_NAME, this.onUpdataPlayerGoodsResponse, this);\r\n        GoodsDispatcher.on(GoodsTurntableRunS2C.EVENT_NAME, this.onTurntableRunResponse, this);\r\n\r\n        // 全服大奖数据\r\n        GoodsDispatcher.on(GoodsTurntableRecordPullS2C.EVENT_NAME, this.onBigLotteryRecordReceived, this);\r\n        GoodsDispatcher.on(GoodsTurntableRecordNewS2C.EVENT_NAME, this.onUpdataBigLotteryRecordReceived, this);\r\n\r\n        // 玩家任务\r\n        TaskDispatcher.on(TaskListS2C.EVENT_NAME, this.onPlayerTaskReceived, this);\r\n        TaskDispatcher.on(TaskUpdateS2C.EVENT_NAME, this.onUpdataPlayerTaskReceived, this);\r\n        GamePersist.INSTANCE.OnProtoError(ProtoSection.room, this.onProtoRoomError, this);\r\n        GamePersist.INSTANCE.OnProtoError(ProtoSection.rank, this.onProtoRankError, this);\r\n    }\r\n\r\n    // 处理room分段协议统一的错误码返回\r\n    public onProtoRoomError(message) {\r\n        const protoError: IProtoError = message;\r\n        const protoErrMsg = protoError.errMsg;\r\n        GamePersist.INSTANCE.Toast(protoErrMsg);\r\n    }\r\n\r\n    // 处理rank分段协议统一的错误码返回\r\n    public onProtoRankError(message) {\r\n        const protoError: IProtoError = message;\r\n        const protoErrMsg = protoError.errMsg;\r\n        GamePersist.INSTANCE.Toast(protoErrMsg);\r\n    }\r\n\r\n\r\n    // 房间已经创建可以开始比赛了\r\n    public onPlayCreate(message) {\r\n        const playCreate: RoomPlayCreateS2C = message;\r\n        if (!HomeManager.INSTANCE.HomeUI) {\r\n            return;\r\n        }\r\n        const roomId = playCreate.roomId;\r\n        const playmates = playCreate.playmates;\r\n        const redId = playCreate.redId;\r\n        const bluId = playCreate.bluId;\r\n        const roomType = playCreate.roomType;\r\n        const roomOwner = playCreate.roomOwner;\r\n        if (roomId < 1) {\r\n            cc.warn(`服务器通知新的一局开始 但是房间Id:${roomId} 不合法`);\r\n            return;\r\n        }\r\n        HomeManager.INSTANCE.onPlayCreate(roomId, roomType, roomOwner, redId, bluId, playmates);\r\n    }\r\n\r\n    // 收到服务器确认\r\n    public onConfirmReceived(message) {\r\n        const confirm: RoomPlayConfirmS2C = message;\r\n        //console.log(\"confirm list:\", confirm.confirmList);\r\n    }\r\n\r\n    public onReadyTimeout(message) {\r\n        // 此时提醒准备时间超时，\r\n        // console.log(\"ReadyTimeout-----------------\");\r\n        if (!Modules.Home.DataPlayer.IsMatching) {\r\n            // 如果卡在匹配界面，则取消匹配\r\n            HomeManager.INSTANCE.HomeUI.doCancelMatch();\r\n        }\r\n    }\r\n\r\n    // 新的一局开始\r\n    public onPlayStart(message) {\r\n        const playStart: RoomPlayStartS2C = message;\r\n        const roomId = playStart.roomId;\r\n        if (roomId < 1) {\r\n            cc.warn(`服务器通知新的一局开始 但是房间Id:${roomId} 不合法`);\r\n            return;\r\n        }\r\n\r\n        // 双方的后续局 当前已经在PlayUI场景 说明是再来一局\r\n        if (PlayManager.INSTANCE.PlayUI) {\r\n            PlayManager.INSTANCE.onOneMorePlayStart(roomId);\r\n            return;\r\n        }\r\n\r\n        // 双方的第一局 如果当前不是HomeUI就是有问题的情况\r\n        if (HomeManager.INSTANCE.HomeUI) {\r\n            HomeManager.INSTANCE.onPlayStart(roomId);\r\n            return;\r\n        }\r\n    }\r\n\r\n    // 判断下当前是否在邀请确认界面\r\n    public onOpponentLeave(message) {\r\n        const opponentLeave: RoomOpponentLeaveS2C = message;\r\n        // console.log(\"####################onOpponentLeave\");\r\n        if (!HomeManager.INSTANCE.HomeUI) {\r\n            return;\r\n        }\r\n        HomeManager.INSTANCE.onOpponentLeave(opponentLeave.opponentId);\r\n    }\r\n\r\n\r\n    public onMatchRequestReceived(message) {\r\n    }\r\n\r\n    public onMatchTimeOutReceived(message) {\r\n        if (HomeManager.INSTANCE.HomeUI) {\r\n            HomeManager.INSTANCE.onPvpAiCreate();\r\n            // HomeManager.INSTANCE.HomeUI.doCancelMatch();\r\n            HomeManager.INSTANCE.HomeUI.activePvpAi();\r\n        }\r\n    }\r\n\r\n    public onInvisibleRequestReceived(message) {\r\n    }\r\n\r\n    // 发送邀请的请求已经被处理\r\n    public onInviteRequestReceived(message) {\r\n        const inviteRequest: RoomInviteRequestS2C = message;\r\n        if (HomeManager.INSTANCE.HomeUI) {\r\n            HomeManager.INSTANCE.onReceiveInviteParam(inviteRequest.inviteeParam);\r\n        }\r\n    }\r\n\r\n    // 排行榜的数据返回\r\n    public onRankDataReceived(message) {\r\n        const randDataResp: RankPlayStarS2C = message;\r\n        Modules.Home.DataRank.GlobalRankData = randDataResp.playmates;\r\n        Modules.Home.DataRank.MyRank = randDataResp.myPos;\r\n        DYNotify.post(Message.UIRankUpdate);\r\n    }\r\n\r\n    public onPveRankDataReceived(message) {\r\n        const rankData: RankPveRankS2C = message;\r\n        Modules.Home.PveRank = new PveDataRank();\r\n        Modules.Home.PveRank.GlobalRankData = rankData.playmates;\r\n        Modules.Home.PveRank.MyRank = rankData.myPos;\r\n        //console.log(rankData);\r\n    }\r\n\r\n    // 玩家物品数据\r\n    public onPlayerGoodsResponse(message) {\r\n        // console.log('onPlayerGoodsResponse');\r\n        const respData: GoodsPullS2C = message;\r\n        Modules.Home.DataPlayer.PlayerGoodsData = respData.goodsList;\r\n        Modules.Home.DataPlayer.PlayerGoodsDataLast = respData.goodsList;\r\n        DYNotify.post(Message.EVENT_MODULE_PLAYER_PRIZE_INIT);\r\n    }\r\n\r\n    // 更新玩家物品\r\n    public onUpdataPlayerGoodsResponse(message) {\r\n        const respData: GoodsUpdateS2C = message;\r\n        Modules.Home.DataPlayer.UpdataPlayerGoods(respData.goodsList);\r\n        DYNotify.post(Message.EVENT_MODULE_PLAYER_PRIZE);\r\n    }\r\n\r\n    // 转盘返回\r\n    public onTurntableRunResponse(message){\r\n        const goodsTurntableRun: GoodsTurntableRunS2C = message;\r\n        DYNotify.post(Message.TURNTABLE_LIST,goodsTurntableRun);\r\n    }\r\n\r\n    // 全服大奖记录\r\n    public onBigLotteryRecordReceived(message) {\r\n        const receiveData: GoodsTurntableRecordPullS2C = message;\r\n        Modules.Home.DataPlayer.BigLotteryRecordData = receiveData.recordList;\r\n    }\r\n\r\n    // 更新全服大奖数据\r\n    public onUpdataBigLotteryRecordReceived(message) {\r\n        const receiveData: GoodsTurntableRecordNewS2C = message;\r\n        Modules.Home.DataPlayer.UpdataBigLotteryRecord(receiveData.record);\r\n        Modules.Home.emit(Message.EVENT_MODULE_BIG_LOTTERY);\r\n    }\r\n\r\n    // 玩家任务\r\n    public onPlayerTaskReceived(message) {\r\n        const receiveData: TaskListS2C = message;\r\n        Modules.Home.DataPlayer.PlayerTaskData = receiveData.task;\r\n    }\r\n\r\n    // 更新玩家任务\r\n    public onUpdataPlayerTaskReceived(message) {\r\n        const receiveData: TaskListS2C = message;\r\n        cc.log(receiveData.task);\r\n        Modules.Home.DataPlayer.UpdataPlayerTask(receiveData.task);\r\n        Modules.Home.emit(Message.EVENT_MODULE_PLAYER_TASK);\r\n    }\r\n}\r\n"]}