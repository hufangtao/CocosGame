{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\component\\game\\pve/assets\\scripts\\app\\component\\game\\pve\\LayerGamePve.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\component\\game\\pve","sourcesContent":["import NodePool from \"../NodePool\";\r\nimport {\r\n    TILE_TYPE,\r\n    GRID_TYPE,\r\n    BOMB_TYPE,\r\n    TABLEWARE_TYPE,\r\n    GAME_STAT,\r\n    TILE_ZINDEX,\r\n    BLOCKDES_TYPE,\r\n    TRANSPORT_TYPE,\r\n    Action_type,\r\n} from \"../PlayDefine\";\r\nimport PanelHeaderPve from \"./PanelHeaderPve\";\r\nimport { PlayPveFinishC2S } from \"../../../common/net/proto/mods/ProtoSectionPlay\";\r\nimport NetUtil from \"../../../common/net/NetUtil\";\r\nimport StateMgr from \"./StateMgr\";\r\nimport { ValueKey } from \"../../../common/Defines\";\r\nimport * as Algorithm from \"../Algorithm\";\r\nimport PlayUIPve from \"./PlayUIPve\";\r\nimport DataPve from \"./DataPve\";\r\nimport { Play } from \"../../../module/Modules\";\r\nimport { UIFunc } from \"../../../common/UIFunc\";\r\nimport UIObjective from \"../../../ui/UIObjective\";\r\nimport { Message } from \"../../../common/Message\";\r\nimport { DYNotify } from \"../../../../dyGame/DYNotify\";\r\nimport GamePersist from \"../../../common/persist/GamePersist\";\r\nimport * as Modules from \"../../../module/Modules\";\r\nimport SocialManager from \"../../../common/social/SocialManager\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class LayerGamePve extends cc.Component {\r\n    @property(cc.Prefab)\r\n    pfbScore: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    pfbBlock: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    pfbBomb: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    pfbObstacle: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    pfbWall: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    pfbTableware: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    pfbTransport: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    pfbGate: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    pfbBonusBall: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    pfbTileBg: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    pfbParticle: cc.Prefab = null;\r\n\r\n    @property(cc.Node)\r\n    panelTile: cc.Node = null;\r\n    @property(cc.Node)\r\n    panelScore: cc.Node = null;\r\n    @property(cc.Node)\r\n    panelParticle: cc.Node = null;\r\n    @property(cc.Node)\r\n    panelTrickDown: cc.Node = null;\r\n    @property(cc.Node)\r\n    panelTrickUp: cc.Node = null;\r\n    @property(cc.Node)\r\n    panelGuide: cc.Node = null;\r\n    @property(PanelHeaderPve)\r\n    panelHeader: PanelHeaderPve = null;\r\n    @property(cc.Node)\r\n    panelSpine: cc.Node = null;\r\n    @property(cc.Node)\r\n    panelBonus: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    panelGrid: cc.Node = null;\r\n\r\n\r\n    @property(cc.SpriteFrame)\r\n    spfTileBg: cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    spfTileBgLight: cc.SpriteFrame = null;\r\n\r\n    public PlayUI: PlayUIPve = null;\r\n\r\n    public remindTime = 0;\r\n    public oneSec = 0;\r\n    public time = 0;\r\n\r\n    public count = 0;\r\n\r\n    public lastArr = [];\r\n\r\n    public arr = [];\r\n\r\n    public tiles = [];\r\n    private transports = [];\r\n    private tileBgs = [];\r\n\r\n    private actionList = [];\r\n\r\n    private hadRemind = false;\r\n    private transportMove = false;\r\n\r\n    public canTouch = true;\r\n\r\n    hadAudAreaPlay;\r\n    hadAudColPlay;\r\n    hadAudOneColorPlay;\r\n\r\n    touched: boolean = false;\r\n    oneColorActionOver = true;\r\n\r\n    bonusCallBack = null;\r\n    gameStat = null;\r\n\r\n    blockArrLength = 0;\r\n    obstacleCnt;\r\n    dataPve: DataPve = null;\r\n    UIObjective: UIObjective;\r\n    public onLoad() {\r\n        Play.DataPve.gameBegan = false;\r\n    }\r\n\r\n    public start() {\r\n\r\n    }\r\n\r\n    public init(playUI) {\r\n        this.PlayUI = playUI;\r\n        Play.DataPve.game = this;\r\n    }\r\n\r\n    public initData() {\r\n        this.gameStat = GAME_STAT.GAMEING\r\n\r\n        this.remindTime = 0;\r\n        this.oneSec = 0;\r\n        this.time = 0;\r\n\r\n        this.count = 0;\r\n        this.obstacleCnt = 0;\r\n\r\n        this.lastArr = [];\r\n\r\n        this.arr = [];\r\n\r\n        this.tiles = [];\r\n        this.transports = [];\r\n        this.tileBgs = [];\r\n\r\n        this.actionList = [];\r\n\r\n        this.hadRemind = true;\r\n\r\n        this.canTouch = true;\r\n        this.hadAudAreaPlay = true;\r\n        this.hadAudColPlay = true;\r\n        this.hadAudOneColorPlay = true;\r\n        this.panelBonus.active = false;\r\n\r\n        Play.DataPve.clearFreeNodes();\r\n        this.panelTile.destroyAllChildren();\r\n        this.panelTrickDown.destroyAllChildren();\r\n        this.panelParticle.destroyAllChildren();\r\n        this.panelSpine.destroyAllChildren();\r\n\r\n    }\r\n\r\n    public loadLevelData(cb) {\r\n        this.initData();\r\n        this.panelTile.parent.getComponent('Board_pve').initMap(this);\r\n        this.panelHeader.init(this);\r\n\r\n        UIFunc.openUI('UIObjective', (node) => {\r\n            this.UIObjective = node.getComponent('UIObjective');\r\n            this.UIObjective.initObjective(this);\r\n            cb && cb();\r\n        })\r\n    }\r\n\r\n    gameBegin() {\r\n        this.UIObjective.panelObjectiveAction();\r\n        this.resetRemindTime();\r\n    }\r\n\r\n    public operateLogic(touchX, touchY, tileType, type, subType, isTouch = false) {\r\n        if (!StateMgr.INSTANCE.canOperate() || this.gameStat != GAME_STAT.GAMEING) {\r\n            return\r\n        }\r\n        if (StateMgr.INSTANCE.haveTransport && !StateMgr.INSTANCE.isTransportOver) {\r\n            return;\r\n        }\r\n        if (tileType == TILE_TYPE.BLOCK) {\r\n            this.destroyBlock(touchX, touchY, type);\r\n        } else if (tileType == TILE_TYPE.BOMB) {\r\n            if (StateMgr.INSTANCE.haveTransport) {\r\n                StateMgr.INSTANCE.isTransportOver = false;\r\n            }\r\n            this.transportMove = true;\r\n            this.ignite(touchX, touchY, type, isTouch);\r\n        }\r\n    }\r\n\r\n    ignite(touchX, touchY, type, isTouch = false) {\r\n        switch (type) {\r\n            case BOMB_TYPE.BOMB_COLUMN:\r\n                this.panelHeader.panelGuide.guide();\r\n                this.bombColumn(touchX, touchY, isTouch);\r\n                break;\r\n            case BOMB_TYPE.BOMB_AROUND:\r\n                this.panelHeader.panelGuide.guide();\r\n                this.bombAround(touchX, touchY, isTouch);\r\n                break;\r\n            case BOMB_TYPE.BOMB_ONE_COLOR:\r\n                this.panelHeader.panelGuide.guide();\r\n                this.bombColor(touchX, touchY, isTouch);\r\n                break;\r\n        }\r\n    }\r\n\r\n    getScore(count, x, y) {\r\n        if (count <= 1) {\r\n            var score = 40;\r\n        } else {\r\n            var score = 20 * (count + 2) * (count - 1);\r\n        }\r\n        let nodScore = NodePool.getNodeScore();\r\n        nodScore.parent = this.panelScore;\r\n        nodScore.getComponent('ScoreMsg').setMessage(count, score, x, y);\r\n        Play.DataPve.getScore(score)\r\n    }\r\n\r\n    // 生成道具消除\r\n    async spawnPropDestroy(arr, touchX, touchY) {\r\n        var self = this;\r\n        this.PlayUI.Audio.spawnBomb();\r\n        Play.DataPve.stepSpawnPet += arr.length;\r\n        Play.DataPve.stepSpawnBug += arr.length;\r\n\r\n        this.canTouch = false;\r\n        this.panelHeader.addStep();\r\n\r\n        let bomb;\r\n        let type;\r\n        for (var index in arr) {\r\n            var x = Number(arr[index].split(\"#\")[0]);\r\n            var y = Number(arr[index].split(\"#\")[1]);\r\n            this.tiles[x][y].node.stopAllActions();\r\n            if (x == touchX && y == touchY) {\r\n                Algorithm.tileBgEffect(this, 0, x, y, 0.8);\r\n                bomb = this.tiles[x][y].node;\r\n                type = this.tiles[x][y].type;\r\n                bomb.zIndex = TILE_ZINDEX.ACTION;\r\n            }\r\n        }\r\n\r\n        let actionArr = [];\r\n        for (var index in arr) {\r\n            var x = Number(arr[index].split(\"#\")[0]);\r\n            var y = Number(arr[index].split(\"#\")[1]);\r\n\r\n            this.affectAround(x, y);\r\n            Algorithm.tileBgEffect(this, 0, x, y, 0.8);\r\n            if (this.tiles[x][y] != bomb) {\r\n                this.tiles[x][y].node.zIndex = TILE_ZINDEX.ACTION_LOW;\r\n            }\r\n\r\n            let position = this.tiles[x][y].node.position.sub(bomb.position);\r\n            position.mulSelf(0.1);\r\n            var action = cc.sequence(\r\n                cc.spawn(\r\n                    cc.scaleTo(0.05, 1.1),\r\n                    cc.moveBy(0.05, position),\r\n                ),\r\n                cc.delayTime(0.05),\r\n                cc.moveTo(0.1, bomb.getPosition()).easing(cc.easeQuarticActionIn()),\r\n                cc.callFunc(function (tile) {\r\n                    tile.destroyTile(BLOCKDES_TYPE.NOACTION_FIRSTDES, true);\r\n                }.bind(self, this.tiles[x][y]), this)\r\n            )\r\n            Algorithm.addAction(actionArr, this.tiles[x][y].node, action);\r\n            // this.tiles[x][y] = null;\r\n        }\r\n        await Algorithm.runActions(actionArr);\r\n        if (arr.length >= 9) {\r\n            await self.spawnBomb(touchX, touchY, BOMB_TYPE.BOMB_ONE_COLOR, type);\r\n        } else if (arr.length >= 7) {\r\n            await self.spawnBomb(touchX, touchY, BOMB_TYPE.BOMB_AROUND);\r\n        } else {\r\n            await self.spawnBomb(touchX, touchY, BOMB_TYPE.BOMB_COLUMN);\r\n        }\r\n        this.moveAllTileDown();\r\n\r\n        if (Play.DataPve.levelData.grid.transport.length <= 0) {\r\n            this.canTouch = true;\r\n        }\r\n    }\r\n\r\n    // 普通消除\r\n    blockScheduleCb;\r\n    petScheduleCb;\r\n    wallScheduleCb;\r\n    async normalDestroy(arr, touchX, touchY, type) {\r\n        //执行消除\r\n        var self = this;\r\n        this.panelHeader.addStep();\r\n        this.PlayUI.Audio.strip();\r\n\r\n        var isRecoveryDone = PanelHeaderPve.INSTANCE.isObjectiveDone(TILE_TYPE.BLOCK, type);\r\n\r\n        this.unschedule(this.blockScheduleCb);\r\n        StateMgr.INSTANCE.isCollectOver = false;\r\n        this.blockScheduleCb = () => {\r\n            StateMgr.INSTANCE.isCollectOver = true;\r\n            this.gameOver();\r\n        }\r\n        this.scheduleOnce(this.blockScheduleCb, 0.6);\r\n\r\n        for (var index in arr) {\r\n            var x = Number(arr[index].split(\"#\")[0]);\r\n            var y = Number(arr[index].split(\"#\")[1]);\r\n            this.affectAround(x, y);\r\n            // 播放粒子\r\n            if (isRecoveryDone) {\r\n                Algorithm.tileBgEffect(this, 0, x, y, 0.6);\r\n            } else {\r\n                Algorithm.tileBgEffect(this, 0, x, y, 0.4);\r\n            }\r\n            // 销毁方块\r\n            var blockComponent = this.tiles[x][y];\r\n            blockComponent.recovery(true);\r\n        }\r\n\r\n        let delayTime = 0.3;\r\n        if (isRecoveryDone) {\r\n            delayTime = 0.3;\r\n        }\r\n        await Algorithm.delay(delayTime);\r\n        this.moveAllTileDown();\r\n        Play.DataPve.stepSpawnPet += arr.length;\r\n        Play.DataPve.stepSpawnBug += arr.length;\r\n    }\r\n    // 不能消除\r\n    cannotDestroy(touchX, touchY) {\r\n        cc.log(\"不能消除\")\r\n        if (!this.tiles[touchX][touchY]) {\r\n            return\r\n        }\r\n        this.tiles[touchX][touchY].node.stopActionByTag(Action_type.NoMatch);\r\n        let action = cc.sequence(\r\n            // cc.blink(1, 3),\r\n            cc.scaleTo(0.1, 1.1, 1.1),\r\n            cc.scaleTo(0.2, 0.9, 0.9),\r\n            cc.scaleTo(0.1, 1.1, 1.1),\r\n            cc.scaleTo(0.2, 0.9, 0.9),\r\n            cc.scaleTo(0.1, 1.1, 1.1),\r\n            cc.scaleTo(0.2, 0.9, 0.9),\r\n            cc.scaleTo(0.15, 1.05, 1.05),\r\n            cc.scaleTo(0.05, 1, 1),\r\n            cc.delayTime(1.5),\r\n        )\r\n        this.tiles[touchX][touchY].node.runAction(action);\r\n        action.setTag(Action_type.NoMatch);\r\n    }\r\n\r\n    // 点击方块\r\n    private async destroyBlock(touchX, touchY, type) {\r\n        var self = this;\r\n        this.stopRemindAction();\r\n        var arr = new Array();\r\n        var scanArr = new Array();\r\n        Algorithm.scanAround(touchX, touchY, -1, -1, type, arr, scanArr, this.tiles);\r\n        if (arr.length > 1) {\r\n            if (StateMgr.INSTANCE.haveTransport) {\r\n                StateMgr.INSTANCE.isTransportOver = false;\r\n            }\r\n            self.transportMove = true;\r\n\r\n            this.getScore(arr.length, touchX, touchY)\r\n            this.hadRemindTime();\r\n            this.remindTime = 0;\r\n            if (arr.length >= 5) {\r\n                this.spawnPropDestroy(arr, touchX, touchY);\r\n            } else {\r\n                this.normalDestroy(arr, touchX, touchY, type);\r\n            }\r\n        } else {\r\n            this.cannotDestroy(touchX, touchY);\r\n        }\r\n    }\r\n\r\n    private affectAround(x, y) {\r\n        if (x - 1 >= 0 && x - 1 < 8 && y >= 0 && y < 9) {\r\n            this.destroyprop(x - 1, y);\r\n        }\r\n        if (x + 1 >= 0 && x + 1 < 8 && y >= 0 && y < 9) {\r\n            this.destroyprop(x + 1, y);\r\n        }\r\n        if (x >= 0 && x < 8 && y + 1 >= 0 && y + 1 < 9) {\r\n            this.destroyprop(x, y + 1);\r\n        }\r\n        if (x >= 0 && x < 8 && y - 1 >= 0 && y - 1 < 9) {\r\n            this.destroyprop(x, y - 1);\r\n        }\r\n    }\r\n    private destroyprop(x, y) {\r\n        if (Play.DataPve.grid[x][y] != 0) {\r\n            if (this.tiles[x][y]) {\r\n                let tileComponent = null;\r\n                tileComponent = this.tiles[x][y];\r\n                if (tileComponent.tileType === TILE_TYPE.TABLEWARE) {\r\n                    if (tileComponent.type === TABLEWARE_TYPE.TYPE_3) {\r\n\r\n                    } else {\r\n                        if (tileComponent) {\r\n                            tileComponent.affected();\r\n                        }\r\n                    }\r\n                } else if (this.tiles[x][y].tileType === TILE_TYPE.WALL) {\r\n                    tileComponent = this.tiles[x][y];\r\n                    if (tileComponent) {\r\n                        tileComponent.affected();\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    addBomb(nodBomb) {\r\n        let hasAdd = false;\r\n        for (let i = 0; i < this.actionList.length; ++i) {\r\n            if (this.actionList[i] == nodBomb) {\r\n                hasAdd = true;\r\n            }\r\n        }\r\n        if (hasAdd) {\r\n            return false;\r\n        } else {\r\n            this.actionList.push(nodBomb);\r\n            return true;\r\n        }\r\n    }\r\n\r\n    // 当前列的其他风车isdestroy属性改为true\r\n    changeWindmillStatCol(x, y) {\r\n        for (let i = 0; i < this.tiles[x].length; ++i) {\r\n            if (i !== y && this.tiles[x] && this.tiles[x][i] && this.tiles[x][i].type === BOMB_TYPE.BOMB_ONE_COLOR\r\n                && this.tiles[x][i].subType === this.tiles[x][y].subType) {\r\n                this.tiles[x][i].isAction = true;\r\n            }\r\n        }\r\n    }\r\n    // 周围的其他风车isdestroy属性改为true\r\n    changeWindmillStatAround(touchX, touchY, x, y) {\r\n        for (var i = 1; i >= -1; --i) {\r\n            for (var j = 1; j >= -1; --j) {\r\n                var xx = touchX + i;\r\n                var yy = touchY + j;\r\n                if (xx === x || yy === y) {\r\n                    continue;\r\n                }\r\n                if (this.tiles[xx] && this.tiles[xx][yy] && this.tiles[xx][yy].type === BOMB_TYPE.BOMB_ONE_COLOR\r\n                    && this.tiles[xx][yy].subType === this.tiles[x][y].subType) {\r\n                    this.tiles[xx][yy].isAction = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    bombUp(touchX, touchY, i) {\r\n        var self = this;\r\n        if (!self.tiles[touchX][i]) {\r\n            return;\r\n        }\r\n        this.scheduleOnce(() => {\r\n            let tileComponent = self.tiles[touchX][i];\r\n            if (!tileComponent || tileComponent.isAction) {\r\n                return;\r\n            }\r\n            if (tileComponent.isDestroying) {\r\n                return;\r\n            }\r\n            Algorithm.tileBgEffect(self, 0, touchX, i, 0.8);\r\n            if (self.tiles[touchX][i].tileType === TILE_TYPE.BOMB) {\r\n                if (tileComponent.type === BOMB_TYPE.BOMB_COLUMN) {\r\n                    tileComponent.ignite(false);\r\n                } else if (tileComponent.type === BOMB_TYPE.BOMB_ONE_COLOR) {\r\n                    // 当前列的其他风车isdestroy改为true\r\n                    this.changeWindmillStatCol(touchX, i);\r\n                    tileComponent.ignite();\r\n                } else {\r\n                    tileComponent.ignite();\r\n                }\r\n            } else if (self.tiles[touchX][i].tileType === TILE_TYPE.PET) {\r\n\r\n            } else if (self.tiles[touchX][i].tileType === TILE_TYPE.TABLEWARE) {\r\n                tileComponent = self.tiles[touchX][i];\r\n                self.tiles[touchX][i] = null;\r\n                tileComponent.destroyTile()\r\n            } else if (self.tiles[touchX][i].tileType === TILE_TYPE.BLOCK) {\r\n                self.getScore(1, touchX, i);\r\n                tileComponent.destroyTile(BLOCKDES_TYPE.ACTION_LASTDES);\r\n            } else {\r\n                self.getScore(1, touchX, i);\r\n                tileComponent.destroyTile();\r\n            }\r\n            Algorithm.bothSiedAct(touchX, i, self.tiles)\r\n        }, (i - touchY) * 0.02)\r\n    }\r\n\r\n    bombDown(touchX, touchY, j) {\r\n        var self = this;\r\n        if (!self.tiles[touchX][j]) {\r\n            return;\r\n        }\r\n\r\n        this.scheduleOnce(() => {\r\n            var tileComponent = self.tiles[touchX][j];\r\n            if (!tileComponent || tileComponent.isAction) {\r\n                return;\r\n            }\r\n            if (tileComponent.isDestroying) {\r\n                return;\r\n            }\r\n            Algorithm.tileBgEffect(self, 0, touchX, j, 0.8);\r\n            if (self.tiles[touchX][j].tileType === TILE_TYPE.BOMB) {\r\n                if (tileComponent.type === BOMB_TYPE.BOMB_COLUMN) {\r\n                    tileComponent.ignite(false);\r\n                } else if (tileComponent.type === BOMB_TYPE.BOMB_ONE_COLOR) {\r\n                    // 当前列的其他风车isdestroy改为true\r\n                    this.changeWindmillStatCol(touchX, j);\r\n                    tileComponent.ignite();\r\n                } else {\r\n                    tileComponent.ignite();\r\n                }\r\n            } else if (self.tiles[touchX][j].tileType === TILE_TYPE.PET) {\r\n\r\n            } else if (self.tiles[touchX][j].tileType === TILE_TYPE.TABLEWARE) {\r\n                tileComponent = self.tiles[touchX][j];\r\n                self.tiles[touchX][j] = null;\r\n                tileComponent.destroyTile()\r\n            } else if (self.tiles[touchX][j].tileType === TILE_TYPE.BLOCK) {\r\n                self.getScore(1, touchX, j);\r\n                tileComponent.destroyTile(BLOCKDES_TYPE.ACTION_LASTDES);\r\n            } else {\r\n                self.getScore(1, touchX, j);\r\n                tileComponent.destroyTile();\r\n            }\r\n            Algorithm.bothSiedAct(touchX, j, self.tiles)\r\n        }, (touchY - j) * 0.02)\r\n    }\r\n\r\n    // 点击炸弹列\r\n    private async bombColumn(touchX, touchY, isTouch) {\r\n        var self = this;\r\n\r\n        var nodBomb = this.tiles[touchX][touchY].node;\r\n        var bombComponent = this.tiles[touchX][touchY];\r\n        if (bombComponent.tileType != TILE_TYPE.BOMB && bombComponent.type != BOMB_TYPE.BOMB_COLUMN) {\r\n            return;\r\n        }\r\n        if (!this.addBomb(nodBomb)) {\r\n            return;\r\n        };\r\n        StateMgr.INSTANCE.isBombOver = false;\r\n\r\n        this.stopRemindAction();\r\n        this.remindTime = 0;\r\n        this.canTouch = false;\r\n\r\n        // 增加步数\r\n        if (isTouch) {\r\n            this.panelHeader.addStep();\r\n        }\r\n        // 播放音效\r\n        if (this.gameStat == GAME_STAT.GAMEING) {\r\n            this.PlayUI.Audio.bombRow();\r\n        } else {\r\n            if (!this.hadAudColPlay) {\r\n                this.hadAudColPlay = true;\r\n                this.PlayUI.Audio.bombRow();\r\n                self.scheduleOnce(() => {\r\n                    this.hadAudColPlay = false;\r\n                }, 0.2)\r\n            }\r\n        }\r\n        bombComponent.isAction = true;\r\n\r\n        let anim = nodBomb.getComponent(cc.Animation);\r\n        anim.stop();\r\n        anim.play('aniBombCol');\r\n\r\n        Algorithm.bothSiedAct(touchX, touchY, this.tiles);\r\n\r\n        for (let i = touchY + 1, j = touchY - 1; i < self.tiles[0].length || j >= 0; ++i, --j) {\r\n            self.bombUp(touchX, touchY, i);\r\n            if (j >= 0) {\r\n                self.bombDown(touchX, touchY, j);\r\n            }\r\n        }\r\n\r\n        await Algorithm.delay(0.5);\r\n\r\n        // 播放完成删除\r\n        for (let i = 0; i < self.actionList.length; ++i) {\r\n            if (nodBomb == self.actionList[i]) {\r\n                self.actionList.splice(i, 1);\r\n                bombComponent.destroyTile();\r\n                break;\r\n            }\r\n        }\r\n\r\n        // 如果没有炸弹，下落\r\n        if (self.actionList.length == 0) {\r\n            StateMgr.INSTANCE.isBombOver = true;\r\n            self.canTouch = true;\r\n            if (self.gameStat !== GAME_STAT.GAMEING) {\r\n                self.igniteBomb();\r\n                return;\r\n            }\r\n            self.panelHeader.panelGuide.guide();\r\n            self.moveAllTileDown();\r\n        } else {\r\n            self.moveAllTileDown();\r\n        }\r\n    }\r\n\r\n    // 点击炸弹周围\r\n    private async bombAround(touchX, touchY, isTouch) {\r\n        var self = this;\r\n\r\n        var nodBomb = this.tiles[touchX][touchY].node;\r\n        var bombComponent = this.tiles[touchX][touchY];\r\n        if (bombComponent.tileType != TILE_TYPE.BOMB && bombComponent.type != BOMB_TYPE.BOMB_AROUND) {\r\n            return;\r\n        }\r\n        if (!this.addBomb(nodBomb)) {\r\n            return;\r\n        };\r\n        StateMgr.INSTANCE.isBombOver = false;\r\n\r\n        this.stopRemindAction();\r\n        this.remindTime = 0;\r\n        this.canTouch = false;\r\n        // 增加步数\r\n        if (isTouch) {\r\n            this.panelHeader.addStep();\r\n        }\r\n        // 播放音效\r\n        if (this.gameStat == GAME_STAT.GAMEING) {\r\n            this.PlayUI.Audio.bombAround();\r\n        } else {\r\n            if (!this.hadAudAreaPlay) {\r\n                this.hadAudAreaPlay = true;\r\n                this.PlayUI.Audio.bombAround();\r\n                self.scheduleOnce(() => {\r\n                    this.hadAudAreaPlay = false;\r\n                }, 0.2)\r\n            }\r\n        }\r\n        self.scheduleOnce(function () {\r\n            self.moveAllTileDown();\r\n        }, 0.4);\r\n        var fruitCnt = await this.bombAroundAnimation(touchX, touchY, bombComponent);\r\n        // self.getScore(fruitCnt, touchX, touchY);\r\n\r\n        // 播放完成删除\r\n        for (let k = 0; k < self.actionList.length; ++k) {\r\n            if (nodBomb == self.actionList[k]) {\r\n                self.actionList.splice(k, 1);\r\n            }\r\n        }\r\n\r\n        // 如果没有炸弹，下落\r\n        if (self.actionList.length == 0) {\r\n            StateMgr.INSTANCE.isBombOver = true;\r\n            self.canTouch = true;\r\n            if (self.gameStat !== GAME_STAT.GAMEING) {\r\n                self.igniteBomb();\r\n                return;\r\n            }\r\n            self.moveAllTileDown();\r\n            self.panelHeader.panelGuide.guide();\r\n        } else {\r\n\r\n        }\r\n\r\n    }\r\n\r\n    async bombAroundAnimation(touchX, touchY, bombComponent) {\r\n        var self = this;\r\n        var fruitCnt = 0;\r\n        return new Promise((resolve, reject) => {\r\n            for (var i = 2; i >= -2; --i) {\r\n                for (var j = 2; j >= -2; --j) {\r\n                    if ((i == 0 && j == 0) || !self.tiles[touchX + i] || !self.tiles[touchX + i][touchY + j]) {\r\n                        continue\r\n                    }\r\n                    // 背景效果\r\n                    if (i == 2 || j == 2 || i == -2 || j == -2) {\r\n                        Algorithm.tileBgEffect(self, 2, touchX + i, touchY + j, 0.7);\r\n                    } else {\r\n                        Algorithm.tileBgEffect(self, 0, touchX + i, touchY + j, 0.9);\r\n                    }\r\n                    var tileComponent = self.tiles[touchX + i][touchY + j];\r\n                    if (tileComponent.tileType === TILE_TYPE.BLOCK) {\r\n                        if (!tileComponent.isDestroying) {\r\n                            if (i == 2 || j == 2 || i == -2 || j == -2) {\r\n\r\n                            } else {\r\n                                self.getScore(1, touchX + i, touchY + j);\r\n                            }\r\n                            fruitCnt++;\r\n                            tileComponent.billowAct(touchX, touchY, function (i, j, tileComponent) {\r\n                                tileComponent.destroyTile(BLOCKDES_TYPE.ACTION_LASTDES);\r\n                            }.bind(self, i, j, tileComponent));\r\n                        }\r\n                    } else if (tileComponent.tileType === TILE_TYPE.TABLEWARE) {\r\n                        tileComponent.billowAct(touchX, touchY, function (i, j, tileComponent) {\r\n                            tileComponent.destroyTile();\r\n                        }.bind(self, i, j, tileComponent));\r\n                    } else if (tileComponent.tileType === TILE_TYPE.WALL) {\r\n                        if (i == 2 || j == 2 || i == -2 || j == -2) {\r\n\r\n                        } else {\r\n                            tileComponent.destroyTile();\r\n                        }\r\n                    } else if (tileComponent.tileType === TILE_TYPE.BOMB) {\r\n                        tileComponent.billowAct(touchX, touchY, function (x, y, tileComponent) {\r\n                            if (self.tiles[x][y] && self.tiles[x][y].type === BOMB_TYPE.BOMB_ONE_COLOR) {\r\n                                if (!tileComponent.isAction) {\r\n                                    self.changeWindmillStatAround(touchX, touchY, x, y);\r\n                                    tileComponent.ignite();\r\n                                }\r\n                            } else {\r\n                                tileComponent.ignite();\r\n                                // self.tiles[tileComponent.x][tileComponent.y] = null;\r\n                            }\r\n                        }.bind(self, touchX + i, touchY + j, tileComponent));\r\n                    } else if (tileComponent.tileType === TILE_TYPE.PET) {\r\n                        tileComponent.billowAct(touchX, touchY, function (i, j, tileComponent) {\r\n                        }.bind(self, i, j, tileComponent));\r\n                    }\r\n                }\r\n            }\r\n            var animComponent;\r\n            for (let i = 0; i < this.actionList.length; ++i) {\r\n                if (bombComponent.node == this.actionList[i]) {\r\n                    animComponent = bombComponent.getComponent(cc.Animation);\r\n                }\r\n            }\r\n            animComponent.onFire = function () {\r\n                self.scheduleOnce(() => {\r\n                    bombComponent.destroyTile();\r\n                    resolve(fruitCnt);\r\n                }, 0.2)\r\n            }\r\n            animComponent.play('aniBombArea');\r\n        })\r\n    }\r\n\r\n    // 点击炸弹单色\r\n    private async bombColor(touchX, touchY, isTouch) {\r\n        var self = this;\r\n        var bombComponent = this.tiles[touchX][touchY];\r\n        var nodBomb = bombComponent.node;\r\n        if (bombComponent.tileType != TILE_TYPE.BOMB && bombComponent.type != BOMB_TYPE.BOMB_ONE_COLOR) {\r\n            return;\r\n        }\r\n        if (!this.addBomb(nodBomb)) {\r\n            return;\r\n        };\r\n\r\n        nodBomb.zIndex = TILE_ZINDEX.LOW;\r\n        this.stopRemindAction();\r\n        this.canTouch = false;\r\n        bombComponent.isDestroying = true;\r\n        StateMgr.INSTANCE.isBombOver = false;\r\n        this.remindTime = 0;\r\n        if (isTouch) {\r\n            this.panelHeader.addStep();\r\n        }\r\n\r\n        this.PlayUI.Audio.bombMagnet();\r\n\r\n        let fruitCnt = 0;\r\n\r\n\r\n        // 消除同颜色水果\r\n        for (var x = 0; x < this.tiles.length; x++) {\r\n            for (var y = 0; y < this.tiles[0].length; y++) {\r\n                if (!this.tiles[x][y] || (this.tiles[x][y] && (this.tiles[x][y].tileType !== TILE_TYPE.BLOCK && this.tiles[x][y].tileType !== TILE_TYPE.BOMB))) {\r\n                    continue\r\n                }\r\n                var blockComponent = this.tiles[x][y];\r\n                if (blockComponent.isDestroying || (this.tiles[x][y].tileType === TILE_TYPE.BLOCK && blockComponent.type !== bombComponent.subType)\r\n                    || (this.tiles[x][y].tileType === TILE_TYPE.BOMB\r\n                        && (!blockComponent.isAction || blockComponent.type !== bombComponent.type || blockComponent.subType !== bombComponent.subType))\r\n                ) {\r\n                    continue;\r\n                }\r\n\r\n                (function (x, y, blockComponent) {\r\n                    // 水果播放晃动动画\r\n                    blockComponent.isDestroying = true;\r\n                    blockComponent.node.zIndex = TILE_ZINDEX.ACTION_LOW;\r\n                    blockComponent.canTouch = false;\r\n                    blockComponent.node.runAction(cc.sequence(\r\n                        cc.skewTo(0.08, 15, -15),\r\n                        cc.skewTo(0.08, -15, 15),\r\n                        cc.skewTo(0.08, 15, -15),\r\n                        cc.skewTo(0.08, -15, 15),\r\n                        cc.skewTo(0.08, 15, -15),\r\n                        cc.skewTo(0.08, -15, 15),\r\n                        cc.skewTo(0.08, 15, -15),\r\n                        cc.skewTo(0.08, -15, 15),\r\n                        cc.skewTo(0.06, 0, 0),\r\n                        cc.callFunc(() => {\r\n                            self.getScore(1, blockComponent.x, blockComponent.y);\r\n                            blockComponent.node.scale = 1.2;\r\n                            self.tiles[blockComponent.x][blockComponent.y] = null;\r\n\r\n                            // let direc = Math.floor(Math.random() * 4);\r\n                            // if (direc === 0) {\r\n                            //     blockComponent.node.runAction(cc.moveBy(0.1, 40, 40));\r\n                            // } else if (direc === 1) {\r\n                            //     blockComponent.node.runAction(cc.moveBy(0.1, 40, -40));\r\n                            // } else if (direc === 2) {\r\n                            //     blockComponent.node.runAction(cc.moveBy(0.1, -40, -40));\r\n                            // } else if (direc === 3) {\r\n                            //     blockComponent.node.runAction(cc.moveBy(0.1, -40, 40));\r\n                            // }\r\n                        })\r\n                    ))\r\n\r\n                    let node = new cc.Node();\r\n                    node.parent = self.panelParticle;\r\n                    node.position = bombComponent.getArrPosition();\r\n                    let time = Math.random() * 0.8;\r\n                    // 水果旋转效果\r\n                    self.scheduleOnce(() => {\r\n                        if (!blockComponent.isDestroying) {\r\n                            return;\r\n                        }\r\n                        let blockPosition = node.convertToNodeSpaceAR(blockComponent.node.parent.convertToWorldSpaceAR(blockComponent.node.position));\r\n                        blockComponent.node.parent = node;\r\n                        blockComponent.node.position = blockPosition;\r\n                        let position = nodBomb.convertToNodeSpaceAR(nodBomb.parent.convertToWorldSpaceAR(bombComponent.getArrPosition()));\r\n                        blockComponent.node.runAction(cc.sequence(\r\n                            // cc.delayTime(0.5),\r\n                            cc.spawn(\r\n                                cc.scaleTo(1.5, 0.4, 0.4).easing(cc.easeQuinticActionIn()),\r\n                                cc.moveTo(1.5, position.x, position.y).easing(cc.easeQuinticActionIn()),\r\n                                // cc.rotateBy(1, -time / 1 * 360),\r\n                            ),\r\n                            cc.callFunc(() => {\r\n                                Play.DataPve.collectFruitCnt[blockComponent.type - 1]++;\r\n                                blockComponent.recoveryObjective(false);\r\n                                blockComponent.node.destroy();\r\n                            })\r\n                        ));\r\n                        node.runAction(cc.sequence(\r\n                            cc.spawn(\r\n                                cc.scaleTo(1.5, 0, 0).easing(cc.easeQuinticActionIn()),\r\n                                cc.rotateBy(1.5, 360).easing(cc.easeQuinticActionIn())),\r\n                            cc.callFunc(() => {\r\n                                node.destroy();\r\n                            })\r\n                        ));\r\n                    }, time)\r\n                })(x, y, blockComponent);\r\n            }\r\n        }\r\n        self.scheduleOnce(() => {\r\n            self.moveAllTileDown();\r\n        }, 1.4)\r\n        let anim = nodBomb.getComponent(cc.Animation);\r\n        self.scheduleOnce(() => {\r\n            anim.play('aniOneColorBomb');\r\n            this.playWindmillBg(nodBomb);\r\n        }, 0.2)\r\n\r\n        await Algorithm.delay(2.3);\r\n        this.resetRemindTime();\r\n        anim.stop();\r\n        for (let k = 0; k < self.actionList.length; ++k) {\r\n            if (nodBomb == self.actionList[k]) {\r\n                self.actionList.splice(k, 1);\r\n                self.tiles[touchX][touchY] = null;\r\n                bombComponent.isDestroying = false;\r\n                bombComponent.destroyTile();\r\n            }\r\n        }\r\n\r\n        if (self.actionList.length == 0) {\r\n            StateMgr.INSTANCE.isBombOver = true;\r\n            self.canTouch = true;\r\n            if (self.gameStat !== GAME_STAT.GAMEING) {\r\n                self.igniteBomb();\r\n                return;\r\n            }\r\n            self.panelHeader.panelGuide.guide();\r\n            self.moveAllTileDown();\r\n        } else {\r\n            self.moveAllTileDown();\r\n        }\r\n    }\r\n\r\n    // 风车动画\r\n    playWindmillBg(node) {\r\n        let bg = node.getChildByName('content').getChildByName('bombzzj1').getChildByName('bg');\r\n        bg.active = true;\r\n        for (let i = 0; i < bg.children.length; ++i) {\r\n            bg.children[i].getComponent(cc.Animation).play();\r\n        }\r\n\r\n        let bgStar1 = node.getChildByName('content').getChildByName('bombzzj1').getChildByName('bgStar1');\r\n        bgStar1.active = true;\r\n        for (let i = 0; i < bgStar1.children.length; ++i) {\r\n            bgStar1.children[i].getComponent(cc.Animation).play();\r\n        }\r\n\r\n        let bgStar2 = node.getChildByName('content').getChildByName('bombzzj1').getChildByName('bgStar2');\r\n        bgStar2.active = true;\r\n        for (let i = 0; i < bgStar2.children.length; ++i) {\r\n            bgStar2.children[i].getComponent(cc.Animation).play();\r\n        }\r\n    }\r\n\r\n    // 是否为下落口\r\n    isDownEntry(x, y) {\r\n        for (let i = 0; i < Play.DataPve.levelData.fallDownPoint.length; ++i) {\r\n            let pointX = Math.floor(Play.DataPve.levelData.fallDownPoint[i] / (this.tiles.length + 1));\r\n            let pointY = Play.DataPve.levelData.fallDownPoint[i] % this.tiles[0].length;\r\n            if (pointX === x && pointY === y) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    recursive = 0;\r\n    // 已有的方块下落\r\n    async tileDown() {\r\n        // console.log('tileDown');\r\n        let self = this;\r\n        this.recursive++;\r\n        let delayTime = 0.08;\r\n        let hadDown = false;\r\n        for (let y = 0; y < 9; ++y) {\r\n            for (let x = 0; x < 8; ++x) {\r\n                if (Play.DataPve.grid[x][y] === GRID_TYPE.EMPTY) {\r\n                    continue;\r\n                }\r\n                if (this.tiles[x][y]) {\r\n                    continue;\r\n                }\r\n                if (this.tiles[x][y + 1] && this.tiles[x][y + 1].tileType !== TILE_TYPE.WALL) {\r\n                    // 上方为可下落\r\n                    if (this.tiles[x][y + 1].tileType === TILE_TYPE.BOMB && this.tiles[x][y + 1].isDestroying) {\r\n                        continue;\r\n                    }\r\n                    this.tiles[x][y] = this.tiles[x][y + 1];\r\n                    this.tiles[x][y + 1] = null;\r\n                    this.tiles[x][y].moveTo(x, y, null);\r\n                    hadDown = true;\r\n                } else if (this.tiles[x][y + 1] && this.tiles[x][y + 1].tileType === TILE_TYPE.WALL) {\r\n                    // 上方为墙\r\n                    if (this.tiles[x - 1] && this.tiles[x - 1][y + 1] && this.tiles[x - 1][y + 1].tileType !== TILE_TYPE.WALL) {\r\n                        if (this.tiles[x - 1][y + 1].tileType !== TILE_TYPE.BOMB || !this.tiles[x - 1][y + 1].isDestroying) {\r\n                            this.tiles[x - 1][y + 1].moveTo(x, y, null);\r\n                            this.tiles[x][y] = this.tiles[x - 1][y + 1];\r\n                            this.tiles[x - 1][y + 1] = null;\r\n                            hadDown = true;\r\n                            continue;\r\n                        }\r\n                    }\r\n                    if (this.tiles[x + 1] && this.tiles[x + 1][y + 1] && this.tiles[x + 1][y + 1].tileType !== TILE_TYPE.WALL) {\r\n                        if (this.tiles[x + 1][y + 1].tileType !== TILE_TYPE.BOMB || !this.tiles[x + 1][y + 1].isDestroying) {\r\n                            this.tiles[x + 1][y + 1].moveTo(x, y, null);\r\n                            this.tiles[x][y] = this.tiles[x + 1][y + 1];\r\n                            this.tiles[x + 1][y + 1] = null;\r\n                            hadDown = true;\r\n                        }\r\n                    }\r\n                } else if (Play.DataPve.grid[x][y] === GRID_TYPE.UPGATE) {\r\n                    // 上方有传送门\r\n                    let newX = 0;\r\n                    let newY = 0;\r\n                    for (let i = 0; i < Play.DataPve.levelData.grid.gate.length; ++i) {\r\n                        if (Play.DataPve.levelData.grid.gate[i].upgate == x * 9 + y) {\r\n                            newX = Math.floor(Play.DataPve.levelData.grid.gate[i].downgate / (this.tiles.length + 1));\r\n                            newY = Play.DataPve.levelData.grid.gate[i].downgate % this.tiles[0].length;\r\n                        }\r\n                    }\r\n                    if (this.tiles[newX][newY]) {\r\n                        // 上方不为空\r\n                        if (this.tiles[newX][newY].tileType !== TILE_TYPE.WALL) {\r\n                            if (this.tiles[newX][newY].tileType !== TILE_TYPE.BOMB || !this.tiles[newX][newY].isDestroying) {\r\n                                this.tiles[x][y] = this.tiles[newX][newY];\r\n                                this.tiles[newX][newY] = null;\r\n                                // this.tiles[x][y].setArrPosition(x, y + 1);\r\n                                this.tiles[x][y].gateTo(x, y, null);\r\n                                delayTime = 0.13;\r\n                                hadDown = true;\r\n                            }\r\n                        }\r\n                    }\r\n                } else if (Play.DataPve.grid[x][y + 1] === 0 && !this.isDownEntry(x, y) && Play.DataPve.grid[x][y] !== GRID_TYPE.UPGATE) {\r\n                    // 上方没有格子且不是下落点，且没有传送门\r\n                    if (this.tiles[x - 1] && this.tiles[x - 1][y + 1]) {\r\n                        if (this.tiles[x - 1][y + 1].tileType !== TILE_TYPE.WALL) {\r\n                            if (this.tiles[x - 1][y + 1].tileType !== TILE_TYPE.BOMB ||\r\n                                (this.tiles[x - 1][y + 1].tileType === TILE_TYPE.BOMB && !this.tiles[x - 1][y + 1].isDestroying)) {\r\n                                this.tiles[x - 1][y + 1].moveTo(x, y, null);\r\n                                this.tiles[x][y] = this.tiles[x - 1][y + 1];\r\n                                this.tiles[x - 1][y + 1] = null;\r\n                                hadDown = true;\r\n                                continue;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (this.tiles[x + 1] && this.tiles[x + 1][y + 1]) {\r\n                        if (this.tiles[x + 1][y + 1].tileType !== TILE_TYPE.WALL) {\r\n                            if (this.tiles[x + 1][y + 1].tileType !== TILE_TYPE.BOMB ||\r\n                                (this.tiles[x + 1][y + 1].tileType === TILE_TYPE.BOMB && !this.tiles[x + 1][y + 1].isDestroying)) {\r\n                                this.tiles[x + 1][y + 1].moveTo(x, y, null);\r\n                                this.tiles[x][y] = this.tiles[x + 1][y + 1];\r\n                                this.tiles[x + 1][y + 1] = null;\r\n                                hadDown = true;\r\n                            }\r\n                        }\r\n                    }\r\n                } else if (this.isDownEntry(x, y)) {\r\n                    // 当前为下落点\r\n                    this.spawnRandomTile(x, y);\r\n                    hadDown = true;\r\n                } else {\r\n                    // 上方为空\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n        if (hadDown) {\r\n            await Algorithm.delay(delayTime);\r\n            this.tileDown();\r\n        }\r\n        this.recursive--;\r\n\r\n        if (this.recursive === 0) {\r\n            // await Algorithm.delay(0.42);\r\n\r\n            this.panelHeader.panelGuide.guide();\r\n\r\n            StateMgr.INSTANCE.isGameOver = true;\r\n            StateMgr.INSTANCE.isAllDownOver = true;\r\n\r\n            if (StateMgr.INSTANCE.haveTransport) {\r\n                this.transport();\r\n            }\r\n            this.resetRemindTime();\r\n            this.gameOver();\r\n            this.scheduleOnce(() => {\r\n            }, 1);\r\n        }\r\n    }\r\n    // 所有方块向下移动\r\n    public async moveAllTileDown() {\r\n        if (!StateMgr.INSTANCE.canAllDown()) {\r\n            return\r\n        }\r\n        // console.log('movedown')\r\n        this.hadRemindTime();\r\n        StateMgr.INSTANCE.isGameOver = false;\r\n        StateMgr.INSTANCE.isAllDownOver = false;\r\n        this.tileDown();\r\n    }\r\n\r\n    // 轨道移动\r\n    async transport() {\r\n        let self = this;\r\n        if (!this.transportMove) {\r\n            return;\r\n        }\r\n        if (!StateMgr.INSTANCE.canTransport()) {\r\n            return\r\n        }\r\n\r\n        this.transportMove = false;\r\n        let transport = Play.DataPve.levelData.grid.transport;\r\n\r\n        for (let i = 0; i < transport.length; ++i) {\r\n            let startX = Math.floor(transport[i].start / (Play.DataPve.grid.length + 1));\r\n            let startY = transport[i].start % Play.DataPve.grid[0].length;\r\n            let endX = Math.floor(transport[i].end / (Play.DataPve.grid.length + 1));\r\n            let endY = transport[i].end % Play.DataPve.grid[0].length;\r\n\r\n\r\n            if (transport[i].type === TRANSPORT_TYPE.LEFT) {\r\n                // 把移动方向的第一个tile放到transport的mask节点之下\r\n                let endTile = this.tiles[startX][startY];\r\n                let node = cc.instantiate(endTile.node);\r\n                node.parent = this.transports[startX][startY].getChildByName('mask');\r\n                node.x = 0;\r\n                node.y = 0;\r\n                // 复制第一个tile放到最后一个transport的mask节点之下，同时设置坐标\r\n                let oldParent = endTile.node.parent;\r\n                endTile.node.parent = this.transports[endX][endY].getChildByName('mask');\r\n                endTile.node.x = 80;\r\n                endTile.node.y = 0;\r\n                // 播放动作\r\n                var action1 = cc.sequence(\r\n                    cc.moveTo(0.3, -80, 0),\r\n                    cc.callFunc(() => {\r\n                        node.destroy();\r\n                    })\r\n                )\r\n                node.runAction(action1);\r\n\r\n                var action2 = cc.sequence(\r\n                    cc.moveTo(0.3, 0, 0),\r\n                    cc.callFunc(() => {\r\n                        endTile.node.parent = oldParent;\r\n                        endTile.setArrPosition(endX, endY);\r\n                        if (StateMgr.INSTANCE.haveTransport && endTile.tileType === TILE_TYPE.PET) {\r\n                            endTile.getObstacle(true);\r\n                        }\r\n                    })\r\n                )\r\n                endTile.node.runAction(action2);\r\n\r\n                for (let j = startX + 1; j <= endX; ++j) {\r\n                    this.tiles[j - 1][startY] = this.tiles[j][startY];\r\n                    this.tiles[j][startY].transportTo(j - 1, startY, null, false);\r\n                }\r\n                this.tiles[endX][endY] = endTile;\r\n            }\r\n            if (transport[i].type === TRANSPORT_TYPE.RIGHT) {\r\n                // 把移动方向的第一个tile放到transport的mask节点之下\r\n                let endTile = this.tiles[endX][endY];\r\n                let node = cc.instantiate(endTile.node);\r\n                node.parent = this.transports[endX][endY].getChildByName('mask');\r\n                node.x = 0;\r\n                node.y = 0;\r\n                // 复制第一个tile放到最后一个transport的mask节点之下，同时设置坐标\r\n                let oldParent = endTile.node.parent;\r\n                endTile.node.parent = this.transports[startX][startY].getChildByName('mask');\r\n                endTile.node.x = -80;\r\n                endTile.node.y = 0;\r\n                // 播放动作\r\n                var action1 = cc.sequence(\r\n                    cc.moveTo(0.3, 80, 0),\r\n                    cc.callFunc(() => {\r\n                        node.destroy();\r\n                    })\r\n                )\r\n                node.runAction(action1);\r\n\r\n                var action2 = cc.sequence(\r\n                    cc.moveTo(0.3, 0, 0),\r\n                    cc.callFunc(() => {\r\n                        endTile.node.parent = oldParent;\r\n                        endTile.setArrPosition(startX, startY);\r\n                        if (StateMgr.INSTANCE.haveTransport && endTile.tileType === TILE_TYPE.PET) {\r\n                            endTile.getObstacle(true);\r\n                        }\r\n                    })\r\n                )\r\n                endTile.node.runAction(action2);\r\n\r\n                for (let j = endX - 1; j >= startX; --j) {\r\n                    this.tiles[j + 1][startY] = this.tiles[j][startY];\r\n                    this.tiles[j][startY].transportTo(j + 1, startY, null, false);\r\n                }\r\n                this.tiles[startX][startY] = endTile;\r\n            }\r\n            // if (transport[i].type === TRANSPORT_TYPE.UP) {\r\n            //     this.tiles[startX][startY].node.parent = this.transports[startX][startY].getChildByName('mask');\r\n            // }\r\n            // if (transport[i].type === TRANSPORT_TYPE.DOWN) {\r\n            //     this.tiles[endX][endY].node.parent = this.transports[startX][startY].getChildByName('mask');\r\n            // }\r\n        }\r\n        await Algorithm.delay(0.3);\r\n        if (StateMgr.INSTANCE.haveTransport) {\r\n            StateMgr.INSTANCE.isTransportOver = true;\r\n        }\r\n\r\n        self.canTouch = true;\r\n        self.gameOver();\r\n    }\r\n\r\n    hadShowAddStep = false;\r\n    checkResult() {\r\n        if (Play.DataPve.checkWin()) {\r\n            let playPveFinishC2S = new PlayPveFinishC2S();\r\n            playPveFinishC2S.pveId = Play.DataPve.curLevel;\r\n            playPveFinishC2S.pveWin = 1;\r\n            playPveFinishC2S.pveScore = Play.DataPve.score;\r\n            playPveFinishC2S.remainStepsTime = Play.DataPve.saveStep > Play.DataPve.saveTime ? Play.DataPve.saveStep : Play.DataPve.saveTime;\r\n            // console.log(playPveFinishC2S.remainStepsTime);\r\n            window['Partner'].postMsg(4, { valuekey: ValueKey.levelScore, score: Play.DataPve.score });\r\n\r\n            // 更新社交需要的数据\r\n            SocialManager.INSTANCE.setUserStar(Modules.Home.DataPlayer.FortuneStar + Modules.Home.DataPlayer.PlayCntWin / Modules.Home.DataPlayer.PlayCntTotal);\r\n            NetUtil.SendMsg(playPveFinishC2S);\r\n            DYNotify.post(Message.GAME_WIN)\r\n        } else if (StateMgr.INSTANCE.isStopOperate && !Play.DataPve.checkWin()) {\r\n            if (Play.DataPve.hadAddStep) {\r\n                this.PlayUI.loseGame();\r\n            } else {\r\n                if (!this.hadShowAddStep) {\r\n                    this.hadShowAddStep = true;\r\n                    UIFunc.openUI('UIAddStep', (node) => {\r\n                        node.getComponent('UIAddStep').init(this);\r\n                    })\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    //生成新的方块\r\n    public spawnRandomTile(x, y) {\r\n        Play.DataPve.spawnObjective((tileType, type, subType) => {\r\n            if (!tileType) {\r\n                this.spawnBlock(x, y);\r\n            } else if (tileType === TILE_TYPE.PET) {\r\n                this.spawnPet(x, y, type, true);\r\n            } else if (tileType === TILE_TYPE.TABLEWARE) {\r\n                this.spawnTableware(x, y, type, true);\r\n            }\r\n        })\r\n    }\r\n    // 生成一个指定方块\r\n    public spawnTile(x, y, tileType, type, subType) {\r\n        if (tileType === TILE_TYPE.PET) {\r\n            this.spawnPet(x, y, type, false);\r\n        } else if (tileType === TILE_TYPE.TABLEWARE) {\r\n            this.spawnTableware(x, y, type, false);\r\n        }\r\n        Play.DataPve.changePetOrBugData(tileType, type, subType);\r\n    }\r\n    // 生成炸弹\r\n    private async spawnBomb(x: number, y: number, type, subType?) {\r\n        return new Promise((resolve, reject) => {\r\n            if (this.tiles[x][y] && this.tiles[x][y].tileType === TILE_TYPE.BLOCK) {\r\n                this.tiles[x][y].destroyTile(BLOCKDES_TYPE.NOACTION_NODES);\r\n            }\r\n            let nodBomb = Play.DataPve.popBomb();\r\n            if (nodBomb.parent != this.panelTile) {\r\n                nodBomb.parent = this.panelTile;\r\n            }\r\n            nodBomb.zIndex = TILE_ZINDEX.NORMAL;\r\n            let bombComponent = this.tiles[x][y] = nodBomb.getComponent('Bomb');\r\n            nodBomb.scale = 1;\r\n            let width = 80;\r\n            bombComponent.init();\r\n            bombComponent.setContentSize(width, width);\r\n            bombComponent.game = this;\r\n            bombComponent.type = type;\r\n            bombComponent.setArrPosition(x, y);\r\n            if (type == BOMB_TYPE.BOMB_ONE_COLOR) {\r\n                bombComponent.subType = subType;\r\n                let animation = nodBomb.getComponent(cc.Animation);\r\n                animation.play('aniSpawnZZJ');\r\n                animation['onSpawnZZJFinished'] = () => {\r\n                    bombComponent.genBombAnimation();\r\n                }\r\n                resolve();\r\n            } else {\r\n                bombComponent.genBombAnimation();\r\n                resolve();\r\n            }\r\n        })\r\n    }\r\n    // 生成Pet\r\n    private spawnPet(x: number, y: number, type, isDown = true) {\r\n        if (this.tiles[x][y]) {\r\n            this.tiles[x][y].destroyTile(BLOCKDES_TYPE.NOACTION_NODES);\r\n        }\r\n        let nodPet = Play.DataPve.popObstacle();\r\n        if (nodPet.parent != this.panelSpine) {\r\n            nodPet.parent = this.panelSpine;\r\n        }\r\n        nodPet.zIndex = TILE_ZINDEX.NORMAL;\r\n        let petComponent = this.tiles[x][y] = nodPet.getComponent(\"Obstacle\");\r\n        petComponent.type = type;\r\n        let width = 80;\r\n        petComponent.game = this;\r\n        nodPet.scale = 1;\r\n        petComponent.setContentSize(width, width);\r\n        if (isDown) {\r\n            petComponent.newTile(x, y)\r\n        } else {\r\n            petComponent.setArrPosition(x, y)\r\n        }\r\n    }\r\n\r\n    // 生成block\r\n    private spawnBlock(x: number, y: number, type?) {\r\n        let nodBlock = Play.DataPve.popBlock();\r\n        if (nodBlock.parent != this.panelTile) {\r\n            nodBlock.parent = this.panelTile;\r\n        }\r\n        nodBlock.zIndex = TILE_ZINDEX.NORMAL;\r\n        nodBlock.stopAllActions();\r\n        let blockComponent = this.tiles[x][y] = nodBlock.getComponent(\"Block\");\r\n        blockComponent.init();\r\n\r\n        blockComponent.game = this;\r\n        nodBlock.scale = 1;\r\n\r\n        let width = 80;\r\n        blockComponent.setContentSize(width, width);\r\n        let randomNum = type;\r\n        if (!randomNum) {\r\n            randomNum = Math.floor(Math.random() * Play.DataPve.levelData.blockcount) + 1;\r\n            blockComponent.type = randomNum;\r\n            blockComponent.newTile(x, y)\r\n        } else {\r\n            blockComponent.type = randomNum;\r\n            blockComponent.setArrPosition(x, y)\r\n        }\r\n    }\r\n    // 生成tableware\r\n    private spawnTableware(x: number, y: number, type, isDown = true) {\r\n        if (this.tiles[x][y]) {\r\n            this.tiles[x][y].destroyTile(BLOCKDES_TYPE.NOACTION_NODES);\r\n        }\r\n        let nodTableware = cc.instantiate(Play.DataPve.pfbTableware);\r\n        if (nodTableware.parent != this.panelTile) {\r\n            nodTableware.parent = this.panelTile;\r\n        }\r\n        nodTableware.zIndex = TILE_ZINDEX.NORMAL;\r\n        let tablewareComponent = this.tiles[x][y] = nodTableware.getComponent(\"Tableware\");\r\n        tablewareComponent.game = this;\r\n        tablewareComponent.type = type;\r\n\r\n        let width = 80;\r\n        tablewareComponent.setContentSize(width, width);\r\n\r\n        if (isDown) {\r\n            tablewareComponent.newTile(x, y)\r\n        } else {\r\n            tablewareComponent.setArrPosition(x, y)\r\n        }\r\n\r\n    }\r\n    // 生成Wall\r\n    private spawnWall(x: number, y: number, type) {\r\n        if (this.tiles[x][y]) {\r\n            this.tiles[x][y].destroyTile(BLOCKDES_TYPE.NOACTION_NODES);\r\n        }\r\n        let nodWall = cc.instantiate(Play.DataPve.pfbWall);\r\n        if (nodWall.parent != this.panelTile) {\r\n            nodWall.parent = this.panelTile;\r\n        }\r\n        nodWall.zIndex = TILE_ZINDEX.NORMAL;\r\n        let wallComponent = this.tiles[x][y] = nodWall.getComponent(\"Wall\");\r\n        wallComponent.game = this;\r\n        wallComponent.type = type;\r\n\r\n        let width = 80;\r\n        wallComponent.setContentSize(width, width);\r\n\r\n        wallComponent.setArrPosition(x, y)\r\n    }\r\n\r\n\r\n    // 播放粒子\r\n    playParticle(x, y) {\r\n        return;\r\n        let node = cc.instantiate(this.pfbParticle);\r\n        node.parent = this.panelParticle;\r\n        node.getComponent('Particle').setArrPosition(x, y);\r\n        node.getComponent('Particle').play();\r\n    }\r\n\r\n    private stopRemindAction() {\r\n        for (var x = 0; x < this.tiles.length; ++x) {\r\n            for (var y = 0; y < this.tiles[0].length; ++y) {\r\n                if (this.tiles[x][y] && this.tiles[x][y].tileType === TILE_TYPE.BLOCK) {\r\n                    this.tiles[x][y].node.stopActionByTag(Action_type.Tip);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * gameover的几种情况：\r\n     * 进入引爆道具阶段\r\n     * 成功\r\n     * \r\n     * 都需要下落完成\r\n     * \r\n     * 失败\r\n     * 1.时间到达\r\n     * 2.步数耗尽\r\n     * 都需要下落完成\r\n     */\r\n    public async gameOver() {\r\n        if (!StateMgr.INSTANCE.canGameOver()) {\r\n            return\r\n        }\r\n        if (Play.DataPve.checkWin() && !this.panelBonus.active) {\r\n            this.canTouch = true;\r\n        }\r\n        if (!Play.DataPve.checkWin()) {\r\n            this.checkResult();\r\n            return\r\n        }\r\n        StateMgr.INSTANCE.isStopOperate = true;\r\n        this.panelBonus.active = true;\r\n\r\n        // 时间关卡\r\n        if (Play.DataPve.isTimeLevel) {\r\n            this.checkResult();\r\n            return\r\n        }\r\n        StateMgr.INSTANCE.isGameOver = false;\r\n\r\n        if (this.gameStat == GAME_STAT.GAMEING) {\r\n            Play.DataPve.saveStepAndTime();\r\n            Play.DataPve.gameBegan = false;\r\n            this.canTouch = false;\r\n            this.stopRemindAction();\r\n            this.hadRemindTime();\r\n            // this.bonusCallBack = cb;\r\n            this.PlayUI.Audio.stopBgPve();\r\n            this.PlayUI.Audio.bonusTime();\r\n            this.gameStat = GAME_STAT.BONUSTIME;\r\n            await this.panelHeader.gameOver();\r\n            StateMgr.INSTANCE.isBonusActionOver = true;\r\n\r\n            StateMgr.INSTANCE.isGameOver = true;\r\n            // let bombArr = 0;\r\n            this.hadAudAreaPlay = false;\r\n            this.hadAudColPlay = false;\r\n\r\n            this.igniteBomb();\r\n        } else if (!this.hadBomb() && StateMgr.INSTANCE.canBonus() && this.gameStat == GAME_STAT.BONUSTIME) {\r\n            StateMgr.INSTANCE.isBonusOver = true;\r\n            // let hasBomb = await this.bonusTime();\r\n\r\n            await this.bonusTime();\r\n            this.gameStat = GAME_STAT.CHECKRESULT;\r\n            // StateMgr.INSTANCE.isGameOver = false;\r\n            this.igniteBomb();\r\n\r\n            // if (!hasBomb) {\r\n            //     this.gameOver();\r\n            // }\r\n        } else if (!this.hadBomb() && (this.gameStat == GAME_STAT.CHECKRESULT && StateMgr.INSTANCE.isStopOperate)) {\r\n            this.PlayUI.Audio.stopBonusTime();\r\n            this.gameStat = GAME_STAT.GAMEOVER;\r\n            this.checkResult();\r\n        }\r\n    }\r\n\r\n    hadBomb() {\r\n        for (var x = 0; x < this.tiles.length; ++x) {\r\n            for (var y = 0; y < this.tiles[0].length; ++y) {\r\n                if (this.tiles[x][y] && this.tiles[x][y].tileType === TILE_TYPE.BOMB) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    // 按规律引爆炸弹\r\n    // 从左上角开始引爆第一个，等待连锁触发完成，引爆第二个\r\n    async igniteBomb() {\r\n        var count = 0;\r\n        for (var x = 0; x < this.tiles.length; ++x) {\r\n            for (var y = 0; y < this.tiles[0].length; ++y) {\r\n                if (this.tiles[x][y] && this.tiles[x][y].tileType === TILE_TYPE.BOMB) {\r\n                    var bombComponent = this.tiles[x][y];\r\n                    bombComponent.ignite();\r\n                    count++;\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        await Algorithm.delay(0.2);\r\n        this.moveAllTileDown();\r\n    }\r\n\r\n    async showBonusTime() {\r\n        if (StateMgr.INSTANCE.canBonus()) {\r\n            await this.bonusTime();\r\n            StateMgr.INSTANCE.isBonusOver = true;\r\n            // this.bonusCallBack && this.bonusCallBack();\r\n        }\r\n    }\r\n\r\n    resetRemindTime() {\r\n        this.hadRemind = false\r\n        this.oneSec = 0;\r\n        this.remindTime = 0;\r\n    }\r\n    hadRemindTime() {\r\n        this.hadRemind = true\r\n    }\r\n\r\n    // 背景波浪动画\r\n    effect(x, y) {\r\n        if (!this.tileBgs[x] || !this.tileBgs[x][y] || this.tileBgs[x][y].hadAction) {\r\n            this.scheduleOnce(() => {\r\n                if (this.tileBgs[x + 1] && this.tileBgs[x + 1][y] && !this.tileBgs[x + 1][y].hadAction) {\r\n                    this.effect(x + 1, y);\r\n                }\r\n                if (this.tileBgs[x - 1] && this.tileBgs[x - 1][y] && !this.tileBgs[x - 1][y].hadAction) {\r\n                    this.effect(x - 1, y);\r\n\r\n                }\r\n                if (this.tileBgs[x] && this.tileBgs[x][y + 1] && !this.tileBgs[x][y + 1].hadAction) {\r\n                    this.effect(x, y + 1);\r\n\r\n                }\r\n                if (this.tileBgs[x] && this.tileBgs[x][y - 1] && !this.tileBgs[x][y - 1].hadAction) {\r\n                    this.effect(x, y - 1);\r\n\r\n                }\r\n            }, 0.1)\r\n            return;\r\n        }\r\n        this.tileBgs[x][y].hadAction = true;\r\n\r\n        let action = cc.sequence(\r\n            cc.fadeTo(0.1, 150),\r\n            cc.callFunc(() => {\r\n                if (this.tileBgs[x + 1] && this.tileBgs[x + 1][y] && !this.tileBgs[x + 1][y].hadAction) {\r\n                    this.effect(x + 1, y);\r\n                }\r\n                if (this.tileBgs[x - 1] && this.tileBgs[x - 1][y] && !this.tileBgs[x - 1][y].hadAction) {\r\n                    this.effect(x - 1, y);\r\n\r\n                }\r\n                if (this.tileBgs[x] && this.tileBgs[x][y + 1] && !this.tileBgs[x][y + 1].hadAction) {\r\n                    this.effect(x, y + 1);\r\n\r\n                }\r\n                if (this.tileBgs[x] && this.tileBgs[x][y - 1] && !this.tileBgs[x][y - 1].hadAction) {\r\n                    this.effect(x, y - 1);\r\n\r\n                }\r\n            }),\r\n            cc.fadeTo(0.2, 255),\r\n            cc.fadeOut(0.4),\r\n            cc.callFunc(() => {\r\n                this.tileBgs[x][y].hadAction = false;\r\n            })\r\n        );\r\n\r\n        this.tileBgs[x][y].getChildByName('sprLight').runAction(action);\r\n    }\r\n\r\n    async bonusTime() {\r\n        var self = this;\r\n\r\n        if (this.panelHeader.nodLastTime.active) {\r\n            return;\r\n        }\r\n\r\n        this.effect(3, 4);\r\n        this.effect(4, 4);\r\n\r\n        await Algorithm.delay(1);\r\n\r\n        var arrBlock = [];\r\n        for (var x = 0; x < this.tiles.length; ++x) {\r\n            for (var y = 0; y < this.tiles[0].length; ++y) {\r\n                if (this.tiles[x][y] && this.tiles[x][y].tileType === TILE_TYPE.BLOCK) {\r\n                    arrBlock.push(x + '#' + y);\r\n                }\r\n            }\r\n        }\r\n\r\n        var arr = new Array();\r\n        var count = Play.DataPve.remainStep;\r\n        if (Play.DataPve.levelData.step == 0) {\r\n            count = 0;\r\n        }\r\n        Algorithm.randomMore(count, arrBlock.length, arr, (index) => {\r\n            return false;\r\n        });\r\n\r\n        for (var i = 0; i < arr.length; ++i) {\r\n            let x = Number(arrBlock[arr[i]].split(\"#\")[0]);\r\n            let y = Number(arrBlock[arr[i]].split(\"#\")[1]);\r\n\r\n            var nodBonusBall = cc.instantiate(Play.DataPve.pfbBonusBall);\r\n            nodBonusBall.parent = this.panelBonus;\r\n            var startPs = this.node.convertToNodeSpaceAR(this.panelHeader.labCountDown.node.parent.convertToWorldSpaceAR(this.panelHeader.labCountDown.node.position));\r\n            nodBonusBall.setPosition(startPs);\r\n            var position = this.node.convertToNodeSpaceAR(this.panelTile.convertToWorldSpaceAR(this.tiles[x][y].node.getPosition()));\r\n            nodBonusBall.runAction(cc.sequence(\r\n                cc.moveTo(0.5, position),\r\n                cc.callFunc(function (x, y, nodBonusBall) {\r\n                    let type = Math.random() > 0.5 ? BOMB_TYPE.BOMB_AROUND : BOMB_TYPE.BOMB_COLUMN;\r\n                    this.spawnBomb(x, y, type);\r\n                    this.panelHeader.addStep();\r\n                    nodBonusBall.destroy();\r\n                }.bind(this, x, y, nodBonusBall))\r\n            ));\r\n            await Algorithm.delay(0.3);\r\n        }\r\n        await Algorithm.delay(0.4);\r\n        this.hadAudAreaPlay = false;\r\n    }\r\n\r\n    update(dt) {\r\n        if (!Play.DataPve.gameBegan) {\r\n            return;\r\n        }\r\n\r\n        this.oneSec += dt;\r\n        this.remindTime += dt;\r\n        if (this.oneSec >= 2 && !this.hadRemind && !StateMgr.INSTANCE.isStopOperate) {\r\n            this.oneSec = 0;\r\n            // 提示动画\r\n            var allArr = Algorithm.checkoutMatch(this.tiles);\r\n\r\n            if (this.remindTime >= 5 && allArr.length > 0) {\r\n                this.hadRemindTime();\r\n                var index = Math.floor(Math.random() * allArr.length);\r\n                var arr = allArr[index];\r\n                this.stopRemindAction();\r\n\r\n                this.lastArr = arr;\r\n                for (let i = 0; i < arr.length; ++i) {\r\n                    var x = Number(arr[i].split(\"#\")[0]);\r\n                    var y = Number(arr[i].split(\"#\")[1]);\r\n                    if (this.tiles[x][y] && this.tiles[x][y].tileType === TILE_TYPE.BLOCK) {\r\n                        this.tiles[x][y].node.stopActionByTag(Action_type.Tip);\r\n\r\n                        var action = cc.repeatForever(\r\n                            cc.sequence(\r\n                                // cc.blink(1, 3),\r\n                                cc.scaleTo(0.1, 1.1, 1.1),\r\n                                cc.scaleTo(0.2, 0.9, 0.9),\r\n                                cc.scaleTo(0.1, 1.1, 1.1),\r\n                                cc.scaleTo(0.2, 0.9, 0.9),\r\n                                cc.scaleTo(0.1, 1.1, 1.1),\r\n                                cc.scaleTo(0.2, 0.9, 0.9),\r\n                                cc.scaleTo(0.15, 1.05, 1.05),\r\n                                cc.scaleTo(0.05, 1, 1),\r\n                                cc.delayTime(1.5),\r\n                            )\r\n                        )\r\n\r\n                        this.tiles[x][y].node.runAction(action);\r\n                        action.setTag(Action_type.Tip);\r\n                    }\r\n                }\r\n            } else if (allArr.length <= 0) {\r\n                GamePersist.INSTANCE.toast('没有可消除的组合')\r\n                this.hadRemindTime();\r\n                this.canTouch = false;\r\n                this.scheduleOnce(() => {\r\n                    Algorithm.shuffleTiles(this.tiles, () => {\r\n                        this.scheduleOnce(function () {\r\n                            this.resetRemindTime();\r\n                            this.canTouch = true;\r\n                            this.moveAllTileDown(false);\r\n                        }, 1);\r\n                    });\r\n                }, 2)\r\n            }\r\n        }\r\n    }\r\n}\r\n"]}