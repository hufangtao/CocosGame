{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\component\\page\\home/assets\\scripts\\app\\component\\page\\home\\HomeManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\component\\page\\home","sourcesContent":["import HomeUI from \"./HomeUI\";\r\nimport HomeModule from \"./HomeModule\";\r\nimport * as Modules from \"../../../module/Modules\";\r\nimport { PlayerSelfInfoS2C, PlayerShareGameS2C } from \"../../../common/net/proto/mods/ProtoSectionPlayer\";\r\nimport {\r\n    RoomMatchRequestC2S,\r\n    RoomInvisibleC2S,\r\n    RoomPlayConfirmC2S\r\n} from \"../../../common/net/proto/mods/ProtoSectionRoom\";\r\nimport { ChatFaceC2S, ChatTextC2S } from \"../../../common/net/proto/mods/ProtoSectionChat\";\r\nimport { PPlaymate } from \"../../../common/net/proto/ProtoType\";\r\nimport { RoomType, BuffUpdate } from \"./RoomDefine\";\r\nimport ResLoader from \"../../../common/loader/Loader\";\r\nimport { Fortune, OpenHomeFrom, ValueKey } from \"../../../common/Defines\";\r\nimport SocialManager from \"../../../common/social/SocialManager\";\r\nimport RuntimeManager from \"../../../common/runtime/RuntimeManager\";\r\nimport * as Misc from \"../../../common/Misc\";\r\nimport GamePersist from \"../../../common/persist/GamePersist\";\r\nimport AccManager from \"../login/AccManager\";\r\nimport {\r\n    GoodsTurntableRecordPullS2C,\r\n    GoodsTurntableRecordPullC2S,\r\n    GoodsPullC2S\r\n} from \"../../../common/net/proto/mods/ProtoSectionGoods\";\r\nimport { TaskListC2S } from \"../../../common/net/proto/mods/ProtoSectionTask\";\r\nimport NetUtil from \"../../../common/net/NetUtil\";\r\nimport DYAudio from \"../../../../dyGame/DYAudio\";\r\nimport * as ConfigVO from \"../../../common/config/vo/ConfigVO\";\r\nimport { Event_type } from \"../../game/PlayDefine\";\r\nimport { Head } from \"../../../common/config/vo/ConfigVO\";\r\nimport { UIFunc } from \"../../../common/UIFunc\";\r\nimport UIInviteFriend from \"../../../ui/UIInviteFriend\";\r\nimport UIInviteDevConfirm from \"../../../ui/UIInviteDevConfirm\";\r\nimport { Message } from \"../../../common/Message\";\r\nimport { DYNotify } from \"../../../../dyGame/DYNotify\";\r\n\r\nexport default class HomeManager {\r\n    private static singleInstance: HomeManager;\r\n\r\n    public static get INSTANCE() {\r\n        if (!this.singleInstance) {\r\n            this.singleInstance = new HomeManager();\r\n        }\r\n        return this.singleInstance;\r\n    }\r\n\r\n    private homeUI: HomeUI = null;\r\n    private homeModule: HomeModule;\r\n\r\n    public UIInviteFriend: UIInviteFriend = null;\r\n\r\n    constructor() {\r\n        this.homeModule = Modules.Home;\r\n        this.bigLotteryRecordRequest();\r\n        this.playerTaskRequest();\r\n        this.playerGoodsRequest();\r\n    }\r\n\r\n    public set HomeUI(value: HomeUI) {\r\n        this.homeUI = value;\r\n    }\r\n\r\n    public get HomeUI(): HomeUI {\r\n        return this.homeUI;\r\n    }\r\n\r\n    public onReceiveShareGameS2C(share: PlayerShareGameS2C) {\r\n        switch (share.reason) {\r\n            case 1:\r\n                Modules.Home.DataPlayer.EnergyShareCnt = share.times;\r\n                break;\r\n            case 2:\r\n                // Modules.Home.DataPlayer.EnergyShareCnt = share.times;\r\n                break;\r\n            case 3:\r\n                Modules.Home.DataPlayer.PropShareCnt = share.times;\r\n                break;\r\n            case 4:\r\n                Modules.Home.DataPlayer.CoinShareCnt = share.times;\r\n                break;\r\n            case 5:\r\n                Modules.Home.DataPlayer.PveShareCnt = share.times;\r\n                break;\r\n        }\r\n    }\r\n\r\n    // 显示设置界面\r\n    public showSettingsPanel() {\r\n        const self = this;\r\n        // GamePersist.INSTANCE.ForceWaiting();\r\n        // ResLoader.loadSingle(\"prefab/home/SettingsLayer\", function (err, settingsLayer: cc.Prefab) {\r\n        //     const settingsPanelNode: cc.Node = cc.instantiate(settingsLayer);\r\n        //     settingsPanelNode.parent = HomeManager.INSTANCE.HomeUI.node;\r\n        //     settingsPanelNode.setPosition(0, 0);\r\n        //     // self.SettingsPanel = RankScript.GetComponent(settingsPanelNode);\r\n        //     GamePersist.INSTANCE.CancelWaiting();\r\n        // });\r\n    }\r\n\r\n    // 显示排行榜界面\r\n    showRankPanel() {\r\n        const self = this;\r\n        GamePersist.INSTANCE.ForceWaiting();\r\n\r\n        UIFunc.openUI('UIRank', (node) => {\r\n            GamePersist.INSTANCE.CancelWaiting();\r\n            GamePersist.INSTANCE.panelPopUp(node.getChildByName('bg_sp'), () => {\r\n                node.getComponent('UIRank').init();\r\n            });\r\n        });\r\n    }\r\n\r\n    // 显示背包界面\r\n    public showBagPanel() {\r\n        const self = this;\r\n        GamePersist.INSTANCE.ForceWaiting();\r\n\r\n        cc.loader.loadRes(\"prefab/home/Bag\", cc.Prefab, (err, prefab) => {\r\n            var nodItem = cc.instantiate(prefab)\r\n            nodItem.parent = HomeManager.INSTANCE.HomeUI.node;\r\n\r\n            nodItem.setPosition(0, 0);\r\n            GamePersist.INSTANCE.CancelWaiting();\r\n            GamePersist.INSTANCE.panelPopUp(nodItem.getChildByName('content'), () => {\r\n            });\r\n            // cc.loader.setAutoReleaseRecursively(prefab, true)\r\n        })\r\n    }\r\n\r\n    // 显示商城界面\r\n    public showShopLayer() {\r\n        ResLoader.loadSingle(\"prefab/home/shop/ShopLayer\", function (err, shopLayer: cc.Prefab) {\r\n            const pShopLayer: cc.Node = cc.instantiate(shopLayer);\r\n            HomeManager.INSTANCE.HomeUI.showPanel(pShopLayer.getComponent(\"ShopLayerScript\"));\r\n            // pShopLayer.parent = HomeManager.INSTANCE.HomeUI.node;\r\n            // pShopLayer.setPosition(0, 0);\r\n        });\r\n    }\r\n\r\n    // 显示战绩界面\r\n    public showAchievementlayer() {\r\n        GamePersist.INSTANCE.ForceWaiting();\r\n\r\n        UIFunc.openUI('UIAchievement', (node) => {\r\n            GamePersist.INSTANCE.CancelWaiting();\r\n            GamePersist.INSTANCE.panelPopUp(node.getChildByName('nodContent'));\r\n        });\r\n    }\r\n\r\n    // 显示邀请等待界面\r\n    public showInvitePanel() {\r\n        if (this.UIInviteFriend) {\r\n            return;\r\n        }\r\n        const self = this;\r\n        UIFunc.openUI('UIInviteFriend', (node) => {\r\n            UIFunc.closeUI('UIInviteDevConfirm', () => { });\r\n\r\n            const UIInviteFriend: UIInviteFriend = node.getComponent('UIInviteFriend');\r\n            self.UIInviteFriend = UIInviteFriend;\r\n        })\r\n    }\r\n\r\n    // 进入邀请等待界面 作为被邀请者\r\n    public showInvitePanelAsInvitee(invtier: string) {\r\n        const self = this;\r\n        UIFunc.openUI('UIInviteFriend', (node) => {\r\n            UIFunc.closeUI('UIInviteDevConfirm', () => { });\r\n\r\n            const UIInviteFriend: UIInviteFriend = node.getComponent('UIInviteFriend');\r\n            self.UIInviteFriend = UIInviteFriend;\r\n            UIInviteFriend.inviteeId = Modules.Home.PlayerId;\r\n            UIInviteFriend.makeInivterInfoRequest(invtier);\r\n        })\r\n    }\r\n\r\n    showHomeAd() {\r\n        this.HomeUI.Prop.showHomeAd();\r\n    }\r\n    hideHomeAd() {\r\n        this.HomeUI.Prop.hideHomeAd();\r\n    }\r\n\r\n    // 点击其他人分享的(也有可能是自己的)卡片重新打开小游戏\r\n    public onReLaunch() {\r\n        const reLaunchOptions = RuntimeManager.INSTANCE.ReLaunchOptions;\r\n        if (!reLaunchOptions) {\r\n            return;\r\n        }\r\n        if (!this.homeUI) {\r\n            return;\r\n        }\r\n        const launchQuery = reLaunchOptions.query;\r\n        const strPlayerId = `${Modules.Home.PlayerId}`;\r\n        // 确保不是点击本人自己的分享卡片\r\n        if (launchQuery.inviter && launchQuery.inviter !== strPlayerId) {\r\n            // TODO closePanels\r\n            if (this.UIInviteFriend) {\r\n                this.UIInviteFriend.onCloseInvitePage();\r\n            }\r\n            this.showInvitePanelAsInvitee(launchQuery.inviter);\r\n        }\r\n    }\r\n\r\n    // 获取全服大奖记录\r\n    public bigLotteryRecordRequest() {\r\n        const data = new GoodsTurntableRecordPullC2S();\r\n        NetUtil.SendMsg(data);\r\n    }\r\n\r\n    // 获取玩家的任务\r\n    public playerTaskRequest() {\r\n        const data = new TaskListC2S();\r\n        NetUtil.SendMsg(data);\r\n    }\r\n\r\n    // 获取玩家的奖品\r\n    public playerGoodsRequest() {\r\n        const requData = new GoodsPullC2S();\r\n        NetUtil.SendMsg(requData);\r\n    }\r\n\r\n    // 发起匹配请求\r\n    public makeMatchRequest(type) {\r\n        const makeRequest = new RoomMatchRequestC2S();\r\n        makeRequest.roomType = type;\r\n        NetUtil.SendMsg(makeRequest);\r\n    }\r\n\r\n    // 发送获取物品请求\r\n    public makeGoodsRequest(goodId: number) {\r\n        const msg = new ChatTextC2S();\r\n        msg.content = \"#goods \" + goodId + \" 1\";\r\n        NetUtil.SendMsg(msg);\r\n        //console.log(\"已发送物品请求，id为\" + goodId);\r\n    }\r\n\r\n    // 取消匹配 或者 邀请\r\n    public makeInvisibleRequest() {\r\n        this.homeUI.doCancelMatch();\r\n        const makeInvisible = new RoomInvisibleC2S();\r\n        NetUtil.SendMsg(makeInvisible);\r\n    }\r\n\r\n    // 房间已经创建 可以比赛了\r\n    // 1 如果是匹配产生的房间 则自动确认比赛\r\n    // 2 如果是邀请产生的房间 则 1) 房主需要进行确认 2) 被邀请的人自动确认比赛\r\n    public onPlayCreate(roomId: number, roomType: number, roomOwner: number, redId: number, bluId: number, playmates: PPlaymate[]) {\r\n        const opponentPlaymate = this.getOpponentPlaymate(playmates);\r\n        if (!opponentPlaymate) {\r\n            cc.warn(`房间开始${roomId}比赛 但是获取不到对手信息`);\r\n            return;\r\n        }\r\n        if (roomType === RoomType.MATCH) {\r\n            this.onMatchPlayCreate(roomId, roomOwner, redId, bluId, opponentPlaymate);\r\n        } else {\r\n            this.onInvitePlayCreate(roomId, roomOwner, redId, bluId, opponentPlaymate);\r\n        }\r\n    }\r\n\r\n    public onPvpAiCreate() {\r\n        let opponentPlaymate = new PPlaymate();\r\n        opponentPlaymate.id = 1;\r\n\r\n        let femaleNameLen = ConfigVO.FemaleName.getExtra(\"id_list\").length;\r\n        let surnNameLen = ConfigVO.Surname.getExtra(\"id_list\").length;\r\n        const surname: string = ConfigVO.Surname.get(ConfigVO.Surname.getExtra(\"id_list\")[Math.floor(Math.random() * surnNameLen)]).name;\r\n        let lastname = ConfigVO.FemaleName.get(ConfigVO.FemaleName.getExtra(\"id_list\")[Math.floor(Math.random() * femaleNameLen)]).name;\r\n        let accName = surname + lastname;\r\n\r\n\r\n        let sex = (Math.random() > 0.5 ? 1 : 2);\r\n        let head_index = Math.floor(Math.random() * 100);\r\n        let prefix = (sex === 1 ? 'male' : 'female')\r\n\r\n        let nameLen = ConfigVO.Name.getExtra(\"id_list_\" + prefix).length;\r\n        accName = ConfigVO.Name.get(ConfigVO.Name.getExtra(\"id_list_\" + prefix)[Math.floor(Math.random() * nameLen)]).name;\r\n        opponentPlaymate.name = accName;\r\n\r\n        opponentPlaymate.headImg = prefix + '-' + head_index + \".png\";\r\n        opponentPlaymate.sex = sex;\r\n        opponentPlaymate.star = 0;\r\n        this.homeModule.DataRoom.bluId = Modules.Acc.PlayerId;\r\n        this.homeModule.DataRoom.opponentPlaymate = opponentPlaymate;\r\n    }\r\n\r\n    // 比赛开始 进入比赛场景\r\n    public onPlayStart(roomId: number) {\r\n        DYAudio.stopMusic();\r\n        if (this.homeModule.DataRoom.currentRoom !== roomId) {\r\n            return;\r\n        }\r\n        DYNotify.post(Event_type.GAMESTART);\r\n    }\r\n\r\n\r\n    // 当前收到了自己的信息\r\n    public onReceiveSelfInfoS2C(msg: PlayerSelfInfoS2C) {\r\n        this.homeModule.MyPlayerInfo = msg.player;\r\n\r\n        var date = new Date();\r\n        this.homeModule.TimeOffset = Math.round(date.getTime() / 1000) - parseInt(this.homeModule.DataPlayer.NowSec);\r\n        // 如果当前不在HomeUI 则切换场景过去\r\n        if (!HomeManager.INSTANCE.HomeUI) {\r\n            // 登陆成功收到主角信息\r\n            if (GamePersist.INSTANCE.RootUI.uiName() === \"LoginUI\") {\r\n                AccManager.INSTANCE.switchToHome();\r\n            }\r\n        }\r\n    }\r\n\r\n    public onBuffStatus(slotId: number, buffId: number, num: number) {\r\n        // console.log(\"技能槽：\", slotId, \" buffId：\", buffId, \"数量：\", num);\r\n\r\n        // DYNotify.post(BuffUpdate);\r\n    }\r\n\r\n    // 当前收到了财富信息\r\n    public onReceiveFortune(fortuneType: number, fortuneValue: number) {\r\n        // console.log(\"FortuneType:\", fortuneType, \"fortuneValue:\", fortuneValue);\r\n        if (fortuneType === Fortune.Gold) {\r\n            this.homeModule.DataPlayer.FortuneGold = fortuneValue;\r\n        } else if (fortuneType === Fortune.Score) {\r\n            this.homeModule.DataPlayer.FortuneScore = fortuneValue;\r\n        } else if (fortuneType === Fortune.Star) {\r\n            this.homeModule.DataPlayer.FortuneStar = fortuneValue;\r\n            let rate = Misc.formatPercent(this.homeModule.DataPlayer.PlayCntWin / this.homeModule.DataPlayer.PlayCntTotal);\r\n\r\n            const StarNum = Misc.calcShowStarCount(fortuneValue);\r\n            var grade = Misc.getGradeName(fortuneValue) + \" \" + StarNum + \"星\";\r\n\r\n            window['Partner'].postMsg(5, {\r\n                valuekey: ValueKey.gameRate,\r\n                rate: this.homeModule.DataPlayer.PlayCntWin / this.homeModule.DataPlayer.PlayCntTotal,\r\n                grade: grade,\r\n                star: fortuneValue\r\n            });\r\n            // 更新社交需要的数据\r\n            SocialManager.INSTANCE.setUserStar(fortuneValue + this.homeModule.DataPlayer.PlayCntWin / this.homeModule.DataPlayer.PlayCntTotal);\r\n        } else if (fortuneType === Fortune.Energy) {\r\n            this.homeModule.DataPlayer.FortuneEnergy = fortuneValue;\r\n        } else if (fortuneType === Fortune.Gold) {\r\n            this.homeModule.DataPlayer.FortuneGold = fortuneType;\r\n        }\r\n        // 触发事件 通知其他模块财富信息变化\r\n        DYNotify.post(Message.EVENT_MODULE_PLAYER_FORTUNE);\r\n    }\r\n\r\n    // 收到对手离开的消息\r\n    public onOpponentLeave(playmateId: number) {\r\n        if (!this.UIInviteFriend) {\r\n            return;\r\n        }\r\n        this.UIInviteFriend.onOpponentLeave(playmateId);\r\n    }\r\n\r\n    // 当前收到了比赛统计\r\n    public onReceivePlayStat(playCntTotal: number, playCntWin: number, saveOnce: number, matchOnce: number, pveTotal: number, pveWin: number, weeklyWin: number, weeklyTotal: number, maxSuccessiveWin: number, level: number, guide: number) {\r\n        this.homeModule.DataPlayer.PlayCntTotal = playCntTotal;\r\n        this.homeModule.DataPlayer.PlayCntWin = playCntWin;\r\n        this.homeModule.DataPlayer.PlaySaveOnce = saveOnce;\r\n        this.homeModule.DataPlayer.PlayMatchOnce = matchOnce;\r\n        this.homeModule.DataPlayer.PlayPveTotal = pveTotal;\r\n        this.homeModule.DataPlayer.PlayPveWin = pveWin;\r\n        this.homeModule.DataPlayer.PlayWeeklyWin = weeklyWin;\r\n        this.homeModule.DataPlayer.PlayWeeklyTotal = weeklyTotal;\r\n        this.homeModule.DataPlayer.MaxSuccessiveWin = maxSuccessiveWin;\r\n        this.homeModule.DataPlayer.Level = level;\r\n        this.homeModule.DataPlayer.Guide = guide;\r\n\r\n        const StarNum = Misc.calcShowStarCount(this.homeModule.DataPlayer.FortuneStar);\r\n        var grade = Misc.getGradeName(this.homeModule.DataPlayer.FortuneStar) + \" \" + StarNum + \"星\";\r\n\r\n        let rate = Misc.formatPercent(playCntWin / playCntTotal);\r\n        window['Partner'].postMsg(5, {\r\n            valuekey: ValueKey.gameRate,\r\n            rate: playCntWin / playCntTotal,\r\n            grade: grade,\r\n            star: this.homeModule.DataPlayer.FortuneStar\r\n        });\r\n        // 更新社交需要的数据\r\n        SocialManager.INSTANCE.setUserStar(this.homeModule.DataPlayer.FortuneStar + this.homeModule.DataPlayer.PlayCntWin / this.homeModule.DataPlayer.PlayCntTotal);\r\n    }\r\n\r\n    public onReceivePveStat(pveStatArray) {\r\n        this.homeModule.DataPlayer.pveStatArray = pveStatArray;\r\n    }\r\n\r\n    // 当收到了邀请参数\r\n    public onReceiveInviteParam(param: string) {\r\n        const self = this;\r\n        param = SocialManager.INSTANCE.makeInviteParam(param);\r\n        \r\n        window['Partner'].doInvite(param, function (success: boolean, data: any) {\r\n            self.didInviteFriend(success, data);\r\n        });\r\n    }\r\n\r\n    // 通过邀请链接进入游戏\r\n    public beInvited(inviter: string) {\r\n\r\n    }\r\n\r\n    // 取消对手的信息\r\n    private getOpponentPlaymate(playmates: PPlaymate[]): PPlaymate {\r\n        const myPlayerId = Modules.Home.DataPlayer.MyId;\r\n        // cc.log(`我的玩家Id:${myPlayerId} playmates:${playmates}`);\r\n        const len = playmates.length;\r\n        for (let i = 0; i < len; i++) {\r\n            const playmate = playmates[i];\r\n            if (playmate.id !== myPlayerId) {\r\n                return playmate;\r\n            }\r\n        }\r\n    }\r\n\r\n    // 进行比赛确认\r\n    private makeConfirmRequest() {\r\n        const confirmC2S = new RoomPlayConfirmC2S();\r\n        NetUtil.SendMsg(confirmC2S);\r\n    }\r\n\r\n    // 完成邀请的操作 成功与否看succes\r\n    private didInviteFriend(success: boolean, data: any) {\r\n        const self = this;\r\n        if (window['Partner'].PARTNER_NAME === \"Dev\") {\r\n            UIFunc.openUI('UIInviteDevConfirm', (node) => {\r\n                UIFunc.closeUI('UIInviteFriend', () => {\r\n                    this.UIInviteFriend = null;\r\n                });\r\n                const devConfirm: UIInviteDevConfirm = node.getComponent('UIInviteDevConfirm');\r\n                devConfirm.setInviteUrl(data.url);\r\n            });\r\n        } else {\r\n            // 显示邀请等待\r\n            this.showInvitePanel();\r\n        }\r\n    }\r\n\r\n    private onMatchPlayCreate(roomId: number, roomOwner: number, redId: number, bluId: number, opponentPlaymate: PPlaymate) {\r\n        // 当前已经不在匹配状态了 则直接返回\r\n        if (!Modules.Home.DataPlayer.IsMatching) {\r\n            return;\r\n        }\r\n        this.homeModule.DataRoom.opponentPlaymate = opponentPlaymate;\r\n        // qqplay 玩家需要加载对手头像到本地\r\n        if (window['Partner'].needPreloadOpponentHead()) {\r\n            var FileNameWithoutEnd = window['Partner'].getOpenIdByHeadImgUrl(this.homeModule.DataRoom.opponentPlaymate.headImg);\r\n            window['Partner'].preloadOpponentHead(FileNameWithoutEnd);\r\n        }\r\n        this.homeModule.DataRoom.currentRoom = roomId;\r\n        this.homeModule.DataRoom.bluId = bluId;\r\n        this.homeModule.DataRoom.redId = redId;\r\n        this.homeModule.DataRoom.RoomType = RoomType.MATCH;\r\n        this.homeModule.DataRoom.RoomOwner = roomOwner;\r\n        this.homeModule.DataRoom.EnterRoomConfirm = false;\r\n        this.homeUI.onMatchPlayCreate();\r\n        this.makeConfirmRequest();\r\n    }\r\n\r\n\r\n    private onInvitePlayCreate(roomId: number, roomOwner: number, redId: number, bluId: number, opponentPlaymate: PPlaymate) {\r\n        if (!this.UIInviteFriend) {\r\n            return;\r\n        }\r\n\r\n        this.homeModule.DataRoom.opponentPlaymate = opponentPlaymate;\r\n        // qqplay 玩家需要加载对手头像到本地\r\n        if (window['Partner'].needPreloadOpponentHead()) {\r\n            // console.log(\"on Opponent Received:\" + this.homeModule.DataRoom.opponentPlaymate.id);\r\n        }\r\n        this.homeModule.DataRoom.currentRoom = roomId;\r\n        this.homeModule.DataRoom.bluId = bluId;\r\n        this.homeModule.DataRoom.redId = redId;\r\n        this.homeModule.DataRoom.RoomType = RoomType.MATCH;\r\n        this.homeModule.DataRoom.RoomOwner = roomOwner;\r\n        this.homeModule.DataRoom.EnterRoomConfirm = false;\r\n        this.UIInviteFriend.onPlayCreate();\r\n    }\r\n}\r\n"]}