{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\ui/assets\\scripts\\app\\ui\\UILevelInfo.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\ui","sourcesContent":["import { Home, Play } from \"../module/Modules\";\r\nimport GamePersist from \"../common/persist/GamePersist\";\r\nimport NetUtil from \"../common/net/NetUtil\";\r\nimport { TILE_TYPE, BOMB_TYPE, BLOCK_COLOR } from \"../component/game/PlayDefine\";\r\nimport { PlayStartPveC2S } from \"../common/net/proto/mods/ProtoSectionPlay\";\r\nimport { UIFunc } from \"../common/UIFunc\";\r\nimport PlayManager from \"../component/game/PlayManager\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class UILevelInfo extends cc.Component {\r\n    @property(cc.Node)\r\n    nodObjectives: cc.Node = null;\r\n    @property(cc.Node)\r\n    nodContent: cc.Node = null;\r\n    @property(cc.Label)\r\n    labLevel: cc.Label = null;\r\n    @property(cc.Node)\r\n    nodRank: cc.Node = null;\r\n\r\n    levelChoose;\r\n\r\n    onLoad() {\r\n    }\r\n\r\n    private loadPrefab(url, callback) {\r\n        cc.loader.loadRes(url, cc.Prefab, (err, prefab) => {\r\n            if (!err) {\r\n                callback(prefab);\r\n            }\r\n        })\r\n    }\r\n\r\n    public initLevelInfo(levelChoose) {\r\n        this.levelChoose = levelChoose;\r\n        this.labLevel.string = Play.DataPve.curLevel + '';\r\n        this.showObjectives();\r\n        this.showStar();\r\n        this.loadRank();\r\n    }\r\n\r\n    // 显示目标\r\n    private showObjectives() {\r\n        var objective = Play.LevelDatas['level_' + Play.DataPve.curLevel].objective;\r\n        for (let i = 0; i < this.nodObjectives.children.length; ++i) {\r\n            this.nodObjectives.children[i].active = false;\r\n            this.nodObjectives.children[i].getChildByName('sprAchieved').active = false;\r\n            this.nodObjectives.children[i].getChildByName('labObjective').active = true;\r\n            var children = this.nodObjectives.children[i].getChildByName('sprite').children;\r\n            for (let j = 0; j < children.length; ++j) {\r\n                children[j].destroy();\r\n            }\r\n        }\r\n        let count = 0;\r\n        for (let i = 0; i < objective.length; ++i) {\r\n            for (let j = 0; j < objective[i].length; ++j) {\r\n                let nodObjective = this.nodObjectives.children[count];\r\n                let data = objective[i][j];\r\n                nodObjective.active = true;\r\n                if (j === 0 && i !== 0) {\r\n                    nodObjective.getChildByName('arrow').active = true;\r\n                } else {\r\n                    nodObjective.getChildByName('arrow').active = false;\r\n                }\r\n\r\n                if (data.objectiveType === 0) {// 正常显示水果\r\n                    nodObjective.getChildByName('ban').active = false;\r\n                    nodObjective.getChildByName('question').active = false;\r\n                    nodObjective.getChildByName('sprite').active = true;\r\n                    nodObjective.getChildByName('labObjective').active = true;\r\n                    nodObjective.getChildByName('sprAchieved').active = false;\r\n                } else if (data.objectiveType === 1) {// 显示ban\r\n                    nodObjective.getChildByName('ban').active = true;\r\n                    nodObjective.getChildByName('question').active = false;\r\n                    nodObjective.getChildByName('sprite').active = true;\r\n                    nodObjective.getChildByName('labObjective').active = false;\r\n                    nodObjective.getChildByName('sprAchieved').active = false;\r\n                } else if (data.objectiveType === 2) {// 显示问号\r\n                    nodObjective.getChildByName('ban').active = false;\r\n                    nodObjective.getChildByName('question').active = true;\r\n                    nodObjective.getChildByName('sprite').active = false;\r\n                    nodObjective.getChildByName('labObjective').active = false;\r\n                    nodObjective.getChildByName('sprAchieved').active = false;\r\n                } else {\r\n                    // error\r\n                }\r\n                count++;\r\n\r\n                var labObjective = nodObjective.getChildByName('labObjective').getComponent(cc.Label);\r\n                labObjective.string = `x${data.count}`;\r\n\r\n                switch (data.tileType) {\r\n                    case TILE_TYPE.BLOCK:\r\n                        this.loadPrefab('prefab/play/pve/Block', (prefab) => {\r\n                            let nodBlock = cc.instantiate(prefab)\r\n                            var tileComponent = nodBlock.getComponent('Block');\r\n                            nodBlock.parent = nodObjective.getChildByName('sprite');\r\n                            tileComponent.init();\r\n                            tileComponent.type = data.type;\r\n                            tileComponent.setContentSize(80, 80);\r\n                            nodBlock.scale = 1;\r\n                            nodBlock.zIndex = 0;\r\n                            nodBlock.x = 0;\r\n                            nodBlock.y = 0;\r\n                        })\r\n                        break;\r\n                    case TILE_TYPE.BOMB:\r\n                        this.loadPrefab('prefab/play/pve/Bomb', (prefab) => {\r\n                            let nodBomb = cc.instantiate(prefab)\r\n                            nodBomb.parent = nodObjective.getChildByName('sprite');\r\n                            var tileComponent = nodBomb.getComponent('Bomb');\r\n                            tileComponent.init();\r\n                            tileComponent.type = data.type;\r\n                            if (data.type == BOMB_TYPE.BOMB_ONE_COLOR) {\r\n                                tileComponent.subType = BLOCK_COLOR.COLORS;\r\n                            }\r\n                            tileComponent.setContentSize(80, 80);\r\n                            nodBomb.scale = 1;\r\n                            nodBomb.zIndex = 0;\r\n                            nodBomb.x = 0;\r\n                            nodBomb.y = 0;\r\n                        })\r\n                        break;\r\n                    case TILE_TYPE.PET:\r\n\r\n                        this.loadPrefab('prefab/play/pve/Obstacle', (prefab) => {\r\n                            let nodPet = cc.instantiate(prefab)\r\n                            nodPet.parent = nodObjective.getChildByName('sprite');\r\n                            var tileComponent = nodPet.getComponent('Obstacle');\r\n                            tileComponent.type = data.type;\r\n                            tileComponent.canTouch = false;\r\n                            tileComponent.setContentSize(80, 80);\r\n                            nodPet.scale = 1;\r\n                            nodPet.zIndex = 0;\r\n                            nodPet.x = 0;\r\n                            nodPet.y = 0;\r\n                        })\r\n\r\n                        break;\r\n                    case TILE_TYPE.TABLEWARE:\r\n                        this.loadPrefab('prefab/play/pve/Tableware', (prefab) => {\r\n                            let nodTableware = cc.instantiate(prefab)\r\n                            nodTableware.parent = nodObjective.getChildByName('sprite');\r\n                            var tileComponent = nodTableware.getComponent('Tableware');\r\n                            tileComponent.type = data.type;\r\n                            tileComponent.canTouch = false;\r\n                            tileComponent.setContentSize(80, 80);\r\n                            nodTableware.scale = 1;\r\n                            nodTableware.zIndex = 0;\r\n                            nodTableware.x = 0;\r\n                            nodTableware.y = 0;\r\n                        })\r\n                        break;\r\n                    case TILE_TYPE.WALL:\r\n                        this.loadPrefab('prefab/play/pve/WALL', (prefab) => {\r\n                            let nodWall = cc.instantiate(prefab)\r\n                            nodWall.parent = nodObjective.getChildByName('sprite');\r\n                            var tileComponent = nodWall.getComponent('Wall');\r\n                            tileComponent.type = data.type;\r\n                            tileComponent.setContentSize(80, 80);\r\n                            nodWall.scale = 1;\r\n                            nodWall.zIndex = 0;\r\n                            nodWall.x = 0;\r\n                            nodWall.y = 0;\r\n                        })\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // 显示星星\r\n    private showStar() {\r\n        var nodEmptyStar = this.nodContent.getChildByName('nodEmptyStar');\r\n        var nodStar = this.nodContent.getChildByName('nodStar');\r\n        nodEmptyStar.active = true;\r\n        nodStar.active = true;\r\n        var _score = Play.LevelDatas['level_' + Play.DataPve.curLevel].score;\r\n        var score = 0;\r\n        if (Home.DataPlayer.PveStatArray[Play.DataPve.curLevel - 1]) {\r\n            score = Home.DataPlayer.PveStatArray[Play.DataPve.curLevel - 1].score;\r\n        }\r\n        if (!_score) {\r\n            return\r\n        }\r\n        if (score >= _score[2]) {\r\n            nodStar.children[0].active = true;\r\n            nodStar.children[1].active = true;\r\n            nodStar.children[2].active = true;\r\n        } else if (score >= _score[1]) {\r\n            nodStar.children[0].active = true;\r\n            nodStar.children[1].active = true;\r\n            nodStar.children[2].active = false;\r\n        } else if (score >= _score[0]) {\r\n            nodStar.children[0].active = true;\r\n            nodStar.children[1].active = false;\r\n            nodStar.children[2].active = false;\r\n        } else {\r\n            nodStar.children[0].active = false;\r\n            nodStar.children[1].active = false;\r\n            nodStar.children[2].active = false;\r\n        }\r\n    }\r\n\r\n    private loadRank() {\r\n        UIFunc.openUI('UIRankPve', (node) => {\r\n        }, this.nodRank)\r\n    }\r\n\r\n    // 开始游戏，播放爱心动画\r\n    private gameStart(node) {\r\n        var Energy = Home.DataPlayer.FortuneEnergy;\r\n        if (!window['Partner'].energyTest() && Energy < 5) {\r\n            this.levelChoose.showEnergyEmpty(1);\r\n            return;\r\n        }\r\n        node.getChildByName('nodMask').active = true;\r\n        var action = cc.sequence(\r\n            cc.spawn(\r\n                cc.moveTo(0.5, 84, 6.5),\r\n                cc.scaleTo(0.5, 1.1, 1.1)\r\n            ),\r\n            cc.callFunc(() => {\r\n                node.getChildByName('particle_energy').getComponent(cc.ParticleSystem).resetSystem();\r\n            }),\r\n            cc.scaleTo(0.2, 1, 1),\r\n            cc.scaleTo(0.2, 1.1, 1.1),\r\n            cc.scaleTo(0.2, 1, 1),\r\n            cc.callFunc(() => {\r\n                var startPve = new PlayStartPveC2S();\r\n                PlayManager.INSTANCE.PveEnterType = 0;\r\n                NetUtil.SendMsg(startPve);\r\n                node.getChildByName('nodMask').active = false;\r\n            })\r\n        )\r\n        node.getChildByName('sprHeart').runAction(action);\r\n    }\r\n\r\n    private closeUI() {\r\n        Play.DataPve.curLevel = null;\r\n        UIFunc.closeUI('UILevelInfo', () => { })\r\n        UIFunc.closeUI('UIRankPve', () => { })\r\n    }\r\n\r\n    private btnListener(event: cc.Event.EventTouch) {\r\n        var target = event.target;\r\n        switch (target.name) {\r\n            case 'btnPanelBack':\r\n                GamePersist.INSTANCE.btnAudio_2();\r\n                this.closeUI();\r\n                break;\r\n            case 'btnStartPve':\r\n                GamePersist.INSTANCE.btnAudio_1();\r\n                this.gameStart(target);\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    // update (dt) {}\r\n}\r\n"]}