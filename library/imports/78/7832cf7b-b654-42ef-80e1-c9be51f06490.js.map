{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\component\\game\\pvp/assets\\scripts\\app\\component\\game\\pvp\\PlayStory.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\component\\game\\pvp","sourcesContent":["import BaseUI from \"../../BaseUI\";\r\nimport GamePersist from \"../../../common/persist/GamePersist\";\r\nimport NodePool from \"../NodePool\";\r\nimport DYAudio from \"../../../../dyGame/DYAudio\";\r\nimport PlayManager from \"../PlayManager\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PlayStory extends BaseUI {\r\n\r\n    @property(cc.Node)\r\n    story1: cc.Node = null;\r\n    @property(cc.Node)\r\n    story2: cc.Node = null;\r\n    @property(cc.Node)\r\n    story3: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    enterButton: cc.Node = null;\r\n\r\n    private tabAction;\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        super.onLoad();\r\n\r\n        // NodePool.initPool();\r\n\r\n        this.tabAction = cc.sequence(\r\n            cc.moveTo(0, cc.v2(0, -1280)),\r\n            cc.callFunc(function (target) {\r\n                //console.log(target);\r\n                target.active = true;\r\n            }, this),\r\n            cc.moveTo(1, cc.v2(0, 0)));\r\n        let self = this;\r\n        this.enterButton.active = true;\r\n        this.enterButton.opacity = 0;\r\n        let action = cc.sequence(\r\n            cc.fadeTo(1, 255),\r\n            cc.callFunc(function () {\r\n                let actionA = cc.repeatForever(\r\n                    cc.sequence(cc.fadeTo(1, 0),\r\n                        cc.fadeTo(1, 255)));\r\n                self.enterButton.runAction(actionA);\r\n            })\r\n        );\r\n        this.enterButton.runAction(action);\r\n        this.node.on(\"touchstart\", this.onTouchStart, this);\r\n\r\n        cc.director.preloadScene('game');\r\n    }\r\n\r\n    canTouch = true;\r\n    state = 1;\r\n    onTouchStart() {\r\n        if(!this.canTouch){\r\n            return;\r\n        }\r\n        if(this.state === 1){\r\n            this.story1.active = false;\r\n            this.story2.active = true;\r\n            this.state = 2;\r\n            this.canTouch = false;\r\n            this.scheduleOnce(()=>{\r\n                this.canTouch = true;\r\n            },1)\r\n        }else if(this.state === 2){\r\n            this.story2.active = false;\r\n            this.story3.active = true;\r\n            this.state = 3;\r\n            this.canTouch = false;\r\n            this.scheduleOnce(()=>{\r\n                this.canTouch = true;\r\n            },1)\r\n        }else if(this.state === 3){\r\n            GamePersist.INSTANCE.loadScene(\"game\", () => {\r\n                PlayManager.INSTANCE.PlayUI.layerGame.pvpTeach = true;\r\n                PlayManager.INSTANCE.newRound(null);\r\n            });\r\n        }\r\n    }\r\n\r\n    start() {\r\n        console.log(\"enter PlayStory start===========\");\r\n        super.start();\r\n    }\r\n\r\n    public uiName(): string {\r\n        return \"PlayStoryUI\";\r\n    }\r\n\r\n    onContinue(event, data) {\r\n        switch (data) {\r\n            case \"1\":\r\n                this.story2.active = true;\r\n                this.story2.runAction(this.tabAction);\r\n                break;\r\n            case \"2\":\r\n                this.story3.active = true;\r\n                this.story3.runAction(this.tabAction);\r\n                break;\r\n            case \"end\":\r\n                cc.director.loadScene(\"game\", function () {\r\n                    PlayManager.INSTANCE.PlayUI.layerGame.pvpTeach = true;\r\n                    PlayManager.INSTANCE.newRound(null);\r\n                });\r\n                break;\r\n\r\n        }\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}