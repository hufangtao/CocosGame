{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\component\\prefab/assets\\scripts\\app\\component\\prefab\\UIEnergy.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\component\\prefab","sourcesContent":["import GamePersist from \"../../common/persist/GamePersist\";\r\nimport SocialManager from \"../../common/social/SocialManager\";\r\nimport { PlayerShareGameC2S } from \"../../common/net/proto/mods/ProtoSectionPlayer\";\r\nimport NetUtil from \"../../common/net/NetUtil\";\r\nimport { Home } from \"../../module/Modules\";\r\nimport { UIFunc } from \"../../common/UIFunc\";\r\nimport { Message } from \"../../common/Message\";\r\nimport { DYNotify } from \"../../../dyGame/DYNotify\";\r\nimport { ShareManager } from \"../../common/ShareManager\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class UIEnergy extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    nodEnergyEmpty: cc.Node = null;\r\n    @property(cc.Node)\r\n    nodGetEnergy: cc.Node = null;\r\n    @property(cc.Node)\r\n    nodTip: cc.Node = null;\r\n\r\n    @property(cc.Sprite)\r\n    sprWord: cc.Sprite = null;\r\n\r\n\r\n    @property(cc.SpriteFrame)\r\n    spfWordShare1: cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    spfWordShare2: cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    spfWordShare3: cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    spfWordShare: cc.SpriteFrame = null;\r\n\r\n    onLoad() {\r\n    }\r\n\r\n    onEnable(){\r\n        DYNotify.regObserver(Message.GET_SHARE_CNT, this.onNotify, this);\r\n        DYNotify.regObserver(Message.OnShow, this.onNotify, this);\r\n    }\r\n    onDisable() {\r\n        DYNotify.removeAllObservers(this);\r\n    }\r\n    setBtnWord() {\r\n        if (Home.DataPlayer.EnergyShareCnt === 0) {\r\n            this.sprWord.spriteFrame = this.spfWordShare3;\r\n        } else if (Home.DataPlayer.EnergyShareCnt === 1) {\r\n            this.sprWord.spriteFrame = this.spfWordShare2;\r\n        } else if (Home.DataPlayer.EnergyShareCnt === 2) {\r\n            this.sprWord.spriteFrame = this.spfWordShare1;\r\n        } else if (Home.DataPlayer.EnergyShareCnt === 3) {\r\n            this.sprWord.spriteFrame = this.spfWordShare;\r\n        }\r\n    }\r\n\r\n    setMode(mode) {\r\n        if (mode == 1) {\r\n            this.nodEnergyEmpty.active = true;\r\n            this.nodGetEnergy.active = false;\r\n            this.nodTip.active = false;\r\n            this.setBtnWord();\r\n        } else if (mode == 2) {\r\n            this.nodEnergyEmpty.active = false;\r\n            this.nodGetEnergy.active = true;\r\n            this.nodTip.active = false;\r\n        } else if (mode == 3) {\r\n            this.nodEnergyEmpty.active = false;\r\n            this.nodGetEnergy.active = false;\r\n            this.nodTip.active = true;\r\n        }\r\n    }\r\n\r\n\r\n    private onNotify(target, tag, param) {\r\n        var self = target;\r\n        if (tag == Message.OnShow) {\r\n            self.onShare(self);\r\n        } else if (tag == Message.GET_SHARE_CNT) {\r\n            if (param.reason != 1) {\r\n                return;\r\n            }\r\n            if (param.success === 1) {\r\n                self.setMode(3);\r\n            } else if(param.success === 0){\r\n                GamePersist.INSTANCE.toast('今日分享已达上限');\r\n            }\r\n        }\r\n    }\r\n\r\n    share() {\r\n        GamePersist.INSTANCE.btnAudio_1();\r\n        if (Home.DataPlayer.EnergyShareCnt === 3) {\r\n            return;\r\n        }\r\n        ShareManager.Instance.share(1);\r\n    }\r\n\r\n    onCancelPanel() {\r\n        UIFunc.closeUI('UIEnergy', () => { })\r\n    }\r\n}\r\n"]}