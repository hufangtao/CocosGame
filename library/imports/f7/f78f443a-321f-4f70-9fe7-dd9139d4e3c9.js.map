{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\dyGame/assets\\scripts\\dyGame\\DYAudio.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\dyGame","sourcesContent":["import DYData from './DYData';\r\n\r\nexport default class DYAudio{\r\n    static playEffect(filePath, loop: boolean, volume:number = 1.0) : number{\r\n\t\treturn DYAudioHelper.theInstance.playEffect(filePath, loop, volume);\r\n    }\r\n    \r\n    static playMusic(filePath, loop: boolean, volume: number = 1.0) : number{\r\n\t\treturn DYAudioHelper.theInstance.playMusic(filePath, loop, volume);\r\n    }\r\n\r\n    static stopMusic(audioId?: number) : void{\r\n\t\treturn  DYAudioHelper.theInstance.stopMusic(audioId);\r\n    }\r\n    static hasMusicPlaying() : boolean{\r\n\t\treturn  DYAudioHelper.theInstance.hasMusicPlaying();\r\n    }\r\n    // 独奏指定音效的处理: playTheEffect, stopTheEffect, getTheEffect\r\n\tstatic playTheEffect(filePath: string, loop: boolean, volume:number) : void{\r\n\t\tDYAudioHelper.theInstance.playTheEffect(filePath, loop, volume);\r\n    }\r\n\r\n    static stopTheEffect() : void{\r\n    \tDYAudioHelper.theInstance.stopTheEffect();\r\n    }\r\n\r\n    static getTheEffect() : number{\r\n    \treturn DYAudioHelper.theInstance.getTheEffect();\r\n    }\r\n\r\n    static setLoop(audioId: number, loop: boolean) : void{\r\n\t\tcc.audioEngine.setLoop(audioId, loop);\r\n\t}\r\n\r\n\tstatic isLoop(audioId: number) : boolean{\r\n\t\treturn cc.audioEngine.isLoop(audioId);\r\n    }\r\n    \r\n    static setVolume(audioId: number, volume: number) : void{\r\n        cc.audioEngine.setVolume(audioId, volume);\r\n\t}\r\n\r\n\tstatic getVolume(audioId: number) : number{\r\n        return cc.audioEngine.getVolume(audioId);\r\n    }\r\n    \r\n    static pause(audioId: number) : void{\r\n        cc.audioEngine.pause(audioId);\r\n\t}\r\n\r\n\tstatic resume(audioId: number) : void{\r\n        DYAudioHelper.theInstance.resume(audioId);\r\n\t}\r\n\r\n\tstatic pauseAll() : void{\r\n        cc.audioEngine.pauseAll();\r\n\t}\r\n\r\n\tstatic resumeAll() : void{\r\n        DYAudioHelper.theInstance.resumeAll();\r\n\t}\r\n\r\n\tstatic stop(audioId: number) : void{\r\n        cc.audioEngine.stop(audioId);\r\n\t}\r\n\r\n\tstatic stopAll() : void{\r\n        DYAudioHelper.theInstance.stopAll();\r\n    }\r\n    \r\n    static getDuration(audioId: number): number{\r\n        return cc.audioEngine.getDuration(audioId);\r\n    }\t\t\r\n\t\r\n    static getState(audioId: number): cc.audioEngine.AudioState{\r\n        return cc.audioEngine.getState(audioId);\r\n    }\t\r\n\r\n    static setFinishCallback(audioId: number, callback: Function) : void{\r\n        cc.audioEngine.setFinishCallback(audioId, callback);\r\n\t}\r\n\r\n\tstatic uncache(filePath: string): void{\r\n        cc.audioEngine.uncache(filePath);\r\n\t}\r\n\r\n\tstatic uncacheAll() : void{\r\n        cc.audioEngine.uncacheAll();\r\n\t}\r\n\r\n    static setMusicMute (flag: boolean) : void{\r\n        DYAudioHelper.theInstance.setMusicMute(flag);\r\n\t}\r\n\r\n\tstatic setSoundMute (flag: boolean) : void{\r\n        DYAudioHelper.theInstance.setSoundMute(flag);\r\n\t}\r\n\r\n\tstatic isMusicMute() : boolean{\r\n        return DYAudioHelper.theInstance.isMusicMute();\r\n\t}\r\n\r\n\tstatic isSoundMute() : boolean{\r\n        return DYAudioHelper.theInstance.isSoundMute();\r\n    }\r\n}\r\n\r\nlet kMusicFlag = \"5d88ad10-bb04-43c1-aeb7-332cd2ceb268\";\r\nlet kSoundFlag = \"14a4c65c-d25c-4867-a840-9ac3b0021d19\";\r\n\r\nlet S_MUSIC_FLAG = false;\r\nlet S_SOUND_FLAG = false;\r\n\r\nclass DYAudioHelper{\r\n    public static get theInstance(): DYAudioHelper {\r\n        if (!DYAudioHelper.mInstance) {\r\n            DYAudioHelper.mInstance = new DYAudioHelper();\r\n        }\r\n        return DYAudioHelper.mInstance;    \r\n      }\r\n    \r\n    private static mInstance: DYAudioHelper;\r\n\r\n    private mCurMusic:number =  null;\r\n    private mCurMusicFile:string = null;\r\n    \r\n    private mCurTheEffect:number = null;\r\n    \r\n    private mMusicVol : number = 1.0;\r\n    private mSoundVol : number = 1.0;\r\n\r\n    public playEffect(filePath, loop: boolean, volume:number){\r\n\t\tif (S_SOUND_FLAG || !filePath){\r\n\t\t\treturn;\r\n        }\r\n        this.mSoundVol = volume;\r\n\t\treturn cc.audioEngine.play(filePath, loop, volume);\r\n    }\r\n    \r\n    public playMusic(filePath, loop: boolean, volume: number){\r\n\t\tlet self = this;\r\n\r\n        filePath = filePath || self.mCurMusicFile;\r\n\t\tif (self.isMusicMute() || !filePath){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t\r\n\t\tif (self.mCurMusic != null) {\r\n\t\t\tif(filePath == self.mCurMusicFile){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tself.stopMusic(self.mCurMusic);\r\n\t\t}\r\n\t\t\r\n        this.mMusicVol = volume;\r\n\t\tself.mCurMusic = cc.audioEngine.play(filePath, loop, volume)\r\n\t\tself.mCurMusicFile = filePath;\r\n\t\t\r\n\t\treturn self.mCurMusic;\r\n    }\r\n\r\n    public stopMusic(audioId: number) : void{\r\n\t\tvar self = this;\r\n\t\t\r\n\t\tself.stopTheEffect()\r\n\r\n\t\tif (self.mCurMusic == null){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\taudioId = audioId || self.mCurMusic;\r\n\t\tcc.audioEngine.stop(audioId);\r\n\r\n\t\tself.mCurMusic = null;\r\n    }\r\n    \r\n    // 独奏指定音效的处理: playTheEffect, stopTheEffect, getTheEffect\r\n\tpublic playTheEffect(snd: string, loop: boolean, volume:number){\r\n\t\tvar self = this;\r\n\t\t\r\n\t\tif(self.isSoundMute()){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n        if(!self.mCurTheEffect){\r\n            cc.audioEngine.pauseAll();\r\n            self.mCurTheEffect = cc.audioEngine.play(snd, loop, volume);\r\n        }\r\n    }\r\n\r\n    public stopTheEffect(){\r\n    \tvar self = this;\r\n    \tif (!self.mCurTheEffect){\r\n    \t\treturn;\r\n    \t}\r\n\r\n    \tcc.audioEngine.stop(self.mCurTheEffect);\r\n        self.mCurTheEffect = null;\r\n        self.resumeAll();\r\n    }\r\n\r\n    public getTheEffect() : number{\r\n    \treturn this.mCurTheEffect;\r\n    }\r\n\r\n    public resume(audioId: number) : void{\r\n\t\tif(S_MUSIC_FLAG){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tcc.audioEngine.resume(audioId);\r\n\t}\r\n\r\n\tpublic resumeAll() : void{\r\n\t\tif(S_MUSIC_FLAG){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\treturn cc.audioEngine.resumeAll();\r\n\t}\r\n\r\n\tpublic stopAll() : void{\r\n\t\tthis.stopTheEffect()\r\n\t\treturn cc.audioEngine.stopAll();\r\n    }\r\n    \r\n   \r\n    public setMusicMute (flag: boolean) : void{\r\n        S_MUSIC_FLAG = flag;\r\n        DYData.setStat(kMusicFlag, S_MUSIC_FLAG?\"TRUE\":\"FALSE\");\r\n\t\t\r\n\t\tif (flag) {\r\n\t\t\tthis.playMusic(null, true, this.mMusicVol);\r\n\t\t} else {\r\n\t\t\tthis.stopMusic(null);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic setSoundMute (flag: boolean) : void{\r\n        S_SOUND_FLAG = flag;\r\n        DYData.setStat(kSoundFlag, S_SOUND_FLAG?\"TRUE\":\"FALSE\");\r\n\t}\r\n\r\n\tpublic hasMusicPlaying() : boolean{\r\n\t\tif(this.mCurMusic){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false\r\n\t\t}\r\n\t}\r\n\r\n\tpublic isMusicMute() : boolean{\r\n\t\treturn S_MUSIC_FLAG;\r\n\t}\r\n\r\n\tpublic isSoundMute() : boolean{\r\n\t\treturn S_SOUND_FLAG;\r\n    }\r\n}"]}