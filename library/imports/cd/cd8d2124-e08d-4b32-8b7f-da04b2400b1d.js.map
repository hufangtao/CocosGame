{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\component\\page\\login/assets\\scripts\\app\\component\\page\\login\\AccCompCreateRole.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\component\\page\\login","sourcesContent":["import BaseComponent from \"../../BaseComponent\";\r\nimport * as ConfigVO from \"../../../common/config/vo/ConfigVO\";\r\nimport { AccCreateWithParamsC2S } from \"../../../common/net/proto/mods/ProtoSectionAcc\";\r\nimport { FemaleName } from \"../../../common/config/vo/ConfigVO\";\r\nimport GamePersist from \"../../../common/persist/GamePersist\";\r\nimport NetUtil from \"../../../common/net/NetUtil\";\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class AccCompCreateRole extends BaseComponent {\r\n  @property(cc.Node)\r\n  public nodeCreateContainer: cc.Node = null;\r\n\r\n  @property(cc.Node)\r\n  public nodeSelectHeadContainer: cc.Node = null;\r\n\r\n  @property(cc.Button)\r\n  public btnSelectHead: cc.Button = null;\r\n\r\n  @property(cc.Button)\r\n  public btnSelectHeadDone: cc.Button = null;\r\n\r\n  @property(cc.Button)\r\n  public btnDoCreate: cc.Button = null;\r\n\r\n  @property(cc.Button)\r\n  public btnSexBoy: cc.Button = null;\r\n  \r\n  @property(cc.Button)\r\n  public btnSexGirl: cc.Button = null;\r\n\r\n  @property(cc.Button)\r\n  public btnRandomName: cc.Button = null;\r\n\r\n  @property(cc.Node)\r\n  public headList: cc.Node = null;\r\n\r\n  @property(cc.EditBox)\r\n  public inputRollName: cc.EditBox = null;\r\n\r\n  @property(cc.SpriteFrame)\r\n  public spfBlue: cc.SpriteFrame = null;\r\n  @property(cc.SpriteFrame)\r\n  public spfRed: cc.SpriteFrame = null;\r\n\r\n  // 头像信息\r\n  private selectedHeadSp: cc.SpriteFrame = null;\r\n  private selectedHeadNode: cc.Node = null;\r\n  private selectedHeadIndex: number = null;\r\n\r\n  private HeadRingRed: cc.SpriteFrame = null;\r\n  private HeadRingBlue: cc.SpriteFrame = null;\r\n\r\n  // 性别信息\r\n  private sexInfo: number = null;\r\n\r\n  // 玩家名称\r\n  private accName: string = null;\r\n  private surnNameLen: number = null;\r\n  private maleNameLen: number = null;\r\n  private femaleNameLen: number = null;\r\n\r\n\r\n  public onLoad() {\r\n\r\n    const self = this;\r\n\r\n    this.btnSelectHead.node.on(cc.Node.EventType.TOUCH_END, this.selectHead, this);\r\n    this.btnSelectHeadDone.node.on(cc.Node.EventType.TOUCH_END, this.selectHeadDone, this);\r\n    this.btnDoCreate.node.on(cc.Node.EventType.TOUCH_END, this.doCreate, this);\r\n    this.btnRandomName.node.on(cc.Node.EventType.TOUCH_END, this.createRandomName, this);\r\n\r\n    self.HeadRingRed = this.spfRed;\r\n    self.HeadRingBlue = this.spfBlue;\r\n\r\n\r\n    // 随机一个头像\r\n    this.selectedHeadIndex = Math.floor(Math.random() * 9 + 1);\r\n    this.selectedHeadNode = this.headList.getChildByName(\"NodeHead\" + this.selectedHeadIndex);\r\n    this.selectedHeadSp = this.selectedHeadNode.getChildByName(\"Head\").getComponentInChildren(cc.Sprite).spriteFrame;\r\n    this.selectedHeadNode.getChildByName(\"icon-select\").active = true;\r\n    this.nodeCreateContainer.getChildByName(\"HeadContainer\").getComponentInChildren(cc.Sprite).spriteFrame = this.selectedHeadSp;\r\n\r\n    // 随机一个性别\r\n    this.setSexInfo(Math.floor(Math.random() * 1 + 1));\r\n    this.btnSexBoy.node.on(cc.Node.EventType.TOUCH_END, function() {\r\n      self.setSexInfo(1);\r\n    }, this);\r\n    this.btnSexGirl.node.on(cc.Node.EventType.TOUCH_END, function() {\r\n      self.setSexInfo(2);\r\n    }, this);\r\n\r\n\r\n    // 绑定一组头像选择按钮\r\n    for (let i = 1 ; i < 10 ; i++) {\r\n      const headName = \"NodeHead\" + i;\r\n      const headNode: cc.Node = this.headList.getChildByName(headName);\r\n      headNode.getChildByName(\"icon-select\").active = false;\r\n      self.selectedHeadNode.getChildByName(\"icon-select\").active = true;\r\n\r\n      headNode.on(cc.Node.EventType.TOUCH_END, function() {\r\n        GamePersist.INSTANCE.btnAudio_1();\r\n        self.selectedHeadSp = headNode.getChildByName(\"Head\").getComponentInChildren(cc.Sprite).spriteFrame;\r\n        self.selectedHeadIndex = i;\r\n        self.selectedHeadNode.getChildByName(\"icon-select\").active = false;\r\n        self.selectedHeadNode = headNode;\r\n        self.selectedHeadNode.getChildByName(\"icon-select\").active = true;\r\n      }, this );\r\n    }\r\n\r\n    // 随机角色名\r\n    this.femaleNameLen = ConfigVO.FemaleName.getExtra(\"id_list\").length;\r\n    this.maleNameLen = ConfigVO.MaleName.getExtra(\"id_list\").length;\r\n    this.surnNameLen = ConfigVO.Surname.getExtra(\"id_list\").length;\r\n    this.createRandomName();\r\n  }\r\n\r\n\r\n  private selectHead() {\r\n    this.nodeCreateContainer.active = false;\r\n    this.nodeSelectHeadContainer.active = true;\r\n  }\r\n\r\n  // 设置玩家性别\r\n  private setSexInfo(sex: number) {\r\n    if (this.sexInfo === sex) {\r\n      return;\r\n    } else {\r\n      this.sexInfo = sex;\r\n    }\r\n    \r\n    if (sex === 1) {\r\n      this.btnSexBoy.node.getChildByName(\"edging\").active = true;\r\n      this.btnSexGirl.node.getChildByName(\"edging\").active = false;\r\n    } else {\r\n      this.btnSexBoy.node.getChildByName(\"edging\").active = false;\r\n      this.btnSexGirl.node.getChildByName(\"edging\").active = true;\r\n    }\r\n    this.createRandomName();\r\n  }\r\n\r\n  private selectHeadDone() {\r\n    GamePersist.INSTANCE.btnAudio_1();\r\n    this.nodeCreateContainer.active = true;\r\n    this.nodeSelectHeadContainer.active = false;\r\n    this.nodeCreateContainer.getChildByName(\"HeadContainer\").getComponentInChildren(cc.Sprite).spriteFrame = this.selectedHeadSp;\r\n  }\r\n\r\n  private doCreate() {\r\n    GamePersist.INSTANCE.btnAudio_1();\r\n    const msg: AccCreateWithParamsC2S = new AccCreateWithParamsC2S();\r\n    // 性别 1男2女\r\n\r\n    msg.sex = this.sexInfo;\r\n    msg.head = this.selectedHeadIndex;\r\n    msg.name = this.inputRollName.string;\r\n    msg.params = \" \";\r\n\r\n    //console.log(msg);\r\n    NetUtil.SendMsg(msg);\r\n  }\r\n\r\n  private createRandomName() {\r\n    GamePersist.INSTANCE.btnAudio_1();\r\n    const surname: string = ConfigVO.Surname.get(ConfigVO.Surname.getExtra(\"id_list\")[Math.floor(Math.random() * this.surnNameLen)]).name;\r\n    let lastname: string ;\r\n\r\n    if (this.sexInfo === 1) {\r\n      lastname = ConfigVO.MaleName.get(ConfigVO.MaleName.getExtra(\"id_list\")[Math.floor(Math.random() * this.surnNameLen)]).name;\r\n    } else {\r\n      lastname = ConfigVO.FemaleName.get(ConfigVO.FemaleName.getExtra(\"id_list\")[Math.floor(Math.random() * this.femaleNameLen)]).name;\r\n    }\r\n\r\n    this.accName = surname + lastname ;\r\n    this.inputRollName.string = this.accName;\r\n  }\r\n\r\n}\r\n"]}