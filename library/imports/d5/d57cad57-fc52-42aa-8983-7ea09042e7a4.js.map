{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\component\\game/assets\\scripts\\app\\component\\game\\Algorithm.ts"],"names":[],"mappings":";;;;;AAAA,2CAAsD;AACtD,gDAA4C;AAE5C,oBAA2B,CAAS,EAAE,CAAS,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAC,KAAY;IAAZ,sBAAA,EAAA,YAAY;IACjG,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,cAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,cAAI,CAAC,OAAO,CAAC,IAAI,CAAC;IAEzD,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,sBAAS,CAAC,KAAK,EAAE;QAC/C,OAAO;KACV;IACD,IAAI,cAAc,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACjC,IAAI,cAAc,IAAI,cAAc,CAAC,YAAY,EAAE;QAC/C,OAAO;KACV;IACD,IAAI,cAAc,CAAC,QAAQ,KAAK,sBAAS,CAAC,KAAK,EAAE;QAC7C,OAAO;KACV;IACD,IAAI,OAAO,GAAG,KAAK,CAAC;IACpB,IAAI,OAAO,IAAI,SAAS,EAAE;QACtB,OAAO,GAAG,IAAI,KAAK,EAAE,CAAC;KACzB;IACD,aAAa;IACb,IAAI,OAAO,CAAC,OAAO,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE;QACpC,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;KAC7B;SAAM;QACH,OAAO;KACV;IACD,MAAM;IACN,IAAI,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,KAAK,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE;QAChE,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,KAAK,sBAAS,CAAC,KAAK,EAAE;YAC9C,IAAI,aAAa,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACpC,IAAI,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;YAC3C,IAAI,OAAO,IAAI,IAAI,EAAE;gBACjB,IAAI,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE;oBAChC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;iBACzB;gBACD,UAAU,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAC,KAAK,CAAC,CAAC;gBAC5D,OAAO,GAAG,IAAI,CAAC;aAClB;SACJ;KACJ;IACD,MAAM;IACN,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE;QACnD,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,QAAQ,KAAK,sBAAS,CAAC,KAAK,EAAE;YAC9C,IAAI,aAAa,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACpC,IAAI,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;YAC3C,IAAI,OAAO,IAAI,IAAI,EAAE;gBACjB,IAAI,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE;oBAChC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;iBACzB;gBACD,UAAU,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAC,KAAK,CAAC,CAAC;gBAC5D,OAAO,GAAG,IAAI,CAAC;aAClB;SACJ;KACJ;IACD,MAAM;IACN,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACnD,IAAI,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,KAAK,sBAAS,CAAC,KAAK,EAAE;YAC9C,IAAI,aAAa,GAAG,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACpC,IAAI,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;YAC3C,IAAI,OAAO,IAAI,IAAI,EAAE;gBACjB,IAAI,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE;oBAChC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;iBACzB;gBACD,UAAU,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAC,KAAK,CAAC,CAAC;gBAC5D,OAAO,GAAG,IAAI,CAAC;aAClB;SACJ;KACJ;IACD,MAAM;IACN,IAAI,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,MAAM,IAAI,KAAK,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QAC7D,IAAI,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,KAAK,sBAAS,CAAC,KAAK,EAAE;YAC9C,IAAI,aAAa,GAAG,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACpC,IAAI,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;YAC3C,IAAI,OAAO,IAAI,IAAI,EAAE;gBACjB,IAAI,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE;oBAChC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;iBACzB;gBACD,UAAU,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAC,KAAK,CAAC,CAAC;gBAC5D,OAAO,GAAG,IAAI,CAAC;aAClB;SACJ;KACJ;IACD,+BAA+B;IAC/B,IAAI,CAAC,OAAO,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC,EAAE;QAC1C,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,KAAK,sBAAS,CAAC,KAAK,EAAE;YAC1C,IAAI,aAAa,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAChC,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAA;YACzC,IAAI,MAAM,IAAI,IAAI,EAAE;gBAChB,IAAI,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE;oBAChC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC;iBACzB;aACJ;SACJ;KACJ;AACL,CAAC;AA3FD,gCA2FC;AAED,QAAQ;AACR,uBAA8B,KAAK,EAAC,KAAY;IAAZ,sBAAA,EAAA,YAAY;IAC5C,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,cAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,cAAI,CAAC,OAAO,CAAC,IAAI,CAAC;IACzD,IAAI,MAAM,GAAG,IAAI,KAAK,EAAE,CAAC;IACzB,IAAI,OAAO,GAAG,IAAI,KAAK,EAAE,CAAC;IAC1B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACnC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACtC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;gBACjC,SAAS;aACZ;YACD,IAAI,GAAG,GAAG,IAAI,KAAK,EAAE,CAAC;YACtB,6BAA6B;YAE7B,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,KAAK,sBAAS,CAAC,KAAK,EAAE;gBAC1C,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC5B,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAC,KAAK,CAAC,CAAC;gBAE1D,IAAI,GAAG,CAAC,MAAM,GAAG,CAAC,EAAE;oBAChB,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;iBACpB;aACJ;SAEJ;KACJ;IACD,OAAO,MAAM,CAAC;AAClB,CAAC;AAxBD,sCAwBC;AAED,KAAK;AACL,eAA4B,IAAI,EAAE,EAAa;;;YAC3C,sBAAO,IAAI,OAAO,CAAM,UAAC,OAAO,EAAE,MAAM;oBACpC,UAAU,CAAC;wBACP,EAAE,IAAI,EAAE,EAAE,CAAC;wBACX,OAAO,EAAE,CAAC;oBACd,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC,CAAA;gBACnB,CAAC,CAAC,EAAA;;;CACL;AAPD,sBAOC;AAED,OAAO;AACP,mBAA0B,GAAG,EAAE,IAAI,EAAE,MAAM;IACvC,GAAG,CAAC,IAAI,CAAC;QACL,IAAI,EAAE,IAAI;QACV,MAAM,EAAE,MAAM;KACjB,CAAC,CAAA;AACN,CAAC;AALD,8BAKC;AACD,SAAS;AACT,oBAAiC,GAAG;;;YAChC,sBAAO,IAAI,OAAO,CAAM,UAAC,OAAO,EAAE,MAAM;oBACpC,IAAI,SAAS,GAAG,GAAG,CAAC,MAAM,CAAC;oBAC3B,IAAI,SAAS,IAAI,CAAC,EAAE;wBAChB,OAAO,EAAE,CAAA;qBACZ;oBACD,OAAO,GAAG,CAAC,MAAM,GAAG,CAAC,EAAE;wBACnB,IAAI,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC/B,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,CAAC,QAAQ,CAAC;4BACrD,SAAS,EAAE,CAAC;4BACZ,IAAI,SAAS,IAAI,CAAC,EAAE;gCAChB,OAAO,EAAE,CAAA;6BACZ;wBACL,CAAC,CAAC,CAAC,CAAC,CAAA;qBACP;gBACL,CAAC,CAAC,EAAA;;;CACL;AAhBD,gCAgBC;AACD,UAAU;AACV,qBAA4B,MAAM,EAAE,MAAM,EAAE,KAAK;IAC7C,OAAO;IACP,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE;QAChD,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;KACjD;IACD,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE;QAChD,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;KACjD;AACL,CAAC;AARD,kCAQC;AAED,OAAO;AACP,sBAA6B,KAAK,EAAE,EAAE,EAAC,KAAW;IAAX,sBAAA,EAAA,YAAW;IAC9C,IAAI,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,cAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,cAAI,CAAC,OAAO,CAAC,IAAI,CAAC;IAEzD,IAAI,MAAM,GAAG,EAAE,CAAC;IAChB,IAAI,OAAO,GAAG,EAAE,CAAC;IACjB,IAAI,CAAC,KAAK,EAAE;QACR,OAAM;KACT;IACD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;QACnC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YACtC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;gBACjB,SAAQ;aACX;YACD,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,KAAK,sBAAS,CAAC,KAAK,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,KAAK,sBAAS,CAAC,IAAI,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,KAAK,sBAAS,CAAC,GAAG,CAAC,EAAE;gBAChJ,MAAM,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,CAAA;gBACxB,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;aAC5B;SACJ;KACJ;IAED,IAAI,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;IAC5B,OAAO,CAAC,EAAE;QACN,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC;QACpC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QAEd,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;QACtB,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;KACjB;IAED,OAAO,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;QACtB,IAAI,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAClC,IAAI,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACnC,IAAI,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACvC,IAAI,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACvC,KAAK,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;QAE3B,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAC,IAAI,EAAE,KAAK,CAAC,CAAC;KAC/C;IAED,EAAE,IAAI,EAAE,EAAE,CAAC;AACf,CAAC;AAxCD,oCAwCC;AAED,OAAO;AACP,sBAA6B,IAAI,EAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,IAAI;IAC9C,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QAC1C,OAAM;KACT;IACD,IAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,EAAC;QAC5B,OAAO;KACV;IACD,IAAI,CAAC,IAAI,IAAI,EAAE;QACX,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,cAAc,EAAE,CAAC;QAC/D,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,OAAO,GAAG,GAAG,CAAC;QAC5D,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;QACvC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG;YACpB,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;QAC9E,CAAC,CAAA;QACD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAA;KAC9C;SAAM,IAAI,CAAC,IAAI,IAAI,EAAE;QAClB,4DAA4D;QAC5D,mGAAmG;KACtG;SAAM,IAAI,CAAC,IAAI,IAAI,EAAE;QAClB,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,cAAc,EAAE,CAAC;QAC/D,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,OAAO,GAAG,GAAG,CAAC;QAC5D,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;QACvC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG;YACpB,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;QAC9E,CAAC,CAAA;QACD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAA;KAC9C;AACL,CAAC;AA3BD,oCA2BC;AAED,oBAA2B,KAAK,EAAE,MAAM,EAAE,GAAG,EAAE,EAAE;IAC7C,IAAI,KAAK,IAAI,CAAC,EAAE;QACZ,OAAM;KACT;IACD,IAAI,KAAK,GAAG,MAAM,EAAE;QAChB,OAAM;KACT;IACD,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,MAAM,CAAC,CAAC;IAC/C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;QACjC,IAAI,KAAK,IAAI,GAAG,CAAC,CAAC,CAAC,EAAE;YACjB,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;YACxC,OAAO;SACV;KACJ;IACD,IAAI,EAAE,CAAC,KAAK,CAAC,EAAE;QACX,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;QACxC,OAAO;KACV;IACD,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAChB,KAAK,EAAE,CAAC;IACR,IAAI,KAAK,GAAG,CAAC,EAAE;QACX,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,MAAM,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;KAC3C;AACL,CAAC;AAvBD,gCAuBC","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\component\\game","sourcesContent":["import { GRID_TYPE, TILE_TYPE,  } from \"./PlayDefine\";\r\nimport { Play } from \"../../module/Modules\";\r\n\r\nexport function scanAround(x: number, y: number, lastX, lastY, type, arr, scanArr, tiles,isPve = true) {\r\n    let GRID = isPve ? Play.DataPve.grid : Play.DataPvp.grid;\r\n\r\n    if (!tiles[x][y] || GRID[x][y] == GRID_TYPE.EMPTY) {\r\n        return;\r\n    }\r\n    var blockComponent = tiles[x][y];\r\n    if (blockComponent && blockComponent.isDesTroying) {\r\n        return;\r\n    }\r\n    if (blockComponent.tileType !== TILE_TYPE.BLOCK) {\r\n        return;\r\n    }\r\n    var isClear = false;\r\n    if (scanArr == undefined) {\r\n        scanArr = new Array();\r\n    }\r\n    // 扫描过的节点不再扫描\r\n    if (scanArr.indexOf(x + \"#\" + y) == -1) {\r\n        scanArr.push(x + \"#\" + y);\r\n    } else {\r\n        return;\r\n    }\r\n    // 扫描上\r\n    if (y + 1 < tiles[0].length && lastY != (y + 1) && tiles[x][y + 1]) {\r\n        if (tiles[x][y + 1].tileType === TILE_TYPE.BLOCK) {\r\n            var tileComponent = tiles[x][y + 1];\r\n            var nextNum = parseInt(tileComponent.type);\r\n            if (nextNum == type) {\r\n                if (arr.indexOf(x + \"#\" + y) == -1) {\r\n                    arr.push(x + \"#\" + y);\r\n                }\r\n                scanAround(x, y + 1, x, y, type, arr, scanArr, tiles,isPve);\r\n                isClear = true;\r\n            }\r\n        }\r\n    }\r\n    // 扫描下\r\n    if (y - 1 >= 0 && lastY != (y - 1) && tiles[x][y - 1]) {\r\n        if (tiles[x][y - 1].tileType === TILE_TYPE.BLOCK) {\r\n            var tileComponent = tiles[x][y - 1];\r\n            var nextNum = parseInt(tileComponent.type);\r\n            if (nextNum == type) {\r\n                if (arr.indexOf(x + \"#\" + y) == -1) {\r\n                    arr.push(x + \"#\" + y);\r\n                }\r\n                scanAround(x, y - 1, x, y, type, arr, scanArr, tiles,isPve);\r\n                isClear = true;\r\n            }\r\n        }\r\n    }\r\n    // 扫描左\r\n    if (x - 1 >= 0 && lastX != (x - 1) && tiles[x - 1][y]) {\r\n        if (tiles[x - 1][y].tileType === TILE_TYPE.BLOCK) {\r\n            var tileComponent = tiles[x - 1][y];\r\n            var nextNum = parseInt(tileComponent.type);\r\n            if (nextNum == type) {\r\n                if (arr.indexOf(x + \"#\" + y) == -1) {\r\n                    arr.push(x + \"#\" + y);\r\n                }\r\n                scanAround(x - 1, y, x, y, type, arr, scanArr, tiles,isPve);\r\n                isClear = true;\r\n            }\r\n        }\r\n    }\r\n    // 扫描右\r\n    if (x + 1 < tiles.length && lastX != (x + 1) && tiles[x + 1][y]) {\r\n        if (tiles[x + 1][y].tileType === TILE_TYPE.BLOCK) {\r\n            var tileComponent = tiles[x + 1][y];\r\n            var nextNum = parseInt(tileComponent.type);\r\n            if (nextNum == type) {\r\n                if (arr.indexOf(x + \"#\" + y) == -1) {\r\n                    arr.push(x + \"#\" + y);\r\n                }\r\n                scanAround(x + 1, y, x, y, type, arr, scanArr, tiles,isPve);\r\n                isClear = true;\r\n            }\r\n        }\r\n    }\r\n    // 四周都不通，但不是出发遍历点，并且数字相同，也加入到数组\r\n    if (!isClear && (lastX != -1 && lastY != -1)) {\r\n        if (tiles[x][y].tileType === TILE_TYPE.BLOCK) {\r\n            var tileComponent = tiles[x][y];\r\n            var curNum = parseInt(tileComponent.type)\r\n            if (curNum == type) {\r\n                if (arr.indexOf(x + \"#\" + y) == -1) {\r\n                    arr.push(x + \"#\" + y);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// 可消除提示\r\nexport function checkoutMatch(tiles,isPve = true) {\r\n    let GRID = isPve ? Play.DataPve.grid : Play.DataPvp.grid;\r\n    var allArr = new Array();\r\n    var scanArr = new Array();\r\n    for (var x = 0; x < tiles.length; x++) {\r\n        for (var y = 0; y < tiles[0].length; y++) {\r\n            if (GRID[x][y] == 0 || !tiles[x][y]) {\r\n                continue;\r\n            }\r\n            var arr = new Array();\r\n            // var scanArr = new Array();\r\n\r\n            if (tiles[x][y].tileType === TILE_TYPE.BLOCK) {\r\n                var type = tiles[x][y].type;\r\n                scanAround(x, y, -1, -1, type, arr, scanArr, tiles,isPve);\r\n\r\n                if (arr.length > 1) {\r\n                    allArr.push(arr);\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n    return allArr;\r\n}\r\n\r\n// 延时\r\nexport async function delay(time, cb?: Function) {\r\n    return new Promise<any>((resolve, reject) => {\r\n        setTimeout(function () {\r\n            cb && cb();\r\n            resolve();\r\n        }, time * 1000)\r\n    })\r\n}\r\n\r\n// 添加动作\r\nexport function addAction(arr, node, action) {\r\n    arr.push({\r\n        node: node,\r\n        action: action\r\n    })\r\n}\r\n// 播放动作序列\r\nexport async function runActions(arr) {\r\n    return new Promise<any>((resolve, reject) => {\r\n        let arrLength = arr.length;\r\n        if (arrLength <= 0) {\r\n            resolve()\r\n        }\r\n        while (arr.length > 0) {\r\n            let data = arr.splice(0, 1)[0];\r\n            data.node.runAction(cc.sequence(data.action, cc.callFunc(() => {\r\n                arrLength--;\r\n                if (arrLength <= 0) {\r\n                    resolve()\r\n                }\r\n            })))\r\n        }\r\n    })\r\n}\r\n// 辣椒引起的抖动\r\nexport function bothSiedAct(touchX, touchY, tiles) {\r\n    // 抖动效果\r\n    if (tiles[touchX + 1] && tiles[touchX + 1][touchY]) {\r\n        tiles[touchX + 1][touchY].bothSideAct(touchX);\r\n    }\r\n    if (tiles[touchX - 1] && tiles[touchX - 1][touchY]) {\r\n        tiles[touchX - 1][touchY].bothSideAct(touchX);\r\n    }\r\n}\r\n\r\n// 打乱数组\r\nexport function shuffleTiles(tiles, cb,isPve =true) {\r\n    let GRID = isPve ? Play.DataPve.grid : Play.DataPvp.grid;\r\n\r\n    var arrPos = [];\r\n    var arrTile = [];\r\n    if (!tiles) {\r\n        return\r\n    }\r\n    for (var x = 0; x < tiles.length; ++x) {\r\n        for (var y = 0; y < tiles[0].length; ++y) {\r\n            if (GRID[x][y] == 0) {\r\n                continue\r\n            }\r\n            if (tiles[x][y] && (tiles[x][y].tileType === TILE_TYPE.BLOCK || tiles[x][y].tileType === TILE_TYPE.BOMB || tiles[x][y].tileType === TILE_TYPE.PET)) {\r\n                arrPos.push(x + \"#\" + y)\r\n                arrTile.push(tiles[x][y])\r\n            }\r\n        }\r\n    }\r\n\r\n    let i = arrPos.length, t, j;\r\n    while (i) {\r\n        j = Math.floor(Math.random() * i--);\r\n        t = arrPos[i];\r\n\r\n        arrPos[i] = arrPos[j];\r\n        arrPos[j] = t;\r\n    }\r\n\r\n    while (arrPos.length > 0) {\r\n        let item = arrPos.splice(0, 1)[0];\r\n        let tile = arrTile.splice(0, 1)[0];\r\n        let tileX = Number(item.split(\"#\")[0]);\r\n        let tileY = Number(item.split(\"#\")[1]);\r\n        tiles[tileX][tileY] = tile;\r\n\r\n        tile.moveTo(tileX, tileY, null,null, false);\r\n    }\r\n\r\n    cb && cb();\r\n}\r\n\r\n// 背景颜色\r\nexport function tileBgEffect(game,type, x, y, time) {\r\n    if (!(game.tileBgs[x] && game.tileBgs[x][y])) {\r\n        return\r\n    }\r\n    if(game.tileBgs[x][y].hadAction){\r\n        return;\r\n    }\r\n    if (0 == type) {\r\n        game.tileBgs[x][y].getChildByName('sprLight').stopAllActions();\r\n        game.tileBgs[x][y].getChildByName('sprLight').opacity = 200;\r\n        game.unschedule(game.tileBgs[x][y].cb);\r\n        game.tileBgs[x][y].cb = () => {\r\n            game.tileBgs[x][y].getChildByName('sprLight').runAction(cc.fadeOut(time));\r\n        }\r\n        game.scheduleOnce(game.tileBgs[x][y].cb, 0)\r\n    } else if (1 == type) {\r\n        // this.tileBgs[x][y].getChildByName('sprBg').opacity = 255;\r\n        // this.tileBgs[x][y].getChildByName('sprBg').getComponent(cc.Sprite).spriteFrame = this.spfTileBg;\r\n    } else if (2 == type) {\r\n        game.tileBgs[x][y].getChildByName('sprLight').stopAllActions();\r\n        game.tileBgs[x][y].getChildByName('sprLight').opacity = 120;\r\n        game.unschedule(game.tileBgs[x][y].cb);\r\n        game.tileBgs[x][y].cb = () => {\r\n            game.tileBgs[x][y].getChildByName('sprLight').runAction(cc.fadeOut(time));\r\n        }\r\n        game.scheduleOnce(game.tileBgs[x][y].cb, 0)\r\n    }\r\n}\r\n\r\nexport function randomMore(count, length, arr, cb) {\r\n    if (count <= 0) {\r\n        return\r\n    }\r\n    if (count > length) {\r\n        return\r\n    }\r\n    let index = Math.floor(Math.random() * length);\r\n    for (let i = 0; i < arr.length; ++i) {\r\n        if (index == arr[i]) {\r\n            this.randomMore(count, length, arr, cb);\r\n            return;\r\n        }\r\n    }\r\n    if (cb(index)) {\r\n        this.randomMore(count, length, arr, cb);\r\n        return;\r\n    }\r\n    arr.push(index);\r\n    count--;\r\n    if (count > 0) {\r\n        this.randomMore(count, length, arr, cb);\r\n    }\r\n}"]}