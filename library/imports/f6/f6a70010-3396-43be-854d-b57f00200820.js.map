{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\dyGame/assets\\scripts\\dyGame\\DYUtils.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\dyGame","sourcesContent":["import DYCrypto from './DYCrypto';\r\nimport * as Config from './Config';\r\nimport DYData from './DYData';\r\nimport { find } from '../../../creator';\r\nimport DYNotify from './DYNotify';\r\n\r\n\r\nconst S_JSB_CACHE_PATH = \"jsb_cache/\";\r\nconst S_JSB_HOTFIX_PATH = \"c98759c9a82b24c176af027949f417b0/\";\r\nconst S_APP_SECRET = \"apsdfAJOJ(#@&($0809283JLJOOJ\";\r\n\r\nlet kGameVer    = \"5d4ac9f2-5658-4dca-9bb0-5f287e0d614b\";\r\nlet kUniqueID   = \"8b40c787-95cf-4976-b29e-df8d25ce5e5d\";\r\n\r\nlet S_JSB_FUNC_ID = 1000;\r\nlet S_JSB_FUNC = {};\r\nlet S_POOLS = {};\r\n\r\nexport default class DYUtils{\r\n    public static pushInvoke(cb: Function) : number{\r\n        let funcId = (++S_JSB_FUNC_ID);\r\n\r\n        var strFuncId = DYUtils.format(\"{0}\", funcId);\r\n        S_JSB_FUNC[strFuncId] = cb;\r\n\r\n        return funcId;\r\n    }\r\n\r\n    static popInvoke(funcId : number, bReserve: boolean = false) : Function{\r\n        var strFuncId = DYUtils.format(\"{0}\", funcId);\r\n        var cb = S_JSB_FUNC[strFuncId];\r\n        if (!bReserve){\r\n            delete S_JSB_FUNC[strFuncId];\r\n        }\r\n\r\n        return cb;\r\n    }\r\n    /**\r\n     * @returns a number in [from, to]\r\n     */\r\n    static random(from: number, to: number){\r\n        var abs = Math.abs(to - from) + 1;\r\n        var rand = Math.floor(Math.random() * abs);\r\n        var min = Math.min(from, to);\r\n        return (min + rand);\r\n    }\r\n\r\n    /**\r\n     * @returns a clone of an object\r\n     * ATTENTION: the deep copy is relative, it doesn't work for inner object, just fine for properties\r\n     */\r\n    static clone(a) {\r\n        if(!a){\r\n            return a;\r\n        }\r\n\r\n        var at = typeof(a);\r\n        if (at == \"object\" ){\r\n            // 忽略所有组件类型的 \"deep copy\"\r\n            if(a.__classname__){\r\n                return a;\r\n            }\r\n\r\n            var ret = undefined;\r\n            if(a instanceof Array){\r\n                ret = [];\r\n                for (var i = 0; i < a.length; i++) {\r\n                    let t = this.clone(a[i]);\r\n                    if(t || t == 0 || t == \"\" || t == false){\r\n                        ret[i] = t;\r\n                    }\r\n                }\r\n            }\r\n            else{\r\n                ret = {}\r\n                for(var key in a) {\r\n                    if (a.hasOwnProperty(key)){\r\n                        let t = this.clone(a[key]);\r\n                        if(t || t == 0 || t == \"\" || t == false){\r\n                            ret[key] = t;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return ret;\r\n        }\r\n        return a;\r\n    }\r\n\r\n    /**\r\n     * @returns a guid string\r\n     */\r\n    // static guid() {\r\n    //     return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n    //         var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\r\n    //         return v.toString(16);\r\n    //     });\r\n    // }\r\n    static guid() : string{\r\n        function S4() {\r\n            return (((1+Math.random())*0x10000)|0).toString(16).substring(1);\r\n        }\r\n        return (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\r\n    }\r\n    \r\n    /**\r\n     * @returns current tick from system\r\n     */\r\n    static currentTick() : number{\r\n        return Date.now();\r\n    }\r\n\r\n    /**\r\n     * @returns current second from system\r\n     */\r\n    static currentSecond() : number{\r\n        return Math.floor(this.currentTick()/1000);\r\n    }\r\n\r\n    static delegate(client: any, clientMethod: Function) : Function { \r\n        return function() { \r\n            return clientMethod.apply(client, arguments); \r\n        } \r\n    }\r\n\r\n    public static platform() : string{\r\n        if (cc.sys.isNative){\r\n            switch(cc.sys.platform){\r\n            case cc.sys.WIN32 : \r\n                return \"win32\"\r\n            case cc.sys.LINUX : \r\n                return \"linux\"\r\n            case cc.sys.MACOS : \r\n                return \"mac\"\r\n            case cc.sys.ANDROID : \r\n                return \"android\"\r\n            case cc.sys.IPHONE : \r\n            case cc.sys.IPAD : \r\n                return \"ios\"\r\n            default: \r\n                return \"unknown\"\r\n            }\r\n        }\r\n\r\n        return \"web\";\r\n    }\r\n\r\n    static md5(plain: string) : string{\r\n        return DYCrypto.md5.hex_md5(plain);\r\n    }\r\n\r\n    static gameId () : string{\r\n        return Config.GAME_ID;\r\n    }\r\n    static gameVer () : string{\r\n        var ver = DYData.getStat(kGameVer, Config.GAME_VER);\r\n        if(DYUtils.compareVer(ver, Config.GAME_VER) < 0){\r\n            ver = Config.GAME_VER;\r\n            DYData.setStat(kGameVer, ver);\r\n        }\r\n\r\n        return ver; \r\n    }\r\n\r\n    static gameOrigVer () : string{\r\n        return Config.GAME_VER;\r\n    }\r\n\r\n    static setGameVer(ver: string) : void{\r\n        DYData.setStat(kGameVer, ver);\r\n    }\r\n\r\n    static channel () : string{\r\n        return \"\";\r\n    }\r\n    static gameMode () : string{\r\n        return Config.GAME_MODE;\r\n    }\r\n\r\n\r\n   \r\n    // for DDLOG\r\n    static DDLOG(obj: any, ...sourceObj: any[]){\r\n        var log = DYUtils.format.apply(this, arguments);\r\n        //console.log(log);\r\n    };\r\n    static DDINFO(obj: any, ...sourceObj: any[]){\r\n        var log = DYUtils.format.apply(this, arguments);\r\n        console.warn(log);\r\n    };\r\n    static DDERROR(obj: any, ...sourceObj: any[]){\r\n        var log = DYUtils.format.apply(this, arguments);\r\n        console.error(log);\r\n    };\r\n\r\n    // for String\r\n    static format(msg: string|any, ...subst: any[]): string{\r\n        var argLen = arguments.length;\r\n        if (0 === argLen) {\r\n            return \"\";\r\n        }\r\n        var msg = arguments[0];\r\n        if (1 === argLen) {\r\n            return \"\" + msg;\r\n        }\r\n        let args = arguments[1];\r\n        if (arguments.length == 2 && typeof (args) == \"object\") {\r\n            for (let key in args) {\r\n                if(args[key]!=undefined){\r\n                    let reg = new RegExp(\"({\" + key + \"})\", \"g\");\r\n                    msg = msg.replace(reg, args[key]);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (let i = 1; i < arguments.length; i++) {\r\n                if (arguments[i] != undefined) {\r\n                    //let reg = new RegExp(\"({[\" + i + \"]})\", \"g\");//这个在索引大于9时会有问题，谢谢何以笙箫的指出\r\n　　　　　　　　　　　　let reg= new RegExp(\"({)\" + (i-1) + \"(})\", \"g\");\r\n                    msg = msg.replace(reg, arguments[i]);\r\n                }\r\n            }\r\n        }\r\n\r\n        return msg;\r\n    }\r\n\r\n    /** \r\n    example:\r\n    let str = DYUtils.fill(\"%02d\", 5)\r\n    str = \"05\";\r\n    */\r\n    static fill(msg: string|any, ...subst: any[]) : string{\r\n        var as=[].slice.call(arguments);\r\n        var fmt = as.shift();\r\n        var i=0;\r\n        return fmt.replace(/%(\\w)?(\\d)?([dfsx])/ig, function(_,a,b,c){\r\n            var s=b?new Array(b-0+1).join(a||\"\"):\"\";\r\n            if(c==\"d\") s+=parseInt(as[i++]);\r\n            return b?s.slice(b*-1):s;\r\n        });\r\n    }\r\n\r\n    static scheduleOnce(listener : Function, interval : number){\r\n        cc.director.getScheduler().schedule(listener, cc.director.getScene(), 0, 0, interval, false);\r\n    }\r\n\r\n    static countProperty(obj : any) : number{\r\n        if(!obj){\r\n            return 0;\r\n        }\r\n        \r\n        return Object.getOwnPropertyNames(obj).length;\r\n    }\r\n\r\n    static compareVer(ver1: string, ver2: string) : number{\r\n        let diff = 0;\r\n        let curV = ver1;\r\n        let reqV = ver2;\r\n\r\n        if(curV === reqV){\r\n            return 0;\r\n        }\r\n\r\n        if(!curV && !reqV){\r\n            return 0;\r\n        }\r\n\r\n        if (curV && !reqV){\r\n            return 1;\r\n        }\r\n\r\n        if (!curV && reqV){\r\n            return -1;\r\n        }\r\n\r\n        //将两个版本号拆成数字  \r\n        var arr1 = curV.split(\".\"), arr2 = reqV.split(\".\");  \r\n        var minLength=Math.min(arr1.length,arr2.length), position=0;  \r\n        //依次比较版本号每一位大小，当对比得出结果后跳出循环（后文有简单介绍）  \r\n        while(position<minLength && ((diff=parseInt(arr1[position])-parseInt(arr2[position]))==0)){  \r\n            position++;  \r\n        }  \r\n        diff=(diff!=0)?diff:(arr1.length-arr2.length); \r\n\r\n        return diff;\r\n    }\r\n\r\n    static cachePath() : string{\r\n        if (!cc.sys.isNative) {\r\n            return S_JSB_CACHE_PATH;\r\n        }\r\n        var path = ((jsb.fileUtils ? jsb.fileUtils.getWritablePath() : \"/\") + S_JSB_CACHE_PATH);\r\n        return path;\r\n    }\r\n\r\n    static hotfixPath() : string{\r\n        if (!cc.sys.isNative) {\r\n            return S_JSB_HOTFIX_PATH;\r\n        }\r\n        var path = ((jsb.fileUtils ? jsb.fileUtils.getWritablePath() : \"/\") + S_JSB_HOTFIX_PATH);\r\n        return path;\r\n    }\r\n\r\n    static verifyAsset(filePath: string, asset: any) : boolean{\r\n        var fileStr = jsb.fileUtils.getDataFromFile(filePath);\r\n        if (!fileStr){\r\n            return true;\r\n        }\r\n\r\n        var md5 = DYCrypto.md5.hex_md5_for_uint8arr(fileStr);\r\n        if (md5.toUpperCase() === asset.md5.toUpperCase()){\r\n            return true;\r\n        }\r\n        \r\n        return false;\r\n    }\r\n\r\n    static createPool(key: string) : cc.NodePool{\r\n        if(!S_POOLS[key]){\r\n            S_POOLS[key] = new cc.NodePool();\r\n        }\r\n        return S_POOLS[key];\r\n    }\r\n\r\n    static destroyPool(key: string) : void{\r\n        if (S_POOLS[key]){\r\n            S_POOLS[key].clear();\r\n            delete S_POOLS[key];\r\n        }\r\n    }  \r\n\r\n    static clearAllPool(){\r\n        for(var key in S_POOLS){\r\n            S_POOLS[key].clear();\r\n            delete S_POOLS[key];\r\n        }\r\n    }\r\n\r\n    static stringForSec(sec: number) : string{\r\n        var tHour   = DYUtils.fill(\"%02d\", Math.floor(sec/3600));\r\n        var tMin    = DYUtils.fill(\"%02d\", Math.floor((sec%3600)/60));\r\n        var tSec    = DYUtils.fill(\"%02d\", Math.floor(sec%60));\r\n\r\n        return DYUtils.format(\"{0}:{1}:{2}\", tHour, tMin, tSec);\r\n    }\r\n\r\n    static stringForTick(tick: number) : string{\r\n        var sec = Math.floor(tick / 1000);\r\n        // var tHour   = String.padChar(\"%02d\", Math.floor(sec/3600));\r\n        var tMin    = DYUtils.fill(\"%02d\", Math.floor(sec/60));\r\n        var tSec    = DYUtils.fill(\"%02d\", Math.floor(sec%60));\r\n        var tTick   = DYUtils.fill(\"%03d\", (tick%1000));\r\n\r\n        return DYUtils.format(\"{0}:{1}:{2}\", tMin, tSec, tTick);\r\n    }\r\n\r\n    static gc() : void{\r\n        if (cc.sys.isNative){\r\n            cc.textureCache.removeAllTextures();    \r\n        }\r\n        cc.sys.garbageCollect();\r\n    }\r\n\r\n    static getParamExt(pk: string, pp: string){\r\n        pp = pp || \"\";\r\n        \r\n        try{\r\n            if (\"android\" == DYUtils.platform()){\r\n                return jsb.reflection.callStaticMethod(\"com/dygame/common/DYCommon\", \"getParamExt\", \"(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;\", pk.toString(), pp.toString());\r\n            }\r\n            else if(\"ios\" == DYUtils.platform()){\r\n                return jsb.reflection.callStaticMethod(\"DYCommon_iOS\", \"getParamExt:withParam:\", pk.toString(), pp.toString());\r\n            }\r\n            else{\r\n                if(pk == \"K_IS_GUEST\"){\r\n                    return \"TRUE\";\r\n                }\r\n            }\r\n        }\r\n        catch(err){}\r\n        finally{}\r\n\r\n        return \"\";\r\n    }\r\n\r\n    static uniqueID() : string{\r\n        var tid = DYData.getStat(kUniqueID, \"\");\r\n        if(!tid){\r\n            tid = this.guid();\r\n            DYData.getStat(kUniqueID, tid);\r\n        }\r\n        \r\n        return tid;\r\n    }\r\n\r\n    static genSign(plain) : string{\r\n        var strPlain = S_APP_SECRET + DYCrypto.base64.encode(plain);\r\n        return DYCrypto.md5.hex_md5(strPlain);\r\n    }\r\n\r\n    static test(){\r\n        DYNotify.regObserver(\"TEST\", function(target:cc.Node, tag:string, param:any){\r\n            DYUtils.DDLOG(DYUtils.format(\"onNotify: {0} with {1}\", tag, param)); \r\n        }, \"K_TEST\", this);\r\n        \r\n        DYNotify.post(\"K_TEST\", {t:\"some param\"});\r\n\r\n        DYNotify.removeAllObservers(\"TEST\");\r\n\r\n        DYUtils.DDLOG(DYUtils.currentTick());\r\n        DYUtils.scheduleOnce(function(){\r\n            DYUtils.DDLOG(DYUtils.currentTick());\r\n            DYUtils.DDLOG(DYUtils.format(\"scheduleOnce ... \")); \r\n        }, 0.5);\r\n    }\r\n}\r\n"]}