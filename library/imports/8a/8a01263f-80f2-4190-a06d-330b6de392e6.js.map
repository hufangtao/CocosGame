{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\component\\levelChoose/assets\\scripts\\app\\component\\levelChoose\\PanelLevelChoose.ts"],"names":[],"mappings":";;;;;AAAA,gDAA4C;AAE5C,gEAA2D;AAErD,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAmB;AAG5C;IAA8C,oCAAY;IAD1D;QAAA,qEAuGC;QApGG,aAAO,GAAY,IAAI,CAAC;QAGxB,iBAAW,GAAc,IAAI,CAAC;QAG9B,iBAAW,GAAY,IAAI,CAAC;QAG5B,kBAAY,GAAmB,IAAI,CAAC;QAEpC,kBAAY,GAAmB,IAAI,CAAC;QAEpC,iBAAW,GAAG,IAAI,CAAA;;QAsFlB,iBAAiB;IACrB,CAAC;IArFG,iCAAM,GAAN;IAEA,CAAC;IAED,gCAAK,GAAL;QACI,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;IACpE,CAAC;IAED,qCAAU,GAAV;QACI,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YACvD,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE;gBAC9B,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAA;gBAChE,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,WAAW,GAAG,CAAC,CAAC;gBACpD,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBACtE,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;aACzE;SACJ;QAED,6CAA6C;QAC7C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,cAAI,CAAC,UAAU,CAAC,KAAK,EAAE,EAAE,CAAC,EAAE;YAC5C,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE;gBAC9B,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;gBAC7G,IAAG,CAAC,cAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,CAAC,EAAC;oBAChC,SAAS;iBACZ;gBACD,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,cAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;aAClG;SACJ;QAED,IAAI,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAC5D,IAAG,IAAI,EAAC;YACJ,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,WAAW,EAAE,CAAC;SAC/C;aAAI;YACD,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAI,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;YAC5D,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;SACnD;QAED,KAAK,IAAI,CAAC,GAAG,cAAI,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YAC/E,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE;gBAC9B,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;gBAC7E,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;aAChH;SACJ;QACD,IAAI,CAAC,OAAO,EAAE,CAAC;IACnB,CAAC;IAED,kCAAO,GAAP;QACI,IAAI,KAAK,GAAG,cAAI,CAAC,UAAU,CAAC,KAAK,CAAC;QAClC,IAAG,cAAI,CAAC,UAAU,CAAC,KAAK,IAAI,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,EAAC;YACzD,KAAK,GAAG,cAAI,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC;SACrC;QACD,IAAI,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACjD,IAAI,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,qBAAqB,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,CAAC;QAC3E,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC,CAAC;QAEzE,IAAM,SAAS,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACnD,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;QACvD,SAAS,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC5B,IAAM,YAAY,GAAiB,SAAS,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;QAC1E,YAAY,CAAC,OAAO,GAAG,cAAI,CAAC,UAAU,CAAC,SAAS,CAAC;QACjD,YAAY,CAAC,OAAO,CAAC,GAAG,EAAC,GAAG,CAAC,CAAC;IAClC,CAAC;IAED,sCAAW,GAAX,UAAY,KAA0B;QAClC,qBAAW,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC;QAClC,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;QAC1B,IAAI,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;QACrC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;IACpD,CAAC;IAEM,sCAAW,GAAlB,UAAmB,KAA0B;QACzC,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;QAC1B,QAAQ,MAAM,CAAC,IAAI,EAAE;YACjB,KAAK,cAAc;gBACf,qBAAW,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC;gBAClC,MAAM;YACV,KAAK,aAAa;gBACd,qBAAW,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC;gBAClC,MAAM;SACb;IACL,CAAC;IAhGD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;qDACM;IAGxB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;yDACU;IAG9B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;yDACU;IAG5B;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;0DACW;IAEpC;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;0DACW;IAbnB,gBAAgB;QADpC,OAAO;OACa,gBAAgB,CAsGpC;IAAD,uBAAC;CAtGD,AAsGC,CAtG6C,EAAE,CAAC,SAAS,GAsGzD;kBAtGoB,gBAAgB","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\component\\levelChoose","sourcesContent":["import { Home } from \"../../module/Modules\";\r\nimport PlaymateHead from \"../prefab/PlaymateHead\";\r\nimport GamePersist from \"../../common/persist/GamePersist\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PanelLevelChoose extends cc.Component {\r\n    @property(cc.Node)\r\n    nodHead: cc.Node = null;\r\n\r\n    @property(cc.Prefab)\r\n    pHeadPerfab: cc.Prefab = null;\r\n\r\n    @property(cc.Node)\r\n    nodBtnLevel: cc.Node = null;\r\n\r\n    @property(cc.SpriteFrame)\r\n    spfBtnNormal: cc.SpriteFrame = null;\r\n    @property(cc.SpriteFrame)\r\n    spfBtnLocked: cc.SpriteFrame = null;\r\n\r\n    LevelChoose = null\r\n\r\n    onLoad() {\r\n        \r\n    }\r\n\r\n    start() {\r\n        this.setBtnStat();\r\n        this.LevelChoose = this.node.parent.getComponent('LevelChoose');\r\n    }\r\n\r\n    setBtnStat() {\r\n        for (let i = 0; i < this.nodBtnLevel.children.length; ++i) {\r\n            if (this.nodBtnLevel.children[i]) {\r\n                this.nodBtnLevel.children[i].on('click', this.levelChoose, this)\r\n                this.nodBtnLevel.children[i].name = 'BtnLevel_' + i;\r\n                this.nodBtnLevel.children[i].getComponent('BtnLevel').setLevel(i + 1);\r\n                this.nodBtnLevel.children[i].getChildByName('labLevel').active = true;\r\n            }\r\n        }\r\n\r\n        // console.log(Home.DataPlayer.PveStatArray);\r\n        for (let i = 0; i < Home.DataPlayer.Level; ++i) {\r\n            if (this.nodBtnLevel.children[i]) {\r\n                this.nodBtnLevel.children[i].getChildByName('sprBg').getComponent(cc.Sprite).spriteFrame = this.spfBtnNormal;\r\n                if(!Home.DataPlayer.PveStatArray[i]){\r\n                    continue;\r\n                }\r\n                this.nodBtnLevel.children[i].getComponent('BtnLevel').setStar(Home.DataPlayer.PveStatArray[i]);\r\n            }\r\n        }\r\n\r\n        let node = this.nodBtnLevel.children[Home.DataPlayer.Level];\r\n        if(node){\r\n            node.getComponent('BtnLevel').setCurLevel();\r\n        }else{\r\n            node = this.nodBtnLevel.children[Home.DataPlayer.Level - 1];\r\n            node.getComponent('BtnLevel').setCurLevel(true);\r\n        }\r\n\r\n        for (let i = Home.DataPlayer.Level + 1; i < this.nodBtnLevel.children.length; ++i) {\r\n            if (this.nodBtnLevel.children[i]) {\r\n                this.nodBtnLevel.children[i].getComponent('BtnLevel').setInteractable(false);\r\n                this.nodBtnLevel.children[i].getChildByName('sprBg').getComponent(cc.Sprite).spriteFrame = this.spfBtnLocked;\r\n            }\r\n        }\r\n        this.setHead();\r\n    }\r\n\r\n    setHead(){\r\n        let index = Home.DataPlayer.Level;\r\n        if(Home.DataPlayer.Level == this.nodBtnLevel.children.length){\r\n            index = Home.DataPlayer.Level - 1;\r\n        }\r\n        var nodButton = this.nodBtnLevel.children[index];\r\n        let ps_w = this.nodBtnLevel.convertToWorldSpaceAR(nodButton.getPosition());\r\n        this.nodHead.setPosition(this.nodHead.parent.convertToNodeSpaceAR(ps_w));\r\n\r\n        const pHeadNode = cc.instantiate(this.pHeadPerfab);\r\n        pHeadNode.parent = this.nodHead.getChildByName('head');\r\n        pHeadNode.setPosition(0, 0);\r\n        const playmateHead: PlaymateHead = pHeadNode.getComponent(\"PlaymateHead\");\r\n        playmateHead.HeadUrl = Home.DataPlayer.MyHeadUrl;\r\n        playmateHead.setSize(110,110);\r\n    }\r\n\r\n    levelChoose(event: cc.Event.EventTouch) {\r\n        GamePersist.INSTANCE.btnAudio_1();\r\n        var target = event.target;\r\n        let level = target.name.substring(9);\r\n        this.LevelChoose.levelChoose(Number(level) + 1);\r\n    }\r\n\r\n    public btnListener(event: cc.Event.EventTouch) {\r\n        var target = event.target;\r\n        switch (target.name) {\r\n            case 'btnPanelBack':\r\n                GamePersist.INSTANCE.btnAudio_2();\r\n                break;\r\n            case 'btnStartPve':\r\n                GamePersist.INSTANCE.btnAudio_1();\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    // update (dt) {}\r\n}\r\n"]}