{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\component\\page\\preload/assets\\scripts\\app\\component\\page\\preload\\Preload.ts"],"names":[],"mappings":";;;;;AAAA,gCAAgC;AAChC,gEAAkE;AAClE,uCAAkC;AAClC,mEAA8D;AAExD,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAmB;AAG5C;IAAuC,6BAAM;IAD7C;QAAA,qEA2DC;QAvDQ,aAAO,GAAa,IAAI,CAAC,CAAC,aAAa;QAGvC,kBAAY,GAAa,IAAI,CAAC;QAE9B,iBAAW,GAAmB,IAAI,CAAC;;IAkD5C,CAAC;IAhDQ,0BAAM,GAAb;QACE,iBAAM,MAAM,WAAE,CAAC;QACf,MAAM,CAAC,SAAS,CAAC,CAAC,YAAY,EAAE,CAAC;IACnC,CAAC;IAEM,0BAAM,GAAb;QACE,OAAO,WAAW,CAAC;IACrB,CAAC;IAEY,yBAAK,GAAlB;;;;gBACE,iBAAM,KAAK,WAAE,CAAC;gBACd,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC;gBAE1B,IAAI,GAAG,IAAI,CAAC;gBAClB,IAAI,CAAC,WAAW,EAAE,CAAC;gBAEnB,uBAAa,CAAC,QAAQ,CAAC,gBAAgB,GAAG,KAAK,CAAC;;;;KACjD;IAGa,8BAAU,GAAxB,UAAyB,GAAG;;;gBAC1B,sBAAO,IAAI,OAAO,CAAM,UAAC,OAAO,EAAE,MAAM;wBACtC,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,EAAE,UAAC,GAAG,EAAE,GAAG;4BAC9B,IAAI,GAAG,EAAE;gCACP,OAAO,CAAC,IAAI,CAAC,CAAA;6BACd;iCAAM;gCACL,OAAO,CAAC,GAAG,CAAC,CAAA;6BACb;wBACH,CAAC,CAAC,CAAA;oBACJ,CAAC,CAAC,EAAA;;;KACH;IAEa,+BAAW,GAAzB;;;;;;wBACQ,IAAI,GAAG,IAAI,CAAC;wBAClB,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,eAAe,CAAC;wBAEtC,IAAI,CAAC,WAAW,CAAC,QAAQ,GAAG,GAAG,CAAC;wBAChC,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,KAAK,CAAC;wBACjC,qBAAM,WAAW,CAAC,aAAa,EAAE,EAAA;;wBAAjC,SAAiC,CAAC;wBAClC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,cAAc,CAAC;wBACrC,IAAI,CAAC,WAAW,CAAC,QAAQ,GAAG,CAAC,CAAC;wBAC9B,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,MAAM,CAAC;wBAClC,IAAI,CAAC,UAAU,EAAE,CAAC;;;;;KACnB;IAEO,8BAAU,GAAlB;QACE,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;IACjC,CAAC;IAtDD;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;8CACa;IAGhC;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;mDACkB;IAErC;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;kDACiB;IARvB,SAAS;QAD7B,OAAO;OACa,SAAS,CA0D7B;IAAD,gBAAC;CA1DD,AA0DC,CA1DsC,gBAAM,GA0D5C;kBA1DoB,SAAS","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\app\\component\\page\\preload","sourcesContent":["//console.log('preload-loading')\r\nimport * as ConfigEntry from \"../../../common/config/ConfigEntry\";\r\nimport BaseUI from \"../../BaseUI\";\r\nimport NetController from \"../../../common/net/NetController\";\r\nimport { Play } from \"../../../module/Modules\";\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PreloadUI extends BaseUI {\r\n\r\n  @property(cc.Label)\r\n  public loadTip: cc.Label = null; // 加载资源时的提示信息\r\n\r\n  @property(cc.Label)\r\n  public loadProgress: cc.Label = null;\r\n  @property(cc.ProgressBar)\r\n  public progressBar: cc.ProgressBar = null;\r\n\r\n  public onLoad() {\r\n    super.onLoad();\r\n    window['Partner'].initGameClub();\r\n  }\r\n\r\n  public uiName(): string {\r\n    return \"PreloadUI\";\r\n  }\r\n\r\n  public async start() {\r\n    super.start();\r\n    this.loadProgress.string = '0%';\r\n\r\n    const self = this;\r\n    self.loadConfigs();\r\n\r\n    NetController.INSTANCE.isLoadingPreload = false;\r\n  }\r\n\r\n\r\n  private async loadConfig(url) {\r\n    return new Promise<any>((resolve, reject) => {\r\n      cc.loader.loadRes(url, (err, res) => {\r\n        if (err) {\r\n          resolve(null)\r\n        } else {\r\n          resolve(res)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  private async loadConfigs() {\r\n    const self = this;\r\n    this.loadTip.string = \"请稍后，正在加载配置...\";\r\n\r\n    self.progressBar.progress = 0.7;\r\n    self.loadProgress.string = '70%';\r\n    await ConfigEntry.loadAllConfig();\r\n    self.loadTip.string = \"加载完成，即将进入游戏！\";\r\n    self.progressBar.progress = 1;\r\n    self.loadProgress.string = '100%';\r\n    self.gotToLogin();\r\n  }\r\n\r\n  private gotToLogin() {\r\n    cc.director.loadScene(\"login\");\r\n  }\r\n}\r\n"]}