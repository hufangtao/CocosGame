{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\dyGame/assets\\scripts\\dyGame\\DYNotify.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\dyGame","sourcesContent":["\r\nexport class DYNotify {\r\n    public static regObserver(eventName: string, handler: Function, target: any) {\r\n        DYNotifyHelper.theInstance.regObserver(eventName, handler, target);\r\n    }\r\n\r\n    public static unregObserver(eventName: string, handler: Function, target: any) {\r\n        DYNotifyHelper.theInstance.unregObserver(eventName, handler, target);\r\n    }\r\n\r\n    public static removeAllObservers(target: any) {\r\n        DYNotifyHelper.theInstance.removeAllObservers(target);\r\n    }\r\n\r\n    public static post(eventName: string, data?: any) {\r\n        DYNotifyHelper.theInstance.onNotify(eventName, data);\r\n    }\r\n}\r\n\r\nclass DYNotifyHelper {\r\n    public static get theInstance(): DYNotifyHelper {\r\n        if (!DYNotifyHelper.mInstance) {\r\n            DYNotifyHelper.mInstance = new DYNotifyHelper();\r\n        }\r\n        return DYNotifyHelper.mInstance;\r\n    }\r\n    private static mInstance;\r\n    private mHandlers = {};\r\n\r\n    public regObserver(eventName: string, handler: Function, target: any) {\r\n        var tHandlerList = this.mHandlers[eventName];\r\n        if (!tHandlerList) {\r\n            tHandlerList = [];\r\n            this.mHandlers[eventName] = tHandlerList;\r\n        }\r\n\r\n        for (var i = 0; i < tHandlerList.length; ++i) {\r\n            if (!tHandlerList[i]) {\r\n                tHandlerList.handler = handler;\r\n                tHandlerList.target = target;\r\n                return i;\r\n            }\r\n        }\r\n\r\n        tHandlerList.push({ handler: handler, target: target });\r\n        return tHandlerList.length;\r\n    };\r\n\r\n    public unregObserver(eventName: string, handler: Function, target: any) {\r\n        console.log(this.mHandlers);\r\n        var tHandlerList = this.mHandlers[eventName];\r\n        if (!tHandlerList) {\r\n            return;\r\n        }\r\n\r\n        for (var i = 0; i < tHandlerList.length; ++i) {\r\n            if (tHandlerList[i].handler === handler && tHandlerList[i].target === target) {\r\n                tHandlerList.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    public removeAllObservers(target: any) {\r\n        for (var eventName in this.mHandlers) {\r\n            var tHandlerList = this.mHandlers[eventName];\r\n            for (var i = 0; i < tHandlerList.length; ++i) {\r\n                if (tHandlerList[i].target === target) {\r\n                    tHandlerList.splice(i, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public onNotify(eventName: string, data: any) {\r\n        var tHandlerList = this.mHandlers[eventName];\r\n        if (!tHandlerList) {\r\n            return;\r\n        }\r\n\r\n        for (var i = 0; i < tHandlerList.length; ++i) {\r\n            var handler = tHandlerList[i].handler;\r\n            var target = tHandlerList[i].target;\r\n            if (handler) {\r\n                try {\r\n                    if (target) {\r\n                        handler.call(target, target, eventName, data);\r\n                    } else {\r\n                        handler.call(data, target, eventName);\r\n                    }\r\n                } catch (e) {\r\n                    cc.log(e)\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n"]}